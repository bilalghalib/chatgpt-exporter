{
  "id": "3866ddec-6823-4435-8b37-a809825c0598",
  "source": "chatgpt",
  "title": "Fix Bugs Prayer Service",
  "created_at": "2024-06-05T21:30:09.725332",
  "updated_at": "2024-06-05T22:17:14.821562",
  "summary": null,
  "message_count": 13,
  "messages": [
    {
      "id": "aaa2e582-0c19-4b66-9c1a-d86ca8946474",
      "role": "user",
      "content": "Can you help me fix these bugs?\n\nRestarted application in 1,016ms.\n[ERROR:flutter/runtime/dart_vm_initializer.cc(41)] Unhandled Exception: type '_Map<dynamic, dynamic>' is not a subtype of type 'Map<String, dynamic>'\n#0      PrayerService.loadData (package:amana/services/prayer_service.dart:12:5)\n<asynchronous suspension>\n#1      PrayerProvider.loadData (package:amana/providers/prayer_provider.dart:36:5)\n<asynchronous suspension>\n\n[ERROR:flutter/runtime/dart_vm_initializer.cc(41)] Unhandled Exception: type '_Map<dynamic, dynamic>' is not a subtype of type 'Map<String, dynamic>'\n#0      PrayerService.loadData (package:amana/services/prayer_service.dart:12:5)\n<asynchronous suspension>\n#1      PrayerProvider.loadData (package:amana/providers/prayer_provider.dart:36:5)\n<asynchronous suspension>\n\n\n\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./prayer_record.dart\n#############################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int fajrMissed;\n\n  @HiveField(3)\n  int dhuhrMissed;\n\n  @HiveField(4)\n  int asrMissed;\n\n  @HiveField(5)\n  int maghribMissed;\n\n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./main.dart\n####################\n\nimport 'package:flutter/material.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_record.dart';\nimport 'models/prayer_data.dart';\nimport 'myApp.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  await Hive.initFlutter(); // Ensuring Hive is initialized correctly\n\n  // Delete the existing Hive box\n  await Hive.deleteBoxFromDisk('prayerBox');\n\n  // Registering the Hive adapters\n  Hive.registerAdapter(PrayerRecordAdapter());\n  Hive.registerAdapter(PrayerDataAdapter());\n\n  final hiveService = HiveService();\n  await hiveService.init();\n\n  runApp(MyApp(\n    hiveService: hiveService,\n  ));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./prayer_record.g.dart\n###############################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  bool isDataLoaded = false;\n  Map<String, dynamic> _prayerData = {};\n  int startYear = 2020;\n  int endYear = 2023;\n  List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  List<String> monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService);\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData;\n    isDataLoaded = true;\n    notifyListeners();\n  }\n\n  Future<void> initializeMonthlyPrayerStats(int year, int month) async {\n    await _prayerService.initializeMonthlyPrayerStats(year, month);\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerStats(\n      int year, int month, String prayer, bool done) async {\n    await _prayerService.updatePrayerStats(year, month, prayer, done);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    return _prayerData.containsKey(key) ? _prayerData[key]['done'] : 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    return _prayerData.containsKey(key) ? _prayerData[key]['not_done'] : 0;\n  }\n\n  double getPrayerCompletionPercentageForMonth(\n      int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    if (_prayerData.containsKey(key)) {\n      final done = _prayerData[key]['done'];\n      final total = done + _prayerData[key]['not_done'];\n      return (done / total) * 100;\n    }\n    return 0.0;\n  }\n\n  Future<void> resetApplication() async {\n    await _prayerService.clearData();\n    _prayerData = {};\n    notifyListeners();\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    for (int year = startYear; year <= endYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final keyPrefix = '${year}_${month}_';\n        for (var prayer in prayers) {\n          final key = keyPrefix + prayer;\n          final totalDays = DateTime(year, month + 1, 0).day;\n          final missedDays =\n              (totalDays * (percentageMissedByYear[year]! / 100)).round();\n          _prayerData[key] = {\n            'done': totalDays - missedDays,\n            'not_done': missedDays,\n          };\n        }\n      }\n    }\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    percentageMissedByYear.forEach((year, percentage) {\n      for (int month = 1; month <= 12; month++) {\n        for (var prayer in prayers) {\n          final key = '${year}_${month}_$prayer';\n          if (_prayerData.containsKey(key)) {\n            final totalDays = DateTime(year, month + 1, 0).day;\n            final missedDays = (totalDays * (percentage / 100)).round();\n            _prayerData[key]['done'] = totalDays - missedDays;\n            _prayerData[key]['not_done'] = missedDays;\n          }\n        }\n      }\n    });\n    notifyListeners();\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerData;\n  }\n\n  void updatePrayerData(\n      String prayer, int year, int done, int notDone, int percentage) {\n    final key = '${year}_${DateTime.now().month}_$prayer';\n    _prayerData[key] = {\n      'done': done,\n      'not_done': notDone,\n      'percentage': percentage,\n    };\n    notifyListeners();\n  }\n\n  void saveBirthYear(int birthYear) {\n    _prayerData['birthYear'] = birthYear;\n    notifyListeners();\n  }\n}\n\n\n\n# File: ./models/prayer_record.dart\n####################################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year = 2023;\n\n  @HiveField(1)\n  int month = 1;\n\n  @HiveField(2)\n  int fajrMissed = 0;\n\n  @HiveField(3)\n  int dhuhrMissed = 0;\n\n  @HiveField(4)\n  int asrMissed = 0;\n\n  @HiveField(5)\n  int maghribMissed = 0;\n\n  @HiveField(6)\n  int ishaMissed = 0;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./models/prayer_data.dart\n##################################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_data.g.dart';\n\n@HiveType(typeId: 1)\nclass PrayerData {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  Map<String, int> prayersCompleted; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(3)\n  Map<String, int> prayersMissed; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(4)\n  int totalPrayed;\n\n  @HiveField(5)\n  int totalMissed;\n\n  @HiveField(6)\n  double percentagePrayed;\n\n  @HiveField(7)\n  double percentageMissed;\n\n  PrayerData({\n    required this.year,\n    required this.month,\n    required this.prayersCompleted,\n    required this.prayersMissed,\n    required this.totalPrayed,\n    required this.totalMissed,\n    required this.percentagePrayed,\n    required this.percentageMissed,\n  });\n\n  factory PrayerData.fromMap(Map<String, dynamic> map) {\n    return PrayerData(\n      year: map['year'],\n      month: map['month'],\n      prayersCompleted: Map<String, int>.from(map['prayersCompleted']),\n      prayersMissed: Map<String, int>.from(map['prayersMissed']),\n      totalPrayed: map['totalPrayed'],\n      totalMissed: map['totalMissed'],\n      percentagePrayed: map['percentagePrayed'],\n      percentageMissed: map['percentageMissed'],\n    );\n  }\n\n  Map<String, dynamic> toMap() {\n    return {\n      'year': year,\n      'month': month,\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'totalPrayed': totalPrayed,\n      'totalMissed': totalMissed,\n      'percentagePrayed': percentagePrayed,\n      'percentageMissed': percentageMissed,\n    };\n  }\n}\n\n\n\n# File: ./models/prayer_data.g.dart\n####################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_data.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerDataAdapter extends TypeAdapter<PrayerData> {\n  @override\n  final int typeId = 1;\n\n  @override\n  PrayerData read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerData(\n      year: fields[0] as int,\n      month: fields[1] as int,\n      prayersCompleted: (fields[2] as Map).cast<String, int>(),\n      prayersMissed: (fields[3] as Map).cast<String, int>(),\n      totalPrayed: fields[4] as int,\n      totalMissed: fields[5] as int,\n      percentagePrayed: fields[6] as double,\n      percentageMissed: fields[7] as double,\n    );\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerData obj) {\n    writer\n      ..writeByte(8)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.prayersCompleted)\n      ..writeByte(3)\n      ..write(obj.prayersMissed)\n      ..writeByte(4)\n      ..write(obj.totalPrayed)\n      ..writeByte(5)\n      ..write(obj.totalMissed)\n      ..writeByte(6)\n      ..write(obj.percentagePrayed)\n      ..writeByte(7)\n      ..write(obj.percentageMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerDataAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./models/prayer_record.g.dart\n######################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int completedPrayers;\n  final int missedPrayers;\n  final double completionPercentage;\n  final VoidCallback onPrayed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.completedPrayers,\n    required this.missedPrayers,\n    required this.completionPercentage,\n    required this.onPrayed,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: completionPercentage / 100,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text('${completionPercentage.toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / ${completedPrayers + missedPrayers}',\n                style: TextStyle(fontSize: 12)),\n            ElevatedButton(\n              onPressed: onPrayed,\n              child: Text('Pray'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_details_screen.dart\n#############################################\n\nimport 'package:flutter/material.dart';\nimport '../services/hive_service.dart';\nimport '../models/prayer_record.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          // Implement logic to find and increment the oldest missed prayer\n\n          return Column(\n            children: [\n              // Display and update prayer details here\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_month_drop_down.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../platform_specific_widget/amana_drop_down.dart'; // Ensure this import is here\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({super.key});\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  String? _selectedMonth;\n  final Map<String, TextEditingController> _controllers = {};\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    for (var prayer in prayerProvider.prayers) {\n      _controllers[prayer] = TextEditingController();\n    }\n  }\n\n  @override\n  void dispose() {\n    _controllers.forEach((_, controller) => controller.dispose());\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return AmanaScaffold(\n      title: \"Edit Details\",\n      body: SingleChildScrollView(\n        child: Padding(\n          padding: REdgeInsets.all(16.0),\n          child: Column(\n            crossAxisAlignment:\n                kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n            children: [\n              Text(\n                'Pick each year and reflect, add what percentage you estimate you missed that year.',\n                style: TextStyle(fontSize: 18, color: Colors.black),\n              ),\n              SizedBox(height: 20.h),\n              _buildYearDropdown(prayerProvider),\n              SizedBox(height: 20.h),\n              _selectedYear != null && _selectedYear != 0\n                  ? _buildMonthDropDown(prayerProvider)\n                  : Text(\"Selecting Month\"),\n              SizedBox(height: 20.h),\n              if (_selectedYear != null &&\n                  _selectedYear != 0 &&\n                  _selectedMonth != null &&\n                  _selectedMonth != \"\")\n                ...prayerProvider.prayers\n                    .map((prayer) => _buildPrayerRow(prayerProvider, prayer)),\n              SizedBox(height: 16.h),\n              AmanaButton(\n                onPress: () {\n                  for (var prayer in prayerProvider.prayers) {\n                    final percentage =\n                        int.tryParse(_controllers[prayer]!.text) ?? 0;\n                    prayerProvider.updatePrayerData(\n                      prayer,\n                      _selectedYear!,\n                      (365 * percentage / 100).round(),\n                      (365 - (365 * percentage / 100)).round(),\n                      percentage,\n                    );\n                  }\n                  prayerProvider.savePrayerData();\n                  Navigator.pushAndRemoveUntil(\n                      context,\n                      MaterialPageRoute(builder: (context) => HomeScreen()),\n                      (route) => false);\n                },\n                label: \"Save\",\n                isAppLevel: true,\n              ),\n              SizedBox(height: 16.h),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildYearDropdown(PrayerProvider prayerProvider) {\n    final startYear = prayerProvider.startYear;\n    final endYear = prayerProvider.endYear;\n\n    return AmanaDropDown(\n      value: _selectedYear,\n      items: List.generate(endYear - startYear + 2, (index) {\n        final year = (index == 0) ? 0 : startYear + (index - 1);\n        return {\n          \"value\": year,\n          \"child\": year == 0 ? Text(\"Select Year\") : Text('$year'),\n        };\n      }),\n      onChanged: (newValue) {\n        setState(() {\n          _selectedYear = newValue;\n        });\n      },\n      labelText: 'Select Year',\n    );\n  }\n\n  Widget _buildMonthDropDown(PrayerProvider provider) {\n    return AmanaMonthDropDown(\n        items: List.generate(13, (index) {\n          final month = (index == 0) ? \"\" : provider.monthsList[index - 1];\n          return {\n            \"value\": month,\n            \"child\": month == \"\" ? Text(\"Select Month\") : Text('$month'),\n          };\n        }),\n        onChanged: (val) {\n          setState(() {\n            _selectedMonth = val.toString();\n          });\n        },\n        value: _selectedMonth ?? \"\",\n        labelText: \"Select Month\");\n  }\n\n  Widget _buildPrayerRow(PrayerProvider prayerProvider, String prayer) {\n    final prayerData =\n        prayerProvider.getPrayerData()['yearlyData'][_selectedYear.toString()];\n\n    if (prayerData == null || prayerData[prayer] == null) {\n      return Container();\n    }\n\n    final prayerPercentage = prayerData[prayer]['percentMissed'];\n\n    return Padding(\n      padding: REdgeInsets.symmetric(vertical: 4.0),\n      child: Row(\n        mainAxisAlignment: MainAxisAlignment.spaceBetween,\n        children: [\n          Expanded(\n              flex: 2,\n              child: Text(\n                prayer,\n                style: TextStyle(color: Colors.black),\n              )),\n          Expanded(\n            child: AmanaInputField(\n              controller: _controllers[prayer]!\n                ..text = prayerPercentage.toString(),\n              sufixIcon: Icons.percent_outlined,\n              onChange: (val) {},\n              label: \"Missed\",\n              keyboardType: TextInputType.number,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\n// File: screens/prayer_progress_card_cupertino.dart\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n\n  const PrayerProgressCardCupertino({\n    required this.prayer,\n    required this.year,\n    required this.month,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(\n          prayerProvider.getCompletedPrayersForMonth(year, month, prayer)),\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(\n              prayerProvider.getMissedPrayersForMonth(year, month, prayer)),\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CupertinoActivityIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Container(\n              margin: EdgeInsets.all(8.0),\n              padding: EdgeInsets.all(14.0),\n              decoration: BoxDecoration(\n                color: CupertinoColors.white,\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: CupertinoColors.systemGrey.withOpacity(0.4),\n                    spreadRadius: 1,\n                    blurRadius: 3,\n                    offset: Offset(0, 2),\n                  ),\n                ],\n              ),\n              child: Column(\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                children: [\n                  Text(prayer,\n                      style:\n                          TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n                  SizedBox(height: 8),\n                  ClipRRect(\n                    borderRadius: BorderRadius.circular(8),\n                    child: LinearProgressIndicator(\n                      value: totalPrayers > 0\n                          ? completedPrayers / totalPrayers\n                          : 0,\n                      minHeight: 12,\n                      backgroundColor: CupertinoColors.systemGrey4,\n                      valueColor: AlwaysStoppedAnimation<Color>(\n                          CupertinoColors.activeGreen),\n                    ),\n                  ),\n                  SizedBox(height: 8),\n                  Text(\n                      '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                      style: TextStyle(fontSize: 14)),\n                  Text('$completedPrayers / $totalPrayers',\n                      style: TextStyle(fontSize: 12)),\n                  SizedBox(height: 8),\n                  CupertinoButton.filled(\n                    onPressed: () => prayerProvider.incrementPrayer(prayer),\n                    child: Text('Pray'),\n                  ),\n                ],\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\nimport 'edit_details_screen.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        int totalPrayersPossible = 30 * 5; // Assuming 5 prayers a day\n        int totalMissedPrayers = prayerProvider.prayerData.values.fold(\n            0,\n            (previousValue, element) =>\n                previousValue + (element['not_done'] as int));\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Amana Audit'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.push(\n                    context,\n                    MaterialPageRoute(\n                        builder: (context) => EditDetailsScreen()),\n                  );\n                },\n              ),\n              IconButton(\n                icon: Icon(Icons.refresh),\n                onPressed: () async {\n                  await prayerProvider.resetApplication();\n                  prayerProvider.loadData();\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                Text('Total Prayers Missed'),\n                SizedBox(height: 8),\n                Text('$totalMissedPrayers'),\n                SizedBox(height: 8),\n                LinearProgressIndicator(\n                  value: totalPrayersPossible > 0\n                      ? totalMissedPrayers / totalPrayersPossible\n                      : 0,\n                  minHeight: 16,\n                  backgroundColor: Colors.grey[300],\n                  valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayerProvider.prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        completedPrayers: prayerProvider\n                            .getCompletedPrayersForMonth(2021, 2, prayer),\n                        missedPrayers: prayerProvider.getMissedPrayersForMonth(\n                            2021, 2, prayer),\n                        completionPercentage: prayerProvider\n                            .getPrayerCompletionPercentageForMonth(\n                                2021, 2, prayer),\n                        onPrayed: () {\n                          // Implement the logic to mark the oldest missed prayer as done\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/flutter_build/dart_plugin_registrant.dart\n###############################################################\n\n//\n// Generated file. Do not edit.\n// This file is generated from template in file `flutter_tools/lib/src/flutter_plugins.dart`.\n//\n\n// @dart = 3.3\n\nimport 'dart:io'; // flutter_ignore: dart_io_import.\nimport 'package:path_provider_android/path_provider_android.dart';\nimport 'package:shared_preferences_android/shared_preferences_android.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_linux/path_provider_linux.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_linux/shared_preferences_linux.dart';\nimport 'package:url_launcher_linux/url_launcher_linux.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_windows/path_provider_windows.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_windows/shared_preferences_windows.dart';\nimport 'package:url_launcher_windows/url_launcher_windows.dart';\n\n@pragma('vm:entry-point')\nclass _PluginRegistrant {\n\n  @pragma('vm:entry-point')\n  static void register() {\n    if (Platform.isAndroid) {\n      try {\n        PathProviderAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isIOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isLinux) {\n      try {\n        PathProviderLinux.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusLinuxPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesLinux.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherLinux.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isMacOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isWindows) {\n      try {\n        PathProviderWindows.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusWindowsPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesWindows.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherWindows.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./.dart_tool/build/entrypoint/build.dart\n#################################################\n\n// ignore_for_file: directives_ordering\n// ignore_for_file: no_leading_underscores_for_library_prefixes\nimport 'package:build_runner_core/build_runner_core.dart' as _i1;\nimport 'package:hive_generator/hive_generator.dart' as _i2;\nimport 'package:source_gen/builder.dart' as _i3;\nimport 'dart:isolate' as _i4;\nimport 'package:build_runner/build_runner.dart' as _i5;\nimport 'dart:io' as _i6;\n\nfinal _builders = <_i1.BuilderApplication>[\n  _i1.apply(\n    r'hive_generator:hive_generator',\n    [_i2.getBuilder],\n    _i1.toDependentsOf(r'hive_generator'),\n    hideOutput: true,\n    appliesBuilders: const [r'source_gen:combining_builder'],\n  ),\n  _i1.apply(\n    r'source_gen:combining_builder',\n    [_i3.combiningBuilder],\n    _i1.toNoneByDefault(),\n    hideOutput: false,\n    appliesBuilders: const [r'source_gen:part_cleanup'],\n  ),\n  _i1.applyPostProcess(\n    r'source_gen:part_cleanup',\n    _i3.partCleanup,\n  ),\n];\nvoid main(\n  List<String> args, [\n  _i4.SendPort? sendPort,\n]) async {\n  var result = await _i5.run(\n    args,\n    _builders,\n  );\n  sendPort?.send(result);\n  _i6.exitCode = result;\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter(); // Ensure Hive is initialized correctly\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key) ?? {};\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n\n  void logDatabaseStructure() {\n    print('Database Structure: ${box.toMap()}');\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'package:hive/hive.dart';\nimport '../services/hive_service.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n\n  Map<String, dynamic> prayerData = {};\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    prayerData = (await _hiveService.loadData('prayerData')) ?? {};\n  }\n\n  Future<void> initializeMonthlyPrayerStats(int year, int month) async {\n    final keyPrefix = '${year}_${month}_';\n    for (var prayer in ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha']) {\n      final key = keyPrefix + prayer;\n      prayerData[key] = {'done': 15, 'not_done': 15};\n    }\n    await _hiveService.saveData('prayerData', prayerData);\n  }\n\n  Future<void> updatePrayerStats(\n      int year, int month, String prayer, bool done) async {\n    final key = '${year}_${month}_$prayer';\n    if (done) {\n      prayerData[key]['done']++;\n      prayerData[key]['not_done']--;\n    } else {\n      prayerData[key]['done']--;\n      prayerData[key]['not_done']++;\n    }\n    await _hiveService.saveData('prayerData', prayerData);\n  }\n\n  Future<void> clearData() async {\n    prayerData = {};\n    await _hiveService.clearData();\n  }\n\n  Future<void> savePrayerData() async {\n    await _hiveService.saveData('prayerData', prayerData);\n  }\n}\n\n\n\n# File: ./widgets/progress_bar.dart\n####################################\n\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double value;\n\n  ProgressBar({required this.value});\n\n  @override\n  Widget build(BuildContext context) {\n    return LinearProgressIndicator(value: value);\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah () said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              '      :       : \"     :                                                                   -  ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n\n\nreturn only updated files in their full so i can copy and paste ",
      "created_at": "2024-06-05T21:30:09.742738",
      "sequence_order": 0,
      "parent_id": "b36c8977-3627-4566-ac96-9ca406818cab",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "e3187685-cc3a-4f73-ba34-53882bb827e6",
      "role": "assistant",
      "content": "To fix the error `Unhandled Exception: type '_Map<dynamic, dynamic>' is not a subtype of type 'Map<String, dynamic>'`, you need to ensure that the data you're handling is always of the correct type. Below are the files that need changes to address this issue.\n\n### Updated `prayer_service.dart`\n\n```dart\nimport 'package:hive/hive.dart';\nimport '../services/hive_service.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n\n  Map<String, dynamic> prayerData = {};\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    final data = await _hiveService.loadData('prayerData');\n    prayerData = data is Map<String, dynamic> ? data : {};\n  }\n\n  Future<void> initializeMonthlyPrayerStats(int year, int month) async {\n    final keyPrefix = '${year}_${month}_';\n    for (var prayer in ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha']) {\n      final key = keyPrefix + prayer;\n      prayerData[key] = {'done': 15, 'not_done': 15};\n    }\n    await _hiveService.saveData('prayerData', prayerData);\n  }\n\n  Future<void> updatePrayerStats(int year, int month, String prayer, bool done) async {\n    final key = '${year}_${month}_$prayer';\n    if (prayerData.containsKey(key)) {\n      if (done) {\n        prayerData[key]['done']++;\n        prayerData[key]['not_done']--;\n      } else {\n        prayerData[key]['done']--;\n        prayerData[key]['not_done']++;\n      }\n      await _hiveService.saveData('prayerData', prayerData);\n    }\n  }\n\n  Future<void> clearData() async {\n    prayerData = {};\n    await _hiveService.clearData();\n  }\n\n  Future<void> savePrayerData() async {\n    await _hiveService.saveData('prayerData', prayerData);\n  }\n}\n```\n\n### Updated `prayer_provider.dart`\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  bool isDataLoaded = false;\n  Map<String, dynamic> _prayerData = {};\n  int startYear = 2020;\n  int endYear = 2023;\n  List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  List<String> monthsList = [\n    'January', 'February', 'March', 'April', 'May', 'June',\n    'July', 'August', 'September', 'October', 'November', 'December'\n  ];\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService);\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData;\n    isDataLoaded = true;\n    notifyListeners();\n  }\n\n  Future<void> initializeMonthlyPrayerStats(int year, int month) async {\n    await _prayerService.initializeMonthlyPrayerStats(year, month);\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerStats(int year, int month, String prayer, bool done) async {\n    await _prayerService.updatePrayerStats(year, month, prayer, done);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    return _prayerData.containsKey(key) ? _prayerData[key]['done'] : 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    return _prayerData.containsKey(key) ? _prayerData[key]['not_done'] : 0;\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    if (_prayerData.containsKey(key)) {\n      final done = _prayerData[key]['done'];\n      final total = done + _prayerData[key]['not_done'];\n      return (done / total) * 100;\n    }\n    return 0.0;\n  }\n\n  Future<void> resetApplication() async {\n    await _prayerService.clearData();\n    _prayerData = {};\n    notifyListeners();\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear, int endMonth, Map<int, int> percentageMissedByYear) async {\n    for (int year = startYear; year <= endYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final keyPrefix = '${year}_${month}_';\n        for (var prayer in prayers) {\n          final key = keyPrefix + prayer;\n          final totalDays = DateTime(year, month + 1, 0).day;\n          final missedDays = (totalDays * (percentageMissedByYear[year]! / 100)).round();\n          _prayerData[key] = {'done': totalDays - missedDays, 'not_done': missedDays};\n        }\n      }\n    }\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    percentageMissedByYear.forEach((year, percentage) {\n      for (int month = 1; month <= 12; month++) {\n        for (var prayer in prayers) {\n          final key = '${year}_${month}_$prayer';\n          if (_prayerData.containsKey(key)) {\n            final totalDays = DateTime(year, month + 1, 0).day;\n            final missedDays = (totalDays * (percentage / 100)).round();\n            _prayerData[key]['done'] = totalDays - missedDays;\n            _prayerData[key]['not_done'] = missedDays;\n          }\n        }\n      }\n    });\n    notifyListeners();\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerData;\n  }\n\n  void updatePrayerData(String prayer, int year, int done, int notDone, int percentage) {\n    final key = '${year}_${DateTime.now().month}_$prayer';\n    _prayerData[key] = {'done': done, 'not_done': notDone, 'percentage': percentage};\n    notifyListeners();\n  }\n\n  void saveBirthYear(int birthYear) {\n    _prayerData['birthYear'] = birthYear;\n    notifyListeners();\n  }\n}\n```\n\n### Updated `hive_service.dart`\n\n```dart\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter(); // Ensure Hive is initialized correctly\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key) ?? {};\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n\n  void logDatabaseStructure() {\n    print('Database Structure: ${box.toMap()}');\n  }\n}\n```\n\nThese updates ensure that the data being loaded is always a `Map<String, dynamic>`, thus avoiding the type error. Now, copy and paste these updated files into your project to replace the existing ones.",
      "created_at": "2024-06-05T21:31:07.269743",
      "sequence_order": 1,
      "parent_id": "aaa2e582-0c19-4b66-9c1a-d86ca8946474",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": true
      }
    },
    {
      "id": "aaa2f689-96e8-4b2c-b391-28d2a0e5b211",
      "role": "user",
      "content": "\n\n EXCEPTION CAUGHT BY WIDGETS LIBRARY\n\nThe following NoSuchMethodError was thrown building\nEditDetailsScreen(dirty, dependencies:\n[_InheritedProviderScope<PrayerProvider?>], state:\n_EditDetailsScreenState#5929d):\nThe method '[]' was called on null.\nReceiver: null\nTried calling: [](\"2023\")\n\nThe relevant error-causing widget was:\n  EditDetailsScreen\n  EditDetailsScreen:file:///Users/bilalghalib/Projects/Github/amana_a\n  udit/lib/screens/home_screen.dart:35:47\n\nWhen the exception was thrown, this was the stack:\n#0      Object.noSuchMethod (dart:core-patch/object_patch.dart:38:5)\n#1      _EditDetailsScreenState._buildPrayerRow\n(package:amana/screens/edit_details_screen.dart:143:53)\n#2      _EditDetailsScreenState.build.<anonymous closure>\n(package:amana/screens/edit_details_screen.dart:69:38)\n#3      MappedListIterable.elementAt\n(dart:_internal/iterable.dart:425:31)\n#4      ListIterator.moveNext (dart:_internal/iterable.dart:354:26)\n#5      List.addAll (dart:core-patch/growable_array.dart:319:13)\n#6      _EditDetailsScreenState.build\n(package:amana/screens/edit_details_screen.dart:69:22)\n#7      StatefulElement.build\n(package:flutter/src/widgets/framework.dart:5592:27)\n#8      ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5480:15)\n#9      StatefulElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5643:11)\n#10     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#11     StatefulElement.update\n(package:flutter/src/widgets/framework.dart:5666:5)\n#12     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#13     SingleChildRenderObjectElement.update\n(package:flutter/src/widgets/framework.dart:6765:14)\n#14     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#15     ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#16     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#17     StatelessElement.update\n(package:flutter/src/widgets/framework.dart:5556:5)\n#18     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#19     SingleChildRenderObjectElement.update\n(package:flutter/src/widgets/framework.dart:6765:14)\n#20     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#21     SingleChildRenderObjectElement.update\n(package:flutter/src/widgets/framework.dart:6765:14)\n#22     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#23     ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#24     StatefulElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5643:11)\n#25     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#26     StatefulElement.update\n(package:flutter/src/widgets/framework.dart:5666:5)\n#27     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#28     Element.updateChildren\n(package:flutter/src/widgets/framework.dart:3973:32)\n#29     MultiChildRenderObjectElement.update\n(package:flutter/src/widgets/framework.dart:6918:17)\n#30     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#31     ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#32     StatefulElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5643:11)\n#33     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#34     StatefulElement.update\n(package:flutter/src/widgets/framework.dart:5666:5)\n#35     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#36     SingleChildRenderObjectElement.update\n(package:flutter/src/widgets/framework.dart:6765:14)\n#37     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#38     ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#39     StatefulElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5643:11)\n#40     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#41     StatefulElement.update\n(package:flutter/src/widgets/framework.dart:5666:5)\n#42     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#43     SingleChildRenderObjectElement.update\n(package:flutter/src/widgets/framework.dart:6765:14)\n#44     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#45     ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#46     StatefulElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5643:11)\n#47     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#48     StatefulElement.update\n(package:flutter/src/widgets/framework.dart:5666:5)\n#49     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#50     SingleChildRenderObjectElement.update\n(package:flutter/src/widgets/framework.dart:6765:14)\n#51     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#52     ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#53     StatefulElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5643:11)\n#54     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#55     StatefulElement.update\n(package:flutter/src/widgets/framework.dart:5666:5)\n#56     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#57     ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#58     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#59     StatelessElement.update\n(package:flutter/src/widgets/framework.dart:5556:5)\n#60     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#61     ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#62     StatefulElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5643:11)\n#63     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#64     StatefulElement.update\n(package:flutter/src/widgets/framework.dart:5666:5)\n#65     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#66     SingleChildRenderObjectElement.update\n(package:flutter/src/widgets/framework.dart:6765:14)\n#67     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#68     ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#69     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#70     ProxyElement.update\n(package:flutter/src/widgets/framework.dart:5809:5)\n#71     _InheritedNotifierElement.update\n(package:flutter/src/widgets/inherited_notifier.dart:105:11)\n#72     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#73     SingleChildRenderObjectElement.update\n(package:flutter/src/widgets/framework.dart:6765:14)\n#74     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#75     ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#76     StatefulElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5643:11)\n#77     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#78     StatefulElement.update\n(package:flutter/src/widgets/framework.dart:5666:5)\n#79     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#80     ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#81     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#82     ProxyElement.update\n(package:flutter/src/widgets/framework.dart:5809:5)\n#83     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#84     ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#85     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#86     ProxyElement.update\n(package:flutter/src/widgets/framework.dart:5809:5)\n#87     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#88     ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#89     StatefulElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5643:11)\n#90     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#91     StatefulElement.update\n(package:flutter/src/widgets/framework.dart:5666:5)\n#92     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#93     ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#94     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#95     StatelessElement.update\n(package:flutter/src/widgets/framework.dart:5556:5)\n#96     Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#97     ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#98     Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#99     StatelessElement.update\n(package:flutter/src/widgets/framework.dart:5556:5)\n#100    Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#101    SingleChildRenderObjectElement.update\n(package:flutter/src/widgets/framework.dart:6765:14)\n#102    Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#103    ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#104    Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#105    ProxyElement.update\n(package:flutter/src/widgets/framework.dart:5809:5)\n#106    Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#107    ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#108    Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#109    ProxyElement.update\n(package:flutter/src/widgets/framework.dart:5809:5)\n#110    Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#111    ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#112    StatefulElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5643:11)\n#113    Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#114    StatefulElement.update\n(package:flutter/src/widgets/framework.dart:5666:5)\n#115    Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#116    ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#117    StatefulElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5643:11)\n#118    Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#119    StatefulElement.update\n(package:flutter/src/widgets/framework.dart:5666:5)\n#120    Element.updateChild\n(package:flutter/src/widgets/framework.dart:3824:15)\n#121    ComponentElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5505:16)\n#122    StatefulElement.performRebuild\n(package:flutter/src/widgets/framework.dart:5643:11)\n#123    Element.rebuild\n(package:flutter/src/widgets/framework.dart:5196:7)\n#124    BuildOwner.buildScope\n(package:flutter/src/widgets/framework.dart:2904:19)\n#125    WidgetsBinding.drawFrame\n(package:flutter/src/widgets/binding.dart:989:21)\n#126    RendererBinding._handlePersistentFrameCallback\n(package:flutter/src/rendering/binding.dart:448:5)\n#127    SchedulerBinding._invokeFrameCallback\n(package:flutter/src/scheduler/binding.dart:1386:15)\n#128    SchedulerBinding.handleDrawFrame\n(package:flutter/src/scheduler/binding.dart:1311:9)\n#129    SchedulerBinding._handleDrawFrame\n(package:flutter/src/scheduler/binding.dart:1169:5)\n#130    _invoke (dart:ui/hooks.dart:312:13)\n#131    PlatformDispatcher._drawFrame\n(dart:ui/platform_dispatcher.dart:399:5)\n#132    _drawFrame (dart:ui/hooks.dart:283:31)\n\n\n\n\nAnother exception was thrown: NoSuchMethodError: The method '[]' was\ncalled on null.\nAnother exception was thrown: NoSuchMethodError: The method '[]' was\ncalled on null.\nAnother exception was thrown: NoSuchMethodError: The method '[]' was\ncalled on null.",
      "created_at": "2024-06-05T21:36:02.571879",
      "sequence_order": 2,
      "parent_id": "e3187685-cc3a-4f73-ba34-53882bb827e6",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "259cffd9-7af1-4e0d-9a9c-d3d9910bbe4a",
      "role": "assistant",
      "content": "The error occurs because the `_prayerData` map is being accessed without checking if the required keys exist, leading to null being returned when the key is not present. To fix this, you need to ensure that your code checks for the existence of keys before trying to access them. Additionally, make sure that `_prayerData` is initialized properly when the app starts.\n\nHere's the updated `EditDetailsScreen` with the necessary checks:\n\n### Updated `edit_details_screen.dart`\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_month_drop_down.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../platform_specific_widget/amana_drop_down.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({super.key});\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  String? _selectedMonth;\n  final Map<String, TextEditingController> _controllers = {};\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    for (var prayer in prayerProvider.prayers) {\n      _controllers[prayer] = TextEditingController();\n    }\n  }\n\n  @override\n  void dispose() {\n    _controllers.forEach((_, controller) => controller.dispose());\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return AmanaScaffold(\n      title: \"Edit Details\",\n      body: SingleChildScrollView(\n        child: Padding(\n          padding: REdgeInsets.all(16.0),\n          child: Column(\n            crossAxisAlignment:\n                kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n            children: [\n              Text(\n                'Pick each year and reflect, add what percentage you estimate you missed that year.',\n                style: TextStyle(fontSize: 18, color: Colors.black),\n              ),\n              SizedBox(height: 20.h),\n              _buildYearDropdown(prayerProvider),\n              SizedBox(height: 20.h),\n              _selectedYear != null && _selectedYear != 0\n                  ? _buildMonthDropDown(prayerProvider)\n                  : Text(\"Selecting Month\"),\n              SizedBox(height: 20.h),\n              if (_selectedYear != null &&\n                  _selectedYear != 0 &&\n                  _selectedMonth != null &&\n                  _selectedMonth != \"\")\n                ...prayerProvider.prayers\n                    .map((prayer) => _buildPrayerRow(prayerProvider, prayer)),\n              SizedBox(height: 16.h),\n              AmanaButton(\n                onPress: () {\n                  for (var prayer in prayerProvider.prayers) {\n                    final percentage =\n                        int.tryParse(_controllers[prayer]!.text) ?? 0;\n                    prayerProvider.updatePrayerData(\n                      prayer,\n                      _selectedYear!,\n                      (365 * percentage / 100).round(),\n                      (365 - (365 * percentage / 100)).round(),\n                      percentage,\n                    );\n                  }\n                  prayerProvider.savePrayerData();\n                  Navigator.pushAndRemoveUntil(\n                      context,\n                      MaterialPageRoute(builder: (context) => HomeScreen()),\n                      (route) => false);\n                },\n                label: \"Save\",\n                isAppLevel: true,\n              ),\n              SizedBox(height: 16.h),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildYearDropdown(PrayerProvider prayerProvider) {\n    final startYear = prayerProvider.startYear;\n    final endYear = prayerProvider.endYear;\n\n    return AmanaDropDown(\n      value: _selectedYear,\n      items: List.generate(endYear - startYear + 2, (index) {\n        final year = (index == 0) ? 0 : startYear + (index - 1);\n        return {\n          \"value\": year,\n          \"child\": year == 0 ? Text(\"Select Year\") : Text('$year'),\n        };\n      }),\n      onChanged: (newValue) {\n        setState(() {\n          _selectedYear = newValue;\n        });\n      },\n      labelText: 'Select Year',\n    );\n  }\n\n  Widget _buildMonthDropDown(PrayerProvider provider) {\n    return AmanaMonthDropDown(\n        items: List.generate(13, (index) {\n          final month = (index == 0) ? \"\" : provider.monthsList[index - 1];\n          return {\n            \"value\": month,\n            \"child\": month == \"\" ? Text(\"Select Month\") : Text('$month'),\n          };\n        }),\n        onChanged: (val) {\n          setState(() {\n            _selectedMonth = val.toString();\n          });\n        },\n        value: _selectedMonth ?? \"\",\n        labelText: \"Select Month\");\n  }\n\n  Widget _buildPrayerRow(PrayerProvider prayerProvider, String prayer) {\n    final prayerData =\n        prayerProvider.getPrayerData()['yearlyData']?[_selectedYear.toString()];\n\n    final prayerPercentage = prayerData?[prayer]?['percentMissed'] ?? 0;\n\n    return Padding(\n      padding: REdgeInsets.symmetric(vertical: 4.0),\n      child: Row(\n        mainAxisAlignment: MainAxisAlignment.spaceBetween,\n        children: [\n          Expanded(\n              flex: 2,\n              child: Text(\n                prayer,\n                style: TextStyle(color: Colors.black),\n              )),\n          Expanded(\n            child: AmanaInputField(\n              controller: _controllers[prayer]!\n                ..text = prayerPercentage.toString(),\n              sufixIcon: Icons.percent_outlined,\n              onChange: (val) {},\n              label: \"Missed\",\n              keyboardType: TextInputType.number,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n```\n\n### Updated `prayer_provider.dart`\n\nAdd null checks to ensure the `_prayerData` map is initialized properly:\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  bool isDataLoaded = false;\n  Map<String, dynamic> _prayerData = {};\n  int startYear = 2020;\n  int endYear = 2023;\n  List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  List<String> monthsList = [\n    'January', 'February', 'March', 'April', 'May', 'June',\n    'July', 'August', 'September', 'October', 'November', 'December'\n  ];\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService);\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData ?? {};\n    isDataLoaded = true;\n    notifyListeners();\n  }\n\n  Future<void> initializeMonthlyPrayerStats(int year, int month) async {\n    await _prayerService.initializeMonthlyPrayerStats(year, month);\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerStats(int year, int month, String prayer, bool done) async {\n    await _prayerService.updatePrayerStats(year, month, prayer, done);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    return _prayerData.containsKey(key) ? _prayerData[key]['done'] : 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    return _prayerData.containsKey(key) ? _prayerData[key]['not_done'] : 0;\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    if (_prayerData.containsKey(key)) {\n      final done = _prayerData[key]['done'];\n      final total = done + _prayerData[key]['not_done'];\n      return (done / total) * 100;\n    }\n    return 0.0;\n  }\n\n  Future<void> resetApplication() async {\n    await _prayerService.clearData();\n    _prayerData = {};\n    notifyListeners();\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear, int endMonth, Map<int, int> percentageMissedByYear) async {\n    for (int year = startYear; year <= endYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final keyPrefix = '${year}_${month}_';\n        for (var prayer in prayers) {\n          final key = keyPrefix + prayer;\n          final totalDays = DateTime(year, month + 1, 0).day;\n          final missedDays = (totalDays * (percentageMissedByYear[year]! / 100)).round();\n          _prayerData",
      "created_at": "2024-06-05T21:37:15.300199",
      "sequence_order": 3,
      "parent_id": "aaa2f689-96e8-4b2c-b391-28d2a0e5b211",
      "metadata": {
        "status": "finished_partial_completion",
        "weight": 1,
        "end_turn": false
      }
    },
    {
      "id": "17024e3d-f0e6-422f-88f4-334895579e88",
      "role": "assistant",
      "content": "[key] = {'done': totalDays - missedDays, 'not_done': missedDays};\n        }\n      }\n    }\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    percentageMissedByYear.forEach((year, percentage) {\n      for (int month = 1; month <= 12; month++) {\n        for (var prayer in prayers) {\n          final key = '${year}_${month}_$prayer';\n          if (_prayerData.containsKey(key)) {\n            final totalDays = DateTime(year, month + 1, 0).day;\n            final missedDays = (totalDays * (percentage / 100)).round();\n            _prayerData[key]['done'] = totalDays - missedDays;\n            _prayerData[key]['not_done'] = missedDays;\n          }\n        }\n      }\n    });\n    notifyListeners();\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerData;\n  }\n\n  void updatePrayerData(String prayer, int year, int done, int notDone, int percentage) {\n    final key = '${year}_${DateTime.now().month}_$prayer';\n    _prayerData[key] = {'done': done, 'not_done': notDone, 'percentage': percentage};\n    notifyListeners();\n  }\n\n  void saveBirthYear(int birthYear) {\n    _prayerData['birthYear'] = birthYear;\n    notifyListeners();\n  }\n}\n```\n\nThese changes ensure that `_prayerData` is checked for null values and keys are verified before accessing them, preventing the `NoSuchMethodError`.",
      "created_at": "2024-06-05T21:37:52.738440",
      "sequence_order": 4,
      "parent_id": "259cffd9-7af1-4e0d-9a9c-d3d9910bbe4a",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": true
      }
    },
    {
      "id": "aaa2d424-d4c4-4989-9291-8c8596ec3c20",
      "role": "user",
      "content": "\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./prayer_record.dart\n#############################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int fajrMissed;\n\n  @HiveField(3)\n  int dhuhrMissed;\n\n  @HiveField(4)\n  int asrMissed;\n\n  @HiveField(5)\n  int maghribMissed;\n\n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./main.dart\n####################\n\nimport 'package:flutter/material.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_record.dart';\nimport 'models/prayer_data.dart';\nimport 'myApp.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  await Hive.initFlutter(); // Ensuring Hive is initialized correctly\n\n  // Delete the existing Hive box\n  await Hive.deleteBoxFromDisk('prayerBox');\n\n  // Registering the Hive adapters\n  Hive.registerAdapter(PrayerRecordAdapter());\n  Hive.registerAdapter(PrayerDataAdapter());\n\n  final hiveService = HiveService();\n  await hiveService.init();\n\n  runApp(MyApp(\n    hiveService: hiveService,\n  ));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./prayer_record.g.dart\n###############################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  bool isDataLoaded = false;\n  Map<String, dynamic> _prayerData = {};\n  int startYear = 2020;\n  int endYear = 2023;\n  List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  List<String> monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService);\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData ?? {};\n    isDataLoaded = true;\n    notifyListeners();\n  }\n\n  Future<void> initializeMonthlyPrayerStats(int year, int month) async {\n    await _prayerService.initializeMonthlyPrayerStats(year, month);\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerStats(\n      int year, int month, String prayer, bool done) async {\n    await _prayerService.updatePrayerStats(year, month, prayer, done);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    return _prayerData.containsKey(key) ? _prayerData[key]['done'] : 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    return _prayerData.containsKey(key) ? _prayerData[key]['not_done'] : 0;\n  }\n\n  double getPrayerCompletionPercentageForMonth(\n      int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    if (_prayerData.containsKey(key)) {\n      final done = _prayerData[key]['done'];\n      final total = done + _prayerData[key]['not_done'];\n      return (done / total) * 100;\n    }\n    return 0.0;\n  }\n\n  Future<void> resetApplication() async {\n    await _prayerService.clearData();\n    _prayerData = {};\n    notifyListeners();\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    for (int year = startYear; year <= endYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final keyPrefix = '${year}_${month}_';\n        for (var prayer in prayers) {\n          final key = keyPrefix + prayer;\n          final totalDays = DateTime(year, month + 1, 0).day;\n          final missedDays =\n              (totalDays * (percentageMissedByYear[year]! / 100)).round();\n          _prayerData[key] = {\n            'done': totalDays - missedDays,\n            'not_done': missedDays\n          };\n        }\n      }\n    }\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    percentageMissedByYear.forEach((year, percentage) {\n      for (int month = 1; month <= 12; month++) {\n        for (var prayer in prayers) {\n          final key = '${year}_${month}_$prayer';\n          if (_prayerData.containsKey(key)) {\n            final totalDays = DateTime(year, month + 1, 0).day;\n            final missedDays = (totalDays * (percentage / 100)).round();\n            _prayerData[key]['done'] = totalDays - missedDays;\n            _prayerData[key]['not_done'] = missedDays;\n          }\n        }\n      }\n    });\n    notifyListeners();\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerData;\n  }\n\n  void updatePrayerData(\n      String prayer, int year, int done, int notDone, int percentage) {\n    final key = '${year}_${DateTime.now().month}_$prayer';\n    _prayerData[key] = {\n      'done': done,\n      'not_done': notDone,\n      'percentage': percentage\n    };\n    notifyListeners();\n  }\n\n  void saveBirthYear(int birthYear) {\n    _prayerData['birthYear'] = birthYear;\n    notifyListeners();\n  }\n}\n\n\n\n# File: ./models/prayer_record.dart\n####################################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year = 2023;\n\n  @HiveField(1)\n  int month = 1;\n\n  @HiveField(2)\n  int fajrMissed = 0;\n\n  @HiveField(3)\n  int dhuhrMissed = 0;\n\n  @HiveField(4)\n  int asrMissed = 0;\n\n  @HiveField(5)\n  int maghribMissed = 0;\n\n  @HiveField(6)\n  int ishaMissed = 0;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./models/prayer_data.dart\n##################################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_data.g.dart';\n\n@HiveType(typeId: 1)\nclass PrayerData {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  Map<String, int> prayersCompleted; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(3)\n  Map<String, int> prayersMissed; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(4)\n  int totalPrayed;\n\n  @HiveField(5)\n  int totalMissed;\n\n  @HiveField(6)\n  double percentagePrayed;\n\n  @HiveField(7)\n  double percentageMissed;\n\n  PrayerData({\n    required this.year,\n    required this.month,\n    required this.prayersCompleted,\n    required this.prayersMissed,\n    required this.totalPrayed,\n    required this.totalMissed,\n    required this.percentagePrayed,\n    required this.percentageMissed,\n  });\n\n  factory PrayerData.fromMap(Map<String, dynamic> map) {\n    return PrayerData(\n      year: map['year'],\n      month: map['month'],\n      prayersCompleted: Map<String, int>.from(map['prayersCompleted']),\n      prayersMissed: Map<String, int>.from(map['prayersMissed']),\n      totalPrayed: map['totalPrayed'],\n      totalMissed: map['totalMissed'],\n      percentagePrayed: map['percentagePrayed'],\n      percentageMissed: map['percentageMissed'],\n    );\n  }\n\n  Map<String, dynamic> toMap() {\n    return {\n      'year': year,\n      'month': month,\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'totalPrayed': totalPrayed,\n      'totalMissed': totalMissed,\n      'percentagePrayed': percentagePrayed,\n      'percentageMissed': percentageMissed,\n    };\n  }\n}\n\n\n\n# File: ./models/prayer_data.g.dart\n####################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_data.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerDataAdapter extends TypeAdapter<PrayerData> {\n  @override\n  final int typeId = 1;\n\n  @override\n  PrayerData read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerData(\n      year: fields[0] as int,\n      month: fields[1] as int,\n      prayersCompleted: (fields[2] as Map).cast<String, int>(),\n      prayersMissed: (fields[3] as Map).cast<String, int>(),\n      totalPrayed: fields[4] as int,\n      totalMissed: fields[5] as int,\n      percentagePrayed: fields[6] as double,\n      percentageMissed: fields[7] as double,\n    );\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerData obj) {\n    writer\n      ..writeByte(8)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.prayersCompleted)\n      ..writeByte(3)\n      ..write(obj.prayersMissed)\n      ..writeByte(4)\n      ..write(obj.totalPrayed)\n      ..writeByte(5)\n      ..write(obj.totalMissed)\n      ..writeByte(6)\n      ..write(obj.percentagePrayed)\n      ..writeByte(7)\n      ..write(obj.percentageMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerDataAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./models/prayer_record.g.dart\n######################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int completedPrayers;\n  final int missedPrayers;\n  final double completionPercentage;\n  final VoidCallback onPrayed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.completedPrayers,\n    required this.missedPrayers,\n    required this.completionPercentage,\n    required this.onPrayed,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: completionPercentage / 100,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text('${completionPercentage.toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / ${completedPrayers + missedPrayers}',\n                style: TextStyle(fontSize: 12)),\n            ElevatedButton(\n              onPressed: onPrayed,\n              child: Text('Pray'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_details_screen.dart\n#############################################\n\nimport 'package:flutter/material.dart';\nimport '../services/hive_service.dart';\nimport '../models/prayer_record.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          // Implement logic to find and increment the oldest missed prayer\n\n          return Column(\n            children: [\n              // Display and update prayer details here\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_month_drop_down.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../platform_specific_widget/amana_drop_down.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({super.key});\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  String? _selectedMonth;\n  final Map<String, TextEditingController> _controllers = {};\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    for (var prayer in prayerProvider.prayers) {\n      _controllers[prayer] = TextEditingController();\n    }\n  }\n\n  @override\n  void dispose() {\n    _controllers.forEach((_, controller) => controller.dispose());\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return AmanaScaffold(\n      title: \"Edit Details\",\n      body: SingleChildScrollView(\n        child: Padding(\n          padding: REdgeInsets.all(16.0),\n          child: Column(\n            crossAxisAlignment:\n                kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n            children: [\n              Text(\n                'Pick each year and reflect, add what percentage you estimate you missed that year.',\n                style: TextStyle(fontSize: 18, color: Colors.black),\n              ),\n              SizedBox(height: 20.h),\n              _buildYearDropdown(prayerProvider),\n              SizedBox(height: 20.h),\n              _selectedYear != null && _selectedYear != 0\n                  ? _buildMonthDropDown(prayerProvider)\n                  : Text(\"Selecting Month\"),\n              SizedBox(height: 20.h),\n              if (_selectedYear != null &&\n                  _selectedYear != 0 &&\n                  _selectedMonth != null &&\n                  _selectedMonth != \"\")\n                ...prayerProvider.prayers\n                    .map((prayer) => _buildPrayerRow(prayerProvider, prayer)),\n              SizedBox(height: 16.h),\n              AmanaButton(\n                onPress: () {\n                  for (var prayer in prayerProvider.prayers) {\n                    final percentage =\n                        int.tryParse(_controllers[prayer]!.text) ?? 0;\n                    prayerProvider.updatePrayerData(\n                      prayer,\n                      _selectedYear!,\n                      (365 * percentage / 100).round(),\n                      (365 - (365 * percentage / 100)).round(),\n                      percentage,\n                    );\n                  }\n                  prayerProvider.savePrayerData();\n                  Navigator.pushAndRemoveUntil(\n                      context,\n                      MaterialPageRoute(builder: (context) => HomeScreen()),\n                      (route) => false);\n                },\n                label: \"Save\",\n                isAppLevel: true,\n              ),\n              SizedBox(height: 16.h),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildYearDropdown(PrayerProvider prayerProvider) {\n    final startYear = prayerProvider.startYear;\n    final endYear = prayerProvider.endYear;\n\n    return AmanaDropDown(\n      value: _selectedYear,\n      items: List.generate(endYear - startYear + 2, (index) {\n        final year = (index == 0) ? 0 : startYear + (index - 1);\n        return {\n          \"value\": year,\n          \"child\": year == 0 ? Text(\"Select Year\") : Text('$year'),\n        };\n      }),\n      onChanged: (newValue) {\n        setState(() {\n          _selectedYear = newValue;\n        });\n      },\n      labelText: 'Select Year',\n    );\n  }\n\n  Widget _buildMonthDropDown(PrayerProvider provider) {\n    return AmanaMonthDropDown(\n        items: List.generate(13, (index) {\n          final month = (index == 0) ? \"\" : provider.monthsList[index - 1];\n          return {\n            \"value\": month,\n            \"child\": month == \"\" ? Text(\"Select Month\") : Text('$month'),\n          };\n        }),\n        onChanged: (val) {\n          setState(() {\n            _selectedMonth = val.toString();\n          });\n        },\n        value: _selectedMonth ?? \"\",\n        labelText: \"Select Month\");\n  }\n\n  Widget _buildPrayerRow(PrayerProvider prayerProvider, String prayer) {\n    final prayerData =\n        prayerProvider.getPrayerData()['yearlyData']?[_selectedYear.toString()];\n\n    final prayerPercentage = prayerData?[prayer]?['percentMissed'] ?? 0;\n\n    return Padding(\n      padding: REdgeInsets.symmetric(vertical: 4.0),\n      child: Row(\n        mainAxisAlignment: MainAxisAlignment.spaceBetween,\n        children: [\n          Expanded(\n              flex: 2,\n              child: Text(\n                prayer,\n                style: TextStyle(color: Colors.black),\n              )),\n          Expanded(\n            child: AmanaInputField(\n              controller: _controllers[prayer]!\n                ..text = prayerPercentage.toString(),\n              sufixIcon: Icons.percent_outlined,\n              onChange: (val) {},\n              label: \"Missed\",\n              keyboardType: TextInputType.number,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\n// File: screens/prayer_progress_card_cupertino.dart\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n\n  const PrayerProgressCardCupertino({\n    required this.prayer,\n    required this.year,\n    required this.month,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(\n          prayerProvider.getCompletedPrayersForMonth(year, month, prayer)),\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(\n              prayerProvider.getMissedPrayersForMonth(year, month, prayer)),\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CupertinoActivityIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Container(\n              margin: EdgeInsets.all(8.0),\n              padding: EdgeInsets.all(14.0),\n              decoration: BoxDecoration(\n                color: CupertinoColors.white,\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: CupertinoColors.systemGrey.withOpacity(0.4),\n                    spreadRadius: 1,\n                    blurRadius: 3,\n                    offset: Offset(0, 2),\n                  ),\n                ],\n              ),\n              child: Column(\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                children: [\n                  Text(prayer,\n                      style:\n                          TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n                  SizedBox(height: 8),\n                  ClipRRect(\n                    borderRadius: BorderRadius.circular(8),\n                    child: LinearProgressIndicator(\n                      value: totalPrayers > 0\n                          ? completedPrayers / totalPrayers\n                          : 0,\n                      minHeight: 12,\n                      backgroundColor: CupertinoColors.systemGrey4,\n                      valueColor: AlwaysStoppedAnimation<Color>(\n                          CupertinoColors.activeGreen),\n                    ),\n                  ),\n                  SizedBox(height: 8),\n                  Text(\n                      '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                      style: TextStyle(fontSize: 14)),\n                  Text('$completedPrayers / $totalPrayers',\n                      style: TextStyle(fontSize: 12)),\n                  SizedBox(height: 8),\n                  CupertinoButton.filled(\n                    onPressed: () => prayerProvider.incrementPrayer(prayer),\n                    child: Text('Pray'),\n                  ),\n                ],\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\nimport 'edit_details_screen.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        int totalPrayersPossible = 30 * 5; // Assuming 5 prayers a day\n        int totalMissedPrayers = prayerProvider.prayerData.values.fold(\n            0,\n            (previousValue, element) =>\n                previousValue + (element['not_done'] as int));\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Amana Audit'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.push(\n                    context,\n                    MaterialPageRoute(\n                        builder: (context) => EditDetailsScreen()),\n                  );\n                },\n              ),\n              IconButton(\n                icon: Icon(Icons.refresh),\n                onPressed: () async {\n                  await prayerProvider.resetApplication();\n                  prayerProvider.loadData();\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                Text('Total Prayers Missed'),\n                SizedBox(height: 8),\n                Text('$totalMissedPrayers'),\n                SizedBox(height: 8),\n                LinearProgressIndicator(\n                  value: totalPrayersPossible > 0\n                      ? totalMissedPrayers / totalPrayersPossible\n                      : 0,\n                  minHeight: 16,\n                  backgroundColor: Colors.grey[300],\n                  valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayerProvider.prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        completedPrayers: prayerProvider\n                            .getCompletedPrayersForMonth(2021, 2, prayer),\n                        missedPrayers: prayerProvider.getMissedPrayersForMonth(\n                            2021, 2, prayer),\n                        completionPercentage: prayerProvider\n                            .getPrayerCompletionPercentageForMonth(\n                                2021, 2, prayer),\n                        onPrayed: () {\n                          // Implement the logic to mark the oldest missed prayer as done\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/flutter_build/dart_plugin_registrant.dart\n###############################################################\n\n//\n// Generated file. Do not edit.\n// This file is generated from template in file `flutter_tools/lib/src/flutter_plugins.dart`.\n//\n\n// @dart = 3.3\n\nimport 'dart:io'; // flutter_ignore: dart_io_import.\nimport 'package:path_provider_android/path_provider_android.dart';\nimport 'package:shared_preferences_android/shared_preferences_android.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_linux/path_provider_linux.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_linux/shared_preferences_linux.dart';\nimport 'package:url_launcher_linux/url_launcher_linux.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_windows/path_provider_windows.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_windows/shared_preferences_windows.dart';\nimport 'package:url_launcher_windows/url_launcher_windows.dart';\n\n@pragma('vm:entry-point')\nclass _PluginRegistrant {\n\n  @pragma('vm:entry-point')\n  static void register() {\n    if (Platform.isAndroid) {\n      try {\n        PathProviderAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isIOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isLinux) {\n      try {\n        PathProviderLinux.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusLinuxPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesLinux.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherLinux.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isMacOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isWindows) {\n      try {\n        PathProviderWindows.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusWindowsPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesWindows.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherWindows.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./.dart_tool/build/entrypoint/build.dart\n#################################################\n\n// ignore_for_file: directives_ordering\n// ignore_for_file: no_leading_underscores_for_library_prefixes\nimport 'package:build_runner_core/build_runner_core.dart' as _i1;\nimport 'package:hive_generator/hive_generator.dart' as _i2;\nimport 'package:source_gen/builder.dart' as _i3;\nimport 'dart:isolate' as _i4;\nimport 'package:build_runner/build_runner.dart' as _i5;\nimport 'dart:io' as _i6;\n\nfinal _builders = <_i1.BuilderApplication>[\n  _i1.apply(\n    r'hive_generator:hive_generator',\n    [_i2.getBuilder],\n    _i1.toDependentsOf(r'hive_generator'),\n    hideOutput: true,\n    appliesBuilders: const [r'source_gen:combining_builder'],\n  ),\n  _i1.apply(\n    r'source_gen:combining_builder',\n    [_i3.combiningBuilder],\n    _i1.toNoneByDefault(),\n    hideOutput: false,\n    appliesBuilders: const [r'source_gen:part_cleanup'],\n  ),\n  _i1.applyPostProcess(\n    r'source_gen:part_cleanup',\n    _i3.partCleanup,\n  ),\n];\nvoid main(\n  List<String> args, [\n  _i4.SendPort? sendPort,\n]) async {\n  var result = await _i5.run(\n    args,\n    _builders,\n  );\n  sendPort?.send(result);\n  _i6.exitCode = result;\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter(); // Ensure Hive is initialized correctly\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key) ?? {};\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n\n  void logDatabaseStructure() {\n    print('Database Structure: ${box.toMap()}');\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'package:hive/hive.dart';\nimport '../services/hive_service.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n\n  Map<String, dynamic> prayerData = {};\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    final data = await _hiveService.loadData('prayerData');\n    prayerData = data is Map<String, dynamic> ? data : {};\n  }\n\n  Future<void> initializeMonthlyPrayerStats(int year, int month) async {\n    final keyPrefix = '${year}_${month}_';\n    for (var prayer in ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha']) {\n      final key = keyPrefix + prayer;\n      prayerData[key] = {'done': 15, 'not_done': 15};\n    }\n    await _hiveService.saveData('prayerData', prayerData);\n  }\n\n  Future<void> updatePrayerStats(\n      int year, int month, String prayer, bool done) async {\n    final key = '${year}_${month}_$prayer';\n    if (prayerData.containsKey(key)) {\n      if (done) {\n        prayerData[key]['done']++;\n        prayerData[key]['not_done']--;\n      } else {\n        prayerData[key]['done']--;\n        prayerData[key]['not_done']++;\n      }\n      await _hiveService.saveData('prayerData', prayerData);\n    }\n  }\n\n  Future<void> clearData() async {\n    prayerData = {};\n    await _hiveService.clearData();\n  }\n\n  Future<void> savePrayerData() async {\n    await _hiveService.saveData('prayerData', prayerData);\n  }\n}\n\n\n\n# File: ./widgets/progress_bar.dart\n####################################\n\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double value;\n\n  ProgressBar({required this.value});\n\n  @override\n  Widget build(BuildContext context) {\n    return LinearProgressIndicator(value: value);\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah () said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              '      :       : \"     :                                                                   -  ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n\n\ni can't edit the month number of prayers prayed, it's non editable",
      "created_at": "2024-06-05T21:42:43.851041",
      "sequence_order": 5,
      "parent_id": "17024e3d-f0e6-422f-88f4-334895579e88",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "33f6a004-31f6-4d93-ab21-2ccfb5514605",
      "role": "assistant",
      "content": "To make the month number of prayers prayed editable, you need to adjust the implementation to ensure that the fields are editable in the `EditDetailsScreen` for the selected month. Here are the changes required to achieve this:\n\n1. **Update the `_buildPrayerRow` method to use an editable text field:**\n\nModify the `_buildPrayerRow` method in `edit_details_screen.dart` to allow users to edit the number of prayers prayed for the selected month. Ensure the text controllers are properly initialized and utilized.\n\n### Updated `_buildPrayerRow` Method\n\n```dart\n  Widget _buildPrayerRow(PrayerProvider prayerProvider, String prayer) {\n    final prayerData =\n        prayerProvider.getPrayerData()['yearlyData']?[_selectedYear.toString()];\n\n    final prayerPercentage = prayerData?[prayer]?['percentMissed'] ?? 0;\n\n    // Initialize the text controller for the prayer if not already done\n    _controllers[prayer] ??= TextEditingController();\n\n    return Padding(\n      padding: REdgeInsets.symmetric(vertical: 4.0),\n      child: Row(\n        mainAxisAlignment: MainAxisAlignment.spaceBetween,\n        children: [\n          Expanded(\n              flex: 2,\n              child: Text(\n                prayer,\n                style: TextStyle(color: Colors.black),\n              )),\n          Expanded(\n            child: AmanaInputField(\n              controller: _controllers[prayer]!\n                ..text = prayerPercentage.toString(),\n              sufixIcon: Icons.percent_outlined,\n              onChange: (val) {},\n              label: \"Missed\",\n              keyboardType: TextInputType.number,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n```\n\n2. **Ensure Prayer Data is Editable and Saveable:**\n\nModify the `savePrayerData` and `updatePrayerData` methods in `PrayerProvider` to handle saving the updated prayer data.\n\n### Updated `updatePrayerData` Method in `PrayerProvider`\n\n```dart\n  void updatePrayerData(\n      String prayer, int year, int done, int notDone, int percentage) {\n    final key = '${year}_${_selectedMonth}_${prayer}'; // Update the key format\n    _prayerData[key] = {\n      'done': done,\n      'not_done': notDone,\n      'percentage': percentage\n    };\n    notifyListeners();\n  }\n```\n\n3. **Add a Method to Save Data to Hive:**\n\nEnsure the data is saved to Hive when the user updates the prayer details.\n\n### Updated `savePrayerData` Method in `PrayerProvider`\n\n```dart\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n```\n\n4. **Ensure the Changes are Reflected in the UI:**\n\nUpdate the `save` button logic to properly calculate and save the edited prayer data.\n\n### Updated `save` Button Logic\n\n```dart\n              AmanaButton(\n                onPress: () {\n                  for (var prayer in prayerProvider.prayers) {\n                    final percentage =\n                        int.tryParse(_controllers[prayer]!.text) ?? 0;\n                    prayerProvider.updatePrayerData(\n                      prayer,\n                      _selectedYear!,\n                      (30 * (1 - (percentage / 100))).round(), // Assuming 30 days in a month\n                      (30 * (percentage / 100)).round(),\n                      percentage,\n                    );\n                  }\n                  prayerProvider.savePrayerData();\n                  Navigator.pushAndRemoveUntil(\n                      context,\n                      MaterialPageRoute(builder: (context) => HomeScreen()),\n                      (route) => false);\n                },\n                label: \"Save\",\n                isAppLevel: true,\n              ),\n```\n\nWith these changes, the `EditDetailsScreen` should now allow users to edit the number of prayers prayed for each month. Make sure the controllers are correctly initialized and used to reflect the data in the UI. The `save` button logic should correctly save the updated prayer data back to the `PrayerProvider` and Hive database.",
      "created_at": "2024-06-05T21:43:13.256419",
      "sequence_order": 6,
      "parent_id": "aaa2d424-d4c4-4989-9291-8c8596ec3c20",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": true
      }
    },
    {
      "id": "aaa279f3-7fc0-4a4e-b877-c36f8daac8a6",
      "role": "user",
      "content": "return all modified files in their full complete states so i can copy and paste",
      "created_at": "2024-06-05T21:43:34.262239",
      "sequence_order": 7,
      "parent_id": "33f6a004-31f6-4d93-ab21-2ccfb5514605",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "503279d0-af52-405b-b944-bcf9bbafd6f8",
      "role": "assistant",
      "content": "Sure, here are the complete updated files with all the necessary changes:\n\n### File: `./screens/edit_details_screen.dart`\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_month_drop_down.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../platform_specific_widget/amana_drop_down.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({super.key});\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  String? _selectedMonth;\n  final Map<String, TextEditingController> _controllers = {};\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    for (var prayer in prayerProvider.prayers) {\n      _controllers[prayer] = TextEditingController();\n    }\n  }\n\n  @override\n  void dispose() {\n    _controllers.forEach((_, controller) => controller.dispose());\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return AmanaScaffold(\n      title: \"Edit Details\",\n      body: SingleChildScrollView(\n        child: Padding(\n          padding: REdgeInsets.all(16.0),\n          child: Column(\n            crossAxisAlignment:\n                kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n            children: [\n              Text(\n                'Pick each year and reflect, add what percentage you estimate you missed that year.',\n                style: TextStyle(fontSize: 18, color: Colors.black),\n              ),\n              SizedBox(height: 20.h),\n              _buildYearDropdown(prayerProvider),\n              SizedBox(height: 20.h),\n              _selectedYear != null && _selectedYear != 0\n                  ? _buildMonthDropDown(prayerProvider)\n                  : Text(\"Selecting Month\"),\n              SizedBox(height: 20.h),\n              if (_selectedYear != null &&\n                  _selectedYear != 0 &&\n                  _selectedMonth != null &&\n                  _selectedMonth != \"\")\n                ...prayerProvider.prayers\n                    .map((prayer) => _buildPrayerRow(prayerProvider, prayer)),\n              SizedBox(height: 16.h),\n              AmanaButton(\n                onPress: () {\n                  for (var prayer in prayerProvider.prayers) {\n                    final percentage =\n                        int.tryParse(_controllers[prayer]!.text) ?? 0;\n                    prayerProvider.updatePrayerData(\n                      prayer,\n                      _selectedYear!,\n                      (30 * (1 - (percentage / 100))).round(), // Assuming 30 days in a month\n                      (30 * (percentage / 100)).round(),\n                      percentage,\n                    );\n                  }\n                  prayerProvider.savePrayerData();\n                  Navigator.pushAndRemoveUntil(\n                      context,\n                      MaterialPageRoute(builder: (context) => HomeScreen()),\n                      (route) => false);\n                },\n                label: \"Save\",\n                isAppLevel: true,\n              ),\n              SizedBox(height: 16.h),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildYearDropdown(PrayerProvider prayerProvider) {\n    final startYear = prayerProvider.startYear;\n    final endYear = prayerProvider.endYear;\n\n    return AmanaDropDown(\n      value: _selectedYear,\n      items: List.generate(endYear - startYear + 2, (index) {\n        final year = (index == 0) ? 0 : startYear + (index - 1);\n        return {\n          \"value\": year,\n          \"child\": year == 0 ? Text(\"Select Year\") : Text('$year'),\n        };\n      }),\n      onChanged: (newValue) {\n        setState(() {\n          _selectedYear = newValue;\n        });\n      },\n      labelText: 'Select Year',\n    );\n  }\n\n  Widget _buildMonthDropDown(PrayerProvider provider) {\n    return AmanaMonthDropDown(\n        items: List.generate(13, (index) {\n          final month = (index == 0) ? \"\" : provider.monthsList[index - 1];\n          return {\n            \"value\": month,\n            \"child\": month == \"\" ? Text(\"Select Month\") : Text('$month'),\n          };\n        }),\n        onChanged: (val) {\n          setState(() {\n            _selectedMonth = val.toString();\n          });\n        },\n        value: _selectedMonth ?? \"\",\n        labelText: \"Select Month\");\n  }\n\n  Widget _buildPrayerRow(PrayerProvider prayerProvider, String prayer) {\n    final prayerData =\n        prayerProvider.getPrayerData()['yearlyData']?[_selectedYear.toString()];\n\n    final prayerPercentage = prayerData?[prayer]?['percentMissed'] ?? 0;\n\n    // Initialize the text controller for the prayer if not already done\n    _controllers[prayer] ??= TextEditingController();\n\n    return Padding(\n      padding: REdgeInsets.symmetric(vertical: 4.0),\n      child: Row(\n        mainAxisAlignment: MainAxisAlignment.spaceBetween,\n        children: [\n          Expanded(\n              flex: 2,\n              child: Text(\n                prayer,\n                style: TextStyle(color: Colors.black),\n              )),\n          Expanded(\n            child: AmanaInputField(\n              controller: _controllers[prayer]!\n                ..text = prayerPercentage.toString(),\n              sufixIcon: Icons.percent_outlined,\n              onChange: (val) {},\n              label: \"Missed\",\n              keyboardType: TextInputType.number,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n```\n\n### File: `./providers/prayer_provider.dart`\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  bool isDataLoaded = false;\n  Map<String, dynamic> _prayerData = {};\n  int startYear = 2020;\n  int endYear = 2023;\n  List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  List<String> monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService);\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData ?? {};\n    isDataLoaded = true;\n    notifyListeners();\n  }\n\n  Future<void> initializeMonthlyPrayerStats(int year, int month) async {\n    await _prayerService.initializeMonthlyPrayerStats(year, month);\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerStats(\n      int year, int month, String prayer, bool done) async {\n    await _prayerService.updatePrayerStats(year, month, prayer, done);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    return _prayerData.containsKey(key) ? _prayerData[key]['done'] : 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    return _prayerData.containsKey(key) ? _prayerData[key]['not_done'] : 0;\n  }\n\n  double getPrayerCompletionPercentageForMonth(\n      int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    if (_prayerData.containsKey(key)) {\n      final done = _prayerData[key]['done'];\n      final total = done + _prayerData[key]['not_done'];\n      return (done / total) * 100;\n    }\n    return 0.0;\n  }\n\n  Future<void> resetApplication() async {\n    await _prayerService.clearData();\n    _prayerData = {};\n    notifyListeners();\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    for (int year = startYear; year <= endYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final keyPrefix = '${year}_${month}_';\n        for (var prayer in prayers) {\n          final key = keyPrefix + prayer;\n          final totalDays = DateTime(year, month + 1, 0).day;\n          final missedDays =\n              (totalDays * (percentageMissedByYear[year]! / 100)).round();\n          _prayerData[key] = {\n            'done': totalDays - missedDays,\n            'not_done': missedDays\n          };\n        }\n",
      "created_at": "2024-06-05T21:44:41.015963",
      "sequence_order": 8,
      "parent_id": "aaa279f3-7fc0-4a4e-b877-c36f8daac8a6",
      "metadata": {
        "status": "finished_partial_completion",
        "weight": 1,
        "end_turn": false
      }
    },
    {
      "id": "f7b65890-5f77-41df-b804-74ad2e34c5e3",
      "role": "assistant",
      "content": "      }\n    }\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    percentageMissedByYear.forEach((year, percentage) {\n      for (int month = 1; month <= 12; month++) {\n        for (var prayer in prayers) {\n          final key = '${year}_${month}_$prayer';\n          if (_prayerData.containsKey(key)) {\n            final totalDays = DateTime(year, month + 1, 0).day;\n            final missedDays = (totalDays * (percentage / 100)).round();\n            _prayerData[key]['done'] = totalDays - missedDays;\n            _prayerData[key]['not_done'] = missedDays;\n          }\n        }\n      }\n    });\n    notifyListeners();\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerData;\n  }\n\n  void updatePrayerData(\n      String prayer, int year, int done, int notDone, int percentage) {\n    final key = '${year}_${_selectedMonth}_${prayer}'; // Update the key format\n    _prayerData[key] = {\n      'done': done,\n      'not_done': notDone,\n      'percentage': percentage\n    };\n    notifyListeners();\n  }\n\n  void saveBirthYear(int birthYear) {\n    _prayerData['birthYear'] = birthYear;\n    notifyListeners();\n  }\n}\n```\n\n### File: `./platform_specific_widget/amana_input_field.dart`\n\n```dart\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n```\n\nWith these modifications, you should be able to edit the month number of prayers prayed.",
      "created_at": "2024-06-05T21:45:28.826436",
      "sequence_order": 9,
      "parent_id": "503279d0-af52-405b-b944-bcf9bbafd6f8",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": true
      }
    },
    {
      "id": "aaa2db92-acb0-4b08-8193-a303ffb48a06",
      "role": "user",
      "content": "Still can't edit anything and also clicking the pray button, it does nothing, think step by step about how to get it to do the goal which is to identify month by month how many prayers I missed and am writing a flutter program to be able to easily set a percentage missed in a settings screen and in edit details you can drill down month by month to set the 5 daily prayers from fajir thuhur asr maghrib and isha percentages for that year and that month. I think we should set a datamodel that makes sense where each month has total missed, total prayed, total percentage missed, and total percentage prayed derived and set each time something is changed. it should use Hive service as a db and should be really simple for web, android using material and ios using Cupertino, thinks tep by step about how to do this best and write a flutter program with a homescreen showcasing the total prayed out of total possible as a progress bar on the top with a number showing the total on the right and the number for total prayed on the left and 5 buttons with percentage progress bars for each prayer so you can press then and increment that prayer's total. When pressed it should go to the \"furthest back\" oldest prayer missed, so for instance, if you prayed 50% of 2024 it will go back to the end of June and start of july and start adding that prayer again, everything before that will have an indicator for that prayer in the database saying it's done when the button is pushed the top bar should indicate progress as well as that current buttons bar.\n\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./prayer_record.dart\n#############################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int fajrMissed;\n\n  @HiveField(3)\n  int dhuhrMissed;\n\n  @HiveField(4)\n  int asrMissed;\n\n  @HiveField(5)\n  int maghribMissed;\n\n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./main.dart\n####################\n\nimport 'package:flutter/material.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_record.dart';\nimport 'models/prayer_data.dart';\nimport 'myApp.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  await Hive.initFlutter(); // Ensuring Hive is initialized correctly\n\n  // Delete the existing Hive box\n  await Hive.deleteBoxFromDisk('prayerBox');\n\n  // Registering the Hive adapters\n  Hive.registerAdapter(PrayerRecordAdapter());\n  Hive.registerAdapter(PrayerDataAdapter());\n\n  final hiveService = HiveService();\n  await hiveService.init();\n\n  runApp(MyApp(\n    hiveService: hiveService,\n  ));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./prayer_record.g.dart\n###############################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  bool isDataLoaded = false;\n  Map<String, dynamic> _prayerData = {};\n  int startYear = 2022;\n  int endYear = 2023;\n  List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  List<String> monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService);\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData ?? {};\n    isDataLoaded = true;\n    notifyListeners();\n  }\n\n  Future<void> initializeMonthlyPrayerStats(int year, int month) async {\n    await _prayerService.initializeMonthlyPrayerStats(year, month);\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerStats(\n      int year, int month, String prayer, bool done) async {\n    await _prayerService.updatePrayerStats(year, month, prayer, done);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    return _prayerData.containsKey(key) ? _prayerData[key]['done'] : 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    return _prayerData.containsKey(key) ? _prayerData[key]['not_done'] : 0;\n  }\n\n  double getPrayerCompletionPercentageForMonth(\n      int year, int month, String prayer) {\n    final key = '${year}_${month}_$prayer';\n    if (_prayerData.containsKey(key)) {\n      final done = _prayerData[key]['done'];\n      final total = done + _prayerData[key]['not_done'];\n      return (done / total) * 100;\n    }\n    return 0.0;\n  }\n\n  Future<void> resetApplication() async {\n    await _prayerService.clearData();\n    _prayerData = {};\n    notifyListeners();\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    for (int year = startYear; year <= endYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final keyPrefix = '${year}_${month}_';\n        for (var prayer in prayers) {\n          final key = keyPrefix + prayer;\n          final totalDays = DateTime(year, month + 1, 0).day;\n          final missedDays =\n              (totalDays * (percentageMissedByYear[year]! / 100)).round();\n          _prayerData[key] = {\n            'done': totalDays - missedDays,\n            'not_done': missedDays\n          };\n        }\n      }\n    }\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    percentageMissedByYear.forEach((year, percentage) {\n      for (int month = 1; month <= 12; month++) {\n        for (var prayer in prayers) {\n          final key = '${year}_${month}_$prayer';\n          if (_prayerData.containsKey(key)) {\n            final totalDays = DateTime(year, month + 1, 0).day;\n            final missedDays = (totalDays * (percentage / 100)).round();\n            _prayerData[key]['done'] = totalDays - missedDays;\n            _prayerData[key]['not_done'] = missedDays;\n          }\n        }\n      }\n    });\n    notifyListeners();\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerData;\n  }\n\n  void updatePrayerData(\n      String prayer, int year, int done, int notDone, int percentage) {\n    final key = '${year}_${DateTime.now().month}_$prayer';\n    _prayerData[key] = {\n      'done': done,\n      'not_done': notDone,\n      'percentage': percentage\n    };\n    notifyListeners();\n  }\n\n  void saveBirthYear(int birthYear) {\n    _prayerData['birthYear'] = birthYear;\n    notifyListeners();\n  }\n}\n\n\n\n# File: ./models/prayer_record.dart\n####################################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year = 2023;\n\n  @HiveField(1)\n  int month = 1;\n\n  @HiveField(2)\n  int fajrMissed = 0;\n\n  @HiveField(3)\n  int dhuhrMissed = 0;\n\n  @HiveField(4)\n  int asrMissed = 0;\n\n  @HiveField(5)\n  int maghribMissed = 0;\n\n  @HiveField(6)\n  int ishaMissed = 0;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./models/prayer_data.dart\n##################################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_data.g.dart';\n\n@HiveType(typeId: 1)\nclass PrayerData {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  Map<String, int> prayersCompleted; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(3)\n  Map<String, int> prayersMissed; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(4)\n  int totalPrayed;\n\n  @HiveField(5)\n  int totalMissed;\n\n  @HiveField(6)\n  double percentagePrayed;\n\n  @HiveField(7)\n  double percentageMissed;\n\n  PrayerData({\n    required this.year,\n    required this.month,\n    required this.prayersCompleted,\n    required this.prayersMissed,\n    required this.totalPrayed,\n    required this.totalMissed,\n    required this.percentagePrayed,\n    required this.percentageMissed,\n  });\n\n  factory PrayerData.fromMap(Map<String, dynamic> map) {\n    return PrayerData(\n      year: map['year'],\n      month: map['month'],\n      prayersCompleted: Map<String, int>.from(map['prayersCompleted']),\n      prayersMissed: Map<String, int>.from(map['prayersMissed']),\n      totalPrayed: map['totalPrayed'],\n      totalMissed: map['totalMissed'],\n      percentagePrayed: map['percentagePrayed'],\n      percentageMissed: map['percentageMissed'],\n    );\n  }\n\n  Map<String, dynamic> toMap() {\n    return {\n      'year': year,\n      'month': month,\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'totalPrayed': totalPrayed,\n      'totalMissed': totalMissed,\n      'percentagePrayed': percentagePrayed,\n      'percentageMissed': percentageMissed,\n    };\n  }\n}\n\n\n\n# File: ./models/prayer_data.g.dart\n####################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_data.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerDataAdapter extends TypeAdapter<PrayerData> {\n  @override\n  final int typeId = 1;\n\n  @override\n  PrayerData read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerData(\n      year: fields[0] as int,\n      month: fields[1] as int,\n      prayersCompleted: (fields[2] as Map).cast<String, int>(),\n      prayersMissed: (fields[3] as Map).cast<String, int>(),\n      totalPrayed: fields[4] as int,\n      totalMissed: fields[5] as int,\n      percentagePrayed: fields[6] as double,\n      percentageMissed: fields[7] as double,\n    );\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerData obj) {\n    writer\n      ..writeByte(8)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.prayersCompleted)\n      ..writeByte(3)\n      ..write(obj.prayersMissed)\n      ..writeByte(4)\n      ..write(obj.totalPrayed)\n      ..writeByte(5)\n      ..write(obj.totalMissed)\n      ..writeByte(6)\n      ..write(obj.percentagePrayed)\n      ..writeByte(7)\n      ..write(obj.percentageMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerDataAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./models/prayer_record.g.dart\n######################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int completedPrayers;\n  final int missedPrayers;\n  final double completionPercentage;\n  final VoidCallback onPrayed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.completedPrayers,\n    required this.missedPrayers,\n    required this.completionPercentage,\n    required this.onPrayed,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: completionPercentage / 100,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text('${completionPercentage.toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / ${completedPrayers + missedPrayers}',\n                style: TextStyle(fontSize: 12)),\n            ElevatedButton(\n              onPressed: onPrayed,\n              child: Text('Pray'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_details_screen.dart\n#############################################\n\nimport 'package:flutter/material.dart';\nimport '../services/hive_service.dart';\nimport '../models/prayer_record.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          // Implement logic to find and increment the oldest missed prayer\n\n          return Column(\n            children: [\n              // Display and update prayer details here\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_month_drop_down.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../platform_specific_widget/amana_drop_down.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({super.key});\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  String? _selectedMonth;\n  final Map<String, TextEditingController> _controllers = {};\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    for (var prayer in prayerProvider.prayers) {\n      _controllers[prayer] = TextEditingController();\n    }\n  }\n\n  @override\n  void dispose() {\n    _controllers.forEach((_, controller) => controller.dispose());\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return AmanaScaffold(\n      title: \"Edit Details\",\n      body: SingleChildScrollView(\n        child: Padding(\n          padding: REdgeInsets.all(16.0),\n          child: Column(\n            crossAxisAlignment:\n                kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n            children: [\n              Text(\n                'Pick each year and reflect, add what percentage you estimate you missed that year.',\n                style: TextStyle(fontSize: 18, color: Colors.black),\n              ),\n              SizedBox(height: 20.h),\n              _buildYearDropdown(prayerProvider),\n              SizedBox(height: 20.h),\n              _selectedYear != null && _selectedYear != 0\n                  ? _buildMonthDropDown(prayerProvider)\n                  : Text(\"Selecting Month\"),\n              SizedBox(height: 20.h),\n              if (_selectedYear != null &&\n                  _selectedYear != 0 &&\n                  _selectedMonth != null &&\n                  _selectedMonth != \"\")\n                ...prayerProvider.prayers\n                    .map((prayer) => _buildPrayerRow(prayerProvider, prayer)),\n              SizedBox(height: 16.h),\n              AmanaButton(\n                onPress: () {\n                  for (var prayer in prayerProvider.prayers) {\n                    final percentage =\n                        int.tryParse(_controllers[prayer]!.text) ?? 0;\n                    prayerProvider.updatePrayerData(\n                      prayer,\n                      _selectedYear!,\n                      (30 * (1 - (percentage / 100)))\n                          .round(), // Assuming 30 days in a month\n                      (30 * (percentage / 100)).round(),\n                      percentage,\n                    );\n                  }\n                  prayerProvider.savePrayerData();\n                  Navigator.pushAndRemoveUntil(\n                      context,\n                      MaterialPageRoute(builder: (context) => HomeScreen()),\n                      (route) => false);\n                },\n                label: \"Save\",\n                isAppLevel: true,\n              ),\n              SizedBox(height: 16.h),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildYearDropdown(PrayerProvider prayerProvider) {\n    final startYear = prayerProvider.startYear;\n    final endYear = prayerProvider.endYear;\n\n    return AmanaDropDown(\n      value: _selectedYear,\n      items: List.generate(endYear - startYear + 2, (index) {\n        final year = (index == 0) ? 0 : startYear + (index - 1);\n        return {\n          \"value\": year,\n          \"child\": year == 0 ? Text(\"Select Year\") : Text('$year'),\n        };\n      }),\n      onChanged: (newValue) {\n        setState(() {\n          _selectedYear = newValue;\n        });\n      },\n      labelText: 'Select Year',\n    );\n  }\n\n  Widget _buildMonthDropDown(PrayerProvider provider) {\n    return AmanaMonthDropDown(\n        items: List.generate(13, (index) {\n          final month = (index == 0) ? \"\" : provider.monthsList[index - 1];\n          return {\n            \"value\": month,\n            \"child\": month == \"\" ? Text(\"Select Month\") : Text('$month'),\n          };\n        }),\n        onChanged: (val) {\n          setState(() {\n            _selectedMonth = val.toString();\n          });\n        },\n        value: _selectedMonth ?? \"\",\n        labelText: \"Select Month\");\n  }\n\n  Widget _buildPrayerRow(PrayerProvider prayerProvider, String prayer) {\n    final prayerData =\n        prayerProvider.getPrayerData()['yearlyData']?[_selectedYear.toString()];\n\n    final prayerPercentage = prayerData?[prayer]?['percentMissed'] ?? 0;\n\n    return Padding(\n      padding: REdgeInsets.symmetric(vertical: 4.0),\n      child: Row(\n        mainAxisAlignment: MainAxisAlignment.spaceBetween,\n        children: [\n          Expanded(\n              flex: 2,\n              child: Text(\n                prayer,\n                style: TextStyle(color: Colors.black),\n              )),\n          Expanded(\n            child: AmanaInputField(\n              controller: TextEditingController(\n                text: prayerPercentage.toString(),\n              ),\n              sufixIcon: Icons.percent_outlined,\n              onChange: (val) {},\n              label: \"Missed\",\n              keyboardType: TextInputType.number,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\n// File: screens/prayer_progress_card_cupertino.dart\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n\n  const PrayerProgressCardCupertino({\n    required this.prayer,\n    required this.year,\n    required this.month,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(\n          prayerProvider.getCompletedPrayersForMonth(year, month, prayer)),\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(\n              prayerProvider.getMissedPrayersForMonth(year, month, prayer)),\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CupertinoActivityIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Container(\n              margin: EdgeInsets.all(8.0),\n              padding: EdgeInsets.all(14.0),\n              decoration: BoxDecoration(\n                color: CupertinoColors.white,\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: CupertinoColors.systemGrey.withOpacity(0.4),\n                    spreadRadius: 1,\n                    blurRadius: 3,\n                    offset: Offset(0, 2),\n                  ),\n                ],\n              ),\n              child: Column(\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                children: [\n                  Text(prayer,\n                      style:\n                          TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n                  SizedBox(height: 8),\n                  ClipRRect(\n                    borderRadius: BorderRadius.circular(8),\n                    child: LinearProgressIndicator(\n                      value: totalPrayers > 0\n                          ? completedPrayers / totalPrayers\n                          : 0,\n                      minHeight: 12,\n                      backgroundColor: CupertinoColors.systemGrey4,\n                      valueColor: AlwaysStoppedAnimation<Color>(\n                          CupertinoColors.activeGreen),\n                    ),\n                  ),\n                  SizedBox(height: 8),\n                  Text(\n                      '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                      style: TextStyle(fontSize: 14)),\n                  Text('$completedPrayers / $totalPrayers',\n                      style: TextStyle(fontSize: 12)),\n                  SizedBox(height: 8),\n                  CupertinoButton.filled(\n                    onPressed: () => prayerProvider.incrementPrayer(prayer),\n                    child: Text('Pray'),\n                  ),\n                ],\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\nimport 'edit_details_screen.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        int totalPrayersPossible = 30 * 5; // Assuming 5 prayers a day\n        int totalMissedPrayers = prayerProvider.prayerData.values.fold(\n            0,\n            (previousValue, element) =>\n                previousValue + (element['not_done'] as int));\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Amana Audit'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.push(\n                    context,\n                    MaterialPageRoute(\n                        builder: (context) => EditDetailsScreen()),\n                  );\n                },\n              ),\n              IconButton(\n                icon: Icon(Icons.refresh),\n                onPressed: () async {\n                  await prayerProvider.resetApplication();\n                  prayerProvider.loadData();\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                Text('Total Prayers Missed'),\n                SizedBox(height: 8),\n                Text('$totalMissedPrayers'),\n                SizedBox(height: 8),\n                LinearProgressIndicator(\n                  value: totalPrayersPossible > 0\n                      ? totalMissedPrayers / totalPrayersPossible\n                      : 0,\n                  minHeight: 16,\n                  backgroundColor: Colors.grey[300],\n                  valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayerProvider.prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        completedPrayers: prayerProvider\n                            .getCompletedPrayersForMonth(2021, 2, prayer),\n                        missedPrayers: prayerProvider.getMissedPrayersForMonth(\n                            2021, 2, prayer),\n                        completionPercentage: prayerProvider\n                            .getPrayerCompletionPercentageForMonth(\n                                2021, 2, prayer),\n                        onPrayed: () {\n                          // Implement the logic to mark the oldest missed prayer as done\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/flutter_build/dart_plugin_registrant.dart\n###############################################################\n\n//\n// Generated file. Do not edit.\n// This file is generated from template in file `flutter_tools/lib/src/flutter_plugins.dart`.\n//\n\n// @dart = 3.3\n\nimport 'dart:io'; // flutter_ignore: dart_io_import.\nimport 'package:path_provider_android/path_provider_android.dart';\nimport 'package:shared_preferences_android/shared_preferences_android.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_linux/path_provider_linux.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_linux/shared_preferences_linux.dart';\nimport 'package:url_launcher_linux/url_launcher_linux.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_windows/path_provider_windows.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_windows/shared_preferences_windows.dart';\nimport 'package:url_launcher_windows/url_launcher_windows.dart';\n\n@pragma('vm:entry-point')\nclass _PluginRegistrant {\n\n  @pragma('vm:entry-point')\n  static void register() {\n    if (Platform.isAndroid) {\n      try {\n        PathProviderAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isIOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isLinux) {\n      try {\n        PathProviderLinux.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusLinuxPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesLinux.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherLinux.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isMacOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isWindows) {\n      try {\n        PathProviderWindows.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusWindowsPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesWindows.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherWindows.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./.dart_tool/build/entrypoint/build.dart\n#################################################\n\n// ignore_for_file: directives_ordering\n// ignore_for_file: no_leading_underscores_for_library_prefixes\nimport 'package:build_runner_core/build_runner_core.dart' as _i1;\nimport 'package:hive_generator/hive_generator.dart' as _i2;\nimport 'package:source_gen/builder.dart' as _i3;\nimport 'dart:isolate' as _i4;\nimport 'package:build_runner/build_runner.dart' as _i5;\nimport 'dart:io' as _i6;\n\nfinal _builders = <_i1.BuilderApplication>[\n  _i1.apply(\n    r'hive_generator:hive_generator',\n    [_i2.getBuilder],\n    _i1.toDependentsOf(r'hive_generator'),\n    hideOutput: true,\n    appliesBuilders: const [r'source_gen:combining_builder'],\n  ),\n  _i1.apply(\n    r'source_gen:combining_builder',\n    [_i3.combiningBuilder],\n    _i1.toNoneByDefault(),\n    hideOutput: false,\n    appliesBuilders: const [r'source_gen:part_cleanup'],\n  ),\n  _i1.applyPostProcess(\n    r'source_gen:part_cleanup',\n    _i3.partCleanup,\n  ),\n];\nvoid main(\n  List<String> args, [\n  _i4.SendPort? sendPort,\n]) async {\n  var result = await _i5.run(\n    args,\n    _builders,\n  );\n  sendPort?.send(result);\n  _i6.exitCode = result;\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter(); // Ensure Hive is initialized correctly\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key) ?? {};\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n\n  void logDatabaseStructure() {\n    print('Database Structure: ${box.toMap()}');\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'package:hive/hive.dart';\nimport '../services/hive_service.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n\n  Map<String, dynamic> prayerData = {};\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    final data = await _hiveService.loadData('prayerData');\n    prayerData = data is Map<String, dynamic> ? data : {};\n  }\n\n  Future<void> initializeMonthlyPrayerStats(int year, int month) async {\n    final keyPrefix = '${year}_${month}_';\n    for (var prayer in ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha']) {\n      final key = keyPrefix + prayer;\n      prayerData[key] = {'done': 15, 'not_done': 15};\n    }\n    await _hiveService.saveData('prayerData', prayerData);\n  }\n\n  Future<void> updatePrayerStats(\n      int year, int month, String prayer, bool done) async {\n    final key = '${year}_${month}_$prayer';\n    if (prayerData.containsKey(key)) {\n      if (done) {\n        prayerData[key]['done']++;\n        prayerData[key]['not_done']--;\n      } else {\n        prayerData[key]['done']--;\n        prayerData[key]['not_done']++;\n      }\n      await _hiveService.saveData('prayerData', prayerData);\n    }\n  }\n\n  Future<void> clearData() async {\n    prayerData = {};\n    await _hiveService.clearData();\n  }\n\n  Future<void> savePrayerData() async {\n    await _hiveService.saveData('prayerData', prayerData);\n  }\n}\n\n\n\n# File: ./widgets/progress_bar.dart\n####################################\n\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double value;\n\n  ProgressBar({required this.value});\n\n  @override\n  Widget build(BuildContext context) {\n    return LinearProgressIndicator(value: value);\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah () said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              '      :       : \"     :                                                                   -  ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n",
      "created_at": "2024-06-05T22:15:27.191639",
      "sequence_order": 10,
      "parent_id": "f7b65890-5f77-41df-b804-74ad2e34c5e3",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "d0f3809d-c1e6-40d8-821d-56c4a969bd19",
      "role": "assistant",
      "content": "Let's go through the steps and updated code necessary to achieve the desired functionality.\n\n### Step-by-Step Breakdown:\n\n1. **Define a Data Model:**\n   - Use `Hive` to create a model that can store data for each month, tracking the number of missed and completed prayers for each of the five daily prayers.\n\n2. **Provider Setup:**\n   - Create a `PrayerProvider` to handle the logic and state management related to prayer data.\n\n3. **Screens:**\n   - **HomeScreen** to show overall progress and buttons for each prayer.\n   - **EditDetailsScreen** to allow the user to set percentages for missed prayers.\n   - **SettingsScreen** to allow additional configurations like birth year.\n\n4. **Widgets:**\n   - Custom widgets for buttons, input fields, and progress indicators.\n\n5. **Service Layer:**\n   - Use `HiveService` for data persistence.\n\n### Updated Code:\n\n#### `myApp.dart`\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/settings_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n              '/settings': (context) => const SettingsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n#### `prayer_record.dart`\n\n```dart\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int fajrMissed;\n\n  @HiveField(3)\n  int dhuhrMissed;\n\n  @HiveField(4)\n  int asrMissed;\n\n  @HiveField(5)\n  int maghribMissed;\n\n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => (30 - fajrMissed) / 30 * 100;\n  double get dhuhrPercentage => (30 - dhuhrMissed) / 30 * 100;\n  double get asrPercentage => (30 - asrMissed) / 30 * 100;\n  double get maghribPercentage => (30 - maghribMissed) / 30 * 100;\n  double get ishaPercentage => (30 - ishaMissed) / 30 * 100;\n}\n```\n\n#### `main.dart`\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_record.dart';\nimport 'myApp.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  await Hive.initFlutter();\n  \n  // Register Hive adapters\n  Hive.registerAdapter(PrayerRecordAdapter());\n  \n  final hiveService = HiveService();\n  await hiveService.init();\n  \n  runApp(MyApp(hiveService: hiveService));\n}\n```\n\n#### `providers/prayer_provider.dart`\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_record.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  bool isDataLoaded = false;\n  List<PrayerRecord> _prayerRecords = [];\n\n  PrayerProvider(this._prayerService);\n\n  Future<void> loadData() async {\n    _prayerRecords = await _prayerService.loadPrayerRecords();\n    isDataLoaded = true;\n    notifyListeners();\n  }\n\n  List<PrayerRecord> get prayerRecords => _prayerRecords;\n\n  void updatePrayer(PrayerRecord record, String prayer, bool missed) {\n    switch (prayer) {\n      case 'Fajr':\n        if (missed) {\n          record.fajrMissed++;\n        } else {\n          record.fajrMissed--;\n        }\n        break;\n      case 'Dhuhr':\n        if (missed) {\n          record.dhuhrMissed++;\n        } else {\n          record.dhuhrMissed--;\n        }\n        break;\n      case 'Asr':\n        if (missed) {\n          record.asrMissed++;\n        } else {\n          record.asrMissed--;\n        }\n        break;\n      case 'Maghrib':\n        if (missed) {\n          record.maghribMissed++;\n        } else {\n          record.maghribMissed--;\n        }\n        break;\n      case 'Isha':\n        if (missed) {\n          record.ishaMissed++;\n        } else {\n          record.ishaMissed--;\n        }\n        break;\n    }\n    _prayerService.savePrayerRecord(record);\n    notifyListeners();\n  }\n}\n```\n\n#### `services/hive_service.dart`\n\n```dart\nimport 'package:hive_flutter/hive_flutter.dart';\nimport '../models/prayer_record.dart';\n\nclass HiveService {\n  late Box<PrayerRecord> _prayerBox;\n\n  Future<void> init() async {\n    _prayerBox = await Hive.openBox<PrayerRecord>('prayerBox');\n  }\n\n  Future<void> savePrayerRecord(PrayerRecord record) async {\n    await _prayerBox.put(record.key, record);\n  }\n\n  Future<List<PrayerRecord>> loadPrayerRecords() async {\n    return _prayerBox.values.toList();\n  }\n\n  Future<void> clearData() async {\n    await _prayerBox.clear();\n  }\n}\n```\n\n#### `services/prayer_service.dart`\n\n```dart\nimport '../models/prayer_record.dart';\nimport 'hive_service.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n\n  PrayerService(this._hiveService);\n\n  Future<List<PrayerRecord>> loadPrayerRecords() async {\n    return await _hiveService.loadPrayerRecords();\n  }\n\n  Future<void> savePrayerRecord(PrayerRecord record) async {\n    await _hiveService.savePrayerRecord(record);\n  }\n\n  Future<void> clearData() async {\n    await _hiveService.clearData();\n  }\n}\n```\n\n#### `screens/home_screen.dart`\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\nimport 'edit_details_screen.dart';\nimport 'settings_screen.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        int totalPrayersPossible = 30 * 5; // Assuming 5 prayers a day\n        int totalMissedPrayers = prayerProvider.prayerRecords\n            .fold(0, (sum, record) => sum + record.totalMissed);\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Amana Audit'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.push(\n                    context,\n                    MaterialPageRoute(builder: (context) => EditDetailsScreen()),\n                  );\n                },\n              ),\n              IconButton(\n                icon: Icon(Icons.settings),\n                onPressed: () {\n                  Navigator.push(\n                    context,\n                    MaterialPageRoute(builder: (context) => SettingsScreen()),\n                  );\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                Text('Total Prayers Missed'),\n                SizedBox(height: 8),\n                Text('$totalMissedPrayers'),\n                SizedBox(height: 8),\n                LinearProgressIndicator(\n                  value: totalPrayersPossible > 0\n                      ? totalMissedPrayers / totalPrayersPossible\n                      : 0,\n                  minHeight: 16,\n                  backgroundColor: Colors.grey[300],\n                  valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n",
      "created_at": "2024-06-05T22:16:31.564983",
      "sequence_order": 11,
      "parent_id": "aaa2db92-acb0-4b08-8193-a303ffb48a06",
      "metadata": {
        "status": "finished_partial_completion",
        "weight": 1,
        "end_turn": false
      }
    },
    {
      "id": "bf26b2b4-22d7-4265-9c06-7f4873b64d2e",
      "role": "assistant",
      "content": "                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayerProvider.prayerRecords\n                        .map((record) => PrayerProgressCardMaterial(\n                              prayer: 'Fajr',\n                              completedPrayers: record.fajrMissed,\n                              missedPrayers: 30 - record.fajrMissed,\n                              completionPercentage: record.fajrPercentage,\n                              onPrayed: () {\n                                prayerProvider.updatePrayer(\n                                    record, 'Fajr', true);\n                              },\n                            ))\n                        .toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n```\n\n#### `screens/prayer_progress_card_material.dart`\n\n```dart\nimport 'package:flutter/material.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int completedPrayers;\n  final int missedPrayers;\n  final double completionPercentage;\n  final VoidCallback onPrayed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.completedPrayers,\n    required this.missedPrayers,\n    required this.completionPercentage,\n    required this.onPrayed,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: completionPercentage / 100,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text('${completionPercentage.toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / ${completedPrayers + missedPrayers}',\n                style: TextStyle(fontSize: 12)),\n            ElevatedButton(\n              onPressed: onPrayed,\n              child: Text('Pray'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\nThis structure should help you manage and display prayer data effectively, allowing users to track their progress and update their records interactively.",
      "created_at": "2024-06-05T22:17:14.476168",
      "sequence_order": 12,
      "parent_id": "d0f3809d-c1e6-40d8-821d-56c4a969bd19",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": true
      }
    }
  ]
}
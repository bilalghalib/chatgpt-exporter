{
  "id": "0d3c5688-0027-4dda-9ae3-ca9c21feabad",
  "source": "chatgpt",
  "title": "Prayer Data Calculation Fixes",
  "created_at": "2024-06-02T14:25:42.550611",
  "updated_at": "2024-06-03T15:57:38.720688",
  "summary": null,
  "message_count": 25,
  "messages": [
    {
      "id": "aaa25619-e7a8-4838-bd67-e2dc9951cf62",
      "role": "user",
      "content": "review this code, why are the counts off for the top bar and each button on the main screen? It should count the total prayers missed on the top right bar and for each prayer what % that prayer has been missed, what are your advice to fix the code?\n\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final PrayerProvider prayerProvider;\n\n  const MyApp({super.key, required this.prayerProvider});\n\n  @override\n  Widget build(BuildContext context) {\n    return ChangeNotifierProvider.value(\n      value: prayerProvider,\n      child: AmanaMaterialApp(\n        title: 'Amana Audit',\n        debugShowCheckedModeBanner: false,\n        theme: ThemeData(\n            fontFamily: \"OpenSans\",\n            scaffoldBackgroundColor: Colors.grey[100],\n            primarySwatch: Colors.blue),\n        initialRoute: '/',\n        routes: {\n          '/': (context) => const HomeScreen(),\n          '/year-selection': (context) => const YearSelectionScreen(),\n          '/edit-details': (context) => const EditDetailsScreen()\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./main.dart\n####################\n\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'providers/prayer_provider.dart';\nimport '../services/prayer_service.dart';\nimport '../services/hive_service.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  final prayerService = PrayerService(hiveService);\n  final prayerProvider = PrayerProvider(prayerService);\n  await prayerProvider.loadData();\n  runApp(MyApp(\n    prayerProvider: prayerProvider,\n  ));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2020;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  int get percentageMissed => prayerData['percentageMissed'] ?? 25;\n  int get taqwaBuffer => prayerData['taqwaBuffer'] ?? 5;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    return _calculateTotalPossiblePrayers(startYear, endYear);\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var year = startYear; year <= endYear; year++) {\n      totalPrayers += _calculateYearlyTotalPossible(year);\n    }\n    return totalPrayers;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  void updatePercentageMissed(int year, int percentage) {\n    prayerData['yearlyData'][year.toString()].forEach((prayerData) {\n      prayerData['percentageMissed'] = percentage;\n      prayerData['prayersMissed'] = (365 * 5 * percentage / 100).round();\n      prayerData['prayersCompleted'] = (365 * 5) - prayerData['prayersMissed'];\n    });\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    await _prayerService.updatePrayerData(\n        prayer, year, prayersCompleted, prayersMissed, percentageMissed);\n    notifyListeners();\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'startMonth': 1,\n      'endYear': currentYear,\n      'endMonth': DateTime.now().month,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': 0,\n            }\n        }\n      }\n    };\n  }\n\n  Future<void> initializeDefaultPrayerData() async {\n    _setDefaultPrayerData();\n    await savePrayerData();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    var prayerData = _prayerService.prayerData;\n    prayerData['yearlyData'] = {};\n    for (int year = startYear; year <= endYear; year++) {\n      prayerData['yearlyData'][year.toString()] = {\n        for (var prayer in prayers)\n          prayer: {\n            'percentMissed': percentageMissedByYear[year]!,\n            'prayersCompleted': getTotalPrayersForYear(year) -\n                (getTotalPrayersForYear(year) *\n                        percentageMissedByYear[year]! /\n                        100)\n                    .round(),\n            'prayersMissed': (getTotalPrayersForYear(year) *\n                    percentageMissedByYear[year]! /\n                    100)\n                .round(),\n          }\n      };\n    }\n    notifyListeners();\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return _prayerService.getTotalPrayersForYear(year);\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    return _prayerService.getCompletedPrayersForPrayerType(prayer);\n  }\n\n  Future<bool> resetApplication() async {\n    bool result = await _prayerService.resetApplication();\n    if (result) {\n      notifyListeners();\n    }\n    return result;\n  }\n\n  void sharePrayerData() {\n    _prayerService.sharePrayerData();\n  }\n\n  int getStreak() {\n    return 0; // Placeholder\n  }\n\n  double getEPPD() {\n    return 0.0; // Placeholder\n  }\n\n  int getCompletionTime() {\n    return 0; // Placeholder\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    await _prayerService.saveBirthYear(birthYear);\n    notifyListeners();\n  }\n\n  int _calculateTotalPossiblePrayers(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] != null) {\n      for (var prayer in prayers) {\n        totalPossible += (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersMissed'] as num)\n                .toInt() +\n            (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersCompleted'] as num)\n                .toInt();\n      }\n    }\n    return totalPossible;\n  }\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\n//prayer progress card material . dart\nimport '../platform_specific_widget/amana_button.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardMaterial({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers =\n        prayerProvider.getCompletedPrayersForPrayerType(prayer);\n\n    return Card(\n      child: Padding(\n        padding: REdgeInsets.all(14),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8).r,\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0 ? (completedPrayers / totalPrayers).clamp(0, 1) : 0,\n                minHeight: 12.h,\n                backgroundColor: Colors.grey[300],\n                valueColor:\n                    const AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text(\n                '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              label: 'Pray',\n              isAppLevel: false,\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport '../platform_specific_widget/amana_drop_down.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_month_drop_down.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({super.key});\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n\n  String? _selectedMonth;\n  final Map<String, TextEditingController> _controllers = {};\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    for (var prayer in prayerProvider.prayers) {\n      _controllers[prayer] = TextEditingController();\n    }\n  }\n\n  @override\n  void dispose() {\n    _controllers.forEach((_, controller) => controller.dispose());\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return AmanaScaffold(\n      title: \"Edit Details\",\n      body: SingleChildScrollView(\n        child: Padding(\n          padding: REdgeInsets.all(16.0),\n          child: Column(\n            crossAxisAlignment:\n                kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n            children: [\n              Text(\n                'Pick each year and reflect, add what percentage you estimate you missed that year.',\n                style: TextStyle(fontSize: 18, color: Colors.black),\n              ),\n              SizedBox(height: 20.h),\n              _buildYearDropdown(prayerProvider),\n              SizedBox(height: 20.h),\n              _selectedYear != null && _selectedYear != 0\n                  ? _buildMonthDropDown(prayerProvider)\n                  : Text(\"Selecting Month\"),\n              SizedBox(\n                height: 20.h,\n              ),\n              if (_selectedYear != null &&\n                  _selectedYear != 0 &&\n                  _selectedMonth != null &&\n                  _selectedMonth != \"\")\n                ...prayerProvider.prayers\n                    .map((prayer) => _buildPrayerRow(prayerProvider, prayer)),\n              SizedBox(height: 16.h),\n              kIsWeb\n                  ? AmanaButton(\n                      onPress: () {\n                        for (var prayer in prayerProvider.prayers) {\n                          final percentage =\n                              int.tryParse(_controllers[prayer]!.text) ?? 0;\n                          prayerProvider.updatePrayerData(\n                            prayer,\n                            _selectedYear!,\n                            (365 * percentage / 100).round(),\n                            (365 - (365 * percentage / 100)).round(),\n                            percentage,\n                          );\n                        }\n                        prayerProvider.savePrayerData();\n                        Navigator.pushAndRemoveUntil(\n                            context,\n                            MaterialPageRoute(\n                                builder: (context) => HomeScreen()),\n                            (route) => false);\n                      },\n                      label: \"Save\",\n                      isAppLevel: true)\n                  : AmanaButton(\n                      onPress: () {\n                        for (var prayer in prayerProvider.prayers) {\n                          final percentage =\n                              int.tryParse(_controllers[prayer]!.text) ?? 0;\n                          prayerProvider.updatePrayerData(\n                            prayer,\n                            _selectedYear!,\n                            (365 * percentage / 100).round(),\n                            (365 - (365 * percentage / 100)).round(),\n                            percentage,\n                          );\n                        }\n                        prayerProvider.savePrayerData();\n                        Navigator.pushAndRemoveUntil(\n                            context,\n                            MaterialPageRoute(\n                                builder: (context) => HomeScreen()),\n                            (route) => false);\n                      },\n                      label: \"Save\",\n                      isAppLevel: true),\n              SizedBox(height: 16.h),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildYearDropdown(PrayerProvider prayerProvider) {\n    final startYear = prayerProvider.startYear;\n    final endYear = prayerProvider.endYear;\n\n    return AmanaDropDown(\n      value: _selectedYear,\n      items: List.generate(endYear - startYear + 2, (index) {\n        final year = (index == 0) ? 0 : startYear + (index - 1);\n        return {\n          \"value\": year,\n          \"child\": year == 0 ? Text(\"Select Year\") : Text('$year'),\n        };\n      }),\n      onChanged: (newValue) {\n        setState(() {\n          _selectedYear = newValue;\n        });\n      },\n      labelText: 'Select Year',\n    );\n  }\n\n  Widget _buildMonthDropDown(PrayerProvider provider) {\n    return AmanaMonthDropDown(\n        items: List.generate(13, (index) {\n          final month = (index == 0) ? \"\" : provider.monthsList[index - 1];\n          return {\n            \"value\": month,\n            \"child\": month == \"\" ? Text(\"Select Month\") : Text('$month'),\n          };\n        }),\n        onChanged: (val) {\n          setState(() {\n            _selectedMonth = val.toString();\n          });\n        },\n        value: _selectedMonth ?? \"\",\n        labelText: \"Select Month\");\n  }\n\n  Widget _buildPresetOptions(PrayerProvider provider) {\n    return Column(\n      crossAxisAlignment: CrossAxisAlignment.start,\n      children: [\n        ListTile(\n          leading: Icon(Icons.check_circle_outline),\n          title: Text('Set all years to a specific percentage'),\n          onTap: () {\n            showDialog(\n              context: context,\n              builder: (context) {\n                int percentage = 50;\n                return AlertDialog(\n                  title: Text('Set Percentage for All Years'),\n                  content: StatefulBuilder(\n                    builder: (context, setState) {\n                      return Slider(\n                        value: percentage.toDouble(),\n                        min: 0,\n                        max: 100,\n                        divisions: 20,\n                        label: '$percentage%',\n                        onChanged: (value) {\n                          setState(() {\n                            percentage = value.round();\n                          });\n                        },\n                      );\n                    },\n                  ),\n                  actions: [\n                    TextButton(\n                      onPressed: () {\n                        Navigator.pop(context);\n                      },\n                      child: Text('Cancel'),\n                    ),\n                    TextButton(\n                      onPressed: () {\n                        Map<int, int> percentageMissedByYear = {};\n                        for (int year = provider.startYear;\n                            year <= provider.endYear;\n                            year++) {\n                          percentageMissedByYear[year] = percentage;\n                        }\n                        provider.applyPresetOption(percentageMissedByYear);\n                        Navigator.pop(context);\n                      },\n                      child: Text('Apply'),\n                    ),\n                  ],\n                );\n              },\n            );\n          },\n        ),\n      ],\n    );\n  }\n\n  Widget _buildPrayerRow(PrayerProvider prayerProvider, String prayer) {\n    final prayerData =\n        prayerProvider.getPrayerData()['yearlyData'][_selectedYear.toString()];\n\n    // Add null check here\n    if (prayerData == null || prayerData[prayer] == null) {\n      return Container();\n    }\n\n    final prayerPercentage = prayerData[prayer]['percentMissed'];\n\n    return Padding(\n      padding: REdgeInsets.symmetric(vertical: 4.0),\n      child: Row(\n        mainAxisAlignment: MainAxisAlignment.spaceBetween,\n        children: [\n          Expanded(\n              flex: 2,\n              child: Text(\n                prayer,\n                style: TextStyle(color: Colors.black),\n              )),\n          Expanded(\n            child: AmanaInputField(\n              controller: _controllers[prayer]!\n                ..text = prayerPercentage.toString(),\n              sufixIcon: Icons.percent_outlined,\n              onChange: (val) {},\n              label: \"Missed\",\n              keyboardType: TextInputType.number,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(\n        startYear, startMonth, endYear, endMonth, percentageMissedByYear);\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart' as material;\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardCupertino({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers = 0;\n    final startYear = prayerProvider.startYear;\n    final endYear = prayerProvider.endYear;\n\n    for (var year = startYear; year <= endYear; year++) {\n      final yearlyData = prayerProvider.getPrayerData()['yearlyData'] ?? {};\n      final prayerData = yearlyData[year.toString()] ?? {};\n      completedPrayers += (prayerData[prayer]?['prayersCompleted'] ?? 0) as int;\n    }\n\n    return CupertinoCard(\n      child: Padding(\n        padding: REdgeInsets.all(16),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: const TextStyle(\n                    fontWeight: FontWeight.bold, color: CupertinoColors.black)),\n            const SizedBox(height: 8.0),\n            material.LinearProgressIndicator(\n              borderRadius: BorderRadius.circular(15),\n              value: totalPrayers > 0 ? (completedPrayers / totalPrayers).clamp(0, 1) : 0,\n              minHeight: 10.h,\n              backgroundColor: CupertinoColors.systemGrey5,\n              valueColor: const AlwaysStoppedAnimation<CupertinoDynamicColor>(\n                  CupertinoColors.systemGreen),\n            ),\n            Text(\n                '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14, color: CupertinoColors.black)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12, color: CupertinoColors.black)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              isAppLevel: false,\n              label: \"Pray\",\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\nclass CupertinoCard extends StatelessWidget {\n  final Widget child;\n\n  const CupertinoCard({Key? key, required this.child}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      decoration: BoxDecoration(\n        color: CupertinoColors.systemGrey6,\n        borderRadius: BorderRadius.circular(12).r,\n        boxShadow: [\n          BoxShadow(\n            color: CupertinoColors.black.withOpacity(0.1),\n            blurRadius: 10,\n            offset: const Offset(0, 2),\n          ),\n        ],\n      ),\n      child: child,\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\nimport 'dart:io' show Platform;\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport 'package:flutter/cupertino.dart' as cupertino;\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../providers/prayer_provider.dart';\nimport '../screens/prayer_progress_card_material.dart';\nimport 'prayer_progress_card_cupertino.dart';\nimport 'year_selection_screen.dart';\nimport 'edit_details_screen.dart';\nimport 'settings_screen.dart';\nimport 'package:fl_chart/fl_chart.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Platform.isIOS\n              ? cupertino.CupertinoPageScaffold(\n                  child: Center(child: cupertino.CupertinoActivityIndicator()))\n              : Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        if (prayerProvider.getPrayerData() == null || prayerProvider.getPrayerData()['yearlyData'] == null) {\n          prayerProvider.initializeDefaultPrayerData();\n          return Platform.isIOS\n              ? cupertino.CupertinoPageScaffold(\n                  child: Center(\n                    child: Text('Prayer data is being initialized...'),\n                  ),\n                )\n              : Scaffold(\n                  body: Center(\n                    child: Text('Prayer data is being initialized...'),\n                  ),\n                );\n        }\n\n        int totalPrayersPossible = prayerProvider.getTotalPrayersPossible();\n        int totalCompletedPrayers = prayerProvider.getTotalCompletedPrayers();\n\n        Widget body = Padding(\n          padding: REdgeInsets.all(16.0),\n          child: Column(\n            crossAxisAlignment:\n                kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n            children: [\n              Text(\n                'Total Prayers',\n                style: kIsWeb\n                    ? TextStyle(\n                        fontSize: 18,\n                        fontWeight: FontWeight.bold,\n                        color: Colors.black)\n                    : Platform.isIOS\n                        ? TextStyle(\n                            fontSize: 18,\n                            fontWeight: FontWeight.bold,\n                            color: cupertino.CupertinoColors.black)\n                        : TextStyle(\n                            fontSize: 18,\n                            fontWeight: FontWeight.bold,\n                            color: Colors.black),\n              ),\n              SizedBox(height: 8.h),\n              Row(\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                children: [\n                  Text(\n                    '$totalCompletedPrayers',\n                    style: kIsWeb\n                        ? TextStyle(\n                            fontSize: 18,\n                            fontWeight: FontWeight.bold,\n                            color: Colors.black)\n                        : Platform.isIOS\n                            ? TextStyle(\n                                fontSize: 18,\n                                fontWeight: FontWeight.bold,\n                                color: cupertino.CupertinoColors.black)\n                            : TextStyle(\n                                fontSize: 18,\n                                fontWeight: FontWeight.bold,\n                                color: Colors.black),\n                  ),\n                  Text(\n                    '/ $totalPrayersPossible',\n                    style: kIsWeb\n                        ? TextStyle(\n                            fontSize: 18,\n                            fontWeight: FontWeight.bold,\n                            color: Colors.black)\n                        : Platform.isIOS\n                            ? TextStyle(\n                                fontSize: 18,\n                                fontWeight: FontWeight.bold,\n                                color: cupertino.CupertinoColors.black)\n                            : TextStyle(\n                                fontSize: 18,\n                                fontWeight: FontWeight.bold,\n                                color: Colors.black),\n                  ),\n                ],\n              ),\n              SizedBox(height: 8.h),\n              ClipRRect(\n                borderRadius: BorderRadius.circular(8),\n                child: LinearProgressIndicator(\n                  value: totalPrayersPossible > 0\n                      ? totalCompletedPrayers / totalPrayersPossible\n                      : 0,\n                  minHeight: 16.h,\n                  backgroundColor: Colors.grey[300],\n                  valueColor: kIsWeb\n                      ? AlwaysStoppedAnimation<Color>(Color(0xff34C759))\n                      : Platform.isIOS\n                          ? AlwaysStoppedAnimation<\n                                  cupertino.CupertinoDynamicColor>(\n                              cupertino.CupertinoColors.systemGreen)\n                          : AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                ),\n              ),\n              SizedBox(height: 16.h),\n              _buildProgressVisualization(prayerProvider),\n              SizedBox(height: 16.h),\n              _buildStreakVisualization(prayerProvider),\n              SizedBox(height: 16.h),\n              _buildEPPDVisualization(prayerProvider),\n              SizedBox(height: 16.h),\n              _buildCompletionTimeVisualization(prayerProvider),\n              SizedBox(height: 16.h),\n              Expanded(\n                child: GridView.count(\n                  crossAxisCount:\n                      kIsWeb && MediaQuery.of(context).size.width > 800 ? 3 : 2,\n                  childAspectRatio: kIsWeb ? 1.8.r : 1.1.r,\n                  crossAxisSpacing: 12.w,\n                  mainAxisSpacing: 12.h,\n                  children: prayerProvider.prayers.map((prayer) {\n                    return kIsWeb\n                        ? PrayerProgressCardMaterial(prayer: prayer)\n                        : Platform.isIOS\n                            ? PrayerProgressCardCupertino(prayer: prayer)\n                            : PrayerProgressCardMaterial(prayer: prayer);\n                  }).toList(),\n                ),\n              ),\n              SizedBox(height: 16.h),\n              AmanaButton(\n                onPress: () async {\n                  if (await prayerProvider.resetApplication()) {\n                    Navigator.push(\n                      context,\n                      MaterialPageRoute(\n                        builder: (context) => const YearSelectionScreen(),\n                      ),\n                    );\n                  }\n                },\n                label: 'Start Over',\n                isAppLevel: true,\n              ),\n              Row(\n                mainAxisAlignment: MainAxisAlignment.spaceEvenly,\n                children: [\n                  kIsWeb\n                      ? AmanaButton(\n                          onPress: prayerProvider.sharePrayerData,\n                          label: 'Share',\n                          isAppLevel: true,\n                        )\n                      : Expanded(\n                          child: AmanaButton(\n                          onPress: prayerProvider.sharePrayerData,\n                          label: 'Share',\n                          isAppLevel: true,\n                        )),\n                  const SizedBox(\n                    width: 8,\n                  ),\n                  kIsWeb\n                      ? AmanaButton(\n                          onPress: () {\n                            Navigator.push(\n                              context,\n                              MaterialPageRoute(\n                                builder: (context) => const EditDetailsScreen(),\n                              ),\n                            );\n                          },\n                          label: 'Edit Details',\n                          isAppLevel: true,\n                        )\n                      : Expanded(\n                          child: AmanaButton(\n                          onPress: () {\n                            Navigator.push(\n                              context,\n                              MaterialPageRoute(\n                                builder: (context) => const EditDetailsScreen(),\n                              ),\n                            );\n                          },\n                          label: 'Edit Details',\n                          isAppLevel: true,\n                        )),\n                ],\n              ),\n              SizedBox(height: 16.h),\n              kIsWeb\n                  ? AmanaButton(\n                      onPress: () {\n                        Navigator.push(\n                          context,\n                          MaterialPageRoute(\n                            builder: (context) => SettingsScreen(),\n                          ),\n                        );\n                      },\n                      label: 'Settings',\n                      isAppLevel: true,\n                    )\n                  : AmanaButton(\n                      onPress: () {\n                        Navigator.push(\n                          context,\n                          MaterialPageRoute(\n                            builder: (context) => SettingsScreen(),\n                          ),\n                        );\n                      },\n                      label: 'Settings',\n                      isAppLevel: true,\n                    ),\n            ],\n          ),\n        );\n\n        return AmanaScaffold(title: \"Amana Audit\", body: body);\n      },\n    );\n  }\n\n  Widget _buildActivityChart(PrayerProvider prayerProvider) {\n    final totalPrayersPossible = prayerProvider.getTotalPrayersPossible();\n    final totalCompletedPrayers = prayerProvider.getTotalCompletedPrayers();\n    final remainingPrayers = totalPrayersPossible - totalCompletedPrayers;\n\n    final currentYear = DateTime.now().year;\n    final age = currentYear - prayerProvider.birthYear;\n    final lifeExpectancy = 70; // Adjust life expectancy as needed\n\n    final yearsTillCompletion =\n        (remainingPrayers / (totalCompletedPrayers / age)).round();\n    final anticipatedCompletionYear = currentYear + yearsTillCompletion;\n\n    return AspectRatio(\n      aspectRatio: 2,\n      child: BarChart(\n        BarChartData(\n          alignment: BarChartAlignment.spaceBetween,\n          titlesData: FlTitlesData(\n            leftTitles: const AxisTitles(),\n            rightTitles: const AxisTitles(),\n            topTitles: const AxisTitles(),\n            bottomTitles: AxisTitles(\n              sideTitles: SideTitles(\n                showTitles: true,\n                getTitlesWidget: (value, meta) {\n                  final year = currentYear + value.toInt();\n                  return Text(year.toString());\n                },\n                reservedSize: 20,\n              ),\n            ),\n          ),\n          barTouchData: BarTouchData(enabled: false),\n          borderData: FlBorderData(show: false),\n          gridData: FlGridData(show: false),\n          barGroups: [\n            BarChartGroupData(\n              x: 0,\n              barRods: [\n                BarChartRodData(\n                  fromY: 0,\n                  toY: totalCompletedPrayers.toDouble(),\n                  color: Colors.green,\n                ),\n              ],\n            ),\n            BarChartGroupData(\n              x: 1,\n              barRods: [\n                BarChartRodData(\n                  fromY: 0,\n                  toY: remainingPrayers.toDouble(),\n                  color: Colors.grey,\n                ),\n              ],\n            ),\n          ],\n          maxY: totalPrayersPossible.toDouble(),\n          extraLinesData: ExtraLinesData(\n            horizontalLines: [\n              HorizontalLine(\n                y: lifeExpectancy.toDouble(),\n                color: Colors.red,\n                strokeWidth: 1,\n                dashArray: [20, 4],\n                label: HorizontalLineLabel(\n                  show: true,\n                  alignment: Alignment.topRight,\n                  style: TextStyle(color: Colors.red),\n                  labelResolver: (line) => 'Life Expectancy',\n                ),\n              ),\n              HorizontalLine(\n                y: anticipatedCompletionYear.toDouble(),\n                color: Colors.blue,\n                strokeWidth: 1,\n                dashArray: [20, 4],\n                label: HorizontalLineLabel(\n                  show: true,\n                  alignment: Alignment.topRight,\n                  style: TextStyle(color: Colors.blue),\n                  labelResolver: (line) => 'Anticipated Completion',\n                ),\n              ),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildStreakVisualization(PrayerProvider prayerProvider) {\n    // Implement streak visualization logic here\n    return Container(); // Return a valid widget\n  }\n\n  Widget _buildEPPDVisualization(PrayerProvider prayerProvider) {\n    // Implement EPPD visualization logic here\n    return Container(); // Return a valid widget\n  }\n\n  Widget _buildProgressVisualization(PrayerProvider prayerProvider) {\n    // Implement completion time visualization logic here\n    return Container(); // Return a valid widget\n  }\n\n  Widget _buildCompletionTimeVisualization(PrayerProvider prayerProvider) {\n    // Implement completion time visualization logic here\n    return Container(); // Return a valid widget\n  }\n}\n\n\n\n# File: ./lib/providers/prayer_provider.dart\n#############################################\n\n\n\n\n# File: ./lib/screens/edit_details_screen.dart\n###############################################\n\n\n\n\n# File: ./lib/screens/year_selection_screen.dart\n#################################################\n\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, dynamic> prayerData = {};\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map) {\n      prayerData =\n          Map<String, dynamic>.from(loadedData.cast<String, dynamic>());\n    } else {\n      _setDefaultPrayerData();\n      savePrayerData();\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> createDetailedBreakdown(\n      int startYear, int endYear, Map<int, int> percentageMissedByYear) async {\n    prayerData['prayerData'] = [\n      for (int year = startYear; year <= endYear; year++)\n        {\n          'year': year,\n          'totalPrayed': 0,\n          'totalMissed': 0,\n          'months': [\n            for (int month = 1; month <= 12; month++)\n              {\n                'monthNumber': month,\n                'totalPrayed': 0,\n                'totalMissed': 0,\n                'weeks': [\n                  for (int week = 1; week <= 5; week++)\n                    {\n                      'weekNumber': week,\n                      'totalPrayed': 0,\n                      'totalMissed': 0,\n                      'days': [\n                        for (int day = 1; day <= 7; day++)\n                          {\n                            'dayNumber': day,\n                            'prayers': [\n                              for (var prayer in prayers)\n                                {'prayerName': prayer, 'missed': false}\n                            ],\n                          },\n                      ],\n                    },\n                ],\n              },\n          ],\n        },\n    ];\n    await savePrayerData();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    if (prayerData['yearlyData'][year.toString()] == null) {\n      prayerData['yearlyData'][year.toString()] = {};\n    }\n    prayerData['yearlyData'][year.toString()][prayer] = {\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'percentMissed': percentageMissed,\n    };\n    await savePrayerData();\n  }\n\n  int getTotalPrayersPossible(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (int year = startYear; year <= endYear; year++) {\n      totalPossible +=\n          isLeapYear(year) ? 366 * prayers.length : 365 * prayers.length;\n    }\n    return totalPossible;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    int completedPrayers = 0;\n    for (var year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      if (prayerData['yearlyData'][year.toString()] != null &&\n          prayerData['yearlyData'][year.toString()][prayer] != null) {\n        completedPrayers += prayerData['yearlyData'][year.toString()][prayer]\n            ['prayersCompleted'] as int;\n      }\n    }\n    return completedPrayers;\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return isLeapYear(year) ? 366 * prayers.length : 365 * prayers.length;\n  }\n\n  int getTotalPrayersForPrayerTypeInYear(String prayer, int year) {\n    int totalPrayers = 0;\n    if (prayerData['yearlyData'][year.toString()] != null &&\n        prayerData['yearlyData'][year.toString()][prayer] != null) {\n      totalPrayers = prayerData['yearlyData'][year.toString()][prayer]\n                  ['prayersCompleted'] +\n              prayerData['yearlyData'][year.toString()][prayer]['prayersMissed']\n          as int;\n    }\n    return totalPrayers;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    for (int year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      var prayerDataForYear = prayerData['yearlyData'][year.toString()][prayer];\n      if (prayerDataForYear == null) {\n        prayerDataForYear = {\n          'prayersCompleted': 0,\n          'prayersMissed': getTotalPrayersForYear(year),\n          'percentMissed': 100,\n        };\n      }\n      int totalPrayersForYear = getTotalPrayersForYear(year);\n      if (prayerDataForYear['prayersCompleted'] < totalPrayersForYear) {\n        prayerDataForYear['prayersCompleted']++;\n        prayerDataForYear['prayersMissed'] =\n            totalPrayersForYear - prayerDataForYear['prayersCompleted'];\n        prayerDataForYear['percentMissed'] =\n            (prayerDataForYear['prayersMissed'] / totalPrayersForYear * 100)\n                .round();\n\n        await savePrayerData();\n        break; // Break after updating the first incomplete year\n      }\n    }\n  }\n\n  Future<void> savePrayerData() async {\n    await _hiveService.saveData('prayerData', prayerData);\n    print('Saved data to Hive: $prayerData');\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'endYear': currentYear,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': 0, // Add this field\n            }\n        }\n      }\n    };\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    shareText += 'Total Completed: ${getTotalCompletedPrayers()}\\n';\n    Share.share(shareText);\n  }\n\n  bool isLeapYear(int year) {\n    return year % 4 == 0 && (year % 100 != 0 || year % 400 == 0);\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    prayerData['birthYear'] = birthYear;\n    await savePrayerData();\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ï·º) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'Ø¹ÙŽÙ†Ù’ Ø£ÙŽØ¨ÙÙŠ Ù‡ÙØ±ÙŽÙŠÙ’Ø±ÙŽØ©ÙŽ Ø±ÙŽØ¶ÙÙŠÙŽ Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù Ø¹ÙŽÙ†Ù’Ù‡Ù Ù‚ÙŽØ§Ù„ÙŽ: Ù‚ÙŽØ§Ù„ÙŽ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù ØµÙŽÙ„Ù‘ÙŽÙ‰ Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ÙˆÙŽØ³ÙŽÙ„Ù‘ÙŽÙ…ÙŽ: \" Ø¥ÙÙ†Ù‘ÙŽ Ø§Ù„Ù„Ù‘ÙŽÙ‡ÙŽ Ø¹ÙŽØ²Ù‘ÙŽ ÙˆÙŽØ¬ÙŽÙ„Ù‘ÙŽ Ù‚ÙŽØ§Ù„ÙŽ: Ù…ÙŽÙ†Ù’ Ø¹ÙŽØ§Ø¯ÙŽÙ‰ Ù„ÙÙŠ ÙˆÙŽÙ„ÙÙŠÙ‘Ù‹Ø§ØŒ ÙÙŽÙ‚ÙŽØ¯Ù’ Ø¢Ø°ÙŽÙ†Ù’ØªÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙŽØ±Ù’Ø¨ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙ‚ÙŽØ±Ù‘ÙŽØ¨ÙŽ Ø¥ÙÙ„ÙŽÙŠÙ‘ÙŽ Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø¨ÙØ´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽØ­ÙŽØ¨Ù‘ÙŽ Ø¥ÙÙ„ÙŽÙŠÙ‘ÙŽ Ù…ÙÙ…Ù‘ÙŽØ§ Ø§ÙÙ’ØªÙŽØ±ÙŽØ¶Ù’ØªÙ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ÙŠÙŽØ²ÙŽØ§Ù„Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ ÙŠÙŽØªÙŽÙ‚ÙŽØ±Ù‘ÙŽØ¨Ù Ø¥ÙÙ„ÙŽÙŠÙ‘ÙŽ Ø¨ÙØ§Ù„Ù†Ù‘ÙŽÙˆÙŽØ§ÙÙÙ„Ù Ø­ÙŽØªÙ‘ÙŽÙ‰ Ø£ÙØ­ÙØ¨Ù‘ÙŽÙ‡ÙØŒ ÙÙŽØ¥ÙØ°ÙŽØ§ Ø£ÙŽØ­Ù’Ø¨ÙŽØ¨Ù’ØªÙÙ‡ÙØŒ ÙƒÙÙ†Ù’ØªÙ Ø³ÙŽÙ…Ù’Ø¹ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØ°ÙÙŠ ÙŠÙŽØ³Ù’Ù…ÙŽØ¹Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽØ¨ÙŽØµÙŽØ±ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØ°ÙÙŠ ÙŠÙØ¨Ù’ØµÙØ±Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽÙŠÙŽØ¯ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØªÙÙŠ ÙŠÙŽØ¨Ù’Ø·ÙØ´Ù Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ±ÙØ¬Ù’Ù„ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØªÙÙŠ ÙŠÙŽÙ…Ù’Ø´ÙÙŠ Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ¥ÙÙ†Ù’ Ø³ÙŽØ£ÙŽÙ„ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹Ù’Ø·ÙÙŠÙŽÙ†Ù‘ÙŽÙ‡ÙØŒ ÙˆÙŽÙ„ÙŽØ¦ÙÙ†Ù’ Ø§Ø³Ù’ØªÙŽØ¹ÙŽØ§Ø°ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹ÙÙŠØ°ÙŽÙ†Ù‘ÙŽÙ‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽØ±ÙŽØ¯Ù‘ÙŽØ¯Ù’ØªÙ Ø¹ÙŽÙ†Ù’ Ø´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽÙ†ÙŽØ§ ÙÙŽØ§Ø¹ÙÙ„ÙÙ‡Ù ØªÙŽØ±ÙŽØ¯Ù‘ÙØ¯ÙÙŠ Ø¹ÙŽÙ†Ù’ Ù†ÙŽÙÙ’Ø³Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØŒ ÙŠÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ø§Ù„Ù’Ù…ÙŽÙˆÙ’ØªÙŽ ÙˆÙŽØ£ÙŽÙ†ÙŽØ§ Ø£ÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ù…ÙŽØ³ÙŽØ§Ø¡ÙŽØªÙŽÙ‡Ù - Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n",
      "created_at": "2024-06-02T14:25:42.561971",
      "sequence_order": 0,
      "parent_id": "c6833196-e5c0-4e5a-a59a-6bd803f53a65",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "8af7bb7d-4204-432e-8742-543d5c91acbe",
      "role": "assistant",
      "content": "",
      "created_at": "2024-06-02T14:26:13.019767",
      "sequence_order": 1,
      "parent_id": "aaa25619-e7a8-4838-bd67-e2dc9951cf62",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "6760d312-f294-446b-9dbd-f430ebc482d3",
      "role": "assistant",
      "content": "To address the issue with the counts for the top bar and each button on the main screen, it's essential to check the logic used to calculate the total prayers missed and the percentage of missed prayers. Here are some potential problems and suggestions to fix them:\n\n### Potential Problems\n1. **Incorrect Data Loading and Initialization**: Ensure that the data is correctly loaded and initialized when the app starts.\n2. **Calculation Errors**: Verify the calculations for the total prayers possible, completed prayers, and missed prayers.\n3. **Inconsistent State Updates**: Ensure that the state is properly updated and notified in the `PrayerProvider`.\n\n### Code Review and Suggestions\n#### Data Initialization\nEnsure that the default data is correctly initialized and loaded.\n\n```dart\nvoid _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'endYear': currentYear,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': getTotalPrayersForYear(currentYear),\n            }\n        }\n      }\n    };\n  }\n```\nEnsure `totalPossible` is calculated correctly for each year.\n\n#### Total Prayers Calculation\nVerify that the methods to calculate total prayers possible and completed are correctly implemented.\n\n```dart\nint getTotalPrayersPossible() {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += getTotalPrayersForYear(int.parse(year));\n    }\n    return totalPossible;\n  }\n\nint getTotalPrayersForYear(int year) {\n    return isLeapYear(year) ? 366 * prayers.length : 365 * prayers.length;\n  }\n\nint getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n```\n\n#### Updating and Saving Data\nEnsure that the methods to update and save prayer data correctly modify the state and persist the changes.\n\n```dart\nFuture<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    if (prayerData['yearlyData'][year.toString()] == null) {\n      prayerData['yearlyData'][year.toString()] = {};\n    }\n    prayerData['yearlyData'][year.toString()][prayer] = {\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'percentMissed': percentageMissed,\n      'totalPossible': getTotalPrayersForYear(year),\n    };\n    await savePrayerData();\n  }\n```\n\n#### Displaying Data in the UI\nEnsure that the UI components correctly reflect the data from `PrayerProvider`.\n\n```dart\n@override\nWidget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers =\n        prayerProvider.getCompletedPrayersForPrayerType(prayer);\n\n    return Card(\n      child: Padding(\n        padding: REdgeInsets.all(14),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8).r,\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0 ? (completedPrayers / totalPrayers).clamp(0, 1) : 0,\n                minHeight: 12.h,\n                backgroundColor: Colors.grey[300],\n                valueColor:\n                    const AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text(\n                '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              label: 'Pray',\n              isAppLevel: false,\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n```\n\n### Summary\n- Ensure data is correctly initialized and loaded.\n- Verify and correct calculations for total prayers, completed prayers, and missed prayers.\n- Ensure state updates are consistent and notify listeners properly.\n- Ensure UI components reflect the data accurately from `PrayerProvider`.\n\nBy thoroughly checking these aspects, the counts and percentages displayed should align correctly with the underlying data.",
      "created_at": "2024-06-02T14:26:13.019936",
      "sequence_order": 2,
      "parent_id": "8af7bb7d-4204-432e-8742-543d5c91acbe",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": true
      }
    },
    {
      "id": "aaa2c469-619a-4f88-8ce3-485219f2b303",
      "role": "user",
      "content": "The total prayers for each year is calculated for each month and then the five prayers for each of the days. the cards represent the prayers for that day, so each month should have the total prayers missed and then fajr prayers missed % thuhur prayer missed percent asr prayer missed percent maghrib prayers missed percent and isha prayers missed percent and they should all be counted up for each available month for the total prayers missed ",
      "created_at": "2024-06-02T14:28:56.304006",
      "sequence_order": 3,
      "parent_id": "6760d312-f294-446b-9dbd-f430ebc482d3",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "e81e8974-fbff-4605-ad22-255c04530baa",
      "role": "assistant",
      "content": "To ensure the correct counts and percentages for missed prayers are displayed for each prayer card and the total missed prayers, let's break down the steps and address the required calculations and display logic. We'll focus on calculating the missed prayers per month and per prayer, then summing these values to get the totals.\n\n### Steps to Fix the Code\n\n1. **Data Calculation for Each Month and Prayer**:\n   Ensure that the data calculation for missed prayers is done correctly for each month and each prayer type. This involves iterating through the months and calculating the percentage missed for each prayer type.\n\n2. **Summing Up Missed Prayers**:\n   Sum up the missed prayers for each month and each prayer type to get the total missed prayers.\n\n3. **Displaying the Data**:\n   Ensure that the UI components correctly display the calculated percentages and totals.\n\n### Detailed Implementation\n\n#### 1. Data Calculation for Each Month and Prayer\n\nUpdate the `saveData` method in `prayer_provider.dart` to calculate the missed prayers for each month and each prayer type:\n\n```dart\nFuture<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) * percentageMissedByYear[year]! / 100).round(),\n              'prayersMissed': (getTotalPrayersForYear(year) * percentageMissedByYear[year]! / 100).round(),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n}\n```\n\n#### 2. Summing Up Missed Prayers\n\nAdd a method to sum up the missed prayers for all months:\n\n```dart\nint getTotalPrayersMissed() {\n  int totalMissed = 0;\n  for (var yearData in prayerData['yearlyData'].values) {\n    for (var prayerData in yearData.values) {\n      totalMissed += (prayerData['prayersMissed'] as num).toInt();\n    }\n  }\n  return totalMissed;\n}\n\nint getTotalMissedPrayersForPrayerType(String prayer) {\n  int totalMissed = 0;\n  for (var yearData in prayerData['yearlyData'].values) {\n    if (yearData[prayer] != null) {\n      totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n    }\n  }\n  return totalMissed;\n}\n```\n\n#### 3. Displaying the Data\n\nUpdate the `HomeScreen` and `PrayerProgressCardMaterial` to display the correct data:\n\n```dart\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        int totalPrayersPossible = prayerProvider.getTotalPrayersPossible();\n        int totalMissedPrayers = prayerProvider.getTotalPrayersMissed();\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Amana Audit'),\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                Text('Total Prayers Missed'),\n                SizedBox(height: 8),\n                Text('$totalMissedPrayers'),\n                SizedBox(height: 8),\n                LinearProgressIndicator(\n                  value: totalPrayersPossible > 0\n                      ? totalMissedPrayers / totalPrayersPossible\n                      : 0,\n                  minHeight: 16,\n                  backgroundColor: Colors.grey[300],\n                  valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayerProvider.prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(prayer: prayer);\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardMaterial({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers = prayerProvider.getCompletedPrayersForPrayerType(prayer);\n    int missedPrayers = prayerProvider.getTotalMissedPrayersForPrayerType(prayer);\n\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer, style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0 ? (missedPrayers / totalPrayers).clamp(0, 1) : 0,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text('${(missedPrayers / totalPrayers * 100).toStringAsFixed(1)}%', style: TextStyle(fontSize: 14)),\n            Text('$missedPrayers / $totalPrayers', style: TextStyle(fontSize: 12)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              label: 'Pray',\n              isAppLevel: false,\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\n### Summary\n- **Calculate missed prayers per month and prayer type**: Ensure each prayer's missed percentage is correctly calculated for every month and summed up for the year.\n- **Sum missed prayers**: Calculate total missed prayers across all months and display it.\n- **Display missed prayers in UI**: Use the updated methods to display the missed prayers count and percentage correctly in the UI components.\n\nBy following these steps, you should be able to ensure that the counts for missed prayers are accurate and displayed correctly.",
      "created_at": "2024-06-02T14:29:43.022895",
      "sequence_order": 4,
      "parent_id": "aaa2c469-619a-4f88-8ce3-485219f2b303",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": true
      }
    },
    {
      "id": "aaa24142-4f4d-47d4-b7c2-f31d4d208d33",
      "role": "user",
      "content": "\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final PrayerProvider prayerProvider;\n\n  const MyApp({super.key, required this.prayerProvider});\n\n  @override\n  Widget build(BuildContext context) {\n    return ChangeNotifierProvider.value(\n      value: prayerProvider,\n      child: AmanaMaterialApp(\n        title: 'Amana Audit',\n        debugShowCheckedModeBanner: false,\n        theme: ThemeData(\n            fontFamily: \"OpenSans\",\n            scaffoldBackgroundColor: Colors.grey[100],\n            primarySwatch: Colors.blue),\n        initialRoute: '/',\n        routes: {\n          '/': (context) => const HomeScreen(),\n          '/year-selection': (context) => const YearSelectionScreen(),\n          '/edit-details': (context) => const EditDetailsScreen()\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./main.dart\n####################\n\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'providers/prayer_provider.dart';\nimport '../services/prayer_service.dart';\nimport '../services/hive_service.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  final prayerService = PrayerService(hiveService);\n  final prayerProvider = PrayerProvider(prayerService);\n  await prayerProvider.loadData();\n  runApp(MyApp(\n    prayerProvider: prayerProvider,\n  ));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2020;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  int get percentageMissed => prayerData['percentageMissed'] ?? 25;\n  int get taqwaBuffer => prayerData['taqwaBuffer'] ?? 5;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    return _calculateTotalPossiblePrayers(startYear, endYear);\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var year = startYear; year <= endYear; year++) {\n      totalPrayers += _calculateYearlyTotalPossible(year);\n    }\n    return totalPrayers;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  void updatePercentageMissed(int year, int percentage) {\n    prayerData['yearlyData'][year.toString()].forEach((prayerData) {\n      prayerData['percentageMissed'] = percentage;\n      prayerData['prayersMissed'] = (365 * 5 * percentage / 100).round();\n      prayerData['prayersCompleted'] = (365 * 5) - prayerData['prayersMissed'];\n    });\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    await _prayerService.updatePrayerData(\n        prayer, year, prayersCompleted, prayersMissed, percentageMissed);\n    notifyListeners();\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'startMonth': 1,\n      'endYear': currentYear,\n      'endMonth': DateTime.now().month,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': 0,\n            }\n        }\n      }\n    };\n  }\n\n  Future<void> initializeDefaultPrayerData() async {\n    _setDefaultPrayerData();\n    await savePrayerData();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    var prayerData = _prayerService.prayerData;\n    prayerData['yearlyData'] = {};\n    for (int year = startYear; year <= endYear; year++) {\n      prayerData['yearlyData'][year.toString()] = {\n        for (var prayer in prayers)\n          prayer: {\n            'percentMissed': percentageMissedByYear[year]!,\n            'prayersCompleted': getTotalPrayersForYear(year) -\n                (getTotalPrayersForYear(year) *\n                        percentageMissedByYear[year]! /\n                        100)\n                    .round(),\n            'prayersMissed': (getTotalPrayersForYear(year) *\n                    percentageMissedByYear[year]! /\n                    100)\n                .round(),\n          }\n      };\n    }\n    notifyListeners();\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return _prayerService.getTotalPrayersForYear(year);\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    return _prayerService.getCompletedPrayersForPrayerType(prayer);\n  }\n\n  Future<bool> resetApplication() async {\n    bool result = await _prayerService.resetApplication();\n    if (result) {\n      notifyListeners();\n    }\n    return result;\n  }\n\n  void sharePrayerData() {\n    _prayerService.sharePrayerData();\n  }\n\n  int getStreak() {\n    return 0; // Placeholder\n  }\n\n  double getEPPD() {\n    return 0.0; // Placeholder\n  }\n\n  int getCompletionTime() {\n    return 0; // Placeholder\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    await _prayerService.saveBirthYear(birthYear);\n    notifyListeners();\n  }\n\n  int _calculateTotalPossiblePrayers(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] != null) {\n      for (var prayer in prayers) {\n        totalPossible += (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersMissed'] as num)\n                .toInt() +\n            (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersCompleted'] as num)\n                .toInt();\n      }\n    }\n    return totalPossible;\n  }\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\n//prayer progress card material . dart\nimport '../platform_specific_widget/amana_button.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardMaterial({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers =\n        prayerProvider.getCompletedPrayersForPrayerType(prayer);\n\n    return Card(\n      child: Padding(\n        padding: REdgeInsets.all(14),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8).r,\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0 ? (completedPrayers / totalPrayers).clamp(0, 1) : 0,\n                minHeight: 12.h,\n                backgroundColor: Colors.grey[300],\n                valueColor:\n                    const AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text(\n                '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              label: 'Pray',\n              isAppLevel: false,\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport '../platform_specific_widget/amana_drop_down.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_month_drop_down.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({super.key});\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n\n  String? _selectedMonth;\n  final Map<String, TextEditingController> _controllers = {};\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    for (var prayer in prayerProvider.prayers) {\n      _controllers[prayer] = TextEditingController();\n    }\n  }\n\n  @override\n  void dispose() {\n    _controllers.forEach((_, controller) => controller.dispose());\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return AmanaScaffold(\n      title: \"Edit Details\",\n      body: SingleChildScrollView(\n        child: Padding(\n          padding: REdgeInsets.all(16.0),\n          child: Column(\n            crossAxisAlignment:\n                kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n            children: [\n              Text(\n                'Pick each year and reflect, add what percentage you estimate you missed that year.',\n                style: TextStyle(fontSize: 18, color: Colors.black),\n              ),\n              SizedBox(height: 20.h),\n              _buildYearDropdown(prayerProvider),\n              SizedBox(height: 20.h),\n              _selectedYear != null && _selectedYear != 0\n                  ? _buildMonthDropDown(prayerProvider)\n                  : Text(\"Selecting Month\"),\n              SizedBox(\n                height: 20.h,\n              ),\n              if (_selectedYear != null &&\n                  _selectedYear != 0 &&\n                  _selectedMonth != null &&\n                  _selectedMonth != \"\")\n                ...prayerProvider.prayers\n                    .map((prayer) => _buildPrayerRow(prayerProvider, prayer)),\n              SizedBox(height: 16.h),\n              kIsWeb\n                  ? AmanaButton(\n                      onPress: () {\n                        for (var prayer in prayerProvider.prayers) {\n                          final percentage =\n                              int.tryParse(_controllers[prayer]!.text) ?? 0;\n                          prayerProvider.updatePrayerData(\n                            prayer,\n                            _selectedYear!,\n                            (365 * percentage / 100).round(),\n                            (365 - (365 * percentage / 100)).round(),\n                            percentage,\n                          );\n                        }\n                        prayerProvider.savePrayerData();\n                        Navigator.pushAndRemoveUntil(\n                            context,\n                            MaterialPageRoute(\n                                builder: (context) => HomeScreen()),\n                            (route) => false);\n                      },\n                      label: \"Save\",\n                      isAppLevel: true)\n                  : AmanaButton(\n                      onPress: () {\n                        for (var prayer in prayerProvider.prayers) {\n                          final percentage =\n                              int.tryParse(_controllers[prayer]!.text) ?? 0;\n                          prayerProvider.updatePrayerData(\n                            prayer,\n                            _selectedYear!,\n                            (365 * percentage / 100).round(),\n                            (365 - (365 * percentage / 100)).round(),\n                            percentage,\n                          );\n                        }\n                        prayerProvider.savePrayerData();\n                        Navigator.pushAndRemoveUntil(\n                            context,\n                            MaterialPageRoute(\n                                builder: (context) => HomeScreen()),\n                            (route) => false);\n                      },\n                      label: \"Save\",\n                      isAppLevel: true),\n              SizedBox(height: 16.h),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildYearDropdown(PrayerProvider prayerProvider) {\n    final startYear = prayerProvider.startYear;\n    final endYear = prayerProvider.endYear;\n\n    return AmanaDropDown(\n      value: _selectedYear,\n      items: List.generate(endYear - startYear + 2, (index) {\n        final year = (index == 0) ? 0 : startYear + (index - 1);\n        return {\n          \"value\": year,\n          \"child\": year == 0 ? Text(\"Select Year\") : Text('$year'),\n        };\n      }),\n      onChanged: (newValue) {\n        setState(() {\n          _selectedYear = newValue;\n        });\n      },\n      labelText: 'Select Year',\n    );\n  }\n\n  Widget _buildMonthDropDown(PrayerProvider provider) {\n    return AmanaMonthDropDown(\n        items: List.generate(13, (index) {\n          final month = (index == 0) ? \"\" : provider.monthsList[index - 1];\n          return {\n            \"value\": month,\n            \"child\": month == \"\" ? Text(\"Select Month\") : Text('$month'),\n          };\n        }),\n        onChanged: (val) {\n          setState(() {\n            _selectedMonth = val.toString();\n          });\n        },\n        value: _selectedMonth ?? \"\",\n        labelText: \"Select Month\");\n  }\n\n  Widget _buildPresetOptions(PrayerProvider provider) {\n    return Column(\n      crossAxisAlignment: CrossAxisAlignment.start,\n      children: [\n        ListTile(\n          leading: Icon(Icons.check_circle_outline),\n          title: Text('Set all years to a specific percentage'),\n          onTap: () {\n            showDialog(\n              context: context,\n              builder: (context) {\n                int percentage = 50;\n                return AlertDialog(\n                  title: Text('Set Percentage for All Years'),\n                  content: StatefulBuilder(\n                    builder: (context, setState) {\n                      return Slider(\n                        value: percentage.toDouble(),\n                        min: 0,\n                        max: 100,\n                        divisions: 20,\n                        label: '$percentage%',\n                        onChanged: (value) {\n                          setState(() {\n                            percentage = value.round();\n                          });\n                        },\n                      );\n                    },\n                  ),\n                  actions: [\n                    TextButton(\n                      onPressed: () {\n                        Navigator.pop(context);\n                      },\n                      child: Text('Cancel'),\n                    ),\n                    TextButton(\n                      onPressed: () {\n                        Map<int, int> percentageMissedByYear = {};\n                        for (int year = provider.startYear;\n                            year <= provider.endYear;\n                            year++) {\n                          percentageMissedByYear[year] = percentage;\n                        }\n                        provider.applyPresetOption(percentageMissedByYear);\n                        Navigator.pop(context);\n                      },\n                      child: Text('Apply'),\n                    ),\n                  ],\n                );\n              },\n            );\n          },\n        ),\n      ],\n    );\n  }\n\n  Widget _buildPrayerRow(PrayerProvider prayerProvider, String prayer) {\n    final prayerData =\n        prayerProvider.getPrayerData()['yearlyData'][_selectedYear.toString()];\n\n    // Add null check here\n    if (prayerData == null || prayerData[prayer] == null) {\n      return Container();\n    }\n\n    final prayerPercentage = prayerData[prayer]['percentMissed'];\n\n    return Padding(\n      padding: REdgeInsets.symmetric(vertical: 4.0),\n      child: Row(\n        mainAxisAlignment: MainAxisAlignment.spaceBetween,\n        children: [\n          Expanded(\n              flex: 2,\n              child: Text(\n                prayer,\n                style: TextStyle(color: Colors.black),\n              )),\n          Expanded(\n            child: AmanaInputField(\n              controller: _controllers[prayer]!\n                ..text = prayerPercentage.toString(),\n              sufixIcon: Icons.percent_outlined,\n              onChange: (val) {},\n              label: \"Missed\",\n              keyboardType: TextInputType.number,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(\n        startYear, startMonth, endYear, endMonth, percentageMissedByYear);\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart' as material;\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardCupertino({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers = 0;\n    final startYear = prayerProvider.startYear;\n    final endYear = prayerProvider.endYear;\n\n    for (var year = startYear; year <= endYear; year++) {\n      final yearlyData = prayerProvider.getPrayerData()['yearlyData'] ?? {};\n      final prayerData = yearlyData[year.toString()] ?? {};\n      completedPrayers += (prayerData[prayer]?['prayersCompleted'] ?? 0) as int;\n    }\n\n    return CupertinoCard(\n      child: Padding(\n        padding: REdgeInsets.all(16),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: const TextStyle(\n                    fontWeight: FontWeight.bold, color: CupertinoColors.black)),\n            const SizedBox(height: 8.0),\n            material.LinearProgressIndicator(\n              borderRadius: BorderRadius.circular(15),\n              value: totalPrayers > 0 ? (completedPrayers / totalPrayers).clamp(0, 1) : 0,\n              minHeight: 10.h,\n              backgroundColor: CupertinoColors.systemGrey5,\n              valueColor: const AlwaysStoppedAnimation<CupertinoDynamicColor>(\n                  CupertinoColors.systemGreen),\n            ),\n            Text(\n                '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14, color: CupertinoColors.black)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12, color: CupertinoColors.black)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              isAppLevel: false,\n              label: \"Pray\",\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\nclass CupertinoCard extends StatelessWidget {\n  final Widget child;\n\n  const CupertinoCard({Key? key, required this.child}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      decoration: BoxDecoration(\n        color: CupertinoColors.systemGrey6,\n        borderRadius: BorderRadius.circular(12).r,\n        boxShadow: [\n          BoxShadow(\n            color: CupertinoColors.black.withOpacity(0.1),\n            blurRadius: 10,\n            offset: const Offset(0, 2),\n          ),\n        ],\n      ),\n      child: child,\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\nimport 'dart:io' show Platform;\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport 'package:flutter/cupertino.dart' as cupertino;\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../providers/prayer_provider.dart';\nimport '../screens/prayer_progress_card_material.dart';\nimport 'prayer_progress_card_cupertino.dart';\nimport 'year_selection_screen.dart';\nimport 'edit_details_screen.dart';\nimport 'settings_screen.dart';\nimport 'package:fl_chart/fl_chart.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        int totalPrayersPossible = prayerProvider.getTotalPrayersPossible();\n        int totalMissedPrayers = prayerProvider.getTotalPrayersMissed();\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Amana Audit'),\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                Text('Total Prayers Missed'),\n                SizedBox(height: 8),\n                Text('$totalMissedPrayers'),\n                SizedBox(height: 8),\n                LinearProgressIndicator(\n                  value: totalPrayersPossible > 0\n                      ? totalMissedPrayers / totalPrayersPossible\n                      : 0,\n                  minHeight: 16,\n                  backgroundColor: Colors.grey[300],\n                  valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayerProvider.prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(prayer: prayer);\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardMaterial({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers =\n        prayerProvider.getCompletedPrayersForPrayerType(prayer);\n    int missedPrayers =\n        prayerProvider.getTotalMissedPrayersForPrayerType(prayer);\n\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0\n                    ? (missedPrayers / totalPrayers).clamp(0, 1)\n                    : 0,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text('${(missedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$missedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              label: 'Pray',\n              isAppLevel: false,\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n\n  Widget _buildActivityChart(PrayerProvider prayerProvider) {\n    final totalPrayersPossible = prayerProvider.getTotalPrayersPossible();\n    final totalCompletedPrayers = prayerProvider.getTotalCompletedPrayers();\n    final remainingPrayers = totalPrayersPossible - totalCompletedPrayers;\n\n    final currentYear = DateTime.now().year;\n    final age = currentYear - prayerProvider.birthYear;\n    final lifeExpectancy = 70; // Adjust life expectancy as needed\n\n    final yearsTillCompletion =\n        (remainingPrayers / (totalCompletedPrayers / age)).round();\n    final anticipatedCompletionYear = currentYear + yearsTillCompletion;\n\n    return AspectRatio(\n      aspectRatio: 2,\n      child: BarChart(\n        BarChartData(\n          alignment: BarChartAlignment.spaceBetween,\n          titlesData: FlTitlesData(\n            leftTitles: const AxisTitles(),\n            rightTitles: const AxisTitles(),\n            topTitles: const AxisTitles(),\n            bottomTitles: AxisTitles(\n              sideTitles: SideTitles(\n                showTitles: true,\n                getTitlesWidget: (value, meta) {\n                  final year = currentYear + value.toInt();\n                  return Text(year.toString());\n                },\n                reservedSize: 20,\n              ),\n            ),\n          ),\n          barTouchData: BarTouchData(enabled: false),\n          borderData: FlBorderData(show: false),\n          gridData: FlGridData(show: false),\n          barGroups: [\n            BarChartGroupData(\n              x: 0,\n              barRods: [\n                BarChartRodData(\n                  fromY: 0,\n                  toY: totalCompletedPrayers.toDouble(),\n                  color: Colors.green,\n                ),\n              ],\n            ),\n            BarChartGroupData(\n              x: 1,\n              barRods: [\n                BarChartRodData(\n                  fromY: 0,\n                  toY: remainingPrayers.toDouble(),\n                  color: Colors.grey,\n                ),\n              ],\n            ),\n          ],\n          maxY: totalPrayersPossible.toDouble(),\n          extraLinesData: ExtraLinesData(\n            horizontalLines: [\n              HorizontalLine(\n                y: lifeExpectancy.toDouble(),\n                color: Colors.red,\n                strokeWidth: 1,\n                dashArray: [20, 4],\n                label: HorizontalLineLabel(\n                  show: true,\n                  alignment: Alignment.topRight,\n                  style: TextStyle(color: Colors.red),\n                  labelResolver: (line) => 'Life Expectancy',\n                ),\n              ),\n              HorizontalLine(\n                y: anticipatedCompletionYear.toDouble(),\n                color: Colors.blue,\n                strokeWidth: 1,\n                dashArray: [20, 4],\n                label: HorizontalLineLabel(\n                  show: true,\n                  alignment: Alignment.topRight,\n                  style: TextStyle(color: Colors.blue),\n                  labelResolver: (line) => 'Anticipated Completion',\n                ),\n              ),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildStreakVisualization(PrayerProvider prayerProvider) {\n    // Implement streak visualization logic here\n    return Container(); // Return a valid widget\n  }\n\n  Widget _buildEPPDVisualization(PrayerProvider prayerProvider) {\n    // Implement EPPD visualization logic here\n    return Container(); // Return a valid widget\n  }\n\n  Widget _buildProgressVisualization(PrayerProvider prayerProvider) {\n    // Implement completion time visualization logic here\n    return Container(); // Return a valid widget\n  }\n\n  Widget _buildCompletionTimeVisualization(PrayerProvider prayerProvider) {\n    // Implement completion time visualization logic here\n    return Container(); // Return a valid widget\n  }\n}\n\n\n\n# File: ./lib/providers/prayer_provider.dart\n#############################################\n\n\n\n\n# File: ./lib/screens/edit_details_screen.dart\n###############################################\n\n\n\n\n# File: ./lib/screens/year_selection_screen.dart\n#################################################\n\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, dynamic> prayerData = {};\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map) {\n      prayerData =\n          Map<String, dynamic>.from(loadedData.cast<String, dynamic>());\n    } else {\n      _setDefaultPrayerData();\n      savePrayerData();\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> createDetailedBreakdown(\n      int startYear, int endYear, Map<int, int> percentageMissedByYear) async {\n    prayerData['prayerData'] = [\n      for (int year = startYear; year <= endYear; year++)\n        {\n          'year': year,\n          'totalPrayed': 0,\n          'totalMissed': 0,\n          'months': [\n            for (int month = 1; month <= 12; month++)\n              {\n                'monthNumber': month,\n                'totalPrayed': 0,\n                'totalMissed': 0,\n                'weeks': [\n                  for (int week = 1; week <= 5; week++)\n                    {\n                      'weekNumber': week,\n                      'totalPrayed': 0,\n                      'totalMissed': 0,\n                      'days': [\n                        for (int day = 1; day <= 7; day++)\n                          {\n                            'dayNumber': day,\n                            'prayers': [\n                              for (var prayer in prayers)\n                                {'prayerName': prayer, 'missed': false}\n                            ],\n                          },\n                      ],\n                    },\n                ],\n              },\n          ],\n        },\n    ];\n    await savePrayerData();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    if (prayerData['yearlyData'][year.toString()] == null) {\n      prayerData['yearlyData'][year.toString()] = {};\n    }\n    prayerData['yearlyData'][year.toString()][prayer] = {\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'percentMissed': percentageMissed,\n    };\n    await savePrayerData();\n  }\n\n  int getTotalPrayersPossible(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (int year = startYear; year <= endYear; year++) {\n      totalPossible +=\n          isLeapYear(year) ? 366 * prayers.length : 365 * prayers.length;\n    }\n    return totalPossible;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    int completedPrayers = 0;\n    for (var year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      if (prayerData['yearlyData'][year.toString()] != null &&\n          prayerData['yearlyData'][year.toString()][prayer] != null) {\n        completedPrayers += prayerData['yearlyData'][year.toString()][prayer]\n            ['prayersCompleted'] as int;\n      }\n    }\n    return completedPrayers;\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return isLeapYear(year) ? 366 * prayers.length : 365 * prayers.length;\n  }\n\n  int getTotalPrayersForPrayerTypeInYear(String prayer, int year) {\n    int totalPrayers = 0;\n    if (prayerData['yearlyData'][year.toString()] != null &&\n        prayerData['yearlyData'][year.toString()][prayer] != null) {\n      totalPrayers = prayerData['yearlyData'][year.toString()][prayer]\n                  ['prayersCompleted'] +\n              prayerData['yearlyData'][year.toString()][prayer]['prayersMissed']\n          as int;\n    }\n    return totalPrayers;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    for (int year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      var prayerDataForYear = prayerData['yearlyData'][year.toString()][prayer];\n      if (prayerDataForYear == null) {\n        prayerDataForYear = {\n          'prayersCompleted': 0,\n          'prayersMissed': getTotalPrayersForYear(year),\n          'percentMissed': 100,\n        };\n      }\n      int totalPrayersForYear = getTotalPrayersForYear(year);\n      if (prayerDataForYear['prayersCompleted'] < totalPrayersForYear) {\n        prayerDataForYear['prayersCompleted']++;\n        prayerDataForYear['prayersMissed'] =\n            totalPrayersForYear - prayerDataForYear['prayersCompleted'];\n        prayerDataForYear['percentMissed'] =\n            (prayerDataForYear['prayersMissed'] / totalPrayersForYear * 100)\n                .round();\n\n        await savePrayerData();\n        break; // Break after updating the first incomplete year\n      }\n    }\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> savePrayerData() async {\n    await _hiveService.saveData('prayerData', prayerData);\n    print('Saved data to Hive: $prayerData');\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'endYear': currentYear,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': getTotalPrayersForYear(currentYear),\n            }\n        }\n      }\n    };\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    shareText += 'Total Completed: ${getTotalCompletedPrayers()}\\n';\n    Share.share(shareText);\n  }\n\n  bool isLeapYear(int year) {\n    return year % 4 == 0 && (year % 100 != 0 || year % 400 == 0);\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    prayerData['birthYear'] = birthYear;\n    await savePrayerData();\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ï·º) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'Ø¹ÙŽÙ†Ù’ Ø£ÙŽØ¨ÙÙŠ Ù‡ÙØ±ÙŽÙŠÙ’Ø±ÙŽØ©ÙŽ Ø±ÙŽØ¶ÙÙŠÙŽ Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù Ø¹ÙŽÙ†Ù’Ù‡Ù Ù‚ÙŽØ§Ù„ÙŽ: Ù‚ÙŽØ§Ù„ÙŽ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù ØµÙŽÙ„Ù‘ÙŽÙ‰ Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ÙˆÙŽØ³ÙŽÙ„Ù‘ÙŽÙ…ÙŽ: \" Ø¥ÙÙ†Ù‘ÙŽ Ø§Ù„Ù„Ù‘ÙŽÙ‡ÙŽ Ø¹ÙŽØ²Ù‘ÙŽ ÙˆÙŽØ¬ÙŽÙ„Ù‘ÙŽ Ù‚ÙŽØ§Ù„ÙŽ: Ù…ÙŽÙ†Ù’ Ø¹ÙŽØ§Ø¯ÙŽÙ‰ Ù„ÙÙŠ ÙˆÙŽÙ„ÙÙŠÙ‘Ù‹Ø§ØŒ ÙÙŽÙ‚ÙŽØ¯Ù’ Ø¢Ø°ÙŽÙ†Ù’ØªÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙŽØ±Ù’Ø¨ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙ‚ÙŽØ±Ù‘ÙŽØ¨ÙŽ Ø¥ÙÙ„ÙŽÙŠÙ‘ÙŽ Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø¨ÙØ´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽØ­ÙŽØ¨Ù‘ÙŽ Ø¥ÙÙ„ÙŽÙŠÙ‘ÙŽ Ù…ÙÙ…Ù‘ÙŽØ§ Ø§ÙÙ’ØªÙŽØ±ÙŽØ¶Ù’ØªÙ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ÙŠÙŽØ²ÙŽØ§Ù„Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ ÙŠÙŽØªÙŽÙ‚ÙŽØ±Ù‘ÙŽØ¨Ù Ø¥ÙÙ„ÙŽÙŠÙ‘ÙŽ Ø¨ÙØ§Ù„Ù†Ù‘ÙŽÙˆÙŽØ§ÙÙÙ„Ù Ø­ÙŽØªÙ‘ÙŽÙ‰ Ø£ÙØ­ÙØ¨Ù‘ÙŽÙ‡ÙØŒ ÙÙŽØ¥ÙØ°ÙŽØ§ Ø£ÙŽØ­Ù’Ø¨ÙŽØ¨Ù’ØªÙÙ‡ÙØŒ ÙƒÙÙ†Ù’ØªÙ Ø³ÙŽÙ…Ù’Ø¹ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØ°ÙÙŠ ÙŠÙŽØ³Ù’Ù…ÙŽØ¹Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽØ¨ÙŽØµÙŽØ±ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØ°ÙÙŠ ÙŠÙØ¨Ù’ØµÙØ±Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽÙŠÙŽØ¯ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØªÙÙŠ ÙŠÙŽØ¨Ù’Ø·ÙØ´Ù Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ±ÙØ¬Ù’Ù„ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØªÙÙŠ ÙŠÙŽÙ…Ù’Ø´ÙÙŠ Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ¥ÙÙ†Ù’ Ø³ÙŽØ£ÙŽÙ„ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹Ù’Ø·ÙÙŠÙŽÙ†Ù‘ÙŽÙ‡ÙØŒ ÙˆÙŽÙ„ÙŽØ¦ÙÙ†Ù’ Ø§Ø³Ù’ØªÙŽØ¹ÙŽØ§Ø°ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹ÙÙŠØ°ÙŽÙ†Ù‘ÙŽÙ‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽØ±ÙŽØ¯Ù‘ÙŽØ¯Ù’ØªÙ Ø¹ÙŽÙ†Ù’ Ø´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽÙ†ÙŽØ§ ÙÙŽØ§Ø¹ÙÙ„ÙÙ‡Ù ØªÙŽØ±ÙŽØ¯Ù‘ÙØ¯ÙÙŠ Ø¹ÙŽÙ†Ù’ Ù†ÙŽÙÙ’Ø³Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØŒ ÙŠÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ø§Ù„Ù’Ù…ÙŽÙˆÙ’ØªÙŽ ÙˆÙŽØ£ÙŽÙ†ÙŽØ§ Ø£ÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ù…ÙŽØ³ÙŽØ§Ø¡ÙŽØªÙŽÙ‡Ù - Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n\nlib/services/prayer_service.dart:180:5: Error: The method 'notifyListeners' isn't defined for the class 'PrayerService'.\n - 'PrayerService' is from 'package:amana/services/prayer_service.dart' ('lib/services/prayer_service.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'notifyListeners'.\n    notifyListeners();\n    ^^^^^^^^^^^^^^^\nlib/screens/home_screen.dart:30:49: Error: The method 'getTotalPrayersMissed' isn't defined for the class 'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'getTotalPrayersMissed'.\n        int totalMissedPrayers = prayerProvider.getTotalPrayersMissed();\n                                                ^^^^^^^^^^^^^^^^^^^^^\nlib/screens/home_screen.dart:87:24: Error: The method 'getTotalMissedPrayersForPrayerType' isn't defined for the class\n'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'getTotalMissedPrayersForPrayerType'.\n        prayerProvider.getTotalMissedPrayersForPrayerType(prayer);\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^",
      "created_at": "2024-06-02T14:32:13.977300",
      "sequence_order": 5,
      "parent_id": "e81e8974-fbff-4605-ad22-255c04530baa",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "0adb3112-ab2e-46fe-b6d4-be23804d3676",
      "role": "assistant",
      "content": "To resolve the errors and ensure the functionality described, we need to move some methods from the `PrayerService` to the `PrayerProvider` class. Specifically, the methods `notifyListeners()`, `getTotalPrayersMissed()`, and `getTotalMissedPrayersForPrayerType()` should belong to `PrayerProvider` because they handle state management and notification, which are responsibilities of a provider.\n\nHere's the adjusted code:\n\n### Adjust `PrayerProvider` Class\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  int get percentageMissed => prayerData['percentageMissed'] ?? 25;\n  int get taqwaBuffer => prayerData['taqwaBuffer'] ?? 5;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    return _calculateTotalPossiblePrayers(startYear, endYear);\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var year = startYear; year <= endYear; year++) {\n      totalPrayers += _calculateYearlyTotalPossible(year);\n    }\n    return totalPrayers;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  void updatePercentageMissed(int year, int percentage) {\n    prayerData['yearlyData'][year.toString()].forEach((prayerData) {\n      prayerData['percentageMissed'] = percentage;\n      prayerData['prayersMissed'] = (365 * 5 * percentage / 100).round();\n      prayerData['prayersCompleted'] = (365 * 5) - prayerData['prayersMissed'];\n    });\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    await _prayerService.updatePrayerData(\n        prayer, year, prayersCompleted, prayersMissed, percentageMissed);\n    notifyListeners();\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'startMonth': 1,\n      'endYear': currentYear,\n      'endMonth': DateTime.now().month,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': 0,\n            }\n        }\n      }\n    };\n  }\n\n  Future<void> initializeDefaultPrayerData() async {\n    _setDefaultPrayerData();\n    await savePrayerData();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    var prayerData = _prayerService.prayerData;\n    prayerData['yearlyData'] = {};\n    for (int year = startYear; year <= endYear; year++) {\n      prayerData['yearlyData'][year.toString()] = {\n        for (var prayer in prayers)\n          prayer: {\n            'percentMissed': percentageMissedByYear[year]!,\n            'prayersCompleted': getTotalPrayersForYear(year) -\n                (getTotalPrayersForYear(year) *\n                        percentageMissedByYear[year]! /\n                        100)\n                    .round(),\n            'prayersMissed': (getTotalPrayersForYear(year) *\n                    percentageMissedByYear[year]! /\n                    100)\n                .round(),\n          }\n      };\n    }\n    notifyListeners();\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return _prayerService.getTotalPrayersForYear(year);\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    return _prayerService.getCompletedPrayersForPrayerType(prayer);\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<bool> resetApplication() async {\n    bool result = await _prayerService.resetApplication();\n    if (result) {\n      notifyListeners();\n    }\n    return result;\n  }\n\n  void sharePrayerData() {\n    _prayerService.sharePrayerData();\n  }\n\n  int getStreak() {\n    return 0; // Placeholder\n  }\n\n  double getEPPD() {\n    return 0.0; // Placeholder\n  }\n\n  int getCompletionTime() {\n    return 0; // Placeholder\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    await _prayerService.saveBirthYear(birthYear);\n    notifyListeners();\n  }\n\n  int _calculateTotalPossiblePrayers(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] !=",
      "created_at": "2024-06-02T14:33:08.092125",
      "sequence_order": 6,
      "parent_id": "aaa24142-4f4d-47d4-b7c2-f31d4d208d33",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": false
      }
    },
    {
      "id": "aaa2097e-23e3-449a-93c8-14fdbcdbfdc0",
      "role": "user",
      "content": "\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final PrayerProvider prayerProvider;\n\n  const MyApp({super.key, required this.prayerProvider});\n\n  @override\n  Widget build(BuildContext context) {\n    return ChangeNotifierProvider.value(\n      value: prayerProvider,\n      child: AmanaMaterialApp(\n        title: 'Amana Audit',\n        debugShowCheckedModeBanner: false,\n        theme: ThemeData(\n            fontFamily: \"OpenSans\",\n            scaffoldBackgroundColor: Colors.grey[100],\n            primarySwatch: Colors.blue),\n        initialRoute: '/',\n        routes: {\n          '/': (context) => const HomeScreen(),\n          '/year-selection': (context) => const YearSelectionScreen(),\n          '/edit-details': (context) => const EditDetailsScreen()\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./main.dart\n####################\n\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'providers/prayer_provider.dart';\nimport '../services/prayer_service.dart';\nimport '../services/hive_service.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  final prayerService = PrayerService(hiveService);\n  final prayerProvider = PrayerProvider(prayerService);\n  await prayerProvider.loadData();\n  runApp(MyApp(\n    prayerProvider: prayerProvider,\n  ));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2020;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  int get percentageMissed => prayerData['percentageMissed'] ?? 25;\n  int get taqwaBuffer => prayerData['taqwaBuffer'] ?? 5;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    return _calculateTotalPossiblePrayers(startYear, endYear);\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var year = startYear; year <= endYear; year++) {\n      totalPrayers += _calculateYearlyTotalPossible(year);\n    }\n    return totalPrayers;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  void updatePercentageMissed(int year, int percentage) {\n    prayerData['yearlyData'][year.toString()].forEach((prayerData) {\n      prayerData['percentageMissed'] = percentage;\n      prayerData['prayersMissed'] = (365 * 5 * percentage / 100).round();\n      prayerData['prayersCompleted'] = (365 * 5) - prayerData['prayersMissed'];\n    });\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    await _prayerService.updatePrayerData(\n        prayer, year, prayersCompleted, prayersMissed, percentageMissed);\n    notifyListeners();\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'startMonth': 1,\n      'endYear': currentYear,\n      'endMonth': DateTime.now().month,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': 0,\n            }\n        }\n      }\n    };\n  }\n\n  Future<void> initializeDefaultPrayerData() async {\n    _setDefaultPrayerData();\n    await savePrayerData();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    var prayerData = _prayerService.prayerData;\n    prayerData['yearlyData'] = {};\n    for (int year = startYear; year <= endYear; year++) {\n      prayerData['yearlyData'][year.toString()] = {\n        for (var prayer in prayers)\n          prayer: {\n            'percentMissed': percentageMissedByYear[year]!,\n            'prayersCompleted': getTotalPrayersForYear(year) -\n                (getTotalPrayersForYear(year) *\n                        percentageMissedByYear[year]! /\n                        100)\n                    .round(),\n            'prayersMissed': (getTotalPrayersForYear(year) *\n                    percentageMissedByYear[year]! /\n                    100)\n                .round(),\n          }\n      };\n    }\n    notifyListeners();\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return _prayerService.getTotalPrayersForYear(year);\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    return _prayerService.getCompletedPrayersForPrayerType(prayer);\n  }\n\n  Future<bool> resetApplication() async {\n    bool result = await _prayerService.resetApplication();\n    if (result) {\n      notifyListeners();\n    }\n    return result;\n  }\n\n  void sharePrayerData() {\n    _prayerService.sharePrayerData();\n  }\n\n  int getStreak() {\n    return 0; // Placeholder\n  }\n\n  double getEPPD() {\n    return 0.0; // Placeholder\n  }\n\n  int getCompletionTime() {\n    return 0; // Placeholder\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    await _prayerService.saveBirthYear(birthYear);\n    notifyListeners();\n  }\n\n  int _calculateTotalPossiblePrayers(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] != null) {\n      for (var prayer in prayers) {\n        totalPossible += (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersMissed'] as num)\n                .toInt() +\n            (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersCompleted'] as num)\n                .toInt();\n      }\n    }\n    return totalPossible;\n  }\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\n//prayer progress card material . dart\nimport '../platform_specific_widget/amana_button.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardMaterial({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers =\n        prayerProvider.getCompletedPrayersForPrayerType(prayer);\n\n    return Card(\n      child: Padding(\n        padding: REdgeInsets.all(14),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8).r,\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0 ? (completedPrayers / totalPrayers).clamp(0, 1) : 0,\n                minHeight: 12.h,\n                backgroundColor: Colors.grey[300],\n                valueColor:\n                    const AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text(\n                '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              label: 'Pray',\n              isAppLevel: false,\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport '../platform_specific_widget/amana_drop_down.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_month_drop_down.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({super.key});\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n\n  String? _selectedMonth;\n  final Map<String, TextEditingController> _controllers = {};\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    for (var prayer in prayerProvider.prayers) {\n      _controllers[prayer] = TextEditingController();\n    }\n  }\n\n  @override\n  void dispose() {\n    _controllers.forEach((_, controller) => controller.dispose());\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return AmanaScaffold(\n      title: \"Edit Details\",\n      body: SingleChildScrollView(\n        child: Padding(\n          padding: REdgeInsets.all(16.0),\n          child: Column(\n            crossAxisAlignment:\n                kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n            children: [\n              Text(\n                'Pick each year and reflect, add what percentage you estimate you missed that year.',\n                style: TextStyle(fontSize: 18, color: Colors.black),\n              ),\n              SizedBox(height: 20.h),\n              _buildYearDropdown(prayerProvider),\n              SizedBox(height: 20.h),\n              _selectedYear != null && _selectedYear != 0\n                  ? _buildMonthDropDown(prayerProvider)\n                  : Text(\"Selecting Month\"),\n              SizedBox(\n                height: 20.h,\n              ),\n              if (_selectedYear != null &&\n                  _selectedYear != 0 &&\n                  _selectedMonth != null &&\n                  _selectedMonth != \"\")\n                ...prayerProvider.prayers\n                    .map((prayer) => _buildPrayerRow(prayerProvider, prayer)),\n              SizedBox(height: 16.h),\n              kIsWeb\n                  ? AmanaButton(\n                      onPress: () {\n                        for (var prayer in prayerProvider.prayers) {\n                          final percentage =\n                              int.tryParse(_controllers[prayer]!.text) ?? 0;\n                          prayerProvider.updatePrayerData(\n                            prayer,\n                            _selectedYear!,\n                            (365 * percentage / 100).round(),\n                            (365 - (365 * percentage / 100)).round(),\n                            percentage,\n                          );\n                        }\n                        prayerProvider.savePrayerData();\n                        Navigator.pushAndRemoveUntil(\n                            context,\n                            MaterialPageRoute(\n                                builder: (context) => HomeScreen()),\n                            (route) => false);\n                      },\n                      label: \"Save\",\n                      isAppLevel: true)\n                  : AmanaButton(\n                      onPress: () {\n                        for (var prayer in prayerProvider.prayers) {\n                          final percentage =\n                              int.tryParse(_controllers[prayer]!.text) ?? 0;\n                          prayerProvider.updatePrayerData(\n                            prayer,\n                            _selectedYear!,\n                            (365 * percentage / 100).round(),\n                            (365 - (365 * percentage / 100)).round(),\n                            percentage,\n                          );\n                        }\n                        prayerProvider.savePrayerData();\n                        Navigator.pushAndRemoveUntil(\n                            context,\n                            MaterialPageRoute(\n                                builder: (context) => HomeScreen()),\n                            (route) => false);\n                      },\n                      label: \"Save\",\n                      isAppLevel: true),\n              SizedBox(height: 16.h),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildYearDropdown(PrayerProvider prayerProvider) {\n    final startYear = prayerProvider.startYear;\n    final endYear = prayerProvider.endYear;\n\n    return AmanaDropDown(\n      value: _selectedYear,\n      items: List.generate(endYear - startYear + 2, (index) {\n        final year = (index == 0) ? 0 : startYear + (index - 1);\n        return {\n          \"value\": year,\n          \"child\": year == 0 ? Text(\"Select Year\") : Text('$year'),\n        };\n      }),\n      onChanged: (newValue) {\n        setState(() {\n          _selectedYear = newValue;\n        });\n      },\n      labelText: 'Select Year',\n    );\n  }\n\n  Widget _buildMonthDropDown(PrayerProvider provider) {\n    return AmanaMonthDropDown(\n        items: List.generate(13, (index) {\n          final month = (index == 0) ? \"\" : provider.monthsList[index - 1];\n          return {\n            \"value\": month,\n            \"child\": month == \"\" ? Text(\"Select Month\") : Text('$month'),\n          };\n        }),\n        onChanged: (val) {\n          setState(() {\n            _selectedMonth = val.toString();\n          });\n        },\n        value: _selectedMonth ?? \"\",\n        labelText: \"Select Month\");\n  }\n\n  Widget _buildPresetOptions(PrayerProvider provider) {\n    return Column(\n      crossAxisAlignment: CrossAxisAlignment.start,\n      children: [\n        ListTile(\n          leading: Icon(Icons.check_circle_outline),\n          title: Text('Set all years to a specific percentage'),\n          onTap: () {\n            showDialog(\n              context: context,\n              builder: (context) {\n                int percentage = 50;\n                return AlertDialog(\n                  title: Text('Set Percentage for All Years'),\n                  content: StatefulBuilder(\n                    builder: (context, setState) {\n                      return Slider(\n                        value: percentage.toDouble(),\n                        min: 0,\n                        max: 100,\n                        divisions: 20,\n                        label: '$percentage%',\n                        onChanged: (value) {\n                          setState(() {\n                            percentage = value.round();\n                          });\n                        },\n                      );\n                    },\n                  ),\n                  actions: [\n                    TextButton(\n                      onPressed: () {\n                        Navigator.pop(context);\n                      },\n                      child: Text('Cancel'),\n                    ),\n                    TextButton(\n                      onPressed: () {\n                        Map<int, int> percentageMissedByYear = {};\n                        for (int year = provider.startYear;\n                            year <= provider.endYear;\n                            year++) {\n                          percentageMissedByYear[year] = percentage;\n                        }\n                        provider.applyPresetOption(percentageMissedByYear);\n                        Navigator.pop(context);\n                      },\n                      child: Text('Apply'),\n                    ),\n                  ],\n                );\n              },\n            );\n          },\n        ),\n      ],\n    );\n  }\n\n  Widget _buildPrayerRow(PrayerProvider prayerProvider, String prayer) {\n    final prayerData =\n        prayerProvider.getPrayerData()['yearlyData'][_selectedYear.toString()];\n\n    // Add null check here\n    if (prayerData == null || prayerData[prayer] == null) {\n      return Container();\n    }\n\n    final prayerPercentage = prayerData[prayer]['percentMissed'];\n\n    return Padding(\n      padding: REdgeInsets.symmetric(vertical: 4.0),\n      child: Row(\n        mainAxisAlignment: MainAxisAlignment.spaceBetween,\n        children: [\n          Expanded(\n              flex: 2,\n              child: Text(\n                prayer,\n                style: TextStyle(color: Colors.black),\n              )),\n          Expanded(\n            child: AmanaInputField(\n              controller: _controllers[prayer]!\n                ..text = prayerPercentage.toString(),\n              sufixIcon: Icons.percent_outlined,\n              onChange: (val) {},\n              label: \"Missed\",\n              keyboardType: TextInputType.number,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(\n        startYear, startMonth, endYear, endMonth, percentageMissedByYear);\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart' as material;\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardCupertino({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers = 0;\n    final startYear = prayerProvider.startYear;\n    final endYear = prayerProvider.endYear;\n\n    for (var year = startYear; year <= endYear; year++) {\n      final yearlyData = prayerProvider.getPrayerData()['yearlyData'] ?? {};\n      final prayerData = yearlyData[year.toString()] ?? {};\n      completedPrayers += (prayerData[prayer]?['prayersCompleted'] ?? 0) as int;\n    }\n\n    return CupertinoCard(\n      child: Padding(\n        padding: REdgeInsets.all(16),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: const TextStyle(\n                    fontWeight: FontWeight.bold, color: CupertinoColors.black)),\n            const SizedBox(height: 8.0),\n            material.LinearProgressIndicator(\n              borderRadius: BorderRadius.circular(15),\n              value: totalPrayers > 0 ? (completedPrayers / totalPrayers).clamp(0, 1) : 0,\n              minHeight: 10.h,\n              backgroundColor: CupertinoColors.systemGrey5,\n              valueColor: const AlwaysStoppedAnimation<CupertinoDynamicColor>(\n                  CupertinoColors.systemGreen),\n            ),\n            Text(\n                '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14, color: CupertinoColors.black)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12, color: CupertinoColors.black)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              isAppLevel: false,\n              label: \"Pray\",\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\nclass CupertinoCard extends StatelessWidget {\n  final Widget child;\n\n  const CupertinoCard({Key? key, required this.child}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      decoration: BoxDecoration(\n        color: CupertinoColors.systemGrey6,\n        borderRadius: BorderRadius.circular(12).r,\n        boxShadow: [\n          BoxShadow(\n            color: CupertinoColors.black.withOpacity(0.1),\n            blurRadius: 10,\n            offset: const Offset(0, 2),\n          ),\n        ],\n      ),\n      child: child,\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\nimport 'dart:io' show Platform;\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport 'package:flutter/cupertino.dart' as cupertino;\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../providers/prayer_provider.dart';\nimport '../screens/prayer_progress_card_material.dart';\nimport 'prayer_progress_card_cupertino.dart';\nimport 'year_selection_screen.dart';\nimport 'edit_details_screen.dart';\nimport 'settings_screen.dart';\nimport 'package:fl_chart/fl_chart.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        int totalPrayersPossible = prayerProvider.getTotalPrayersPossible();\n        int totalMissedPrayers = prayerProvider.getTotalPrayersMissed();\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Amana Audit'),\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                Text('Total Prayers Missed'),\n                SizedBox(height: 8),\n                Text('$totalMissedPrayers'),\n                SizedBox(height: 8),\n                LinearProgressIndicator(\n                  value: totalPrayersPossible > 0\n                      ? totalMissedPrayers / totalPrayersPossible\n                      : 0,\n                  minHeight: 16,\n                  backgroundColor: Colors.grey[300],\n                  valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayerProvider.prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(prayer: prayer);\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardMaterial({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers =\n        prayerProvider.getCompletedPrayersForPrayerType(prayer);\n    int missedPrayers =\n        prayerProvider.getTotalMissedPrayersForPrayerType(prayer);\n\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0\n                    ? (missedPrayers / totalPrayers).clamp(0, 1)\n                    : 0,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text('${(missedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$missedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              label: 'Pray',\n              isAppLevel: false,\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n\n  Widget _buildActivityChart(PrayerProvider prayerProvider) {\n    final totalPrayersPossible = prayerProvider.getTotalPrayersPossible();\n    final totalCompletedPrayers = prayerProvider.getTotalCompletedPrayers();\n    final remainingPrayers = totalPrayersPossible - totalCompletedPrayers;\n\n    final currentYear = DateTime.now().year;\n    final age = currentYear - prayerProvider.birthYear;\n    final lifeExpectancy = 70; // Adjust life expectancy as needed\n\n    final yearsTillCompletion =\n        (remainingPrayers / (totalCompletedPrayers / age)).round();\n    final anticipatedCompletionYear = currentYear + yearsTillCompletion;\n\n    return AspectRatio(\n      aspectRatio: 2,\n      child: BarChart(\n        BarChartData(\n          alignment: BarChartAlignment.spaceBetween,\n          titlesData: FlTitlesData(\n            leftTitles: const AxisTitles(),\n            rightTitles: const AxisTitles(),\n            topTitles: const AxisTitles(),\n            bottomTitles: AxisTitles(\n              sideTitles: SideTitles(\n                showTitles: true,\n                getTitlesWidget: (value, meta) {\n                  final year = currentYear + value.toInt();\n                  return Text(year.toString());\n                },\n                reservedSize: 20,\n              ),\n            ),\n          ),\n          barTouchData: BarTouchData(enabled: false),\n          borderData: FlBorderData(show: false),\n          gridData: FlGridData(show: false),\n          barGroups: [\n            BarChartGroupData(\n              x: 0,\n              barRods: [\n                BarChartRodData(\n                  fromY: 0,\n                  toY: totalCompletedPrayers.toDouble(),\n                  color: Colors.green,\n                ),\n              ],\n            ),\n            BarChartGroupData(\n              x: 1,\n              barRods: [\n                BarChartRodData(\n                  fromY: 0,\n                  toY: remainingPrayers.toDouble(),\n                  color: Colors.grey,\n                ),\n              ],\n            ),\n          ],\n          maxY: totalPrayersPossible.toDouble(),\n          extraLinesData: ExtraLinesData(\n            horizontalLines: [\n              HorizontalLine(\n                y: lifeExpectancy.toDouble(),\n                color: Colors.red,\n                strokeWidth: 1,\n                dashArray: [20, 4],\n                label: HorizontalLineLabel(\n                  show: true,\n                  alignment: Alignment.topRight,\n                  style: TextStyle(color: Colors.red),\n                  labelResolver: (line) => 'Life Expectancy',\n                ),\n              ),\n              HorizontalLine(\n                y: anticipatedCompletionYear.toDouble(),\n                color: Colors.blue,\n                strokeWidth: 1,\n                dashArray: [20, 4],\n                label: HorizontalLineLabel(\n                  show: true,\n                  alignment: Alignment.topRight,\n                  style: TextStyle(color: Colors.blue),\n                  labelResolver: (line) => 'Anticipated Completion',\n                ),\n              ),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildStreakVisualization(PrayerProvider prayerProvider) {\n    // Implement streak visualization logic here\n    return Container(); // Return a valid widget\n  }\n\n  Widget _buildEPPDVisualization(PrayerProvider prayerProvider) {\n    // Implement EPPD visualization logic here\n    return Container(); // Return a valid widget\n  }\n\n  Widget _buildProgressVisualization(PrayerProvider prayerProvider) {\n    // Implement completion time visualization logic here\n    return Container(); // Return a valid widget\n  }\n\n  Widget _buildCompletionTimeVisualization(PrayerProvider prayerProvider) {\n    // Implement completion time visualization logic here\n    return Container(); // Return a valid widget\n  }\n}\n\n\n\n# File: ./lib/providers/prayer_provider.dart\n#############################################\n\n\n\n\n# File: ./lib/screens/edit_details_screen.dart\n###############################################\n\n\n\n\n# File: ./lib/screens/year_selection_screen.dart\n#################################################\n\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, dynamic> prayerData = {};\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map) {\n      prayerData =\n          Map<String, dynamic>.from(loadedData.cast<String, dynamic>());\n    } else {\n      _setDefaultPrayerData();\n      savePrayerData();\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> createDetailedBreakdown(\n      int startYear, int endYear, Map<int, int> percentageMissedByYear) async {\n    prayerData['prayerData'] = [\n      for (int year = startYear; year <= endYear; year++)\n        {\n          'year': year,\n          'totalPrayed': 0,\n          'totalMissed': 0,\n          'months': [\n            for (int month = 1; month <= 12; month++)\n              {\n                'monthNumber': month,\n                'totalPrayed': 0,\n                'totalMissed': 0,\n                'weeks': [\n                  for (int week = 1; week <= 5; week++)\n                    {\n                      'weekNumber': week,\n                      'totalPrayed': 0,\n                      'totalMissed': 0,\n                      'days': [\n                        for (int day = 1; day <= 7; day++)\n                          {\n                            'dayNumber': day,\n                            'prayers': [\n                              for (var prayer in prayers)\n                                {'prayerName': prayer, 'missed': false}\n                            ],\n                          },\n                      ],\n                    },\n                ],\n              },\n          ],\n        },\n    ];\n    await savePrayerData();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    if (prayerData['yearlyData'][year.toString()] == null) {\n      prayerData['yearlyData'][year.toString()] = {};\n    }\n    prayerData['yearlyData'][year.toString()][prayer] = {\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'percentMissed': percentageMissed,\n    };\n    await savePrayerData();\n  }\n\n  int getTotalPrayersPossible(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (int year = startYear; year <= endYear; year++) {\n      totalPossible +=\n          isLeapYear(year) ? 366 * prayers.length : 365 * prayers.length;\n    }\n    return totalPossible;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    int completedPrayers = 0;\n    for (var year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      if (prayerData['yearlyData'][year.toString()] != null &&\n          prayerData['yearlyData'][year.toString()][prayer] != null) {\n        completedPrayers += prayerData['yearlyData'][year.toString()][prayer]\n            ['prayersCompleted'] as int;\n      }\n    }\n    return completedPrayers;\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return isLeapYear(year) ? 366 * prayers.length : 365 * prayers.length;\n  }\n\n  int getTotalPrayersForPrayerTypeInYear(String prayer, int year) {\n    int totalPrayers = 0;\n    if (prayerData['yearlyData'][year.toString()] != null &&\n        prayerData['yearlyData'][year.toString()][prayer] != null) {\n      totalPrayers = prayerData['yearlyData'][year.toString()][prayer]\n                  ['prayersCompleted'] +\n              prayerData['yearlyData'][year.toString()][prayer]['prayersMissed']\n          as int;\n    }\n    return totalPrayers;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    for (int year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      var prayerDataForYear = prayerData['yearlyData'][year.toString()][prayer];\n      if (prayerDataForYear == null) {\n        prayerDataForYear = {\n          'prayersCompleted': 0,\n          'prayersMissed': getTotalPrayersForYear(year),\n          'percentMissed': 100,\n        };\n      }\n      int totalPrayersForYear = getTotalPrayersForYear(year);\n      if (prayerDataForYear['prayersCompleted'] < totalPrayersForYear) {\n        prayerDataForYear['prayersCompleted']++;\n        prayerDataForYear['prayersMissed'] =\n            totalPrayersForYear - prayerDataForYear['prayersCompleted'];\n        prayerDataForYear['percentMissed'] =\n            (prayerDataForYear['prayersMissed'] / totalPrayersForYear * 100)\n                .round();\n\n        await savePrayerData();\n        break; // Break after updating the first incomplete year\n      }\n    }\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> savePrayerData() async {\n    await _hiveService.saveData('prayerData', prayerData);\n    print('Saved data to Hive: $prayerData');\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'endYear': currentYear,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': getTotalPrayersForYear(currentYear),\n            }\n        }\n      }\n    };\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    shareText += 'Total Completed: ${getTotalCompletedPrayers()}\\n';\n    Share.share(shareText);\n  }\n\n  bool isLeapYear(int year) {\n    return year % 4 == 0 && (year % 100 != 0 || year % 400 == 0);\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    prayerData['birthYear'] = birthYear;\n    await savePrayerData();\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ï·º) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'Ø¹ÙŽÙ†Ù’ Ø£ÙŽØ¨ÙÙŠ Ù‡ÙØ±ÙŽÙŠÙ’Ø±ÙŽØ©ÙŽ Ø±ÙŽØ¶ÙÙŠÙŽ Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù Ø¹ÙŽÙ†Ù’Ù‡Ù Ù‚ÙŽØ§Ù„ÙŽ: Ù‚ÙŽØ§Ù„ÙŽ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù ØµÙŽÙ„Ù‘ÙŽÙ‰ Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ÙˆÙŽØ³ÙŽÙ„Ù‘ÙŽÙ…ÙŽ: \" Ø¥ÙÙ†Ù‘ÙŽ Ø§Ù„Ù„Ù‘ÙŽÙ‡ÙŽ Ø¹ÙŽØ²Ù‘ÙŽ ÙˆÙŽØ¬ÙŽÙ„Ù‘ÙŽ Ù‚ÙŽØ§Ù„ÙŽ: Ù…ÙŽÙ†Ù’ Ø¹ÙŽØ§Ø¯ÙŽÙ‰ Ù„ÙÙŠ ÙˆÙŽÙ„ÙÙŠÙ‘Ù‹Ø§ØŒ ÙÙŽÙ‚ÙŽØ¯Ù’ Ø¢Ø°ÙŽÙ†Ù’ØªÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙŽØ±Ù’Ø¨ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙ‚ÙŽØ±Ù‘ÙŽØ¨ÙŽ Ø¥ÙÙ„ÙŽÙŠÙ‘ÙŽ Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø¨ÙØ´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽØ­ÙŽØ¨Ù‘ÙŽ Ø¥ÙÙ„ÙŽÙŠÙ‘ÙŽ Ù…ÙÙ…Ù‘ÙŽØ§ Ø§ÙÙ’ØªÙŽØ±ÙŽØ¶Ù’ØªÙ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ÙŠÙŽØ²ÙŽØ§Ù„Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ ÙŠÙŽØªÙŽÙ‚ÙŽØ±Ù‘ÙŽØ¨Ù Ø¥ÙÙ„ÙŽÙŠÙ‘ÙŽ Ø¨ÙØ§Ù„Ù†Ù‘ÙŽÙˆÙŽØ§ÙÙÙ„Ù Ø­ÙŽØªÙ‘ÙŽÙ‰ Ø£ÙØ­ÙØ¨Ù‘ÙŽÙ‡ÙØŒ ÙÙŽØ¥ÙØ°ÙŽØ§ Ø£ÙŽØ­Ù’Ø¨ÙŽØ¨Ù’ØªÙÙ‡ÙØŒ ÙƒÙÙ†Ù’ØªÙ Ø³ÙŽÙ…Ù’Ø¹ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØ°ÙÙŠ ÙŠÙŽØ³Ù’Ù…ÙŽØ¹Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽØ¨ÙŽØµÙŽØ±ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØ°ÙÙŠ ÙŠÙØ¨Ù’ØµÙØ±Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽÙŠÙŽØ¯ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØªÙÙŠ ÙŠÙŽØ¨Ù’Ø·ÙØ´Ù Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ±ÙØ¬Ù’Ù„ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØªÙÙŠ ÙŠÙŽÙ…Ù’Ø´ÙÙŠ Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ¥ÙÙ†Ù’ Ø³ÙŽØ£ÙŽÙ„ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹Ù’Ø·ÙÙŠÙŽÙ†Ù‘ÙŽÙ‡ÙØŒ ÙˆÙŽÙ„ÙŽØ¦ÙÙ†Ù’ Ø§Ø³Ù’ØªÙŽØ¹ÙŽØ§Ø°ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹ÙÙŠØ°ÙŽÙ†Ù‘ÙŽÙ‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽØ±ÙŽØ¯Ù‘ÙŽØ¯Ù’ØªÙ Ø¹ÙŽÙ†Ù’ Ø´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽÙ†ÙŽØ§ ÙÙŽØ§Ø¹ÙÙ„ÙÙ‡Ù ØªÙŽØ±ÙŽØ¯Ù‘ÙØ¯ÙÙŠ Ø¹ÙŽÙ†Ù’ Ù†ÙŽÙÙ’Ø³Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØŒ ÙŠÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ø§Ù„Ù’Ù…ÙŽÙˆÙ’ØªÙŽ ÙˆÙŽØ£ÙŽÙ†ÙŽØ§ Ø£ÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ù…ÙŽØ³ÙŽØ§Ø¡ÙŽØªÙŽÙ‡Ù - Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n\nlib/services/prayer_service.dart:180:5: Error: The method 'notifyListeners' isn't defined for the class 'PrayerService'.\n - 'PrayerService' is from 'package:amana/services/prayer_service.dart' ('lib/services/prayer_service.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'notifyListeners'.\n    notifyListeners();\n    ^^^^^^^^^^^^^^^\nlib/screens/home_screen.dart:30:49: Error: The method 'getTotalPrayersMissed' isn't defined for the class 'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'getTotalPrayersMissed'.\n        int totalMissedPrayers = prayerProvider.getTotalPrayersMissed();\n                                                ^^^^^^^^^^^^^^^^^^^^^\nlib/screens/home_screen.dart:87:24: Error: The method 'getTotalMissedPrayersForPrayerType' isn't defined for the class\n'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'getTotalMissedPrayersForPrayerType'.\n        prayerProvider.getTotalMissedPrayersForPrayerType(prayer);\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nthink step by step about how to address the errors, should we update the provider or the service, what are best practices? return all files in totla",
      "created_at": "2024-06-02T14:34:22.955456",
      "sequence_order": 7,
      "parent_id": "e81e8974-fbff-4605-ad22-255c04530baa",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "7f7e6909-67e3-4c3f-b24a-1d7266537810",
      "role": "assistant",
      "content": "To address the errors and ensure the app functions correctly, we'll need to make several updates. The errors suggest that we need to implement the `notifyListeners` method correctly within the `PrayerProvider` and not the `PrayerService`. The logic for getting total missed prayers should also be in the provider.\n\nHere are the steps:\n\n1. **Move `notifyListeners` to the Provider**:\n   Ensure that the state management and notifications are handled in the `PrayerProvider` and not the `PrayerService`.\n\n2. **Implement Methods in the Provider**:\n   Methods like `getTotalPrayersMissed` and `getTotalMissedPrayersForPrayerType` should be implemented in the `PrayerProvider`.\n\n3. **Update the `PrayerService`**:\n   The `PrayerService` should only handle data retrieval and storage.\n\n### Updated Files\n\n#### 1. `myApp.dart`\nNo changes needed here.\n\n#### 2. `main.dart`\nNo changes needed here.\n\n#### 3. `constants.dart`\nNo changes needed here.\n\n#### 4. `providers/prayer_provider.dart`\nUpdate this file to include the necessary methods and state management.\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  int get percentageMissed => prayerData['percentageMissed'] ?? 25;\n  int get taqwaBuffer => prayerData['taqwaBuffer'] ?? 5;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    return _calculateTotalPossiblePrayers(startYear, endYear);\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var year = startYear; year <= endYear; year++) {\n      totalPrayers += _calculateYearlyTotalPossible(year);\n    }\n    return totalPrayers;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  void updatePercentageMissed(int year, int percentage) {\n    prayerData['yearlyData'][year.toString()].forEach((prayerData) {\n      prayerData['percentageMissed'] = percentage;\n      prayerData['prayersMissed'] = (365 * 5 * percentage / 100).round();\n      prayerData['prayersCompleted'] = (365 * 5) - prayerData['prayersMissed'];\n    });\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    await _prayerService.updatePrayerData(\n        prayer, year, prayersCompleted, prayersMissed, percentageMissed);\n    notifyListeners();\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'startMonth': 1,\n      'endYear': currentYear,\n      'endMonth': DateTime.now().month,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': getTotalPrayersForYear(currentYear),\n            }\n        }\n      }\n    };\n  }\n\n  Future<void> initializeDefaultPrayerData() async {\n    _setDefaultPrayerData();\n    await savePrayerData();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    var prayerData = _prayerService.prayerData;\n    prayerData['yearlyData'] = {};\n    for (int year = startYear; year <= endYear; year++) {\n      prayerData['yearlyData'][year.toString()] = {\n        for (var prayer in prayers)\n          prayer: {\n            'percentMissed': percentageMissedByYear[year]!,\n            'prayersCompleted': getTotalPrayersForYear(year) -\n                (getTotalPrayersForYear(year) *\n                        percentageMissedByYear[year]! /\n                        100)\n                    .round(),\n            'prayersMissed': (getTotalPrayersForYear(year) *\n                    percentageMissedByYear[year]! /\n                    100)\n                .round(),\n          }\n      };\n    }\n    notifyListeners();\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return _prayerService.getTotalPrayersForYear(year);\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    return _prayerService.getCompletedPrayersForPrayerType(prayer);\n  }\n\n  Future<bool> resetApplication() async {\n    bool result = await _prayerService.resetApplication();\n    if (result) {\n      notifyListeners();\n    }\n    return result;\n  }\n\n  void sharePrayerData() {\n    _prayerService.sharePrayerData();\n  }\n\n  int getStreak() {\n    return 0; // Placeholder\n  }\n\n  double getEPPD() {\n    return 0.0; // Placeholder\n  }\n\n  int getCompletionTime() {\n    return 0; // Placeholder\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    await _prayerService.saveBirthYear(birthYear);\n    notifyListeners();\n  }\n\n  int _calculateTotalPossiblePrayers(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] != null) {\n      for (var prayer in prayers) {\n        totalPossible += (prayerData['yearlyData",
      "created_at": "2024-06-02T14:35:18.393217",
      "sequence_order": 8,
      "parent_id": "aaa2097e-23e3-449a-93c8-14fdbcdbfdc0",
      "metadata": {
        "status": "finished_partial_completion",
        "weight": 1,
        "end_turn": false
      }
    },
    {
      "id": "9280405f-1bb7-4799-8709-09fc1e8a2a1b",
      "role": "assistant",
      "content": "'][year.toString()][prayer]\n                    ['prayersMissed'] as num)\n                .toInt() +\n            (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersCompleted'] as num)\n                .toInt();\n      }\n    }\n    return totalPossible;\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n}\n```\n\n#### 5. `screens/settings_screen.dart`\nNo changes needed here.\n\n#### 6. `screens/prayer_progress_card_material.dart`\nUpdate to include the necessary methods for displaying missed prayers.\n\n```dart\nimport '../platform_specific_widget/amana_button.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardMaterial({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers =\n        prayerProvider.getCompletedPrayersForPrayerType(prayer);\n    int missedPrayers =\n        prayerProvider.getTotalMissedPrayersForPrayerType(prayer);\n\n    return Card(\n      child: Padding(\n        padding: REdgeInsets.all(14),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8).r,\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0\n                    ? (missedPrayers / totalPrayers).clamp(0, 1)\n                    : 0,\n                minHeight: 12.h,\n                backgroundColor: Colors.grey[300],\n                valueColor:\n                    const AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text('${(missedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$missedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              label: 'Pray',\n              isAppLevel: false,\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\n#### 7. `screens/edit_details_screen.dart`\nNo changes needed here.\n\n#### 8. `screens/year_selection_screen.dart`\nNo changes needed here.\n\n#### 9. `screens/home_screen.dart`\nUpdate to use the correct methods from the provider.\n\n```dart\nimport 'dart:io' show Platform;\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport 'package:flutter/cupertino.dart' as cupertino;\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../providers/prayer_provider.dart';\nimport '../screens/prayer_progress_card_material.dart';\nimport 'prayer_progress_card_cupertino.dart';\nimport 'year_selection_screen.dart';\nimport 'edit_details_screen.dart';\nimport 'settings_screen.dart';\nimport 'package:fl_chart/fl_chart.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        int totalPrayersPossible = prayerProvider.getTotalPrayersPossible();\n        int totalMissedPrayers = prayerProvider.getTotalPrayersMissed();\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Amana Audit'),\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                Text('Total Prayers Missed'),\n                SizedBox(height: 8),\n                Text('$totalMissedPrayers'),\n                SizedBox(height: 8),\n                LinearProgressIndicator(\n                  value: totalPrayersPossible > 0\n                      ? totalMissedPrayers / totalPrayersPossible\n                      : 0,\n                  minHeight: 16,\n                  backgroundColor: Colors.grey[300],\n                  valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayerProvider.prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(prayer: prayer);\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n```\n\n#### 10. `services/prayer_service.dart`\nRemove `notifyListeners` calls from this file.\n\n```dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, dynamic> prayerData = {};\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map) {\n      prayerData =\n          Map<String, dynamic>.from(loadedData.cast<String, dynamic>());\n    } else {\n      _setDefaultPrayerData();\n      savePrayerData();\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> createDetailedBreakdown(\n      int startYear, int endYear, Map<int, int> percentageMissedByYear) async {\n    prayerData['prayerData'] = [\n      for (int year = startYear; year <= endYear; year++)\n        {\n          'year': year,\n          'totalPrayed': 0,\n          'totalMissed': 0,\n          'months': [\n            for (int month = 1; month <= 12; month++)\n              {\n                'monthNumber': month,\n                'totalPrayed': 0,\n                'totalMissed': 0,\n                'weeks': [\n                  for (int week = 1; week <= 5; week++)\n                    {\n                      'weekNumber': week,\n                      'totalPrayed': 0,\n                      'totalMissed': 0,\n                      'days': [\n                        for (int day = 1; day <= 7; day++)\n                          {\n                            'dayNumber': day,\n                            'prayers': [\n                              for (var prayer in prayers)\n                                {'prayerName': prayer, 'missed': false}\n                            ],\n                          },\n                      ],\n                    },\n                ],\n              },\n          ],\n        },\n    ];\n    await savePrayerData();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    if (prayerData['yearlyData'][year.toString()] == null) {\n      prayerData['yearlyData'][year.toString()] = {};\n    }\n    prayerData['yearlyData'][year.toString()][prayer] = {\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'percentMissed': percentageMissed,\n    };\n    await savePrayerData();\n  }\n\n  int getTotalPrayersPossible(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (int year = startYear; year <= endYear; year++) {\n      totalPossible +=\n          isLeapYear(year) ? 366 * prayers.length : 365 * prayers.length;\n    }\n    return totalPossible;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    int completedPrayers = 0;\n    for (var year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      if (prayerData['yearlyData'][year.toString()] != null &&\n          prayerData['yearlyData'][year.toString()][prayer] != null) {\n        completedPrayers += prayerData['yearlyData'][year.toString()][prayer]\n            ['prayersCompleted'] as int",
      "created_at": "2024-06-02T14:38:21.162318",
      "sequence_order": 9,
      "parent_id": "7f7e6909-67e3-4c3f-b24a-1d7266537810",
      "metadata": {
        "status": "finished_partial_completion",
        "weight": 1,
        "end_turn": false
      }
    },
    {
      "id": "32311dc9-e49a-45b0-b8e8-bc819ae71c9e",
      "role": "assistant",
      "content": ";\n      }\n    }\n    return completedPrayers;\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return isLeapYear(year) ? 366 * prayers.length : 365 * prayers.length;\n  }\n\n  int getTotalPrayersForPrayerTypeInYear(String prayer, int year) {\n    int totalPrayers = 0;\n    if (prayerData['yearlyData'][year.toString()] != null &&\n        prayerData['yearlyData'][year.toString()][prayer] != null) {\n      totalPrayers = prayerData['yearlyData'][year.toString()][prayer]\n                  ['prayersCompleted'] +\n              prayerData['yearlyData'][year.toString()][prayer]['prayersMissed']\n          as int;\n    }\n    return totalPrayers;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    for (int year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      var prayerDataForYear = prayerData['yearlyData'][year.toString()][prayer];\n      if (prayerDataForYear == null) {\n        prayerDataForYear = {\n          'prayersCompleted': 0,\n          'prayersMissed': getTotalPrayersForYear(year),\n          'percentMissed': 100,\n        };\n      }\n      int totalPrayersForYear = getTotalPrayersForYear(year);\n      if (prayerDataForYear['prayersCompleted'] < totalPrayersForYear) {\n        prayerDataForYear['prayersCompleted']++;\n        prayerDataForYear['prayersMissed'] =\n            totalPrayersForYear - prayerDataForYear['prayersCompleted'];\n        prayerDataForYear['percentMissed'] =\n            (prayerDataForYear['prayersMissed'] / totalPrayersForYear * 100)\n                .round();\n\n        await savePrayerData();\n        break; // Break after updating the first incomplete year\n      }\n    }\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n            }\n        }\n    };\n\n    await savePrayerData();\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> savePrayerData() async {\n    await _hiveService.saveData('prayerData', prayerData);\n    print('Saved data to Hive: $prayerData');\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'endYear': currentYear,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': getTotalPrayersForYear(currentYear),\n            }\n        }\n      }\n    };\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    shareText += 'Total Completed: ${getTotalCompletedPrayers()}\\n';\n    Share.share(shareText);\n  }\n\n  bool isLeapYear(int year) {\n    return year % 4 == 0 && (year % 100 != 0 || year % 400 == 0);\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    prayerData['birthYear'] = birthYear;\n    await savePrayerData();\n  }\n}\n```\n\nThese updates should resolve the errors and ensure proper state management in your Flutter app.",
      "created_at": "2024-06-02T14:39:13.813509",
      "sequence_order": 10,
      "parent_id": "9280405f-1bb7-4799-8709-09fc1e8a2a1b",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": true
      }
    },
    {
      "id": "aaa2e253-6963-4b4a-9617-f9ffc7f6bd00",
      "role": "user",
      "content": "\nlib/screens/home_screen.dart:30:49: Error: The method 'getTotalPrayersMissed' isn't defined for the class 'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'getTotalPrayersMissed'.\n        int totalMissedPrayers = prayerProvider.getTotalPrayersMissed();\n                                                ^^^^^^^^^^^^^^^^^^^^^\nlib/screens/home_screen.dart:87:24: Error: The method 'getTotalMissedPrayersForPrayerType' isn't defined for the class\n'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'getTotalMissedPrayersForPrayerType'.\n        prayerProvider.getTotalMissedPrayersForPrayerType(prayer);\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final PrayerProvider prayerProvider;\n\n  const MyApp({super.key, required this.prayerProvider});\n\n  @override\n  Widget build(BuildContext context) {\n    return ChangeNotifierProvider.value(\n      value: prayerProvider,\n      child: AmanaMaterialApp(\n        title: 'Amana Audit',\n        debugShowCheckedModeBanner: false,\n        theme: ThemeData(\n            fontFamily: \"OpenSans\",\n            scaffoldBackgroundColor: Colors.grey[100],\n            primarySwatch: Colors.blue),\n        initialRoute: '/',\n        routes: {\n          '/': (context) => const HomeScreen(),\n          '/year-selection': (context) => const YearSelectionScreen(),\n          '/edit-details': (context) => const EditDetailsScreen()\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./main.dart\n####################\n\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'providers/prayer_provider.dart';\nimport '../services/prayer_service.dart';\nimport '../services/hive_service.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  final prayerService = PrayerService(hiveService);\n  final prayerProvider = PrayerProvider(prayerService);\n  await prayerProvider.loadData();\n  runApp(MyApp(\n    prayerProvider: prayerProvider,\n  ));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2020;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  int get percentageMissed => prayerData['percentageMissed'] ?? 25;\n  int get taqwaBuffer => prayerData['taqwaBuffer'] ?? 5;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    return _calculateTotalPossiblePrayers(startYear, endYear);\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var year = startYear; year <= endYear; year++) {\n      totalPrayers += _calculateYearlyTotalPossible(year);\n    }\n    return totalPrayers;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  void updatePercentageMissed(int year, int percentage) {\n    prayerData['yearlyData'][year.toString()].forEach((prayerData) {\n      prayerData['percentageMissed'] = percentage;\n      prayerData['prayersMissed'] = (365 * 5 * percentage / 100).round();\n      prayerData['prayersCompleted'] = (365 * 5) - prayerData['prayersMissed'];\n    });\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    await _prayerService.updatePrayerData(\n        prayer, year, prayersCompleted, prayersMissed, percentageMissed);\n    notifyListeners();\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'startMonth': 1,\n      'endYear': currentYear,\n      'endMonth': DateTime.now().month,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': 0,\n            }\n        }\n      }\n    };\n  }\n\n  Future<void> initializeDefaultPrayerData() async {\n    _setDefaultPrayerData();\n    await savePrayerData();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    var prayerData = _prayerService.prayerData;\n    prayerData['yearlyData'] = {};\n    for (int year = startYear; year <= endYear; year++) {\n      prayerData['yearlyData'][year.toString()] = {\n        for (var prayer in prayers)\n          prayer: {\n            'percentMissed': percentageMissedByYear[year]!,\n            'prayersCompleted': getTotalPrayersForYear(year) -\n                (getTotalPrayersForYear(year) *\n                        percentageMissedByYear[year]! /\n                        100)\n                    .round(),\n            'prayersMissed': (getTotalPrayersForYear(year) *\n                    percentageMissedByYear[year]! /\n                    100)\n                .round(),\n          }\n      };\n    }\n    notifyListeners();\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return _prayerService.getTotalPrayersForYear(year);\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    return _prayerService.getCompletedPrayersForPrayerType(prayer);\n  }\n\n  Future<bool> resetApplication() async {\n    bool result = await _prayerService.resetApplication();\n    if (result) {\n      notifyListeners();\n    }\n    return result;\n  }\n\n  void sharePrayerData() {\n    _prayerService.sharePrayerData();\n  }\n\n  int getStreak() {\n    return 0; // Placeholder\n  }\n\n  double getEPPD() {\n    return 0.0; // Placeholder\n  }\n\n  int getCompletionTime() {\n    return 0; // Placeholder\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    await _prayerService.saveBirthYear(birthYear);\n    notifyListeners();\n  }\n\n  int _calculateTotalPossiblePrayers(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] != null) {\n      for (var prayer in prayers) {\n        totalPossible += (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersMissed'] as num)\n                .toInt() +\n            (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersCompleted'] as num)\n                .toInt();\n      }\n    }\n    return totalPossible;\n  }\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\n//prayer progress card material . dart\nimport '../platform_specific_widget/amana_button.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardMaterial({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers =\n        prayerProvider.getCompletedPrayersForPrayerType(prayer);\n\n    return Card(\n      child: Padding(\n        padding: REdgeInsets.all(14),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8).r,\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0 ? (completedPrayers / totalPrayers).clamp(0, 1) : 0,\n                minHeight: 12.h,\n                backgroundColor: Colors.grey[300],\n                valueColor:\n                    const AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text(\n                '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              label: 'Pray',\n              isAppLevel: false,\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport '../platform_specific_widget/amana_drop_down.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_month_drop_down.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({super.key});\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n\n  String? _selectedMonth;\n  final Map<String, TextEditingController> _controllers = {};\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    for (var prayer in prayerProvider.prayers) {\n      _controllers[prayer] = TextEditingController();\n    }\n  }\n\n  @override\n  void dispose() {\n    _controllers.forEach((_, controller) => controller.dispose());\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return AmanaScaffold(\n      title: \"Edit Details\",\n      body: SingleChildScrollView(\n        child: Padding(\n          padding: REdgeInsets.all(16.0),\n          child: Column(\n            crossAxisAlignment:\n                kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n            children: [\n              Text(\n                'Pick each year and reflect, add what percentage you estimate you missed that year.',\n                style: TextStyle(fontSize: 18, color: Colors.black),\n              ),\n              SizedBox(height: 20.h),\n              _buildYearDropdown(prayerProvider),\n              SizedBox(height: 20.h),\n              _selectedYear != null && _selectedYear != 0\n                  ? _buildMonthDropDown(prayerProvider)\n                  : Text(\"Selecting Month\"),\n              SizedBox(\n                height: 20.h,\n              ),\n              if (_selectedYear != null &&\n                  _selectedYear != 0 &&\n                  _selectedMonth != null &&\n                  _selectedMonth != \"\")\n                ...prayerProvider.prayers\n                    .map((prayer) => _buildPrayerRow(prayerProvider, prayer)),\n              SizedBox(height: 16.h),\n              kIsWeb\n                  ? AmanaButton(\n                      onPress: () {\n                        for (var prayer in prayerProvider.prayers) {\n                          final percentage =\n                              int.tryParse(_controllers[prayer]!.text) ?? 0;\n                          prayerProvider.updatePrayerData(\n                            prayer,\n                            _selectedYear!,\n                            (365 * percentage / 100).round(),\n                            (365 - (365 * percentage / 100)).round(),\n                            percentage,\n                          );\n                        }\n                        prayerProvider.savePrayerData();\n                        Navigator.pushAndRemoveUntil(\n                            context,\n                            MaterialPageRoute(\n                                builder: (context) => HomeScreen()),\n                            (route) => false);\n                      },\n                      label: \"Save\",\n                      isAppLevel: true)\n                  : AmanaButton(\n                      onPress: () {\n                        for (var prayer in prayerProvider.prayers) {\n                          final percentage =\n                              int.tryParse(_controllers[prayer]!.text) ?? 0;\n                          prayerProvider.updatePrayerData(\n                            prayer,\n                            _selectedYear!,\n                            (365 * percentage / 100).round(),\n                            (365 - (365 * percentage / 100)).round(),\n                            percentage,\n                          );\n                        }\n                        prayerProvider.savePrayerData();\n                        Navigator.pushAndRemoveUntil(\n                            context,\n                            MaterialPageRoute(\n                                builder: (context) => HomeScreen()),\n                            (route) => false);\n                      },\n                      label: \"Save\",\n                      isAppLevel: true),\n              SizedBox(height: 16.h),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildYearDropdown(PrayerProvider prayerProvider) {\n    final startYear = prayerProvider.startYear;\n    final endYear = prayerProvider.endYear;\n\n    return AmanaDropDown(\n      value: _selectedYear,\n      items: List.generate(endYear - startYear + 2, (index) {\n        final year = (index == 0) ? 0 : startYear + (index - 1);\n        return {\n          \"value\": year,\n          \"child\": year == 0 ? Text(\"Select Year\") : Text('$year'),\n        };\n      }),\n      onChanged: (newValue) {\n        setState(() {\n          _selectedYear = newValue;\n        });\n      },\n      labelText: 'Select Year',\n    );\n  }\n\n  Widget _buildMonthDropDown(PrayerProvider provider) {\n    return AmanaMonthDropDown(\n        items: List.generate(13, (index) {\n          final month = (index == 0) ? \"\" : provider.monthsList[index - 1];\n          return {\n            \"value\": month,\n            \"child\": month == \"\" ? Text(\"Select Month\") : Text('$month'),\n          };\n        }),\n        onChanged: (val) {\n          setState(() {\n            _selectedMonth = val.toString();\n          });\n        },\n        value: _selectedMonth ?? \"\",\n        labelText: \"Select Month\");\n  }\n\n  Widget _buildPresetOptions(PrayerProvider provider) {\n    return Column(\n      crossAxisAlignment: CrossAxisAlignment.start,\n      children: [\n        ListTile(\n          leading: Icon(Icons.check_circle_outline),\n          title: Text('Set all years to a specific percentage'),\n          onTap: () {\n            showDialog(\n              context: context,\n              builder: (context) {\n                int percentage = 50;\n                return AlertDialog(\n                  title: Text('Set Percentage for All Years'),\n                  content: StatefulBuilder(\n                    builder: (context, setState) {\n                      return Slider(\n                        value: percentage.toDouble(),\n                        min: 0,\n                        max: 100,\n                        divisions: 20,\n                        label: '$percentage%',\n                        onChanged: (value) {\n                          setState(() {\n                            percentage = value.round();\n                          });\n                        },\n                      );\n                    },\n                  ),\n                  actions: [\n                    TextButton(\n                      onPressed: () {\n                        Navigator.pop(context);\n                      },\n                      child: Text('Cancel'),\n                    ),\n                    TextButton(\n                      onPressed: () {\n                        Map<int, int> percentageMissedByYear = {};\n                        for (int year = provider.startYear;\n                            year <= provider.endYear;\n                            year++) {\n                          percentageMissedByYear[year] = percentage;\n                        }\n                        provider.applyPresetOption(percentageMissedByYear);\n                        Navigator.pop(context);\n                      },\n                      child: Text('Apply'),\n                    ),\n                  ],\n                );\n              },\n            );\n          },\n        ),\n      ],\n    );\n  }\n\n  Widget _buildPrayerRow(PrayerProvider prayerProvider, String prayer) {\n    final prayerData =\n        prayerProvider.getPrayerData()['yearlyData'][_selectedYear.toString()];\n\n    // Add null check here\n    if (prayerData == null || prayerData[prayer] == null) {\n      return Container();\n    }\n\n    final prayerPercentage = prayerData[prayer]['percentMissed'];\n\n    return Padding(\n      padding: REdgeInsets.symmetric(vertical: 4.0),\n      child: Row(\n        mainAxisAlignment: MainAxisAlignment.spaceBetween,\n        children: [\n          Expanded(\n              flex: 2,\n              child: Text(\n                prayer,\n                style: TextStyle(color: Colors.black),\n              )),\n          Expanded(\n            child: AmanaInputField(\n              controller: _controllers[prayer]!\n                ..text = prayerPercentage.toString(),\n              sufixIcon: Icons.percent_outlined,\n              onChange: (val) {},\n              label: \"Missed\",\n              keyboardType: TextInputType.number,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(\n        startYear, startMonth, endYear, endMonth, percentageMissedByYear);\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart' as material;\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardCupertino({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers = 0;\n    final startYear = prayerProvider.startYear;\n    final endYear = prayerProvider.endYear;\n\n    for (var year = startYear; year <= endYear; year++) {\n      final yearlyData = prayerProvider.getPrayerData()['yearlyData'] ?? {};\n      final prayerData = yearlyData[year.toString()] ?? {};\n      completedPrayers += (prayerData[prayer]?['prayersCompleted'] ?? 0) as int;\n    }\n\n    return CupertinoCard(\n      child: Padding(\n        padding: REdgeInsets.all(16),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: const TextStyle(\n                    fontWeight: FontWeight.bold, color: CupertinoColors.black)),\n            const SizedBox(height: 8.0),\n            material.LinearProgressIndicator(\n              borderRadius: BorderRadius.circular(15),\n              value: totalPrayers > 0 ? (completedPrayers / totalPrayers).clamp(0, 1) : 0,\n              minHeight: 10.h,\n              backgroundColor: CupertinoColors.systemGrey5,\n              valueColor: const AlwaysStoppedAnimation<CupertinoDynamicColor>(\n                  CupertinoColors.systemGreen),\n            ),\n            Text(\n                '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14, color: CupertinoColors.black)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12, color: CupertinoColors.black)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              isAppLevel: false,\n              label: \"Pray\",\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\nclass CupertinoCard extends StatelessWidget {\n  final Widget child;\n\n  const CupertinoCard({Key? key, required this.child}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      decoration: BoxDecoration(\n        color: CupertinoColors.systemGrey6,\n        borderRadius: BorderRadius.circular(12).r,\n        boxShadow: [\n          BoxShadow(\n            color: CupertinoColors.black.withOpacity(0.1),\n            blurRadius: 10,\n            offset: const Offset(0, 2),\n          ),\n        ],\n      ),\n      child: child,\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\nimport 'dart:io' show Platform;\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport 'package:flutter/cupertino.dart' as cupertino;\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../providers/prayer_provider.dart';\nimport '../screens/prayer_progress_card_material.dart';\nimport 'prayer_progress_card_cupertino.dart';\nimport 'year_selection_screen.dart';\nimport 'edit_details_screen.dart';\nimport 'settings_screen.dart';\nimport 'package:fl_chart/fl_chart.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        int totalPrayersPossible = prayerProvider.getTotalPrayersPossible();\n        int totalMissedPrayers = prayerProvider.getTotalPrayersMissed();\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Amana Audit'),\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                Text('Total Prayers Missed'),\n                SizedBox(height: 8),\n                Text('$totalMissedPrayers'),\n                SizedBox(height: 8),\n                LinearProgressIndicator(\n                  value: totalPrayersPossible > 0\n                      ? totalMissedPrayers / totalPrayersPossible\n                      : 0,\n                  minHeight: 16,\n                  backgroundColor: Colors.grey[300],\n                  valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayerProvider.prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(prayer: prayer);\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardMaterial({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers =\n        prayerProvider.getCompletedPrayersForPrayerType(prayer);\n    int missedPrayers =\n        prayerProvider.getTotalMissedPrayersForPrayerType(prayer);\n\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0\n                    ? (missedPrayers / totalPrayers).clamp(0, 1)\n                    : 0,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text('${(missedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$missedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              label: 'Pray',\n              isAppLevel: false,\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n\n  Widget _buildActivityChart(PrayerProvider prayerProvider) {\n    final totalPrayersPossible = prayerProvider.getTotalPrayersPossible();\n    final totalCompletedPrayers = prayerProvider.getTotalCompletedPrayers();\n    final remainingPrayers = totalPrayersPossible - totalCompletedPrayers;\n\n    final currentYear = DateTime.now().year;\n    final age = currentYear - prayerProvider.birthYear;\n    final lifeExpectancy = 70; // Adjust life expectancy as needed\n\n    final yearsTillCompletion =\n        (remainingPrayers / (totalCompletedPrayers / age)).round();\n    final anticipatedCompletionYear = currentYear + yearsTillCompletion;\n\n    return AspectRatio(\n      aspectRatio: 2,\n      child: BarChart(\n        BarChartData(\n          alignment: BarChartAlignment.spaceBetween,\n          titlesData: FlTitlesData(\n            leftTitles: const AxisTitles(),\n            rightTitles: const AxisTitles(),\n            topTitles: const AxisTitles(),\n            bottomTitles: AxisTitles(\n              sideTitles: SideTitles(\n                showTitles: true,\n                getTitlesWidget: (value, meta) {\n                  final year = currentYear + value.toInt();\n                  return Text(year.toString());\n                },\n                reservedSize: 20,\n              ),\n            ),\n          ),\n          barTouchData: BarTouchData(enabled: false),\n          borderData: FlBorderData(show: false),\n          gridData: FlGridData(show: false),\n          barGroups: [\n            BarChartGroupData(\n              x: 0,\n              barRods: [\n                BarChartRodData(\n                  fromY: 0,\n                  toY: totalCompletedPrayers.toDouble(),\n                  color: Colors.green,\n                ),\n              ],\n            ),\n            BarChartGroupData(\n              x: 1,\n              barRods: [\n                BarChartRodData(\n                  fromY: 0,\n                  toY: remainingPrayers.toDouble(),\n                  color: Colors.grey,\n                ),\n              ],\n            ),\n          ],\n          maxY: totalPrayersPossible.toDouble(),\n          extraLinesData: ExtraLinesData(\n            horizontalLines: [\n              HorizontalLine(\n                y: lifeExpectancy.toDouble(),\n                color: Colors.red,\n                strokeWidth: 1,\n                dashArray: [20, 4],\n                label: HorizontalLineLabel(\n                  show: true,\n                  alignment: Alignment.topRight,\n                  style: TextStyle(color: Colors.red),\n                  labelResolver: (line) => 'Life Expectancy',\n                ),\n              ),\n              HorizontalLine(\n                y: anticipatedCompletionYear.toDouble(),\n                color: Colors.blue,\n                strokeWidth: 1,\n                dashArray: [20, 4],\n                label: HorizontalLineLabel(\n                  show: true,\n                  alignment: Alignment.topRight,\n                  style: TextStyle(color: Colors.blue),\n                  labelResolver: (line) => 'Anticipated Completion',\n                ),\n              ),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildStreakVisualization(PrayerProvider prayerProvider) {\n    // Implement streak visualization logic here\n    return Container(); // Return a valid widget\n  }\n\n  Widget _buildEPPDVisualization(PrayerProvider prayerProvider) {\n    // Implement EPPD visualization logic here\n    return Container(); // Return a valid widget\n  }\n\n  Widget _buildProgressVisualization(PrayerProvider prayerProvider) {\n    // Implement completion time visualization logic here\n    return Container(); // Return a valid widget\n  }\n\n  Widget _buildCompletionTimeVisualization(PrayerProvider prayerProvider) {\n    // Implement completion time visualization logic here\n    return Container(); // Return a valid widget\n  }\n}\n\n\n\n# File: ./lib/providers/prayer_provider.dart\n#############################################\n\n\n\n\n# File: ./lib/screens/edit_details_screen.dart\n###############################################\n\n\n\n\n# File: ./lib/screens/year_selection_screen.dart\n#################################################\n\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, dynamic> prayerData = {};\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map) {\n      prayerData =\n          Map<String, dynamic>.from(loadedData.cast<String, dynamic>());\n    } else {\n      _setDefaultPrayerData();\n      savePrayerData();\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> createDetailedBreakdown(\n      int startYear, int endYear, Map<int, int> percentageMissedByYear) async {\n    prayerData['prayerData'] = [\n      for (int year = startYear; year <= endYear; year++)\n        {\n          'year': year,\n          'totalPrayed': 0,\n          'totalMissed': 0,\n          'months': [\n            for (int month = 1; month <= 12; month++)\n              {\n                'monthNumber': month,\n                'totalPrayed': 0,\n                'totalMissed': 0,\n                'weeks': [\n                  for (int week = 1; week <= 5; week++)\n                    {\n                      'weekNumber': week,\n                      'totalPrayed': 0,\n                      'totalMissed': 0,\n                      'days': [\n                        for (int day = 1; day <= 7; day++)\n                          {\n                            'dayNumber': day,\n                            'prayers': [\n                              for (var prayer in prayers)\n                                {'prayerName': prayer, 'missed': false}\n                            ],\n                          },\n                      ],\n                    },\n                ],\n              },\n          ],\n        },\n    ];\n    await savePrayerData();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    if (prayerData['yearlyData'][year.toString()] == null) {\n      prayerData['yearlyData'][year.toString()] = {};\n    }\n    prayerData['yearlyData'][year.toString()][prayer] = {\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'percentMissed': percentageMissed,\n    };\n    await savePrayerData();\n  }\n\n  int getTotalPrayersPossible(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (int year = startYear; year <= endYear; year++) {\n      totalPossible +=\n          isLeapYear(year) ? 366 * prayers.length : 365 * prayers.length;\n    }\n    return totalPossible;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    int completedPrayers = 0;\n    for (var year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      if (prayerData['yearlyData'][year.toString()] != null &&\n          prayerData['yearlyData'][year.toString()][prayer] != null) {\n        completedPrayers += prayerData['yearlyData'][year.toString()][prayer]\n            ['prayersCompleted'] as int;\n      }\n    }\n    return completedPrayers;\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return isLeapYear(year) ? 366 * prayers.length : 365 * prayers.length;\n  }\n\n  int getTotalPrayersForPrayerTypeInYear(String prayer, int year) {\n    int totalPrayers = 0;\n    if (prayerData['yearlyData'][year.toString()] != null &&\n        prayerData['yearlyData'][year.toString()][prayer] != null) {\n      totalPrayers = prayerData['yearlyData'][year.toString()][prayer]\n                  ['prayersCompleted'] +\n              prayerData['yearlyData'][year.toString()][prayer]['prayersMissed']\n          as int;\n    }\n    return totalPrayers;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    for (int year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      var prayerDataForYear = prayerData['yearlyData'][year.toString()][prayer];\n      if (prayerDataForYear == null) {\n        prayerDataForYear = {\n          'prayersCompleted': 0,\n          'prayersMissed': getTotalPrayersForYear(year),\n          'percentMissed': 100,\n        };\n      }\n      int totalPrayersForYear = getTotalPrayersForYear(year);\n      if (prayerDataForYear['prayersCompleted'] < totalPrayersForYear) {\n        prayerDataForYear['prayersCompleted']++;\n        prayerDataForYear['prayersMissed'] =\n            totalPrayersForYear - prayerDataForYear['prayersCompleted'];\n        prayerDataForYear['percentMissed'] =\n            (prayerDataForYear['prayersMissed'] / totalPrayersForYear * 100)\n                .round();\n\n        await savePrayerData();\n        break; // Break after updating the first incomplete year\n      }\n    }\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n            }\n        }\n    };\n\n    await savePrayerData();\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> savePrayerData() async {\n    await _hiveService.saveData('prayerData', prayerData);\n    print('Saved data to Hive: $prayerData');\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'endYear': currentYear,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': getTotalPrayersForYear(currentYear),\n            }\n        }\n      }\n    };\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    shareText += 'Total Completed: ${getTotalCompletedPrayers()}\\n';\n    Share.share(shareText);\n  }\n\n  bool isLeapYear(int year) {\n    return year % 4 == 0 && (year % 100 != 0 || year % 400 == 0);\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    prayerData['birthYear'] = birthYear;\n    await savePrayerData();\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ï·º) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'Ø¹ÙŽÙ†Ù’ Ø£ÙŽØ¨ÙÙŠ Ù‡ÙØ±ÙŽÙŠÙ’Ø±ÙŽØ©ÙŽ Ø±ÙŽØ¶ÙÙŠÙŽ Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù Ø¹ÙŽÙ†Ù’Ù‡Ù Ù‚ÙŽØ§Ù„ÙŽ: Ù‚ÙŽØ§Ù„ÙŽ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù ØµÙŽÙ„Ù‘ÙŽÙ‰ Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ÙˆÙŽØ³ÙŽÙ„Ù‘ÙŽÙ…ÙŽ: \" Ø¥ÙÙ†Ù‘ÙŽ Ø§Ù„Ù„Ù‘ÙŽÙ‡ÙŽ Ø¹ÙŽØ²Ù‘ÙŽ ÙˆÙŽØ¬ÙŽÙ„Ù‘ÙŽ Ù‚ÙŽØ§Ù„ÙŽ: Ù…ÙŽÙ†Ù’ Ø¹ÙŽØ§Ø¯ÙŽÙ‰ Ù„ÙÙŠ ÙˆÙŽÙ„ÙÙŠÙ‘Ù‹Ø§ØŒ ÙÙŽÙ‚ÙŽØ¯Ù’ Ø¢Ø°ÙŽÙ†Ù’ØªÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙŽØ±Ù’Ø¨ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙ‚ÙŽØ±Ù‘ÙŽØ¨ÙŽ Ø¥ÙÙ„ÙŽÙŠÙ‘ÙŽ Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø¨ÙØ´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽØ­ÙŽØ¨Ù‘ÙŽ Ø¥ÙÙ„ÙŽÙŠÙ‘ÙŽ Ù…ÙÙ…Ù‘ÙŽØ§ Ø§ÙÙ’ØªÙŽØ±ÙŽØ¶Ù’ØªÙ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ÙŠÙŽØ²ÙŽØ§Ù„Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ ÙŠÙŽØªÙŽÙ‚ÙŽØ±Ù‘ÙŽØ¨Ù Ø¥ÙÙ„ÙŽÙŠÙ‘ÙŽ Ø¨ÙØ§Ù„Ù†Ù‘ÙŽÙˆÙŽØ§ÙÙÙ„Ù Ø­ÙŽØªÙ‘ÙŽÙ‰ Ø£ÙØ­ÙØ¨Ù‘ÙŽÙ‡ÙØŒ ÙÙŽØ¥ÙØ°ÙŽØ§ Ø£ÙŽØ­Ù’Ø¨ÙŽØ¨Ù’ØªÙÙ‡ÙØŒ ÙƒÙÙ†Ù’ØªÙ Ø³ÙŽÙ…Ù’Ø¹ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØ°ÙÙŠ ÙŠÙŽØ³Ù’Ù…ÙŽØ¹Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽØ¨ÙŽØµÙŽØ±ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØ°ÙÙŠ ÙŠÙØ¨Ù’ØµÙØ±Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽÙŠÙŽØ¯ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØªÙÙŠ ÙŠÙŽØ¨Ù’Ø·ÙØ´Ù Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ±ÙØ¬Ù’Ù„ÙŽÙ‡Ù Ø§Ù„Ù‘ÙŽØªÙÙŠ ÙŠÙŽÙ…Ù’Ø´ÙÙŠ Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ¥ÙÙ†Ù’ Ø³ÙŽØ£ÙŽÙ„ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹Ù’Ø·ÙÙŠÙŽÙ†Ù‘ÙŽÙ‡ÙØŒ ÙˆÙŽÙ„ÙŽØ¦ÙÙ†Ù’ Ø§Ø³Ù’ØªÙŽØ¹ÙŽØ§Ø°ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹ÙÙŠØ°ÙŽÙ†Ù‘ÙŽÙ‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽØ±ÙŽØ¯Ù‘ÙŽØ¯Ù’ØªÙ Ø¹ÙŽÙ†Ù’ Ø´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽÙ†ÙŽØ§ ÙÙŽØ§Ø¹ÙÙ„ÙÙ‡Ù ØªÙŽØ±ÙŽØ¯Ù‘ÙØ¯ÙÙŠ Ø¹ÙŽÙ†Ù’ Ù†ÙŽÙÙ’Ø³Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØŒ ÙŠÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ø§Ù„Ù’Ù…ÙŽÙˆÙ’ØªÙŽ ÙˆÙŽØ£ÙŽÙ†ÙŽØ§ Ø£ÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ù…ÙŽØ³ÙŽØ§Ø¡ÙŽØªÙŽÙ‡Ù - Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n",
      "created_at": "2024-06-02T14:39:53.218815",
      "sequence_order": 11,
      "parent_id": "32311dc9-e49a-45b0-b8e8-bc819ae71c9e",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "a08ec100-1e61-4e24-93b4-7fcd9803f39b",
      "role": "assistant",
      "content": "To resolve the errors, you need to define the missing methods `getTotalPrayersMissed` and `getTotalMissedPrayersForPrayerType` in the `PrayerProvider` class.\n\nHere's how you can update the `PrayerProvider` class to include these methods:\n\n### Update `prayer_provider.dart`\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  int get percentageMissed => prayerData['percentageMissed'] ?? 25;\n  int get taqwaBuffer => prayerData['taqwaBuffer'] ?? 5;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    return _calculateTotalPossiblePrayers(startYear, endYear);\n  }\n\n  int getTotalPrayersMissed() {\n    return _prayerService.getTotalPrayersMissed();\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var year = startYear; year <= endYear; year++) {\n      totalPrayers += _calculateYearlyTotalPossible(year);\n    }\n    return totalPrayers;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    return _prayerService.getTotalMissedPrayersForPrayerType(prayer);\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  void updatePercentageMissed(int year, int percentage) {\n    prayerData['yearlyData'][year.toString()].forEach((prayerData) {\n      prayerData['percentageMissed'] = percentage;\n      prayerData['prayersMissed'] = (365 * 5 * percentage / 100).round();\n      prayerData['prayersCompleted'] = (365 * 5) - prayerData['prayersMissed'];\n    });\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    await _prayerService.updatePrayerData(\n        prayer, year, prayersCompleted, prayersMissed, percentageMissed);\n    notifyListeners();\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'startMonth': 1,\n      'endYear': currentYear,\n      'endMonth': DateTime.now().month,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': 0,\n            }\n        }\n      }\n    };\n  }\n\n  Future<void> initializeDefaultPrayerData() async {\n    _setDefaultPrayerData();\n    await savePrayerData();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    var prayerData = _prayerService.prayerData;\n    prayerData['yearlyData'] = {};\n    for (int year = startYear; year <= endYear; year++) {\n      prayerData['yearlyData'][year.toString()] = {\n        for (var prayer in prayers)\n          prayer: {\n            'percentMissed': percentageMissedByYear[year]!,\n            'prayersCompleted': getTotalPrayersForYear(year) -\n                (getTotalPrayersForYear(year) *\n                        percentageMissedByYear[year]! /\n                        100)\n                    .round(),\n            'prayersMissed': (getTotalPrayersForYear(year) *\n                    percentageMissedByYear[year]! /\n                    100)\n                .round(),\n          }\n      };\n    }\n    notifyListeners();\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return _prayerService.getTotalPrayersForYear(year);\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    return _prayerService.getCompletedPrayersForPrayerType(prayer);\n  }\n\n  Future<bool> resetApplication() async {\n    bool result = await _prayerService.resetApplication();\n    if (result) {\n      notifyListeners();\n    }\n    return result;\n  }\n\n  void sharePrayerData() {\n    _prayerService.sharePrayerData();\n  }\n\n  int getStreak() {\n    return 0; // Placeholder\n  }\n\n  double getEPPD() {\n    return 0.0; // Placeholder\n  }\n\n  int getCompletionTime() {\n    return 0; // Placeholder\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    await _prayerService.saveBirthYear(birthYear);\n    notifyListeners();\n  }\n\n  int _calculateTotalPossiblePrayers(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] != null) {\n      for (var prayer in prayers) {\n        totalPossible += (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersMissed'] as num)\n                .toInt() +\n            (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersCompleted'] as num)\n                .toInt();\n      }\n    }\n    return totalPossible;\n  }\n}\n```\n\nWith these updates, the `PrayerProvider` class now includes the methods `getTotalPrayersMissed` and `getTotalMissedPrayersForPrayerType`, which will resolve the errors you encountered.",
      "created_at": "2024-06-02T14:40:53.472301",
      "sequence_order": 12,
      "parent_id": "aaa2e253-6963-4b4a-9617-f9ffc7f6bd00",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": true
      }
    },
    {
      "id": "aaa26cf7-caa5-4643-98b6-9725b0a56d05",
      "role": "user",
      "content": "home screen is missing start over and edit details screen as well as the counts are wrong:\n\nflutter: Saved data to Hive: {metadata: {createdAt: 2024-06-02T14:43:39.772800, updatedAt: 2024-06-02T14:43:39.772913, dataSource: Default}, prayerData: [], birthYear: 2000, startYear: 2024, endYear: 2024, yearlyData: {2024: {Fajr: {percentMissed: 100, prayersCompleted: 6, prayersMissed: 1824, totalPossible: 1830}, Dhuhr: {percentMissed: 50, prayersCompleted: 0, prayersMissed: 1830, totalPossible: 1830}, Asr: {percentMissed: 50, prayersCompleted: 0, prayersMissed: 1830, totalPossible: 1830}, Maghrib: {percentMissed: 50, prayersCompleted: 0, prayersMissed: 1830, totalPossible: 1830}, Isha: {percentMissed: 50, prayersCompleted: 0, prayersMissed: 1830, totalPossible: 1830}}}}\n",
      "created_at": "2024-06-02T14:44:35.741054",
      "sequence_order": 13,
      "parent_id": "a08ec100-1e61-4e24-93b4-7fcd9803f39b",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "29353fe5-523a-443f-8bcf-f251494ed3fe",
      "role": "assistant",
      "content": "Let's add the missing buttons and ensure that the counts are being correctly calculated and displayed on the home screen.\n\n### Update `home_screen.dart`\n\n```dart\nimport 'dart:io' show Platform;\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport 'package:flutter/cupertino.dart' as cupertino;\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\nimport 'prayer_progress_card_cupertino.dart';\nimport 'year_selection_screen.dart';\nimport 'edit_details_screen.dart';\nimport 'settings_screen.dart';\nimport 'package:fl_chart/fl_chart.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        int totalPrayersPossible = prayerProvider.getTotalPrayersPossible();\n        int totalMissedPrayers = prayerProvider.getTotalPrayersMissed();\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Amana Audit'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.push(\n                    context,\n                    MaterialPageRoute(builder: (context) => EditDetailsScreen()),\n                  );\n                },\n              ),\n              IconButton(\n                icon: Icon(Icons.refresh),\n                onPressed: () async {\n                  await prayerProvider.resetApplication();\n                  prayerProvider.loadData();\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                Text('Total Prayers Missed'),\n                SizedBox(height: 8),\n                Text('$totalMissedPrayers'),\n                SizedBox(height: 8),\n                LinearProgressIndicator(\n                  value: totalPrayersPossible > 0\n                      ? totalMissedPrayers / totalPrayersPossible\n                      : 0,\n                  minHeight: 16,\n                  backgroundColor: Colors.grey[300],\n                  valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayerProvider.prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(prayer: prayer);\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardMaterial({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers =\n        prayerProvider.getCompletedPrayersForPrayerType(prayer);\n    int missedPrayers =\n        prayerProvider.getTotalMissedPrayersForPrayerType(prayer);\n\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0\n                    ? (missedPrayers / totalPrayers).clamp(0, 1)\n                    : 0,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text('${(missedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$missedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              label: 'Pray',\n              isAppLevel: false,\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\n### Update `prayer_provider.dart`\n\nEnsure that the methods for calculating the counts are implemented correctly:\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  int get percentageMissed => prayerData['percentageMissed'] ?? 25;\n  int get taqwaBuffer => prayerData['taqwaBuffer'] ?? 5;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var year = startYear; year <= endYear; year++) {\n      totalPrayers += _calculateYearlyTotalPossible(year);\n    }\n    return totalPrayers;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n",
      "created_at": "2024-06-02T14:45:51.371688",
      "sequence_order": 14,
      "parent_id": "aaa26cf7-caa5-4643-98b6-9725b0a56d05",
      "metadata": {
        "status": "finished_partial_completion",
        "weight": 1,
        "end_turn": false
      }
    },
    {
      "id": "aaa2a15e-680d-43d1-bf62-b587bb67ad30",
      "role": "user",
      "content": "each month should have the total prayers possilble for that month which is for each prayer the total number of days and then all days added up, so it will add up to 5*total number of days, although because we are counting per prayer we need to know which prayer out of the 5 were completed so we can ",
      "created_at": "2024-06-02T14:46:04.672176",
      "sequence_order": 15,
      "parent_id": "29353fe5-523a-443f-8bcf-f251494ed3fe",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "0cbd3964-9a0f-4766-87e7-7ec6dd88b932",
      "role": "assistant",
      "content": "Sure, let's update the logic to account for the total possible prayers for each month and correctly handle the counting of completed and missed prayers for each prayer type. We'll modify the `PrayerProvider` to calculate the total prayers possible per month and update the data structure accordingly.\n\n### Update `prayer_provider.dart`\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  int get percentageMissed => prayerData['percentageMissed'] ?? 25;\n  int get taqwaBuffer => prayerData['taqwaBuffer'] ?? 5;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n              'monthlyData': _getMonthlyDataForYear(year, prayer, percentageMissedByYear[year]!),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  List<Map<String, int>> _getMonthlyDataForYear(int year, String prayer, int percentMissed) {\n    List<Map<String, int>> monthlyData = [];\n    for (int month = 1; month <= 12; month++) {\n      int daysInMonth = DateTime(year, month + 1, 0).day;\n      int totalPrayers = daysInMonth;\n      int prayersMissed = (totalPrayers * percentMissed / 100).round();\n      int prayersCompleted = totalPrayers - prayersMissed;\n      monthlyData.add({\n        'month': month,\n        'totalPrayers': totalPrayers,\n        'prayersCompleted': prayersCompleted,\n        'prayersMissed': prayersMissed,\n      });\n    }\n    return monthlyData;\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var year = startYear; year <= endYear; year++) {\n      totalPrayers += _calculateYearlyTotalPossible(year);\n    }\n    return totalPrayers;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] != null) {\n      for (var prayer in prayers) {\n        totalPossible += (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersMissed'] as num)\n                .toInt() +\n            (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersCompleted'] as num)\n                .toInt();\n      }\n    }\n    return totalPossible;\n  }\n}\n```\n\n### Update `prayer_service.dart`\n\nEnsure that the methods for calculating the counts are implemented correctly:\n\n```dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, dynamic> prayerData = {};\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map) {\n      prayerData =\n          Map<String, dynamic>.from(loadedData.cast<String, dynamic>());\n    } else {\n      _setDefaultPrayerData();\n      savePrayerData();\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> createDetailedBreakdown(\n      int startYear, int endYear, Map<int, int> percentageMissedByYear) async {\n    prayerData['prayerData'] = [\n      for (int year = startYear; year <= endYear; year++)\n        {\n          'year': year,\n          'totalPrayed': 0,\n          'totalMissed': 0,\n          'months': [\n            for (int month = 1; month <= 12; month++)\n              {\n                'monthNumber': month,\n                'totalPrayed': 0,\n                'totalMissed': 0,\n                'weeks': [\n                  for (int week = 1; week <= 5; week++)\n                    {\n                      'weekNumber': week,\n                      'totalPrayed': 0,\n                      'totalMissed': 0,\n                      'days': [\n                        for (int day = 1; day <= 7; day++)\n                          {\n                            'dayNumber': day,\n                            'prayers': [\n                              for (var prayer in prayers)\n                                {'prayerName': prayer, 'missed': false}\n                            ],\n                          },\n                      ],\n                    },\n                ],\n              },\n          ],\n        },\n    ];\n    await savePrayerData();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    if (prayerData['yearlyData'][year.toString()] == null) {\n      prayerData['yearlyData'][year.toString()] = {};\n    }\n    prayerData['yearlyData'][year.toString()][prayer] = {\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'percentMissed': percentageMissed,\n    };\n    await savePrayerData();\n  }\n\n  int getTotalPrayersPossible(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (int year = startYear; year <= endYear; year++) {\n     ",
      "created_at": "2024-06-02T14:47:07.259862",
      "sequence_order": 16,
      "parent_id": "aaa2a15e-680d-43d1-bf62-b587bb67ad30",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": false
      }
    },
    {
      "id": "e391a2db-2c84-4543-81dd-903066c8848c",
      "role": "assistant",
      "content": "Continuing from where we left off, let's ensure that the logic to calculate total prayers possible, missed prayers, and completed prayers per month is correctly implemented. The following is a continuation of the `PrayerService` class and the necessary parts to complete the solution.\n\n### Update `prayer_service.dart`\n\n```dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, dynamic> prayerData = {};\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map) {\n      prayerData =\n          Map<String, dynamic>.from(loadedData.cast<String, dynamic>());\n    } else {\n      _setDefaultPrayerData();\n      savePrayerData();\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> createDetailedBreakdown(\n      int startYear, int endYear, Map<int, int> percentageMissedByYear) async {\n    prayerData['prayerData'] = [\n      for (int year = startYear; year <= endYear; year++)\n        {\n          'year': year,\n          'totalPrayed': 0,\n          'totalMissed': 0,\n          'months': [\n            for (int month = 1; month <= 12; month++)\n              {\n                'monthNumber': month,\n                'totalPrayed': 0,\n                'totalMissed': 0,\n                'weeks': [\n                  for (int week = 1; week <= 5; week++)\n                    {\n                      'weekNumber': week,\n                      'totalPrayed': 0,\n                      'totalMissed': 0,\n                      'days': [\n                        for (int day = 1; day <= 7; day++)\n                          {\n                            'dayNumber': day,\n                            'prayers': [\n                              for (var prayer in prayers)\n                                {'prayerName': prayer, 'missed': false}\n                            ],\n                          },\n                      ],\n                    },\n                ],\n              },\n          ],\n        },\n    ];\n    await savePrayerData();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    if (prayerData['yearlyData'][year.toString()] == null) {\n      prayerData['yearlyData'][year.toString()] = {};\n    }\n    prayerData['yearlyData'][year.toString()][prayer] = {\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'percentMissed': percentageMissed,\n    };\n    await savePrayerData();\n  }\n\n  int getTotalPrayersPossible(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (int year = startYear; year <= endYear; year++) {\n      totalPossible += _getTotalDaysInYear(year) * prayers.length;\n    }\n    return totalPossible;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    int completedPrayers = 0;\n    for (var year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      if (prayerData['yearlyData'][year.toString()] != null &&\n          prayerData['yearlyData'][year.toString()][prayer] != null) {\n        completedPrayers += prayerData['yearlyData'][year.toString()][prayer]\n            ['prayersCompleted'] as int;\n      }\n    }\n    return completedPrayers;\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return _getTotalDaysInYear(year) * prayers.length;\n  }\n\n  int getTotalPrayersForPrayerTypeInYear(String prayer, int year) {\n    int totalPrayers = 0;\n    if (prayerData['yearlyData'][year.toString()] != null &&\n        prayerData['yearlyData'][year.toString()][prayer] != null) {\n      totalPrayers = prayerData['yearlyData'][year.toString()][prayer]\n                  ['prayersCompleted'] +\n              prayerData['yearlyData'][year.toString()][prayer]['prayersMissed']\n          as int;\n    }\n    return totalPrayers;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    for (int year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      var prayerDataForYear = prayerData['yearlyData'][year.toString()][prayer];\n      if (prayerDataForYear == null) {\n        prayerDataForYear = {\n          'prayersCompleted': 0,\n          'prayersMissed': getTotalPrayersForYear(year),\n          'percentMissed': 100,\n        };\n      }\n      int totalPrayersForYear = getTotalPrayersForYear(year);\n      if (prayerDataForYear['prayersCompleted'] < totalPrayersForYear) {\n        prayerDataForYear['prayersCompleted']++;\n        prayerDataForYear['prayersMissed'] =\n            totalPrayersForYear - prayerDataForYear['prayersCompleted'];\n        prayerDataForYear['percentMissed'] =\n            (prayerDataForYear['prayersMissed'] / totalPrayersForYear * 100)\n                .round();\n\n        await savePrayerData();\n        break; // Break after updating the first incomplete year\n      }\n    }\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n              'monthlyData': _getMonthlyDataForYear(year, prayer, percentageMissedByYear[year]!),\n            }\n        }\n    };\n\n    await savePrayerData();\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> savePrayerData() async {\n    await _hiveService.saveData('prayerData', prayerData);\n    print('Saved data to Hive: $prayerData');\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'endYear': currentYear,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': getTotalPrayersForYear(currentYear),\n            }\n        }\n      }\n    };\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayer",
      "created_at": "2024-06-03T15:37:23.743381",
      "sequence_order": 17,
      "parent_id": "09f50e7d-5f34-4593-8788-0ecbb987824b",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": false
      }
    },
    {
      "id": "987e4a68-7362-4912-996a-11c123a92af6",
      "role": "assistant",
      "content": "Got it. To implement the logic correctly, we'll ensure each month has the total possible prayers calculated and track the completion status for each prayer within those months. \n\n### Update `prayer_provider.dart`\n\nWe'll need to adjust the `PrayerProvider` to calculate the total possible prayers for each month and maintain the state of completed prayers. \n\nHere's how you can modify the `PrayerProvider` to achieve this:\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January', 'February', 'March', 'April', 'May', 'June',\n    'July', 'August', 'September', 'October', 'November', 'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear, int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n              'monthlyData': _calculateMonthlyData(year, percentageMissedByYear[year]!),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  Map<String, dynamic> _calculateMonthlyData(int year, int percentMissed) {\n    Map<String, dynamic> monthlyData = {};\n    for (int month = 1; month <= 12; month++) {\n      int daysInMonth = DateTime(year, month + 1, 0).day;\n      int totalPrayersPossible = daysInMonth * prayers.length;\n      int prayersMissed = (totalPrayersPossible * percentMissed / 100).round();\n      monthlyData[month.toString()] = {\n        'totalPossible': totalPrayersPossible,\n        'prayersMissed': prayersMissed,\n        'prayersCompleted': totalPrayersPossible - prayersMissed,\n      };\n    }\n    return monthlyData;\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var year = startYear; year <= endYear; year++) {\n      totalPrayers += _calculateYearlyTotalPossible(year);\n    }\n    return totalPrayers;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  void updatePercentageMissed(int year, int percentage) {\n    prayerData['yearlyData'][year.toString()].forEach((prayerData) {\n      prayerData['percentMissed'] = percentage;\n      prayerData['prayersMissed'] = (365 * 5 * percentage / 100).round();\n      prayerData['prayersCompleted'] = (365 * 5) - prayerData['prayersMissed'];\n    });\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted, int prayersMissed, int percentageMissed) async {\n    await _prayerService.updatePrayerData(prayer, year, prayersCompleted, prayersMissed, percentageMissed);\n    notifyListeners();\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'startMonth': 1,\n      'endYear': currentYear,\n      'endMonth': DateTime.now().month,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': getTotalPrayersForYear(currentYear),\n              'monthlyData': _calculateMonthlyData(currentYear, 50),\n            }\n        }\n      }\n    };\n  }\n\n  Future<void> initializeDefaultPrayerData() async {\n    _setDefaultPrayerData();\n    await savePrayerData();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    var prayerData = _prayerService.prayerData;\n    prayerData['yearlyData'] = {};\n    for (int year = startYear; year <= endYear; year++) {\n      prayerData['yearlyData'][year.toString()] = {\n        for (var prayer in prayers)\n          prayer: {\n            'percentMissed': percentageMissedByYear[year]!,\n            'prayersCompleted': getTotalPrayersForYear(year) -\n                (getTotalPrayersForYear(year) *\n                        percentageMissedByYear[year]! /\n                        100)\n                    .round(),\n            'prayersMissed': (getTotalPrayersForYear(year) *\n                    percentageMissedByYear[year]! /\n                    100)\n                .round(),\n            'monthlyData': _calculateMonthlyData(year, percentageMissedByYear[year]!),\n          }\n      };\n    }\n    notifyListeners();\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return _prayerService.getTotalPrayersForYear(year);\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    return _prayerService.getCompletedPrayersForPrayerType(prayer);\n  }\n\n  Future<bool> resetApplication() async {\n    bool result = await _prayerService.resetApplication();\n    if (result) {\n      notifyListeners();\n    }\n    return result;\n  }\n\n  void sharePrayerData() {\n    _prayerService.sharePrayerData();\n  }\n\n  int getStreak() {\n    return 0; // Placeholder\n  }\n\n  double getEPPD() {\n    return 0.0; // Placeholder\n  }\n\n  int getCompletionTime() {\n    return 0; // Placeholder\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    await _prayerService.saveBirthYear(b",
      "created_at": "2024-06-03T15:42:05.571983",
      "sequence_order": 18,
      "parent_id": "5eff0cb3-0d82-4286-a17e-aaa9221275c7",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": false
      }
    },
    {
      "id": "a6d2f304-2cf9-4434-b5e1-688121495229",
      "role": "assistant",
      "content": "  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    for (var prayer in prayers) {\n      totalPossible += _prayerService.getPrayerCountForYear(prayer, year);\n    }\n    return totalPossible;\n  }\n\n  Future<void> resetApplication() async {\n    await _prayerService.resetData();\n    loadData();\n  }\n\n  void _setDefaultPrayerData() {\n    prayerData = {\n      'birthYear': 2000,\n      'startYear': DateTime.now().year,\n      'startMonth': 1,\n      'endYear': DateTime.now().year,\n      'endMonth': DateTime.now().month,\n      'percentageMissed': 25,\n      'taqwaBuffer': 5,\n    };\n  }\n}\n```\n\n### Update `edit_details_screen.dart`\n\nEnsure the edit screen allows the user to adjust all relevant settings:\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  late int startYear;\n  late int startMonth;\n  late int endYear;\n  late int endMonth;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    startYear = prayerProvider.startYear;\n    startMonth = prayerProvider.startMonth;\n    endYear = prayerProvider.endYear;\n    endMonth = prayerProvider.endMonth;\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n        actions: [\n          IconButton(\n            icon: Icon(Icons.save),\n            onPressed: () async {\n              Map<int, int> percentageMissedByYear = {};\n              for (int year = startYear; year <= endYear; year++) {\n                percentageMissedByYear[year] =\n                    prayerProvider.percentageMissed;\n              }\n\n              await prayerProvider.saveData(\n                startYear,\n                startMonth,\n                endYear,\n                endMonth,\n                percentageMissedByYear,\n              );\n              Navigator.pop(context);\n            },\n          ),\n        ],\n      ),\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          children: [\n            Row(\n              children: [\n                Text('Start Year: '),\n                Expanded(\n                  child: DropdownButton<int>(\n                    value: startYear,\n                    onChanged: (value) {\n                      setState(() {\n                        startYear = value!;\n                      });\n                    },\n                    items: List.generate(50, (index) => 1970 + index)\n                        .map((year) => DropdownMenuItem(\n                              value: year,\n                              child: Text(year.toString()),\n                            ))\n                        .toList(),\n                  ),\n                ),\n              ],\n            ),\n            Row(\n              children: [\n                Text('Start Month: '),\n                Expanded(\n                  child: DropdownButton<int>(\n                    value: startMonth,\n                    onChanged: (value) {\n                      setState(() {\n                        startMonth = value!;\n                      });\n                    },\n                    items: List.generate(12, (index) => index + 1)\n                        .map((month) => DropdownMenuItem(\n                              value: month,\n                              child: Text(month.toString()),\n                            ))\n                        .toList(),\n                  ),\n                ),\n              ],\n            ),\n            Row(\n              children: [\n                Text('End Year: '),\n                Expanded(\n                  child: DropdownButton<int>(\n                    value: endYear,\n                    onChanged: (value) {\n                      setState(() {\n                        endYear = value!;\n                      });\n                    },\n                    items: List.generate(50, (index) => 1970 + index)\n                        .map((year) => DropdownMenuItem(\n                              value: year,\n                              child: Text(year.toString()),\n                            ))\n                        .toList(),\n                  ),\n                ),\n              ],\n            ),\n            Row(\n              children: [\n                Text('End Month: '),\n                Expanded(\n                  child: DropdownButton<int>(\n                    value: endMonth,\n                    onChanged: (value) {\n                      setState(() {\n                        endMonth = value!;\n                      });\n                    },\n                    items: List.generate(12, (index) => index + 1)\n                        .map((month) => DropdownMenuItem(\n                              value: month,\n                              child: Text(month.toString()),\n                            ))\n                        .toList(),\n                  ),\n                ),\n              ],\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\n### Summary of Changes:\n- Added \"Start Over\" and \"Edit Details\" buttons on the home screen.\n- Correctly calculated and displayed total missed prayers and total possible prayers.\n- Included progress indicators for each prayer type.\n- Updated `PrayerProvider` to include methods for calculating prayer counts and missed prayers.\n- Ensured `EditDetailsScreen` allows for the adjustment of start and end years and months.\n\nPlease implement these updates and test to ensure that the home screen displays the correct data and that the edit details screen works as expected.",
      "created_at": "2024-06-02T14:46:40.758405",
      "sequence_order": 19,
      "parent_id": "29353fe5-523a-443f-8bcf-f251494ed3fe",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": true
      }
    },
    {
      "id": "aaa2af34-fca0-4b51-ae55-1f84171eb412",
      "role": "user",
      "content": "each month should have the total prayers possilble for that month which is for each prayer the total number of days and then all days added up, so it will add up to 5*total number of days, although because we are counting per prayer we need to know which prayer out of the 5 were completed so we can \n\nHere's my provider and service so far:\nprovider:\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  int get percentageMissed => prayerData['percentageMissed'] ?? 25;\n  int get taqwaBuffer => prayerData['taqwaBuffer'] ?? 5;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n              'monthlyData': _getMonthlyDataForYear(\n                  year, prayer, percentageMissedByYear[year]!),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  List<Map<String, int>> _getMonthlyDataForYear(\n      int year, String prayer, int percentMissed) {\n    List<Map<String, int>> monthlyData = [];\n    for (int month = 1; month <= 12; month++) {\n      int daysInMonth = DateTime(year, month + 1, 0).day;\n      int totalPrayers = daysInMonth;\n      int prayersMissed = (totalPrayers * percentMissed / 100).round();\n      int prayersCompleted = totalPrayers - prayersMissed;\n      monthlyData.add({\n        'month': month,\n        'totalPrayers': totalPrayers,\n        'prayersCompleted': prayersCompleted,\n        'prayersMissed': prayersMissed,\n      });\n    }\n    return monthlyData;\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var year = startYear; year <= endYear; year++) {\n      totalPrayers += _calculateYearlyTotalPossible(year);\n    }\n    return totalPrayers;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] != null) {\n      for (var prayer in prayers) {\n        totalPossible += (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersMissed'] as num)\n                .toInt() +\n            (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersCompleted'] as num)\n                .toInt();\n      }\n    }\n    return totalPossible;\n  }\n\n  void updatePercentageMissed(int year, int percentage) {\n    prayerData['yearlyData'][year.toString()].forEach((prayerData) {\n      prayerData['percentageMissed'] = percentage;\n      prayerData['prayersMissed'] = (365 * 5 * percentage / 100).round();\n      prayerData['prayersCompleted'] = (365 * 5) - prayerData['prayersMissed'];\n    });\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    await _prayerService.updatePrayerData(\n        prayer, year, prayersCompleted, prayersMissed, percentageMissed);\n    notifyListeners();\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'startMonth': 1,\n      'endYear': currentYear,\n      'endMonth': DateTime.now().month,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': 0,\n            }\n        }\n      }\n    };\n  }\n\n  Future<void> initializeDefaultPrayerData() async {\n    _setDefaultPrayerData();\n    await savePrayerData();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    var prayerData = _prayerService.prayerData;\n    prayerData['yearlyData'] = {};\n    for (int year = startYear; year <= endYear; year++) {\n      prayerData['yearlyData'][year.toString()] = {\n        for (var prayer in prayers)\n          prayer: {\n            'percentMissed': percentageMissedByYear[year]!,\n            'prayersCompleted': getTotalPrayersForYear(year) -\n                (getTotalPrayersForYear(year) *\n                        percentageMissedByYear[year]! /\n                        100)\n                    .round(),\n            'prayersMissed': (getTotalPrayersForYear(year) *\n                    percentageMissedByYear[year]! /\n                    100)\n                .round(),\n          }\n      };\n    }\n    notifyListeners();\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return _prayerService.getTotalPrayersForYear(year);\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    return _prayerService.getCompletedPrayersForPrayerType(prayer);\n  }\n\n  Future<bool> resetApplication() async {\n    bool result = await _prayerService.resetApplication();\n    if (result) {\n      notifyListeners();\n    }\n    return result;\n  }\n\n  void sharePrayerData() {\n    _prayerService.sharePrayerData();\n  }\n\n  int getStreak() {\n    return 0; // Placeholder\n  }\n\n  double getEPPD() {\n    return 0.0; // Placeholder\n  }\n\n  int getCompletionTime() {\n    return 0; // Placeholder\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    await _prayerService.saveBirthYear(birthYear);\n    notifyListeners();\n  }\n\n  int _calculateTotalPossiblePrayers(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] != null) {\n      for (var prayer in prayers) {\n        totalPossible += (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersMissed'] as num)\n                .toInt() +\n            (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersCompleted'] as num)\n                .toInt();\n      }\n    }\n    return totalPossible;\n  }\n}\nservice:\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, dynamic> prayerData = {};\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map) {\n      prayerData =\n          Map<String, dynamic>.from(loadedData.cast<String, dynamic>());\n    } else {\n      _setDefaultPrayerData();\n      savePrayerData();\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> createDetailedBreakdown(\n      int startYear, int endYear, Map<int, int> percentageMissedByYear) async {\n    prayerData['prayerData'] = [\n      for (int year = startYear; year <= endYear; year++)\n        {\n          'year': year,\n          'totalPrayed': 0,\n          'totalMissed': 0,\n          'months': [\n            for (int month = 1; month <= 12; month++)\n              {\n                'monthNumber': month,\n                'totalPrayed': 0,\n                'totalMissed': 0,\n                'weeks': [\n                  for (int week = 1; week <= 5; week++)\n                    {\n                      'weekNumber': week,\n                      'totalPrayed': 0,\n                      'totalMissed': 0,\n                      'days': [\n                        for (int day = 1; day <= 7; day++)\n                          {\n                            'dayNumber': day,\n                            'prayers': [\n                              for (var prayer in prayers)\n                                {'prayerName': prayer, 'missed': false}\n                            ],\n                          },\n                      ],\n                    },\n                ],\n              },\n          ],\n        },\n    ];\n    await savePrayerData();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    if (prayerData['yearlyData'][year.toString()] == null) {\n      prayerData['yearlyData'][year.toString()] = {};\n    }\n    prayerData['yearlyData'][year.toString()][prayer] = {\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'percentMissed': percentageMissed,\n    };\n    await savePrayerData();\n  }\n\n  int getTotalPrayersPossible(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (int year = startYear; year <= endYear; year++) {\n      totalPossible +=\n          isLeapYear(year) ? 366 * prayers.length : 365 * prayers.length;\n    }\n    return totalPossible;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    int completedPrayers = 0;\n    for (var year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      if (prayerData['yearlyData'][year.toString()] != null &&\n          prayerData['yearlyData'][year.toString()][prayer] != null) {\n        completedPrayers += prayerData['yearlyData'][year.toString()][prayer]\n            ['prayersCompleted'] as int;\n      }\n    }\n    return completedPrayers;\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return isLeapYear(year) ? 366 * prayers.length : 365 * prayers.length;\n  }\n\n  int getTotalPrayersForPrayerTypeInYear(String prayer, int year) {\n    int totalPrayers = 0;\n    if (prayerData['yearlyData'][year.toString()] != null &&\n        prayerData['yearlyData'][year.toString()][prayer] != null) {\n      totalPrayers = prayerData['yearlyData'][year.toString()][prayer]\n                  ['prayersCompleted'] +\n              prayerData['yearlyData'][year.toString()][prayer]['prayersMissed']\n          as int;\n    }\n    return totalPrayers;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    for (int year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      var prayerDataForYear = prayerData['yearlyData'][year.toString()][prayer];\n      if (prayerDataForYear == null) {\n        prayerDataForYear = {\n          'prayersCompleted': 0,\n          'prayersMissed': getTotalPrayersForYear(year),\n          'percentMissed': 100,\n        };\n      }\n      int totalPrayersForYear = getTotalPrayersForYear(year);\n      if (prayerDataForYear['prayersCompleted'] < totalPrayersForYear) {\n        prayerDataForYear['prayersCompleted']++;\n        prayerDataForYear['prayersMissed'] =\n            totalPrayersForYear - prayerDataForYear['prayersCompleted'];\n        prayerDataForYear['percentMissed'] =\n            (prayerDataForYear['prayersMissed'] / totalPrayersForYear * 100)\n                .round();\n\n        await savePrayerData();\n        break; // Break after updating the first incomplete year\n      }\n    }\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n            }\n        }\n    };\n\n    await savePrayerData();\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> savePrayerData() async {\n    await _hiveService.saveData('prayerData', prayerData);\n    print('Saved data to Hive: $prayerData');\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'endYear': currentYear,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': getTotalPrayersForYear(currentYear),\n            }\n        }\n      }\n    };\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    shareText += 'Total Completed: ${getTotalCompletedPrayers()}\\n';\n    Share.share(shareText);\n  }\n\n  bool isLeapYear(int year) {\n    return year % 4 == 0 && (year % 100 != 0 || year % 400 == 0);\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    prayerData['birthYear'] = birthYear;\n    await savePrayerData();\n  }\n}\n",
      "created_at": "2024-06-03T15:47:48.798481",
      "sequence_order": 20,
      "parent_id": "29353fe5-523a-443f-8bcf-f251494ed3fe",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "63c30083-7d86-4ed7-ba19-2151e03cb60a",
      "role": "assistant",
      "content": "Let's make the necessary adjustments to ensure that each month's total prayers possible for each prayer type are calculated correctly, and update the provider and service accordingly.\n\n### Update `prayer_provider.dart`\n\n1. Ensure the monthly data includes the total prayers possible, completed, and missed for each prayer type.\n2. Correctly calculate the total prayers possible and missed for each prayer type.\n\nHere's the updated code:\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  int get percentageMissed => prayerData['percentageMissed'] ?? 25;\n  int get taqwaBuffer => prayerData['taqwaBuffer'] ?? 5;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n              'monthlyData': _getMonthlyDataForYear(\n                  year, prayer, percentageMissedByYear[year]!),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  List<Map<String, int>> _getMonthlyDataForYear(\n      int year, String prayer, int percentMissed) {\n    List<Map<String, int>> monthlyData = [];\n    for (int month = 1; month <= 12; month++) {\n      int daysInMonth = DateTime(year, month + 1, 0).day;\n      int totalPrayers = daysInMonth;\n      int prayersMissed = (totalPrayers * percentMissed / 100).round();\n      int prayersCompleted = totalPrayers - prayersMissed;\n      monthlyData.add({\n        'month': month,\n        'totalPrayers': totalPrayers,\n        'prayersCompleted': prayersCompleted,\n        'prayersMissed': prayersMissed,\n      });\n    }\n    return monthlyData;\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        for (var monthlyData in (yearData[prayer]['monthlyData'] as List)) {\n          totalPrayers += (monthlyData['totalPrayers'] as num).toInt();\n        }\n      }\n    }\n    return totalPrayers;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        for (var monthlyData in (yearData[prayer]['monthlyData'] as List)) {\n          totalMissed += (monthlyData['prayersMissed'] as num).toInt();\n        }\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] != null) {\n      for (var prayer in prayers) {\n        for (var monthlyData in (prayerData['yearlyData'][year.toString()][prayer]['monthlyData'] as List)) {\n          totalPossible += (monthlyData['totalPrayers'] as num).toInt();\n        }\n      }\n    }\n    return totalPossible;\n  }\n\n  void updatePercentageMissed(int year, int percentage) {\n    prayerData['yearlyData'][year.toString()].forEach((prayerData) {\n      prayerData['percentageMissed'] = percentage;\n      prayerData['prayersMissed'] = (365 * 5 * percentage / 100).round();\n      prayerData['prayersCompleted'] = (365 * 5) - prayerData['prayersMissed'];\n    });\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    await _prayerService.updatePrayerData(\n        prayer, year, prayersCompleted, prayersMissed, percentageMissed);\n    notifyListeners();\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'startMonth': 1,\n      'endYear': currentYear,\n      'endMonth': DateTime.now().month,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': 0,\n              'monthlyData': _getMonthlyDataForYear(currentYear, prayer, 50),\n            }\n        }\n      }\n    };\n  }\n\n  Future<void> initializeDefaultPrayerData() async {\n    _setDefaultPrayerData();\n    await savePrayerData();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    var prayerData = _prayerService.prayerData;\n    prayerData['yearlyData'] = {};\n    for (int year = startYear; year <= endYear; year++) {\n      prayerData['yearlyData'][year.toString()] = {\n        for (var prayer in prayers)\n          prayer: {\n            'percentMissed': percentageMissedByYear[year]!,\n            'prayersCompleted': getTotalPrayersForYear(year) -\n                (getTotalPrayersForYear(year) *\n                        percentageMissedByYear[year]! /\n                        100)\n                    .round(),\n            'prayersMissed': (getTotalPrayersForYear(year) *\n                    percentageMissedBy",
      "created_at": "2024-06-03T15:51:47.237365",
      "sequence_order": 21,
      "parent_id": "7e0a6602-c735-4adf-a5d8-577ccbde7cef",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": false
      }
    },
    {
      "id": "ceba3b80-1d7b-4062-abb0-ac5e008dfd77",
      "role": "assistant",
      "content": "To ensure that each month has the total prayers possible for that month and to accurately reflect the progress, we need to adjust the `PrayerProvider` and `PrayerService` classes. We'll include calculations for the monthly prayer data and make sure that the total counts are correctly calculated and displayed.\n\n### Updated `PrayerProvider`:\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n              'monthlyData': _getMonthlyDataForYear(\n                  year, prayer, percentageMissedByYear[year]!),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  List<Map<String, dynamic>> _getMonthlyDataForYear(\n      int year, String prayer, int percentMissed) {\n    List<Map<String, dynamic>> monthlyData = [];\n    for (int month = 1; month <= 12; month++) {\n      int daysInMonth = DateTime(year, month + 1, 0).day;\n      int totalPrayers = daysInMonth;\n      int prayersMissed = (totalPrayers * percentMissed / 100).round();\n      int prayersCompleted = totalPrayers - prayersMissed;\n      monthlyData.add({\n        'month': month,\n        'totalPrayers': totalPrayers,\n        'prayersCompleted': prayersCompleted,\n        'prayersMissed': prayersMissed,\n      });\n    }\n    return monthlyData;\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var year in prayerData['yearlyData'].values) {\n      totalPrayers += _calculateTotalPrayersForPrayerTypeInYear(prayer, year);\n    }\n    return totalPrayers;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] != null) {\n      for (var prayer in prayers) {\n        totalPossible += (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersMissed'] as num)\n                .toInt() +\n            (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersCompleted'] as num)\n                .toInt();\n      }\n    }\n    return totalPossible;\n  }\n\n  int _calculateTotalPrayersForPrayerTypeInYear(String prayer, dynamic yearData) {\n    int totalPrayers = 0;\n    if (yearData[prayer] != null) {\n      for (var monthData in yearData[prayer]['monthlyData']) {\n        totalPrayers += monthData['totalPrayers'] as int;\n      }\n    }\n    return totalPrayers;\n  }\n\n  void updatePercentageMissed(int year, int percentage) {\n    prayerData['yearlyData'][year.toString()].forEach((prayerData) {\n      prayerData['percentageMissed'] = percentage;\n      prayerData['prayersMissed'] = (365 * 5 * percentage / 100).round();\n      prayerData['prayersCompleted'] = (365 * 5) - prayerData['prayersMissed'];\n    });\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    await _prayerService.updatePrayerData(\n        prayer, year, prayersCompleted, prayersMissed, percentageMissed);\n    notifyListeners();\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'startMonth': 1,\n      'endYear': currentYear,\n      'endMonth': DateTime.now().month,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': 0,\n              'monthlyData': _getMonthlyDataForYear(\n                  currentYear, prayer, 50),\n            }\n        }\n      }\n    };\n  }\n\n  Future<void> initializeDefaultPrayerData() async {\n    _setDefaultPrayerData();\n    await savePrayerData();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    var prayerData = _prayerService.prayerData;\n    prayerData['yearlyData'] = {};\n    for (int year = startYear; year <= endYear; year++) {\n      prayerData['yearlyData'][year.toString()] = {\n        for (var prayer in prayers)\n          prayer: {\n            'percentMissed': percentageMissedByYear[year]!,\n            'prayersCompleted': getTotalPrayersForYear(year) -\n                (getTotalPrayersForYear(year) *\n                        percentageMissedByYear[year]! /\n                        100)\n                    .round(),\n            'prayersMissed': (getTotalPrayersForYear(year) *\n                    percentageMissedByYear[year]! /\n                   ",
      "created_at": "2024-06-03T15:53:42.299743",
      "sequence_order": 22,
      "parent_id": "8440a7df-bae9-4d04-8892-8aa07ecfe98f",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": false
      }
    },
    {
      "id": "aaa26879-6e61-47f2-8c59-0037e5072691",
      "role": "user",
      "content": "continue where you left off:\nTo ensure that each month has the total prayers possible for that month and to accurately reflect the progress, we need to adjust the PrayerProvider and PrayerService classes. We'll include calculations for the monthly prayer data and make sure that the total counts are correctly calculated and displayed.\n\nUpdated PrayerProvider:\ndart\nCopy code\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n              'monthlyData': _getMonthlyDataForYear(\n                  year, prayer, percentageMissedByYear[year]!),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  List<Map<String, dynamic>> _getMonthlyDataForYear(\n      int year, String prayer, int percentMissed) {\n    List<Map<String, dynamic>> monthlyData = [];\n    for (int month = 1; month <= 12; month++) {\n      int daysInMonth = DateTime(year, month + 1, 0).day;\n      int totalPrayers = daysInMonth;\n      int prayersMissed = (totalPrayers * percentMissed / 100).round();\n      int prayersCompleted = totalPrayers - prayersMissed;\n      monthlyData.add({\n        'month': month,\n        'totalPrayers': totalPrayers,\n        'prayersCompleted': prayersCompleted,\n        'prayersMissed': prayersMissed,\n      });\n    }\n    return monthlyData;\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var year in prayerData['yearlyData'].values) {\n      totalPrayers += _calculateTotalPrayersForPrayerTypeInYear(prayer, year);\n    }\n    return totalPrayers;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] != null) {\n      for (var prayer in prayers) {\n        totalPossible += (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersMissed'] as num)\n                .toInt() +\n            (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersCompleted'] as num)\n                .toInt();\n      }\n    }\n    return totalPossible;\n  }\n\n  int _calculateTotalPrayersForPrayerTypeInYear(String prayer, dynamic yearData) {\n    int totalPrayers = 0;\n    if (yearData[prayer] != null) {\n      for (var monthData in yearData[prayer]['monthlyData']) {\n        totalPrayers += monthData['totalPrayers'] as int;\n      }\n    }\n    return totalPrayers;\n  }\n\n  void updatePercentageMissed(int year, int percentage) {\n    prayerData['yearlyData'][year.toString()].forEach((prayerData) {\n      prayerData['percentageMissed'] = percentage;\n      prayerData['prayersMissed'] = (365 * 5 * percentage / 100).round();\n      prayerData['prayersCompleted'] = (365 * 5) - prayerData['prayersMissed'];\n    });\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    await _prayerService.updatePrayerData(\n        prayer, year, prayersCompleted, prayersMissed, percentageMissed);\n    notifyListeners();\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'startMonth': 1,\n      'endYear': currentYear,\n      'endMonth': DateTime.now().month,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': 0,\n              'monthlyData': _getMonthlyDataForYear(\n                  currentYear, prayer, 50),\n            }\n        }\n      }\n    };\n  }\n\n  Future<void> initializeDefaultPrayerData() async {\n    _setDefaultPrayerData();\n    await savePrayerData();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    var prayerData = _prayerService.prayerData;\n    prayerData['yearlyData'] = {};\n    for (int year = startYear; year <= endYear; year++) {\n      prayerData['yearlyData'][year.toString()] = {\n        for (var prayer in prayers)\n          prayer: {\n            'percentMissed': percentageMissedByYear[year]!,\n            'prayersCompleted': getTotalPrayersForYear(year) -\n                (getTotalPrayersForYear(year) *\n                        percentageMissedByYear[year]! /\n                        100)\n                    .round(),\n            'prayersMissed': (getTotalPrayersForYear(year) *\n                    percentageMissedByYear[year]! /",
      "created_at": "2024-06-03T15:56:06.223763",
      "sequence_order": 23,
      "parent_id": "aaa2af34-fca0-4b51-ae55-1f84171eb412",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "0a684d55-8ea7-4d55-9583-5009accaf673",
      "role": "assistant",
      "content": "Sure, let's continue and ensure that each month has the total prayers possible for that month and accurately reflects the progress. We will adjust the `PrayerProvider` and `PrayerService` classes to include monthly data for each prayer.\n\n### Update `PrayerProvider`\n\nHere's the continuation and completion of the `PrayerProvider` class:\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January', 'February', 'March', 'April', 'May', 'June', \n    'July', 'August', 'September', 'October', 'November', 'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear, int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1); month <= (year == endYear ? endMonth : 12); month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) - (getTotalPrayersForYear(year) * percentageMissedByYear[year]! / 100).round(),\n              'prayersMissed': (getTotalPrayersForYear(year) * percentageMissedByYear[year]! / 100).round(),\n              'monthlyData': _getMonthlyDataForYear(year, prayer, percentageMissedByYear[year]!),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  List<Map<String, dynamic>> _getMonthlyDataForYear(int year, String prayer, int percentMissed) {\n    List<Map<String, dynamic>> monthlyData = [];\n    for (int month = 1; month <= 12; month++) {\n      int daysInMonth = DateTime(year, month + 1, 0).day;\n      int totalPrayers = daysInMonth;\n      int prayersMissed = (totalPrayers * percentMissed / 100).round();\n      int prayersCompleted = totalPrayers - prayersMissed;\n      monthlyData.add({\n        'month': month,\n        'totalPrayers': totalPrayers,\n        'prayersCompleted': prayersCompleted,\n        'prayersMissed': prayersMissed,\n      });\n    }\n    return monthlyData;\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var year in prayerData['yearlyData'].values) {\n      totalPrayers += _calculateTotalPrayersForPrayerTypeInYear(prayer, year);\n    }\n    return totalPrayers;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] != null) {\n      for (var prayer in prayers) {\n        totalPossible += (prayerData['yearlyData'][year.toString()][prayer]['prayersMissed'] as num).toInt() +\n                         (prayerData['yearlyData'][year.toString()][prayer]['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalPossible;\n  }\n\n  int _calculateTotalPrayersForPrayerTypeInYear(String prayer, dynamic yearData) {\n    int totalPrayers = 0;\n    if (yearData[prayer] != null) {\n      for (var monthData in yearData[prayer]['monthlyData']) {\n        totalPrayers += monthData['totalPrayers'] as int;\n      }\n    }\n    return totalPrayers;\n  }\n\n  void updatePercentageMissed(int year, int percentage) {\n    prayerData['yearlyData'][year.toString()].forEach((prayerData) {\n      prayerData['percentMissed'] = percentage;\n      prayerData['prayersMissed'] = (365 * 5 * percentage / 100).round();\n      prayerData['prayersCompleted'] = (365 * 5) - prayerData['prayersMissed'];\n    });\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted, int prayersMissed, int percentageMissed) async {\n    await _prayerService.updatePrayerData(prayer, year, prayersCompleted, prayersMissed, percentageMissed);\n    notifyListeners();\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'startMonth': 1,\n      'endYear': currentYear,\n      'endMonth': DateTime.now().month,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': 0,\n              'monthlyData': _getMonthlyDataForYear(currentYear, prayer, 50),\n            }\n        }\n      }\n    };\n  }\n\n  Future<void> initializeDefaultPrayerData() async {\n    _setDefaultPrayerData();\n    await savePrayerData();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    var prayerData = _prayerService.prayerData;\n    prayerData['yearlyData'] = {};\n    for (int year = startYear; year <= endYear; year++) {\n      prayerData['yearlyData'][year.toString()] = {\n        for (var prayer in prayers)\n          prayer: {\n            'percentMissed': percentageMissedByYear[year]!,\n            'prayersCompleted': getTotalPrayersForYear(year) - (getTotalPrayersForYear(year) * percentageMissedByYear[year]! / 100).round(),\n            'prayersMissed': (getTotalPrayersForYear(year) * percentageMissedByYear[year]! / 100).round(),\n            'monthlyData': _getMonthlyDataForYear(year, prayer, percentageMissedByYear[year]!),\n          }\n      };\n    }\n    notifyListeners();\n  }\n\n  int get",
      "created_at": "2024-06-03T15:57:30.773197",
      "sequence_order": 24,
      "parent_id": "c2b2a989-344d-422c-82e8-33f31b3a4009",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": false
      }
    }
  ]
}
{
  "id": "4dcff702-f2ee-4eb4-8fea-69c1d5c5471a",
  "source": "chatgpt",
  "title": "Flutter إنشاء نموذج برامج",
  "created_at": "2024-06-03T16:17:37.658448",
  "updated_at": "2024-06-03T16:32:53.298112",
  "summary": null,
  "message_count": 10,
  "messages": [
    {
      "id": "aaa2b5ba-94b3-4665-b148-fa5df8979f91",
      "role": "user",
      "content": "im working on code to identify month by month how many prayers I missed and am writing a flutter program to be able to easily set a percentage missed in a settings screen and in edit details you can drill down month by month to set the 5 daily prayers from fajir thuhur asr maghrib and isha percentages for that year and that month. I think we should set a datamodel that makes sense where each month has total missed total prayed total percentage missed and total percentage prayed derived and set each time something is changed. it should use Hive service as a db and should be really simple for web, android using material and ios using cupertino, thinks tep by step about how to do this best and write a flutter program with a homescreen showcasing the total prayed out of total possible as a progress bar on the top with a number showing the total on the right and the number for total prayed on the left and 5 buttons with percentage progress bars for each prayer so you can press then and increment that prayer's total. WHen pressed it should go to the \"furthest back\" oldest prayer missed, so for instance if you prayed 50% of 2024 it will go back to the end of June and start of july and start adding that prayer again, everything before that will have an indicator for that prayer in the database saying it's done when the butotn is pushed the top bar should indicate progress as well as that current buttons bar. \n\nwrite the flutter project including the files names here and I'll make the file and return the output: ",
      "created_at": "2024-06-03T16:17:37.665908",
      "sequence_order": 0,
      "parent_id": "9f8e9477-1da3-436f-a171-dc46cca96bd6",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "78365d5b-01e1-4b6b-8f9f-66b8d001b184",
      "role": "assistant",
      "content": "Quackers (Blue Hat): Let’s create a comprehensive plan by dividing the project into smaller steps. Here’s how we can proceed to ensure your Flutter program is well-structured and achieves your goals:\n\n1. **Define the Data Model**:\n    - We’ll use Hive for local storage.\n    - Define the data model to store prayer information.\n    \n2. **Set Up Hive**:\n    - Initialize Hive and set up the necessary adapters.\n    \n3. **Create UI Components**:\n    - Design the home screen with progress bars and buttons for each prayer.\n    - Implement the settings screen for percentage input.\n\n4. **Handle State Management**:\n    - Manage state updates when prayers are incremented.\n\n5. **Implement Navigation**:\n    - Navigate to the detailed view for editing prayer details month by month.\n\n6. **Develop Business Logic**:\n    - Calculate the missed and prayed percentages.\n    - Update the progress bars accordingly.\n\n### Step-by-Step Guide\n\n#### Step 1: Define the Data Model\n\nCreate a file named `prayer_model.dart` to define the data model for storing prayer information.\n\n```dart\nimport 'package:hive/hive.dart';\n\npart 'prayer_model.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerModel extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int totalMissed;\n\n  @HiveField(3)\n  int totalPrayed;\n\n  @HiveField(4)\n  double percentageMissed;\n\n  @HiveField(5)\n  double percentagePrayed;\n\n  @HiveField(6)\n  Map<String, int> prayers; // {'fajr': int, 'dhuhr': int, 'asr': int, 'maghrib': int, 'isha': int}\n\n  PrayerModel({\n    required this.year,\n    required this.month,\n    required this.totalMissed,\n    required this.totalPrayed,\n    required this.percentageMissed,\n    required this.percentagePrayed,\n    required this.prayers,\n  });\n}\n```\n\n#### Step 2: Set Up Hive\n\nCreate a file named `main.dart` to initialize Hive and set up the necessary adapters.\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'prayer_model.dart';\nimport 'home_screen.dart';\n\nvoid main() async {\n  await Hive.initFlutter();\n  Hive.registerAdapter(PrayerModelAdapter());\n  await Hive.openBox<PrayerModel>('prayers');\n\n  runApp(MyApp());\n}\n\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      title: 'Prayer Tracker',\n      theme: ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: HomeScreen(),\n    );\n  }\n}\n```\n\n#### Step 3: Create UI Components\n\nCreate a file named `home_screen.dart` for the home screen UI.\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:hive/hive.dart';\nimport 'prayer_model.dart';\nimport 'settings_screen.dart';\n\nclass HomeScreen extends StatefulWidget {\n  @override\n  _HomeScreenState createState() => _HomeScreenState();\n}\n\nclass _HomeScreenState extends State<HomeScreen> {\n  Box<PrayerModel> prayersBox = Hive.box<PrayerModel>('prayers');\n\n  int totalPrayed = 0;\n  int totalPossible = 0;\n\n  @override\n  void initState() {\n    super.initState();\n    calculateTotals();\n  }\n\n  void calculateTotals() {\n    totalPrayed = 0;\n    totalPossible = 0;\n\n    prayersBox.values.forEach((prayer) {\n      totalPrayed += prayer.totalPrayed;\n      totalPossible += (prayer.totalPrayed + prayer.totalMissed);\n    });\n\n    setState(() {});\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n        actions: [\n          IconButton(\n            icon: Icon(Icons.settings),\n            onPressed: () {\n              Navigator.push(\n                context,\n                MaterialPageRoute(builder: (context) => SettingsScreen()),\n              );\n            },\n          ),\n        ],\n      ),\n      body: Column(\n        children: [\n          Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Row(\n              children: [\n                Expanded(\n                  child: LinearProgressIndicator(\n                    value: totalPossible > 0 ? totalPrayed / totalPossible : 0,\n                  ),\n                ),\n                SizedBox(width: 16),\n                Text('$totalPrayed / $totalPossible'),\n              ],\n            ),\n          ),\n          Expanded(\n            child: ListView(\n              children: ['fajr', 'dhuhr', 'asr', 'maghrib', 'isha'].map((prayer) {\n                return ListTile(\n                  title: Text(prayer.capitalize()),\n                  trailing: IconButton(\n                    icon: Icon(Icons.add),\n                    onPressed: () {\n                      // Increment the prayer count logic here\n                      incrementPrayer(prayer);\n                    },\n                  ),\n                );\n              }).toList(),\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  void incrementPrayer(String prayer) {\n    // Logic to increment the prayer count\n    // Update the appropriate month's prayer count and recalculate percentages\n    // Then call setState to update the UI\n  }\n}\n\nextension StringExtension on String {\n  String capitalize() {\n    return \"${this[0].toUpperCase()}${this.substring(1)}\";\n  }\n}\n```\n\n#### Step 4: Implement Settings Screen\n\nCreate a file named `settings_screen.dart` for the settings screen UI.\n\n```dart\nimport 'package:flutter/material.dart';\n\nclass SettingsScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Settings'),\n      ),\n      body: Center(\n        child: Text('Settings Screen - Implement percentage input here'),\n      ),\n    );\n  }\n}\n```\n\n#### Step 5: Business Logic for Incrementing Prayers\n\nUpdate the `incrementPrayer` function in `home_screen.dart` to handle the business logic of incrementing the prayer count and updating the percentages.\n\n```dart\nvoid incrementPrayer(String prayer) {\n  var oldestIncompletePrayer = prayersBox.values.firstWhere(\n    (prayerModel) => prayerModel.prayers[prayer]! < 100,\n    orElse: () => PrayerModel(\n      year: DateTime.now().year,\n      month: DateTime.now().month,\n      totalMissed: 0,\n      totalPrayed: 0,\n      percentageMissed: 0,\n      percentagePrayed: 0,\n      prayers: {'fajr': 0, 'dhuhr': 0, 'asr': 0, 'maghrib': 0, 'isha': 0},\n    ),\n  );\n\n  oldestIncompletePrayer.prayers[prayer] = oldestIncompletePrayer.prayers[prayer]! + 1;\n  oldestIncompletePrayer.totalPrayed += 1;\n  oldestIncompletePrayer.percentagePrayed = oldestIncompletePrayer.totalPrayed / (oldestIncompletePrayer.totalPrayed + oldestIncompletePrayer.totalMissed);\n  oldestIncompletePrayer.percentageMissed = 1 - oldestIncompletePrayer.percentagePrayed;\n\n  prayersBox.put(oldestIncompletePrayer.key, oldestIncompletePrayer);\n  calculateTotals();\n}\n```\n\nThis setup should provide a solid foundation for your Flutter program. Create the necessary files as mentioned, and use the provided code snippets to implement each part of the application. Let me know if you need any further assistance or modifications.",
      "created_at": "2024-06-03T16:18:36.608055",
      "sequence_order": 1,
      "parent_id": "aaa2b5ba-94b3-4665-b148-fa5df8979f91",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": true
      }
    },
    {
      "id": "235587f7-27e0-400c-b6e6-0f646bf6098c",
      "role": "assistant",
      "content": "Certainly! Let's break down the requirements step-by-step and structure the Flutter project accordingly. We'll use Hive for the database and ensure the UI accommodates both Material and Cupertino designs for cross-platform compatibility.\n\n### Step-by-Step Plan\n\n1. **Define Data Model**\n   - Create a `PrayerRecord` model to store monthly prayer data.\n   - Store total prayers, total missed, and percentages.\n\n2. **Hive Database Setup**\n   - Initialize Hive in the main file.\n   - Create Hive adapters for the data models.\n\n3. **UI Design**\n   - Home screen with a progress bar for total prayers.\n   - Buttons for each prayer type with their respective progress bars.\n   - Navigation to a detailed screen for updating prayer counts.\n\n4. **Logic for Incrementing Prayers**\n   - Logic to find the \"furthest back\" missed prayer and increment it.\n   - Update progress bars accordingly.\n\n### Project Structure\n\nHere are the files and their purposes:\n\n1. **main.dart**\n   - Entry point for the application.\n   - Initializes Hive and sets up the home screen.\n\n2. **models/prayer_record.dart**\n   - Defines the `PrayerRecord` data model.\n\n3. **services/hive_service.dart**\n   - Manages Hive database interactions.\n\n4. **screens/home_screen.dart**\n   - Home screen UI with progress bars and prayer buttons.\n\n5. **screens/prayer_details_screen.dart**\n   - Screen for drilling down into prayer details and updating counts.\n\n6. **widgets/progress_bar.dart**\n   - Custom widget for displaying progress bars.\n\n### Example Flutter Code\n\nHere's a basic implementation of the above plan:\n\n#### main.dart\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:hive/hive.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_record.dart';\nimport 'screens/home_screen.dart';\nimport 'services/hive_service.dart';\n\nvoid main() async {\n  await Hive.initFlutter();\n  Hive.registerAdapter(PrayerRecordAdapter());\n  await Hive.openBox<PrayerRecord>('prayerRecords');\n  \n  runApp(MyApp());\n}\n\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      title: 'Prayer Tracker',\n      theme: ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: HomeScreen(),\n    );\n  }\n}\n```\n\n#### models/prayer_record.dart\n```dart\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n  \n  @HiveField(1)\n  int month;\n  \n  @HiveField(2)\n  int fajrMissed;\n  \n  @HiveField(3)\n  int dhuhrMissed;\n  \n  @HiveField(4)\n  int asrMissed;\n  \n  @HiveField(5)\n  int maghribMissed;\n  \n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed => fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n```\n\n#### services/hive_service.dart\n```dart\nimport 'package:hive/hive.dart';\nimport 'package:your_project/models/prayer_record.dart';\n\nclass HiveService {\n  Box<PrayerRecord> get prayerBox => Hive.box<PrayerRecord>('prayerRecords');\n\n  void addPrayerRecord(PrayerRecord record) {\n    prayerBox.add(record);\n  }\n\n  List<PrayerRecord> getPrayerRecords() {\n    return prayerBox.values.toList();\n  }\n\n  void updatePrayerRecord(int index, PrayerRecord record) {\n    prayerBox.putAt(index, record);\n  }\n}\n```\n\n#### screens/home_screen.dart\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:your_project/services/hive_service.dart';\nimport 'package:your_project/models/prayer_record.dart';\nimport 'package:your_project/widgets/progress_bar.dart';\nimport 'prayer_details_screen.dart';\n\nclass HomeScreen extends StatelessWidget {\n  final HiveService _hiveService = HiveService();\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          final totalPrayed = records.fold(0, (sum, record) => sum + record.totalPrayed);\n          final totalPossible = records.length * 30 * 5;\n\n          return Column(\n            children: [\n              LinearProgressIndicator(value: totalPrayed / totalPossible),\n              Text('$totalPrayed / $totalPossible'),\n              ...['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'].map((prayer) {\n                return PrayerProgressButton(prayer: prayer);\n              }).toList(),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\nclass PrayerProgressButton extends StatelessWidget {\n  final String prayer;\n\n  PrayerProgressButton({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return ElevatedButton(\n      onPressed: () {\n        Navigator.push(\n          context,\n          MaterialPageRoute(builder: (context) => PrayerDetailsScreen(prayer: prayer)),\n        );\n      },\n      child: Text(prayer),\n    );\n  }\n}\n```\n\n#### screens/prayer_details_screen.dart\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:your_project/services/hive_service.dart';\nimport 'package:your_project/models/prayer_record.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          // Implement logic to find and increment the oldest missed prayer\n\n          return Column(\n            children: [\n              // Display and update prayer details here\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n#### widgets/progress_bar.dart\n```dart\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double value;\n\n  ProgressBar({required this.value});\n\n  @override\n  Widget build(BuildContext context) {\n    return LinearProgressIndicator(value: value);\n  }\n}\n```\n\nThis structure should give you a good starting point. You can now create these files and fill in the specific details, especially the logic for finding and incrementing the oldest missed prayer.",
      "created_at": "2024-06-03T16:18:43.471279",
      "sequence_order": 2,
      "parent_id": "aaa2b5ba-94b3-4665-b148-fa5df8979f91",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": true
      }
    },
    {
      "id": "aaa214de-40d6-4d41-b8f8-4a741fab79cb",
      "role": "user",
      "content": "ok, write the logic for finding and incrementing the oldest missed prayer ",
      "created_at": "2024-06-03T16:20:18.604639",
      "sequence_order": 3,
      "parent_id": "235587f7-27e0-400c-b6e6-0f646bf6098c",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "a64040c9-8a69-45c9-b438-22ccd694b0f9",
      "role": "assistant",
      "content": "To implement the logic for finding and incrementing the oldest missed prayer, we need to add a method in our `HiveService` that will iterate through the prayer records, find the oldest missed prayer, and increment its count. We'll also update the `PrayerDetailsScreen` to use this method.\n\n### Step-by-Step Logic\n\n1. **Find the Oldest Missed Prayer:**\n   - Iterate through the prayer records.\n   - Check each prayer type (Fajr, Dhuhr, Asr, Maghrib, Isha).\n   - Find the oldest month and year where prayers are missed.\n\n2. **Increment the Count:**\n   - Increment the count of the specific missed prayer.\n   - Save the updated record back to the Hive database.\n\n### Updated HiveService\n\nWe'll add the following method in `HiveService` to handle this logic.\n\n#### services/hive_service.dart\n```dart\nimport 'package:hive/hive.dart';\nimport 'package:your_project/models/prayer_record.dart';\n\nclass HiveService {\n  Box<PrayerRecord> get prayerBox => Hive.box<PrayerRecord>('prayerRecords');\n\n  void addPrayerRecord(PrayerRecord record) {\n    prayerBox.add(record);\n  }\n\n  List<PrayerRecord> getPrayerRecords() {\n    return prayerBox.values.toList();\n  }\n\n  void updatePrayerRecord(int index, PrayerRecord record) {\n    prayerBox.putAt(index, record);\n  }\n\n  Future<void> incrementOldestMissedPrayer(String prayer) async {\n    List<PrayerRecord> records = getPrayerRecords();\n    records.sort((a, b) {\n      int yearComparison = a.year.compareTo(b.year);\n      return yearComparison != 0 ? yearComparison : a.month.compareTo(b.month);\n    });\n\n    for (var record in records) {\n      switch (prayer.toLowerCase()) {\n        case 'fajr':\n          if (record.fajrMissed > 0) {\n            record.fajrMissed--;\n            updatePrayerRecord(records.indexOf(record), record);\n            return;\n          }\n          break;\n        case 'dhuhr':\n          if (record.dhuhrMissed > 0) {\n            record.dhuhrMissed--;\n            updatePrayerRecord(records.indexOf(record), record);\n            return;\n          }\n          break;\n        case 'asr':\n          if (record.asrMissed > 0) {\n            record.asrMissed--;\n            updatePrayerRecord(records.indexOf(record), record);\n            return;\n          }\n          break;\n        case 'maghrib':\n          if (record.maghribMissed > 0) {\n            record.maghribMissed--;\n            updatePrayerRecord(records.indexOf(record), record);\n            return;\n          }\n          break;\n        case 'isha':\n          if (record.ishaMissed > 0) {\n            record.ishaMissed--;\n            updatePrayerRecord(records.indexOf(record), record);\n            return;\n          }\n          break;\n      }\n    }\n  }\n}\n```\n\n### Updated PrayerDetailsScreen\n\nNow, let's update the `PrayerDetailsScreen` to use the new method in `HiveService`.\n\n#### screens/prayer_details_screen.dart\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:your_project/services/hive_service.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: Center(\n        child: ElevatedButton(\n          onPressed: () async {\n            await _hiveService.incrementOldestMissedPrayer(prayer);\n            ScaffoldMessenger.of(context).showSnackBar(\n              SnackBar(content: Text('$prayer incremented')),\n            );\n          },\n          child: Text('Increment $prayer'),\n        ),\n      ),\n    );\n  }\n}\n```\n\n### Explanation\n\n- **HiveService**\n  - **incrementOldestMissedPrayer:** This method finds the oldest prayer record with missed prayers for the specified prayer type and increments the count.\n\n- **PrayerDetailsScreen**\n  - **ElevatedButton:** When pressed, it calls `incrementOldestMissedPrayer` for the specified prayer type and shows a snackbar indicating the increment.\n\nThis should provide a complete solution for tracking and updating missed prayers in your Flutter application.",
      "created_at": "2024-06-03T16:20:52.440647",
      "sequence_order": 4,
      "parent_id": "aaa214de-40d6-4d41-b8f8-4a741fab79cb",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": true
      }
    },
    {
      "id": "aaa2e8d4-0c8a-4be8-8916-e7df9415b252",
      "role": "user",
      "content": "im working on code to identify month by month how many prayers I missed and am writing a flutter program to be able to easily set a percentage missed in a settings screen and in edit details you can drill down month by month to set the 5 daily prayers from fajir thuhur asr maghrib and isha percentages for that year and that month. I think we should set a datamodel that makes sense where each month has total missed total prayed total percentage missed and total percentage prayed derived and set each time something is changed. it should use Hive service as a db and should be really simple for web, android using material and ios using cupertino, thinks tep by step about how to do this best and write a flutter program with a homescreen showcasing the total prayed out of total possible as a progress bar on the top with a number showing the total on the right and the number for total prayed on the left and 5 buttons with percentage progress bars for each prayer so you can press then and increment that prayer's total. WHen pressed it should go to the \"furthest back\" oldest prayer missed, so for instance if you prayed 50% of 2024 it will go back to the end of June and start of july and start adding that prayer again, everything before that will have an indicator for that prayer in the database saying it's done when the butotn is pushed the top bar should indicate progress as well as that current buttons bar. \n\nwrite the flutter project including the files names here and I'll make the file and return the output: \n\nyou can leverage this code: \n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final PrayerProvider prayerProvider;\n\n  const MyApp({super.key, required this.prayerProvider});\n\n  @override\n  Widget build(BuildContext context) {\n    return ChangeNotifierProvider.value(\n      value: prayerProvider,\n      child: AmanaMaterialApp(\n        title: 'Amana Audit',\n        debugShowCheckedModeBanner: false,\n        theme: ThemeData(\n            fontFamily: \"OpenSans\",\n            scaffoldBackgroundColor: Colors.grey[100],\n            primarySwatch: Colors.blue),\n        initialRoute: '/',\n        routes: {\n          '/': (context) => const HomeScreen(),\n          '/year-selection': (context) => const YearSelectionScreen(),\n          '/edit-details': (context) => const EditDetailsScreen()\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./main.dart\n####################\n\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'providers/prayer_provider.dart';\nimport '../services/prayer_service.dart';\nimport '../services/hive_service.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  final prayerService = PrayerService(hiveService);\n  final prayerProvider = PrayerProvider(prayerService);\n  await prayerProvider.loadData();\n  runApp(MyApp(\n    prayerProvider: prayerProvider,\n  ));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2020;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  final monthsList = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n  ];\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService) {\n    _setDefaultPrayerData();\n  }\n\n  int get birthYear => prayerData['birthYear'] ?? 2000;\n  int get startYear => prayerData['startYear'] ?? DateTime.now().year;\n  int get startMonth => prayerData['startMonth'] ?? 1;\n  int get endYear => prayerData['endYear'] ?? DateTime.now().year;\n  int get endMonth => prayerData['endMonth'] ?? DateTime.now().month;\n  int get percentageMissed => prayerData['percentageMissed'] ?? 25;\n  int get taqwaBuffer => prayerData['taqwaBuffer'] ?? 5;\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n              'monthlyData': _getMonthlyDataForYear(\n                  year, prayer, percentageMissedByYear[year]!),\n            }\n        }\n    };\n\n    await savePrayerData();\n    notifyListeners();\n  }\n\n  List<Map<String, int>> _getMonthlyDataForYear(\n      int year, String prayer, int percentMissed) {\n    List<Map<String, int>> monthlyData = [];\n    for (int month = 1; month <= 12; month++) {\n      int daysInMonth = DateTime(year, month + 1, 0).day;\n      int totalPrayers = daysInMonth;\n      int prayersMissed = (totalPrayers * percentMissed / 100).round();\n      int prayersCompleted = totalPrayers - prayersMissed;\n      monthlyData.add({\n        'month': month,\n        'totalPrayers': totalPrayers,\n        'prayersCompleted': prayersCompleted,\n        'prayersMissed': prayersMissed,\n      });\n    }\n    return monthlyData;\n  }\n\n  Map<String, dynamic> getPrayerData() {\n    return _prayerService.prayerData;\n  }\n\n  Future<void> savePrayerData() async {\n    await _prayerService.savePrayerData();\n    notifyListeners();\n  }\n\n  int getTotalPrayersPossible() {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalPrayersForPrayerType(String prayer) {\n    int totalPrayers = 0;\n    for (var year = startYear; year <= endYear; year++) {\n      totalPrayers += _calculateYearlyTotalPossible(year);\n    }\n    return totalPrayers;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    await _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] != null) {\n      for (var prayer in prayers) {\n        totalPossible += (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersMissed'] as num)\n                .toInt() +\n            (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersCompleted'] as num)\n                .toInt();\n      }\n    }\n    return totalPossible;\n  }\n\n  void updatePercentageMissed(int year, int percentage) {\n    prayerData['yearlyData'][year.toString()].forEach((prayerData) {\n      prayerData['percentageMissed'] = percentage;\n      prayerData['prayersMissed'] = (365 * 5 * percentage / 100).round();\n      prayerData['prayersCompleted'] = (365 * 5) - prayerData['prayersMissed'];\n    });\n    notifyListeners();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    await _prayerService.updatePrayerData(\n        prayer, year, prayersCompleted, prayersMissed, percentageMissed);\n    notifyListeners();\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'startMonth': 1,\n      'endYear': currentYear,\n      'endMonth': DateTime.now().month,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': 0,\n            }\n        }\n      }\n    };\n  }\n\n  Future<void> initializeDefaultPrayerData() async {\n    _setDefaultPrayerData();\n    await savePrayerData();\n  }\n\n  void applyPresetOption(Map<int, int> percentageMissedByYear) {\n    var prayerData = _prayerService.prayerData;\n    prayerData['yearlyData'] = {};\n    for (int year = startYear; year <= endYear; year++) {\n      prayerData['yearlyData'][year.toString()] = {\n        for (var prayer in prayers)\n          prayer: {\n            'percentMissed': percentageMissedByYear[year]!,\n            'prayersCompleted': getTotalPrayersForYear(year) -\n                (getTotalPrayersForYear(year) *\n                        percentageMissedByYear[year]! /\n                        100)\n                    .round(),\n            'prayersMissed': (getTotalPrayersForYear(year) *\n                    percentageMissedByYear[year]! /\n                    100)\n                .round(),\n          }\n      };\n    }\n    notifyListeners();\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return _prayerService.getTotalPrayersForYear(year);\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    return _prayerService.getCompletedPrayersForPrayerType(prayer);\n  }\n\n  Future<bool> resetApplication() async {\n    bool result = await _prayerService.resetApplication();\n    if (result) {\n      notifyListeners();\n    }\n    return result;\n  }\n\n  void sharePrayerData() {\n    _prayerService.sharePrayerData();\n  }\n\n  int getStreak() {\n    return 0; // Placeholder\n  }\n\n  double getEPPD() {\n    return 0.0; // Placeholder\n  }\n\n  int getCompletionTime() {\n    return 0; // Placeholder\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    await _prayerService.saveBirthYear(birthYear);\n    notifyListeners();\n  }\n\n  int _calculateTotalPossiblePrayers(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (var year in prayerData['yearlyData'].keys) {\n      totalPossible += _calculateYearlyTotalPossible(int.parse(year));\n    }\n    return totalPossible;\n  }\n\n  int _calculateYearlyTotalPossible(int year) {\n    int totalPossible = 0;\n    if (prayerData['yearlyData'][year.toString()] != null) {\n      for (var prayer in prayers) {\n        totalPossible += (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersMissed'] as num)\n                .toInt() +\n            (prayerData['yearlyData'][year.toString()][prayer]\n                    ['prayersCompleted'] as num)\n                .toInt();\n      }\n    }\n    return totalPossible;\n  }\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\n//prayer progress card material . dart\nimport '../platform_specific_widget/amana_button.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardMaterial({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers =\n        prayerProvider.getCompletedPrayersForPrayerType(prayer);\n\n    return Card(\n      child: Padding(\n        padding: REdgeInsets.all(14),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8).r,\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0 ? (completedPrayers / totalPrayers).clamp(0, 1) : 0,\n                minHeight: 12.h,\n                backgroundColor: Colors.grey[300],\n                valueColor:\n                    const AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text(\n                '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              label: 'Pray',\n              isAppLevel: false,\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport '../platform_specific_widget/amana_drop_down.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_month_drop_down.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({super.key});\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n\n  String? _selectedMonth;\n  final Map<String, TextEditingController> _controllers = {};\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    for (var prayer in prayerProvider.prayers) {\n      _controllers[prayer] = TextEditingController();\n    }\n  }\n\n  @override\n  void dispose() {\n    _controllers.forEach((_, controller) => controller.dispose());\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return AmanaScaffold(\n      title: \"Edit Details\",\n      body: SingleChildScrollView(\n        child: Padding(\n          padding: REdgeInsets.all(16.0),\n          child: Column(\n            crossAxisAlignment:\n                kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n            children: [\n              Text(\n                'Pick each year and reflect, add what percentage you estimate you missed that year.',\n                style: TextStyle(fontSize: 18, color: Colors.black),\n              ),\n              SizedBox(height: 20.h),\n              _buildYearDropdown(prayerProvider),\n              SizedBox(height: 20.h),\n              _selectedYear != null && _selectedYear != 0\n                  ? _buildMonthDropDown(prayerProvider)\n                  : Text(\"Selecting Month\"),\n              SizedBox(\n                height: 20.h,\n              ),\n              if (_selectedYear != null &&\n                  _selectedYear != 0 &&\n                  _selectedMonth != null &&\n                  _selectedMonth != \"\")\n                ...prayerProvider.prayers\n                    .map((prayer) => _buildPrayerRow(prayerProvider, prayer)),\n              SizedBox(height: 16.h),\n              kIsWeb\n                  ? AmanaButton(\n                      onPress: () {\n                        for (var prayer in prayerProvider.prayers) {\n                          final percentage =\n                              int.tryParse(_controllers[prayer]!.text) ?? 0;\n                          prayerProvider.updatePrayerData(\n                            prayer,\n                            _selectedYear!,\n                            (365 * percentage / 100).round(),\n                            (365 - (365 * percentage / 100)).round(),\n                            percentage,\n                          );\n                        }\n                        prayerProvider.savePrayerData();\n                        Navigator.pushAndRemoveUntil(\n                            context,\n                            MaterialPageRoute(\n                                builder: (context) => HomeScreen()),\n                            (route) => false);\n                      },\n                      label: \"Save\",\n                      isAppLevel: true)\n                  : AmanaButton(\n                      onPress: () {\n                        for (var prayer in prayerProvider.prayers) {\n                          final percentage =\n                              int.tryParse(_controllers[prayer]!.text) ?? 0;\n                          prayerProvider.updatePrayerData(\n                            prayer,\n                            _selectedYear!,\n                            (365 * percentage / 100).round(),\n                            (365 - (365 * percentage / 100)).round(),\n                            percentage,\n                          );\n                        }\n                        prayerProvider.savePrayerData();\n                        Navigator.pushAndRemoveUntil(\n                            context,\n                            MaterialPageRoute(\n                                builder: (context) => HomeScreen()),\n                            (route) => false);\n                      },\n                      label: \"Save\",\n                      isAppLevel: true),\n              SizedBox(height: 16.h),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n\n  Widget _buildYearDropdown(PrayerProvider prayerProvider) {\n    final startYear = prayerProvider.startYear;\n    final endYear = prayerProvider.endYear;\n\n    return AmanaDropDown(\n      value: _selectedYear,\n      items: List.generate(endYear - startYear + 2, (index) {\n        final year = (index == 0) ? 0 : startYear + (index - 1);\n        return {\n          \"value\": year,\n          \"child\": year == 0 ? Text(\"Select Year\") : Text('$year'),\n        };\n      }),\n      onChanged: (newValue) {\n        setState(() {\n          _selectedYear = newValue;\n        });\n      },\n      labelText: 'Select Year',\n    );\n  }\n\n  Widget _buildMonthDropDown(PrayerProvider provider) {\n    return AmanaMonthDropDown(\n        items: List.generate(13, (index) {\n          final month = (index == 0) ? \"\" : provider.monthsList[index - 1];\n          return {\n            \"value\": month,\n            \"child\": month == \"\" ? Text(\"Select Month\") : Text('$month'),\n          };\n        }),\n        onChanged: (val) {\n          setState(() {\n            _selectedMonth = val.toString();\n          });\n        },\n        value: _selectedMonth ?? \"\",\n        labelText: \"Select Month\");\n  }\n\n  Widget _buildPresetOptions(PrayerProvider provider) {\n    return Column(\n      crossAxisAlignment: CrossAxisAlignment.start,\n      children: [\n        ListTile(\n          leading: Icon(Icons.check_circle_outline),\n          title: Text('Set all years to a specific percentage'),\n          onTap: () {\n            showDialog(\n              context: context,\n              builder: (context) {\n                int percentage = 50;\n                return AlertDialog(\n                  title: Text('Set Percentage for All Years'),\n                  content: StatefulBuilder(\n                    builder: (context, setState) {\n                      return Slider(\n                        value: percentage.toDouble(),\n                        min: 0,\n                        max: 100,\n                        divisions: 20,\n                        label: '$percentage%',\n                        onChanged: (value) {\n                          setState(() {\n                            percentage = value.round();\n                          });\n                        },\n                      );\n                    },\n                  ),\n                  actions: [\n                    TextButton(\n                      onPressed: () {\n                        Navigator.pop(context);\n                      },\n                      child: Text('Cancel'),\n                    ),\n                    TextButton(\n                      onPressed: () {\n                        Map<int, int> percentageMissedByYear = {};\n                        for (int year = provider.startYear;\n                            year <= provider.endYear;\n                            year++) {\n                          percentageMissedByYear[year] = percentage;\n                        }\n                        provider.applyPresetOption(percentageMissedByYear);\n                        Navigator.pop(context);\n                      },\n                      child: Text('Apply'),\n                    ),\n                  ],\n                );\n              },\n            );\n          },\n        ),\n      ],\n    );\n  }\n\n  Widget _buildPrayerRow(PrayerProvider prayerProvider, String prayer) {\n    final prayerData =\n        prayerProvider.getPrayerData()['yearlyData'][_selectedYear.toString()];\n\n    // Add null check here\n    if (prayerData == null || prayerData[prayer] == null) {\n      return Container();\n    }\n\n    final prayerPercentage = prayerData[prayer]['percentMissed'];\n\n    return Padding(\n      padding: REdgeInsets.symmetric(vertical: 4.0),\n      child: Row(\n        mainAxisAlignment: MainAxisAlignment.spaceBetween,\n        children: [\n          Expanded(\n              flex: 2,\n              child: Text(\n                prayer,\n                style: TextStyle(color: Colors.black),\n              )),\n          Expanded(\n            child: AmanaInputField(\n              controller: _controllers[prayer]!\n                ..text = prayerPercentage.toString(),\n              sufixIcon: Icons.percent_outlined,\n              onChange: (val) {},\n              label: \"Missed\",\n              keyboardType: TextInputType.number,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(\n        startYear, startMonth, endYear, endMonth, percentageMissedByYear);\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              '🕌 It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              '📅 Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              '🕋 Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                '📖 \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart' as material;\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardCupertino({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers = 0;\n    final startYear = prayerProvider.startYear;\n    final endYear = prayerProvider.endYear;\n\n    for (var year = startYear; year <= endYear; year++) {\n      final yearlyData = prayerProvider.getPrayerData()['yearlyData'] ?? {};\n      final prayerData = yearlyData[year.toString()] ?? {};\n      completedPrayers += (prayerData[prayer]?['prayersCompleted'] ?? 0) as int;\n    }\n\n    return CupertinoCard(\n      child: Padding(\n        padding: REdgeInsets.all(16),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: const TextStyle(\n                    fontWeight: FontWeight.bold, color: CupertinoColors.black)),\n            const SizedBox(height: 8.0),\n            material.LinearProgressIndicator(\n              borderRadius: BorderRadius.circular(15),\n              value: totalPrayers > 0 ? (completedPrayers / totalPrayers).clamp(0, 1) : 0,\n              minHeight: 10.h,\n              backgroundColor: CupertinoColors.systemGrey5,\n              valueColor: const AlwaysStoppedAnimation<CupertinoDynamicColor>(\n                  CupertinoColors.systemGreen),\n            ),\n            Text(\n                '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14, color: CupertinoColors.black)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12, color: CupertinoColors.black)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              isAppLevel: false,\n              label: \"Pray\",\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\nclass CupertinoCard extends StatelessWidget {\n  final Widget child;\n\n  const CupertinoCard({Key? key, required this.child}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      decoration: BoxDecoration(\n        color: CupertinoColors.systemGrey6,\n        borderRadius: BorderRadius.circular(12).r,\n        boxShadow: [\n          BoxShadow(\n            color: CupertinoColors.black.withOpacity(0.1),\n            blurRadius: 10,\n            offset: const Offset(0, 2),\n          ),\n        ],\n      ),\n      child: child,\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\nimport 'dart:io' show Platform;\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport 'package:flutter/cupertino.dart' as cupertino;\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\nimport 'prayer_progress_card_cupertino.dart';\nimport 'year_selection_screen.dart';\nimport 'edit_details_screen.dart';\nimport 'settings_screen.dart';\nimport 'package:fl_chart/fl_chart.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        int totalPrayersPossible = prayerProvider.getTotalPrayersPossible();\n        int totalMissedPrayers = prayerProvider.getTotalPrayersMissed();\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Amana Audit'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.push(\n                    context,\n                    MaterialPageRoute(\n                        builder: (context) => EditDetailsScreen()),\n                  );\n                },\n              ),\n              IconButton(\n                icon: Icon(Icons.refresh),\n                onPressed: () async {\n                  await prayerProvider.resetApplication();\n                  prayerProvider.loadData();\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                Text('Total Prayers Missed'),\n                SizedBox(height: 8),\n                Text('$totalMissedPrayers'),\n                SizedBox(height: 8),\n                LinearProgressIndicator(\n                  value: totalPrayersPossible > 0\n                      ? totalMissedPrayers / totalPrayersPossible\n                      : 0,\n                  minHeight: 16,\n                  backgroundColor: Colors.grey[300],\n                  valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayerProvider.prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(prayer: prayer);\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n\n  const PrayerProgressCardMaterial({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    int totalPrayers = prayerProvider.getTotalPrayersForPrayerType(prayer);\n    int completedPrayers =\n        prayerProvider.getCompletedPrayersForPrayerType(prayer);\n    int missedPrayers =\n        prayerProvider.getTotalMissedPrayersForPrayerType(prayer);\n\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0\n                    ? (missedPrayers / totalPrayers).clamp(0, 1)\n                    : 0,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text('${(missedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$missedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            AmanaButton(\n              onPress: () => prayerProvider.incrementPrayer(prayer),\n              label: 'Pray',\n              isAppLevel: false,\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./lib/providers/prayer_provider.dart\n#############################################\n\n\n\n\n# File: ./lib/screens/edit_details_screen.dart\n###############################################\n\n\n\n\n# File: ./lib/screens/year_selection_screen.dart\n#################################################\n\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, dynamic> prayerData = {};\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map) {\n      prayerData =\n          Map<String, dynamic>.from(loadedData.cast<String, dynamic>());\n    } else {\n      _setDefaultPrayerData();\n      savePrayerData();\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> createDetailedBreakdown(\n      int startYear, int endYear, Map<int, int> percentageMissedByYear) async {\n    prayerData['prayerData'] = [\n      for (int year = startYear; year <= endYear; year++)\n        {\n          'year': year,\n          'totalPrayed': 0,\n          'totalMissed': 0,\n          'months': [\n            for (int month = 1; month <= 12; month++)\n              {\n                'monthNumber': month,\n                'totalPrayed': 0,\n                'totalMissed': 0,\n                'weeks': [\n                  for (int week = 1; week <= 5; week++)\n                    {\n                      'weekNumber': week,\n                      'totalPrayed': 0,\n                      'totalMissed': 0,\n                      'days': [\n                        for (int day = 1; day <= 7; day++)\n                          {\n                            'dayNumber': day,\n                            'prayers': [\n                              for (var prayer in prayers)\n                                {'prayerName': prayer, 'missed': false}\n                            ],\n                          },\n                      ],\n                    },\n                ],\n              },\n          ],\n        },\n    ];\n    await savePrayerData();\n  }\n\n  Future<void> updatePrayerData(String prayer, int year, int prayersCompleted,\n      int prayersMissed, int percentageMissed) async {\n    if (prayerData['yearlyData'][year.toString()] == null) {\n      prayerData['yearlyData'][year.toString()] = {};\n    }\n    prayerData['yearlyData'][year.toString()][prayer] = {\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'percentMissed': percentageMissed,\n    };\n    await savePrayerData();\n  }\n\n  int getTotalPrayersPossible(int startYear, int endYear) {\n    int totalPossible = 0;\n    for (int year = startYear; year <= endYear; year++) {\n      totalPossible +=\n          isLeapYear(year) ? 366 * prayers.length : 365 * prayers.length;\n    }\n    return totalPossible;\n  }\n\n  int getCompletedPrayersForPrayerType(String prayer) {\n    int completedPrayers = 0;\n    for (var year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      if (prayerData['yearlyData'][year.toString()] != null &&\n          prayerData['yearlyData'][year.toString()][prayer] != null) {\n        completedPrayers += prayerData['yearlyData'][year.toString()][prayer]\n            ['prayersCompleted'] as int;\n      }\n    }\n    return completedPrayers;\n  }\n\n  int getTotalPrayersForYear(int year) {\n    return isLeapYear(year) ? 366 * prayers.length : 365 * prayers.length;\n  }\n\n  int getTotalPrayersForPrayerTypeInYear(String prayer, int year) {\n    int totalPrayers = 0;\n    if (prayerData['yearlyData'][year.toString()] != null &&\n        prayerData['yearlyData'][year.toString()][prayer] != null) {\n      totalPrayers = prayerData['yearlyData'][year.toString()][prayer]\n                  ['prayersCompleted'] +\n              prayerData['yearlyData'][year.toString()][prayer]['prayersMissed']\n          as int;\n    }\n    return totalPrayers;\n  }\n\n  Future<void> incrementPrayer(String prayer) async {\n    for (int year = prayerData['startYear'];\n        year <= prayerData['endYear'];\n        year++) {\n      var prayerDataForYear = prayerData['yearlyData'][year.toString()][prayer];\n      if (prayerDataForYear == null) {\n        prayerDataForYear = {\n          'prayersCompleted': 0,\n          'prayersMissed': getTotalPrayersForYear(year),\n          'percentMissed': 100,\n        };\n      }\n      int totalPrayersForYear = getTotalPrayersForYear(year);\n      if (prayerDataForYear['prayersCompleted'] < totalPrayersForYear) {\n        prayerDataForYear['prayersCompleted']++;\n        prayerDataForYear['prayersMissed'] =\n            totalPrayersForYear - prayerDataForYear['prayersCompleted'];\n        prayerDataForYear['percentMissed'] =\n            (prayerDataForYear['prayersMissed'] / totalPrayersForYear * 100)\n                .round();\n\n        await savePrayerData();\n        break; // Break after updating the first incomplete year\n      }\n    }\n  }\n\n  Future<void> saveData(int startYear, int startMonth, int endYear,\n      int endMonth, Map<int, int> percentageMissedByYear) async {\n    prayerData['startYear'] = startYear;\n    prayerData['startMonth'] = startMonth;\n    prayerData['endYear'] = endYear;\n    prayerData['endMonth'] = endMonth;\n\n    prayerData['months'] = [\n      for (int year = startYear; year <= endYear; year++)\n        for (int month = (year == startYear ? startMonth : 1);\n            month <= (year == endYear ? endMonth : 12);\n            month++)\n          {'year': year, 'month': month}\n    ];\n\n    prayerData['yearlyData'] = {\n      for (int year = startYear; year <= endYear; year++)\n        year.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': percentageMissedByYear[year]!,\n              'prayersCompleted': getTotalPrayersForYear(year) -\n                  (getTotalPrayersForYear(year) *\n                          percentageMissedByYear[year]! /\n                          100)\n                      .round(),\n              'prayersMissed': (getTotalPrayersForYear(year) *\n                      percentageMissedByYear[year]! /\n                      100)\n                  .round(),\n            }\n        }\n    };\n\n    await savePrayerData();\n  }\n\n  int getTotalPrayersMissed() {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalMissed += (prayerData['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  int getTotalMissedPrayersForPrayerType(String prayer) {\n    int totalMissed = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      if (yearData[prayer] != null) {\n        totalMissed += (yearData[prayer]['prayersMissed'] as num).toInt();\n      }\n    }\n    return totalMissed;\n  }\n\n  Future<void> savePrayerData() async {\n    await _hiveService.saveData('prayerData', prayerData);\n    print('Saved data to Hive: $prayerData');\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    prayerData = {\n      'metadata': {\n        'createdAt': DateTime.now().toIso8601String(),\n        'updatedAt': DateTime.now().toIso8601String(),\n        'dataSource': 'Default',\n      },\n      'prayerData': [],\n      'birthYear': 2000,\n      'startYear': currentYear,\n      'endYear': currentYear,\n      'yearlyData': {\n        currentYear.toString(): {\n          for (var prayer in prayers)\n            prayer: {\n              'percentMissed': 50,\n              'prayersCompleted': 0,\n              'prayersMissed': getTotalPrayersForYear(currentYear),\n              'totalPossible': getTotalPrayersForYear(currentYear),\n            }\n        }\n      }\n    };\n  }\n\n  int getTotalCompletedPrayers() {\n    int totalCompleted = 0;\n    for (var yearData in prayerData['yearlyData'].values) {\n      for (var prayerData in yearData.values) {\n        totalCompleted += (prayerData['prayersCompleted'] as num).toInt();\n      }\n    }\n    return totalCompleted;\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    shareText += 'Total Completed: ${getTotalCompletedPrayers()}\\n';\n    Share.share(shareText);\n  }\n\n  bool isLeapYear(int year) {\n    return year % 4 == 0 && (year % 100 != 0 || year % 400 == 0);\n  }\n\n  Future<void> saveBirthYear(int birthYear) async {\n    prayerData['birthYear'] = birthYear;\n    await savePrayerData();\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ﷺ) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'عَنْ أَبِي هُرَيْرَةَ رَضِيَ اللَّهُ عَنْهُ قَالَ: قَالَ رَسُولُ اللَّهِ صَلَّى اللَّهُ عَلَيْهِ وَسَلَّمَ: \" إِنَّ اللَّهَ عَزَّ وَجَلَّ قَالَ: مَنْ عَادَى لِي وَلِيًّا، فَقَدْ آذَنْتُهُ بِالْحَرْبِ، وَمَا تَقَرَّبَ إِلَيَّ عَبْدِي بِشَيْءٍ أَحَبَّ إِلَيَّ مِمَّا افْتَرَضْتُ عَلَيْهِ، وَمَا يَزَالُ عَبْدِي يَتَقَرَّبُ إِلَيَّ بِالنَّوَافِلِ حَتَّى أُحِبَّهُ، فَإِذَا أَحْبَبْتُهُ، كُنْتُ سَمْعَهُ الَّذِي يَسْمَعُ بِهِ، وَبَصَرَهُ الَّذِي يُبْصِرُ بِهِ، وَيَدَهُ الَّتِي يَبْطِشُ بِهَا، وَرِجْلَهُ الَّتِي يَمْشِي بِهَا، وَإِنْ سَأَلَنِي لَأُعْطِيَنَّهُ، وَلَئِنْ اسْتَعَاذَنِي لَأُعِيذَنَّهُ، وَمَا تَرَدَّدْتُ عَنْ شَيْءٍ أَنَا فَاعِلُهُ تَرَدُّدِي عَنْ نَفْسِ عَبْدِي الْمُؤْمِنِ، يَكْرَهُ الْمَوْتَ وَأَنَا أَكْرَهُ مَسَاءَتَهُ - رواه البخاري',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n ",
      "created_at": "2024-06-03T16:27:38.775725",
      "sequence_order": 5,
      "parent_id": "9f8e9477-1da3-436f-a171-dc46cca96bd6",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "c1bb4f75-07fe-49ab-842d-ac056caf5319",
      "role": "assistant",
      "content": "Here's the Flutter project structure and code to fulfill the requirements for your prayer tracking app. The structure includes models, providers, services, and screens for handling prayers month by month.\n\n## Project Structure:\n```\nlib/\n  ├── main.dart\n  ├── myApp.dart\n  ├── constants.dart\n  ├── models/\n  │   ├── prayer_model.dart\n  ├── providers/\n  │   ├── prayer_provider.dart\n  ├── services/\n  │   ├── hive_service.dart\n  │   ├── prayer_service.dart\n  ├── screens/\n  │   ├── home_screen.dart\n  │   ├── settings_screen.dart\n  │   ├── edit_details_screen.dart\n  ├── widgets/\n  │   ├── prayer_progress_card.dart\n```\n\n### `main.dart`\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'services/hive_service.dart';\nimport 'services/prayer_service.dart';\nimport 'providers/prayer_provider.dart';\nimport 'myApp.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  final prayerService = PrayerService(hiveService);\n  final prayerProvider = PrayerProvider(prayerService);\n  await prayerProvider.loadData();\n  runApp(MyApp(\n    prayerProvider: prayerProvider,\n  ));\n}\n```\n\n### `myApp.dart`\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/settings_screen.dart';\nimport 'screens/edit_details_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final PrayerProvider prayerProvider;\n\n  const MyApp({super.key, required this.prayerProvider});\n\n  @override\n  Widget build(BuildContext context) {\n    return ChangeNotifierProvider.value(\n      value: prayerProvider,\n      child: MaterialApp(\n        title: 'Prayer Tracker',\n        debugShowCheckedModeBanner: false,\n        theme: ThemeData(\n            fontFamily: \"OpenSans\",\n            scaffoldBackgroundColor: Colors.grey[100],\n            primarySwatch: Colors.blue),\n        initialRoute: '/',\n        routes: {\n          '/': (context) => const HomeScreen(),\n          '/settings': (context) => const SettingsScreen(),\n          '/edit-details': (context) => const EditDetailsScreen()\n        },\n      ),\n    );\n  }\n}\n```\n\n### `constants.dart`\n```dart\nconst int kDefaultStartYear = 2020;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n```\n\n### `models/prayer_model.dart`\n```dart\nclass Prayer {\n  String name;\n  int totalPrayed;\n  int totalMissed;\n\n  Prayer({\n    required this.name,\n    required this.totalPrayed,\n    required this.totalMissed,\n  });\n\n  factory Prayer.fromJson(Map<String, dynamic> json) => Prayer(\n        name: json['name'],\n        totalPrayed: json['totalPrayed'],\n        totalMissed: json['totalMissed'],\n      );\n\n  Map<String, dynamic> toJson() => {\n        'name': name,\n        'totalPrayed': totalPrayed,\n        'totalMissed': totalMissed,\n      };\n}\n```\n\n### `providers/prayer_provider.dart`\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n\n  Map<String, dynamic> _prayerData = {};\n\n  Map<String, dynamic> get prayerData => _prayerData;\n\n  set prayerData(Map<String, dynamic> value) {\n    _prayerData = value;\n    notifyListeners();\n  }\n\n  PrayerProvider(this._prayerService);\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    prayerData = _prayer",
      "created_at": "2024-06-03T16:28:16.965823",
      "sequence_order": 6,
      "parent_id": "aaa2e8d4-0c8a-4be8-8916-e7df9415b252",
      "metadata": {
        "status": "in_progress",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "19a2b0d6-03e9-4626-bf75-9bf300968a43",
      "role": "assistant",
      "content": "Alright, let's break this down step-by-step.\n\n### Step-by-Step Plan\n\n#### 1. **Data Model with Hive**\n- **PrayerData** class to represent the prayer data.\n- **HiveService** to manage the database operations.\n- **PrayerService** to handle logic related to prayers.\n- **PrayerProvider** to manage state.\n\n#### 2. **Flutter UI**\n- **Main screen** with a progress bar showing total prayers completed.\n- **Buttons for each prayer type** with individual progress bars.\n- **Navigation** to detail screens for updating prayer data.\n\n### Code Implementation\n\n#### Data Model\n\n```dart\n// File: models/prayer_data.dart\nimport 'package:hive/hive.dart';\n\npart 'prayer_data.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerData {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  Map<String, int> prayersCompleted; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(3)\n  Map<String, int> prayersMissed; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  PrayerData({\n    required this.year,\n    required this.month,\n    required this.prayersCompleted,\n    required this.prayersMissed,\n  });\n}\n```\n\n#### Hive Service\n\n```dart\n// File: services/hive_service.dart\nimport 'package:hive_flutter/hive_flutter.dart';\nimport '../models/prayer_data.dart';\n\nclass HiveService {\n  Future<void> init() async {\n    await Hive.initFlutter();\n    Hive.registerAdapter(PrayerDataAdapter());\n    await Hive.openBox<PrayerData>('prayerData');\n  }\n\n  Future<void> saveData(PrayerData data) async {\n    final box = Hive.box<PrayerData>('prayerData');\n    await box.put('${data.year}-${data.month}', data);\n  }\n\n  PrayerData? loadData(int year, int month) {\n    final box = Hive.box<PrayerData>('prayerData');\n    return box.get('$year-$month');\n  }\n\n  Future<void> clearData() async {\n    final box = Hive.box<PrayerData>('prayerData');\n    await box.clear();\n  }\n}\n```\n\n#### Prayer Service\n\n```dart\n// File: services/prayer_service.dart\nimport 'package:share_plus/share_plus.dart';\nimport 'hive_service.dart';\nimport '../models/prayer_data.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n\n  PrayerService(this._hiveService);\n\n  Future<void> savePrayerData(PrayerData data) async {\n    await _hiveService.saveData(data);\n  }\n\n  PrayerData? getPrayerData(int year, int month) {\n    return _hiveService.loadData(year, month);\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Generate share text here\n    Share.share(shareText);\n  }\n}\n```\n\n#### Prayer Provider\n\n```dart\n// File: providers/prayer_provider.dart\nimport 'package:flutter/material.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  Map<String, PrayerData> _prayerData = {};\n\n  PrayerProvider(this._prayerService);\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  Future<void> loadData() async {\n    // Load data logic\n    notifyListeners();\n  }\n\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    // Increment prayer logic\n    notifyListeners();\n  }\n}\n```\n\n#### Main Application\n\n```dart\n// File: main.dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'services/hive_service.dart';\nimport 'services/prayer_service.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/home_screen.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  final prayerService = PrayerService(hiveService);\n  runApp(MyApp(prayerService: prayerService));\n}\n\nclass MyApp extends StatelessWidget {\n  final PrayerService prayerService;\n\n  MyApp({required this.prayerService});\n\n  @override\n  Widget build(BuildContext context) {\n    return ChangeNotifierProvider(\n      create: (_) => PrayerProvider(prayerService),\n      child: MaterialApp(\n        title: 'Prayer Tracker',\n        theme: ThemeData(\n          primarySwatch: Colors.blue,\n        ),\n        home: HomeScreen(),\n      ),\n    );\n  }\n}\n```\n\n#### Home Screen\n\n```dart\n// File: screens/home_screen.dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_detail_screen.dart';\n\nclass HomeScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n      ),\n      body: Column(\n        children: [\n          Text('Total Prayers Completed: ${prayerProvider.totalPrayersCompleted}'),\n          LinearProgressIndicator(\n            value: prayerProvider.totalPrayersCompleted / prayerProvider.totalPrayers,\n          ),\n          ...prayerProvider.prayers.map((prayer) => ListTile(\n            title: Text(prayer),\n            trailing: IconButton(\n              icon: Icon(Icons.add),\n              onPressed: () {\n                prayerProvider.incrementPrayer(prayer);\n              },\n            ),\n            onTap: () {\n              Navigator.push(\n                context,\n                MaterialPageRoute(builder: (context) => PrayerDetailScreen(prayer: prayer)),\n              );\n            },\n          )).toList(),\n        ],\n      ),\n    );\n  }\n}\n```\n\n#### Prayer Detail Screen\n\n```dart\n// File: screens/prayer_detail_screen.dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerDetailScreen extends StatelessWidget {\n  final String prayer;\n\n  PrayerDetailScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text(prayer),\n      ),\n      body: ListView.builder(\n        itemCount: prayerProvider.monthlyData.length,\n        itemBuilder: (context, index) {\n          final monthData = prayerProvider.monthlyData[index];\n          return ListTile(\n            title: Text('${monthData.month}/${monthData.year}'),\n            subtitle: Text('Completed: ${monthData.prayersCompleted[prayer]}, Missed: ${monthData.prayersMissed[prayer]}'),\n            onTap: () {\n              // Logic to edit prayer data for the month\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\nThis plan and code outline should give you a solid foundation to start your Flutter project. Let me know if you need any more details or adjustments!",
      "created_at": "2024-06-03T16:28:59.845043",
      "sequence_order": 7,
      "parent_id": "aaa2e8d4-0c8a-4be8-8916-e7df9415b252",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": true
      }
    },
    {
      "id": "aaa24d51-6268-448e-9917-8bdd0fd7d995",
      "role": "user",
      "content": "",
      "created_at": "2024-06-03T16:32:51.535403",
      "sequence_order": 8,
      "parent_id": "9f8e9477-1da3-436f-a171-dc46cca96bd6",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": null
      }
    },
    {
      "id": "7383dea2-f75f-467c-92c3-919b63ef06c6",
      "role": "assistant",
      "content": "Hello! We're here to help you improve your prompts and get the most valuable answers. How can we assist you today?",
      "created_at": "2024-06-03T16:32:52.997545",
      "sequence_order": 9,
      "parent_id": "aaa24d51-6268-448e-9917-8bdd0fd7d995",
      "metadata": {
        "status": "finished_successfully",
        "weight": 1,
        "end_turn": true
      }
    }
  ]
}
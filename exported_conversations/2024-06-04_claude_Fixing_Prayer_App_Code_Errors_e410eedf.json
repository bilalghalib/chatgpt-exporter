{
  "id": "e410eedf-e262-434b-96a3-596fb35543d9",
  "source": "claude",
  "title": "Fixing Prayer App Code Errors",
  "created_at": "2024-06-04T11:40:13.861385Z",
  "updated_at": "2024-06-05T10:38:02.221887Z",
  "summary": "",
  "message_count": 36,
  "messages": [
    {
      "id": "42195a1d-c625-43ef-8084-577503780c0d",
      "role": "human",
      "content": "review the code and fix errors:\n\nlib/main.dart:17:20: Error: Undefined name 'prayerProvider'.\n      hiveService, prayerProvider)); // Pass prayerProvider to PrayerService\n                   ^^^^^^^^^^^^^^\nlib/main.dart:17:20: Error: Local variable 'prayerProvider' can't be referenced before it is declared.\n      hiveService, prayerProvider)); // Pass prayerProvider to PrayerService\n                   ^^^^^^^^^^^^^^\nlib/main.dart:16:9: Context: This is the declaration of the variable 'prayerProvider'.\n  final prayerProvider = PrayerProvider(PrayerService(\n        ^^^^^^^^^^^^^^\nlib/main.dart:18:9: Error: Undefined name 'prayerProvider'.\n  await prayerProvider.loadData();\n        ^^^^^^^^^^^^^^\nlib/main.dart:20:21: Error: Undefined name 'prayerProvider'.\n    prayerProvider: prayerProvider,\n                    ^^^^^^^^^^^^^^\nlib/screens/year_selection_screen.dart:34:46: Error: The getter 'startYear' isn't defined for the class 'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing getter, or defining a getter or field named 'startYear'.\n        TextEditingController(text: provider.startYear.toString());\n                                             ^^^^^^^^^\nlib/screens/year_selection_screen.dart:37:46: Error: The getter 'endYear' isn't defined for the class 'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing getter, or defining a getter or field named 'endYear'.\n        TextEditingController(text: provider.endYear.toString());\n                                             ^^^^^^^\nlib/screens/year_selection_screen.dart:81:14: Error: The method 'saveData' isn't defined for the class 'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'saveData'.\n    provider.saveData(PrayerData(\n             ^^^^^^^^\n\nI want the data to be visible and updated on the home screen and updated whenever the data is updated",
      "created_at": "2024-06-04T11:42:36.813835Z",
      "sequence_order": 0,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T11:42:36.813835Z",
            "stop_timestamp": "2024-06-04T11:42:36.813835Z",
            "flags": null,
            "type": "text",
            "text": "review the code and fix errors:\n\nlib/main.dart:17:20: Error: Undefined name 'prayerProvider'.\n      hiveService, prayerProvider)); // Pass prayerProvider to PrayerService\n                   ^^^^^^^^^^^^^^\nlib/main.dart:17:20: Error: Local variable 'prayerProvider' can't be referenced before it is declared.\n      hiveService, prayerProvider)); // Pass prayerProvider to PrayerService\n                   ^^^^^^^^^^^^^^\nlib/main.dart:16:9: Context: This is the declaration of the variable 'prayerProvider'.\n  final prayerProvider = PrayerProvider(PrayerService(\n        ^^^^^^^^^^^^^^\nlib/main.dart:18:9: Error: Undefined name 'prayerProvider'.\n  await prayerProvider.loadData();\n        ^^^^^^^^^^^^^^\nlib/main.dart:20:21: Error: Undefined name 'prayerProvider'.\n    prayerProvider: prayerProvider,\n                    ^^^^^^^^^^^^^^\nlib/screens/year_selection_screen.dart:34:46: Error: The getter 'startYear' isn't defined for the class 'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing getter, or defining a getter or field named 'startYear'.\n        TextEditingController(text: provider.startYear.toString());\n                                             ^^^^^^^^^\nlib/screens/year_selection_screen.dart:37:46: Error: The getter 'endYear' isn't defined for the class 'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing getter, or defining a getter or field named 'endYear'.\n        TextEditingController(text: provider.endYear.toString());\n                                             ^^^^^^^\nlib/screens/year_selection_screen.dart:81:14: Error: The method 'saveData' isn't defined for the class 'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'saveData'.\n    provider.saveData(PrayerData(\n             ^^^^^^^^\n\nI want the data to be visible and updated on the home screen and updated whenever the data is updated",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T11:42:36.813835Z",
        "attachments": [
          {
            "file_name": "paste.txt",
            "file_size": 75489,
            "file_type": "txt",
            "extracted_content": "\n\n# File: ./myApp.dart\n#####################\n\n// File: myApp.dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final PrayerProvider prayerProvider;\n  const MyApp({super.key, required this.prayerProvider});\n  @override\n  Widget build(BuildContext context) {\n    return ChangeNotifierProvider.value(\n      value: prayerProvider,\n      child: AmanaMaterialApp(\n        title: 'Amana Audit',\n        debugShowCheckedModeBanner: false,\n        theme: ThemeData(\n            fontFamily: \"OpenSans\",\n            scaffoldBackgroundColor: Colors.grey[100],\n            primarySwatch: Colors.blue),\n        initialRoute: '/',\n        routes: {\n          '/': (context) => const HomeScreen(),\n          '/year-selection': (context) => const YearSelectionScreen(),\n          '/edit-details': (context) => const EditDetailsScreen()\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./prayer_record.dart\n#############################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int fajrMissed;\n\n  @HiveField(3)\n  int dhuhrMissed;\n\n  @HiveField(4)\n  int asrMissed;\n\n  @HiveField(5)\n  int maghribMissed;\n\n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./main.dart\n####################\n\n// File: main.dart\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_data.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n\n  Hive.registerAdapter(PrayerDataAdapter());\n  final prayerProvider = PrayerProvider(PrayerService(\n      hiveService, prayerProvider)); // Pass prayerProvider to PrayerService\n  await prayerProvider.loadData();\n  runApp(MyApp(\n    prayerProvider: prayerProvider,\n  ));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./prayer_record.g.dart\n###############################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\n// File: lib/providers/prayer_provider.dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  Map<String, PrayerData> _prayerData = {};\n  PrayerProvider(this._prayerService);\n  Map<String, PrayerData> get prayerData => _prayerData;\n  int get startYear => DateTime.now().year; // Fix: Define startYear getter\n  int get endYear => DateTime.now().year; // Fix: Define endYear getter\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n  final PrayerService _prayerService;\n  Map<String, PrayerData> get prayerData => _prayerService.prayerData;\n  PrayerProvider(this._prayerService);\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    // Find the earliest year and month with missed prayers\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear ||\n              (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      _prayerService.savePrayerData(data);\n      notifyListeners();\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getMissedPrayersForMonth(year, month, prayer);\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    return await _prayerService.getPrayerDataForMonth(year, month);\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    _prayerService.updatePrayerStats(\n        year, month, prayer, increaseCompletedCount);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForYear(year, percentageCompleted);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\n    notifyListeners();\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    return _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    return _prayerService.getPrayerCompletionPercentageForYear(year);\n  }\n}\n\n\n\n# File: ./models/prayer_record.dart\n####################################\n\nimport 'package:hive/hive.dart';\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n  @HiveField(1)\n  int month;\n  @HiveField(2)\n  int fajrMissed;\n  @HiveField(3)\n  int dhuhrMissed;\n  @HiveField(4)\n  int asrMissed;\n  @HiveField(5)\n  int maghribMissed;\n  @HiveField(6)\n  int ishaMissed;\n// Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./models/prayer_data.dart\n##################################\n\n// File: lib/models/prayer_data.dart\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_data.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerData {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  Map<String, int> prayersCompleted; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(3)\n  Map<String, int> prayersMissed; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(4)\n  int totalPrayed;\n\n  @HiveField(5)\n  int totalMissed;\n\n  @HiveField(6)\n  double percentagePrayed;\n\n  @HiveField(7)\n  double percentageMissed;\n\n  PrayerData({\n    required this.year,\n    required this.month,\n    required this.prayersCompleted,\n    required this.prayersMissed,\n    required this.totalPrayed,\n    required this.totalMissed,\n    required this.percentagePrayed,\n    required this.percentageMissed,\n  });\n\n  factory PrayerData.fromMap(Map<String, dynamic> map) {\n    return PrayerData(\n      year: map['year'],\n      month: map['month'],\n      prayersCompleted: Map<String, int>.from(map['prayersCompleted']),\n      prayersMissed: Map<String, int>.from(map['prayersMissed']),\n      totalPrayed: map['totalPrayed'],\n      totalMissed: map['totalMissed'],\n      percentagePrayed: map['percentagePrayed'],\n      percentageMissed: map['percentageMissed'],\n    );\n  }\n\n  Map<String, dynamic> toMap() {\n    return {\n      'year': year,\n      'month': month,\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'totalPrayed': totalPrayed,\n      'totalMissed': totalMissed,\n      'percentagePrayed': percentagePrayed,\n      'percentageMissed': percentageMissed,\n    };\n  }\n}\n\n\n\n# File: ./models/prayer_data.g.dart\n####################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_data.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerDataAdapter extends TypeAdapter<PrayerData> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerData read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerData(\n      year: fields[0] as int,\n      month: fields[1] as int,\n      prayersCompleted: (fields[2] as Map).cast<String, int>(),\n      prayersMissed: (fields[3] as Map).cast<String, int>(),\n      totalPrayed: fields[4] as int,\n      totalMissed: fields[5] as int,\n      percentagePrayed: fields[6] as double,\n      percentageMissed: fields[7] as double,\n    );\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerData obj) {\n    writer\n      ..writeByte(8)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.prayersCompleted)\n      ..writeByte(3)\n      ..write(obj.prayersMissed)\n      ..writeByte(4)\n      ..write(obj.totalPrayed)\n      ..writeByte(5)\n      ..write(obj.totalMissed)\n      ..writeByte(6)\n      ..write(obj.percentagePrayed)\n      ..writeByte(7)\n      ..write(obj.percentageMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerDataAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./models/prayer_record.g.dart\n######################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\n// File: screens/prayer_progress_card_material.dart\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n  final VoidCallback onPrayPressed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.year,\n    required this.month,\n    required this.onPrayPressed,\n  });\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(prayerProvider.getCompletedPrayersForMonth(\n          year, month, prayer)), // Fix: Wrap with Future.value()\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(prayerProvider.getMissedPrayersForMonth(\n              year, month, prayer)), // Fix: Wrap with Future.value()\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CircularProgressIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Card(\n              child: Padding(\n                padding: const EdgeInsets.all(14.0),\n                child: Column(\n                  mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                  children: [\n                    Text(prayer,\n                        style: TextStyle(\n                            fontWeight: FontWeight.bold, fontSize: 16)),\n                    ClipRRect(\n                      borderRadius: BorderRadius.circular(8),\n                      child: LinearProgressIndicator(\n                        value: totalPrayers > 0\n                            ? completedPrayers / totalPrayers\n                            : 0,\n                        minHeight: 12,\n                        backgroundColor: Colors.grey[300],\n                        valueColor:\n                            AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                      ),\n                    ),\n                    Text(\n                        '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                        style: TextStyle(fontSize: 14)),\n                    Text('$completedPrayers / $totalPrayers',\n                        style: TextStyle(fontSize: 12)),\n                    ElevatedButton(\n                      onPressed: onPrayPressed,\n                      child: Text('Pray'),\n                    ),\n                  ],\n                ),\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_details_screen.dart\n#############################################\n\nimport 'package:flutter/material.dart';\nimport '../services/hive_service.dart';\nimport '../models/prayer_record.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          // Implement logic to find and increment the oldest missed prayer\n\n          return Column(\n            children: [\n              // Display and update prayer details here\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\n// File: lib/screens/edit_details_screen.dart\n// File: lib/screens/edit_details_screen.dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport '../constants.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({Key? key}) : super(key: key);\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int _startYear = kDefaultStartYear;\n  int _endYear = kDefaultEndYear;\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n\n  void _updateStartYear(int year) {\n    setState(() {\n      _startYear = year;\n    });\n  }\n\n  void _updateEndYear(int year) {\n    setState(() {\n      _endYear = year;\n    });\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    if (_selectedYear != null && _selectedMonth != null) {\n      _percentageCompleted =\n          prayerProvider.getPrayerCompletionPercentageForMonth(\n        _selectedYear!,\n        _selectedMonth!,\n      );\n    } else if (_selectedYear != null) {\n      _percentageCompleted =\n          prayerProvider.getPrayerCompletionPercentageForYear(\n        _selectedYear!,\n      );\n    }\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: [\n                DropdownMenuItem(\n                  child: Text('Select Year'),\n                  value: null,\n                ),\n                ...List.generate(1, (index) => DateTime.now().year - index)\n                    .map((year) => DropdownMenuItem(\n                          value: year,\n                          child: Text(year.toString()),\n                        ))\n                    .toList(),\n              ],\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                  if (year != null) {\n                    _percentageCompleted = prayerProvider\n                        .getPrayerCompletionPercentageForYear(year);\n                  }\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            SizedBox(height: 16),\n            if (_selectedYear != null)\n              DropdownButtonFormField<int>(\n                value: _selectedMonth,\n                items: [\n                  DropdownMenuItem(\n                    child: Text('Average for total year, or select month'),\n                    value: null,\n                  ),\n                  ...List.generate(\n                          _selectedYear == DateTime.now().year\n                              ? DateTime.now().month - 1\n                              : 12,\n                          (index) => index + 1)\n                      .map((month) => DropdownMenuItem(\n                            value: month,\n                            child: Text('Month $month'),\n                          ))\n                      .toList(),\n                ],\n                onChanged: (month) {\n                  setState(() {\n                    _selectedMonth = month;\n                    if (month != null) {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForMonth(\n                        _selectedYear!,\n                        month,\n                      );\n                    } else {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForYear(\n                        _selectedYear!,\n                      );\n                    }\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Month',\n                ),\n              ),\n            SizedBox(height: 16),\n            Slider(\n              value: _percentageCompleted,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_percentageCompleted.round()}%',\n              onChanged: (value) {\n                setState(() {\n                  _percentageCompleted = value;\n                });\n              },\n              onChangeEnd: (value) {\n                if (_selectedYear != null) {\n                  if (_selectedMonth != null) {\n                    prayerProvider.updatePrayerStatsForMonth(\n                      _selectedYear!,\n                      _selectedMonth!,\n                      _percentageCompleted,\n                    );\n                  } else {\n                    prayerProvider.updatePrayerStatsForYear(\n                      _selectedYear!,\n                      _percentageCompleted,\n                    );\n                  }\n                }\n              },\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\nimport '../models/prayer_data.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(PrayerData(\n      // Fix: Pass a PrayerData object\n      year: startYear,\n      month: startMonth,\n      prayersCompleted: {},\n      prayersMissed: {},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    ));\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\n// File: screens/prayer_progress_card_cupertino.dart\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n\n  const PrayerProgressCardCupertino({\n    required this.prayer,\n    required this.year,\n    required this.month,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(\n          prayerProvider.getCompletedPrayersForMonth(year, month, prayer)),\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(\n              prayerProvider.getMissedPrayersForMonth(year, month, prayer)),\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CupertinoActivityIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Container(\n              margin: EdgeInsets.all(8.0),\n              padding: EdgeInsets.all(14.0),\n              decoration: BoxDecoration(\n                color: CupertinoColors.white,\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: CupertinoColors.systemGrey.withOpacity(0.4),\n                    spreadRadius: 1,\n                    blurRadius: 3,\n                    offset: Offset(0, 2),\n                  ),\n                ],\n              ),\n              child: Column(\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                children: [\n                  Text(prayer,\n                      style:\n                          TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n                  SizedBox(height: 8),\n                  ClipRRect(\n                    borderRadius: BorderRadius.circular(8),\n                    child: LinearProgressIndicator(\n                      value: totalPrayers > 0\n                          ? completedPrayers / totalPrayers\n                          : 0,\n                      minHeight: 12,\n                      backgroundColor: CupertinoColors.systemGrey4,\n                      valueColor: AlwaysStoppedAnimation<Color>(\n                          CupertinoColors.activeGreen),\n                    ),\n                  ),\n                  SizedBox(height: 8),\n                  Text(\n                      '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                      style: TextStyle(fontSize: 14)),\n                  Text('$completedPrayers / $totalPrayers',\n                      style: TextStyle(fontSize: 12)),\n                  SizedBox(height: 8),\n                  CupertinoButton.filled(\n                    onPressed: () => prayerProvider.incrementPrayer(prayer),\n                    child: Text('Pray'),\n                  ),\n                ],\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\n// File: lib/screens/home_screen.dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\nimport '../models/prayer_data.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        final currentYear = DateTime.now().year;\n        final currentMonth = DateTime.now().month;\n        final prayers = prayerProvider.prayers;\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Prayer Tracker'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.pushNamed(context, '/edit-details');\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                FutureBuilder<PrayerData>(\n                  future: prayerProvider.getPrayerDataForMonth(\n                      currentYear, currentMonth),\n                  builder: (context, snapshot) {\n                    if (snapshot.connectionState == ConnectionState.waiting) {\n                      return CircularProgressIndicator();\n                    }\n                    final prayerData = snapshot.data;\n                    final totalPrayed = prayerData?.totalPrayed ?? 0;\n                    final totalPossible = prayerData?.totalPrayed ??\n                        0 + (prayerData?.totalMissed ?? 0);\n                    return Column(\n                      children: [\n                        LinearProgressIndicator(\n                          value: totalPossible > 0\n                              ? totalPrayed / totalPossible\n                              : 0,\n                          minHeight: 16,\n                          backgroundColor: Colors.grey[300],\n                          valueColor:\n                              AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                        ),\n                        SizedBox(height: 8),\n                        Row(\n                          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                          children: [\n                            Text('$totalPrayed'),\n                            Text('$totalPossible'),\n                          ],\n                        ),\n                      ],\n                    );\n                  },\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        year: currentYear,\n                        month: currentMonth,\n                        onPrayPressed: () {\n                          prayerProvider.incrementPrayer(prayer);\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/flutter_build/dart_plugin_registrant.dart\n###############################################################\n\n//\n// Generated file. Do not edit.\n// This file is generated from template in file `flutter_tools/lib/src/flutter_plugins.dart`.\n//\n\n// @dart = 3.3\n\nimport 'dart:io'; // flutter_ignore: dart_io_import.\nimport 'package:path_provider_android/path_provider_android.dart';\nimport 'package:shared_preferences_android/shared_preferences_android.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_linux/path_provider_linux.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_linux/shared_preferences_linux.dart';\nimport 'package:url_launcher_linux/url_launcher_linux.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_windows/path_provider_windows.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_windows/shared_preferences_windows.dart';\nimport 'package:url_launcher_windows/url_launcher_windows.dart';\n\n@pragma('vm:entry-point')\nclass _PluginRegistrant {\n\n  @pragma('vm:entry-point')\n  static void register() {\n    if (Platform.isAndroid) {\n      try {\n        PathProviderAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isIOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isLinux) {\n      try {\n        PathProviderLinux.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusLinuxPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesLinux.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherLinux.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isMacOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isWindows) {\n      try {\n        PathProviderWindows.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusWindowsPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesWindows.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherWindows.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./.dart_tool/build/entrypoint/build.dart\n#################################################\n\n// ignore_for_file: directives_ordering\n// ignore_for_file: no_leading_underscores_for_library_prefixes\nimport 'package:build_runner_core/build_runner_core.dart' as _i1;\nimport 'package:hive_generator/hive_generator.dart' as _i2;\nimport 'package:source_gen/builder.dart' as _i3;\nimport 'dart:isolate' as _i4;\nimport 'package:build_runner/build_runner.dart' as _i5;\nimport 'dart:io' as _i6;\n\nfinal _builders = <_i1.BuilderApplication>[\n  _i1.apply(\n    r'hive_generator:hive_generator',\n    [_i2.getBuilder],\n    _i1.toDependentsOf(r'hive_generator'),\n    hideOutput: true,\n    appliesBuilders: const [r'source_gen:combining_builder'],\n  ),\n  _i1.apply(\n    r'source_gen:combining_builder',\n    [_i3.combiningBuilder],\n    _i1.toNoneByDefault(),\n    hideOutput: false,\n    appliesBuilders: const [r'source_gen:part_cleanup'],\n  ),\n  _i1.applyPostProcess(\n    r'source_gen:part_cleanup',\n    _i3.partCleanup,\n  ),\n];\nvoid main(\n  List<String> args, [\n  _i4.SendPort? sendPort,\n]) async {\n  var result = await _i5.run(\n    args,\n    _builders,\n  );\n  sendPort?.send(result);\n  _i6.exitCode = result;\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\n// File: hive_service.dart\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    await Hive.deleteBoxFromDisk('prayerBox'); // Clear the existing box\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\n// File: lib/services/prayer_service.dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\nimport '../providers/prayer_provider.dart'; // Import the PrayerProvider\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  final PrayerProvider _prayerProvider; // Create an instance of PrayerProvider\n\n  PrayerService(this._hiveService,\n      this._prayerProvider); // Add PrayerProvider to the constructor\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map<String, dynamic>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      // Initialize prayer data with default values based on constants\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(year, month, 50.0);\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    // Print the unpacked prayer data\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    _prayerProvider.notifyListeners(); // Notify the PrayerProvider\n  }\n\n  void incrementPrayer(String prayer) {\n    // Implement the logic to find and increment the oldest missed prayer\n    // Update the prayer data and save it\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed =\n          (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed =\n          (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1;\n        month <= (year == currentYear ? currentMonth - 1 : 12);\n        month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$int(2023)'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(\n      int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers)\n        prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n}\n\n\n\n# File: ./widgets/progress_bar.dart\n####################################\n\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double value;\n\n  ProgressBar({required this.value});\n\n  @override\n  Widget build(BuildContext context) {\n    return LinearProgressIndicator(value: value);\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ï·º) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'Ø¹ÙŽÙ†Ù’ Ø£ÙŽØ¨ÙÙŠ Ù‡ÙØ±ÙŽÙŠÙ’Ø±ÙŽØ©ÙŽ Ø±ÙŽØ¶ÙÙŠÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ†Ù’Ù‡Ù Ù‚ÙŽØ§Ù„ÙŽ: Ù‚ÙŽØ§Ù„ÙŽ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù ØµÙŽÙ„ÙŽÙ‘Ù‰ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ÙˆÙŽØ³ÙŽÙ„ÙŽÙ‘Ù…ÙŽ: \" Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙŽ Ø¹ÙŽØ²ÙŽÙ‘ ÙˆÙŽØ¬ÙŽÙ„ÙŽÙ‘ Ù‚ÙŽØ§Ù„ÙŽ: Ù…ÙŽÙ†Ù’ Ø¹ÙŽØ§Ø¯ÙŽÙ‰ Ù„ÙÙŠ ÙˆÙŽÙ„ÙÙŠÙ‹Ù‘Ø§ØŒ ÙÙŽÙ‚ÙŽØ¯Ù’ Ø¢Ø°ÙŽÙ†Ù’ØªÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙŽØ±Ù’Ø¨ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨ÙŽ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø¨ÙØ´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽØ­ÙŽØ¨ÙŽÙ‘ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ù…ÙÙ…ÙŽÙ‘Ø§ Ø§ÙÙ’ØªÙŽØ±ÙŽØ¶Ù’ØªÙ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ÙŠÙŽØ²ÙŽØ§Ù„Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ ÙŠÙŽØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨Ù Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¨ÙØ§Ù„Ù†ÙŽÙ‘ÙˆÙŽØ§ÙÙÙ„Ù Ø­ÙŽØªÙŽÙ‘Ù‰ Ø£ÙØ­ÙØ¨ÙŽÙ‘Ù‡ÙØŒ ÙÙŽØ¥ÙØ°ÙŽØ§ Ø£ÙŽØ­Ù’Ø¨ÙŽØ¨Ù’ØªÙÙ‡ÙØŒ ÙƒÙÙ†Ù’ØªÙ Ø³ÙŽÙ…Ù’Ø¹ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙŽØ³Ù’Ù…ÙŽØ¹Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽØ¨ÙŽØµÙŽØ±ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙØ¨Ù’ØµÙØ±Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽÙŠÙŽØ¯ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽØ¨Ù’Ø·ÙØ´Ù Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ±ÙØ¬Ù’Ù„ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽÙ…Ù’Ø´ÙÙŠ Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ¥ÙÙ†Ù’ Ø³ÙŽØ£ÙŽÙ„ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹Ù’Ø·ÙÙŠÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ„ÙŽØ¦ÙÙ†Ù’ Ø§Ø³Ù’ØªÙŽØ¹ÙŽØ§Ø°ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹ÙÙŠØ°ÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽØ±ÙŽØ¯ÙŽÙ‘Ø¯Ù’ØªÙ Ø¹ÙŽÙ†Ù’ Ø´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽÙ†ÙŽØ§ ÙÙŽØ§Ø¹ÙÙ„ÙÙ‡Ù ØªÙŽØ±ÙŽØ¯ÙÙ‘Ø¯ÙÙŠ Ø¹ÙŽÙ†Ù’ Ù†ÙŽÙÙ’Ø³Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØŒ ÙŠÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ø§Ù„Ù’Ù…ÙŽÙˆÙ’ØªÙŽ ÙˆÙŽØ£ÙŽÙ†ÙŽØ§ Ø£ÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ù…ÙŽØ³ÙŽØ§Ø¡ÙŽØªÙŽÙ‡Ù - Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n"
          }
        ],
        "files": [
          {
            "file_name": "paste.txt"
          }
        ]
      }
    },
    {
      "id": "d635f92e-516d-4d03-a491-3601b2bed4c4",
      "role": "assistant",
      "content": " I've reviewed the code and identified the following issues and suggestions to fix the errors and improve the code:\n\n1. In `lib/main.dart`, the `prayerProvider` variable is being used before it is declared. Move the declaration of `prayerProvider` before its usage in the `PrayerService` constructor.\n\n```dart\nfinal prayerProvider = PrayerProvider(PrayerService(hiveService));\nawait prayerProvider.loadData();\nrunApp(MyApp(prayerProvider: prayerProvider));\n```\n\n2. In `lib/screens/year_selection_screen.dart`, the `startYear` and `endYear` getters are not defined in the `PrayerProvider` class. Define these getters in the `PrayerProvider` class.\n\n```dart\nclass PrayerProvider with ChangeNotifier {\n  // ...\n  int get startYear => DateTime.now().year;\n  int get endYear => DateTime.now().year;\n  // ...\n}\n```\n\n3. In `lib/screens/year_selection_screen.dart`, the `saveData` method is not defined in the `PrayerProvider` class. Define this method in the `PrayerProvider` class.\n\n```dart\nclass PrayerProvider with ChangeNotifier {\n  // ...\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n  // ...\n}\n```\n\n4. To make the data visible and updated on the home screen, you need to use the `Consumer` widget from the `provider` package to listen to changes in the `PrayerProvider` and rebuild the UI accordingly.\n\nIn `lib/screens/home_screen.dart`, wrap the `Scaffold` widget with a `Consumer` widget:\n\n```dart\n@override\nWidget build(BuildContext context) {\n  return Consumer<PrayerProvider>(\n    builder: (context, prayerProvider, _) {\n      // ...\n      return Scaffold(\n        // ...\n      );\n    },\n  );\n}\n```\n\n5. In `lib/providers/prayer_provider.dart`, call `notifyListeners()` whenever the prayer data is updated to trigger a rebuild of the UI.\n\n```dart\nclass PrayerProvider with ChangeNotifier {\n  // ...\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n  // ...\n}\n```\n\n6. In `lib/services/prayer_service.dart`, call `_prayerProvider.notifyListeners()` after saving the prayer data to notify the `PrayerProvider` about the changes.\n\n```dart\nclass PrayerService {\n  // ...\n  Future<void> savePrayerData(PrayerData data) async {\n    // ...\n    _prayerProvider.notifyListeners();\n  }\n  // ...\n}\n```\n\nBy making these changes, the errors should be resolved, and the prayer data will be visible and updated on the home screen whenever the data is modified.\n\nRemember to test the app thoroughly after making these changes to ensure everything works as expected.",
      "created_at": "2024-06-04T11:42:36.813835Z",
      "sequence_order": 1,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T11:42:36.813835Z",
            "stop_timestamp": "2024-06-04T11:42:36.813835Z",
            "flags": null,
            "type": "text",
            "text": " I've reviewed the code and identified the following issues and suggestions to fix the errors and improve the code:\n\n1. In `lib/main.dart`, the `prayerProvider` variable is being used before it is declared. Move the declaration of `prayerProvider` before its usage in the `PrayerService` constructor.\n\n```dart\nfinal prayerProvider = PrayerProvider(PrayerService(hiveService));\nawait prayerProvider.loadData();\nrunApp(MyApp(prayerProvider: prayerProvider));\n```\n\n2. In `lib/screens/year_selection_screen.dart`, the `startYear` and `endYear` getters are not defined in the `PrayerProvider` class. Define these getters in the `PrayerProvider` class.\n\n```dart\nclass PrayerProvider with ChangeNotifier {\n  // ...\n  int get startYear => DateTime.now().year;\n  int get endYear => DateTime.now().year;\n  // ...\n}\n```\n\n3. In `lib/screens/year_selection_screen.dart`, the `saveData` method is not defined in the `PrayerProvider` class. Define this method in the `PrayerProvider` class.\n\n```dart\nclass PrayerProvider with ChangeNotifier {\n  // ...\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n  // ...\n}\n```\n\n4. To make the data visible and updated on the home screen, you need to use the `Consumer` widget from the `provider` package to listen to changes in the `PrayerProvider` and rebuild the UI accordingly.\n\nIn `lib/screens/home_screen.dart`, wrap the `Scaffold` widget with a `Consumer` widget:\n\n```dart\n@override\nWidget build(BuildContext context) {\n  return Consumer<PrayerProvider>(\n    builder: (context, prayerProvider, _) {\n      // ...\n      return Scaffold(\n        // ...\n      );\n    },\n  );\n}\n```\n\n5. In `lib/providers/prayer_provider.dart`, call `notifyListeners()` whenever the prayer data is updated to trigger a rebuild of the UI.\n\n```dart\nclass PrayerProvider with ChangeNotifier {\n  // ...\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n  // ...\n}\n```\n\n6. In `lib/services/prayer_service.dart`, call `_prayerProvider.notifyListeners()` after saving the prayer data to notify the `PrayerProvider` about the changes.\n\n```dart\nclass PrayerService {\n  // ...\n  Future<void> savePrayerData(PrayerData data) async {\n    // ...\n    _prayerProvider.notifyListeners();\n  }\n  // ...\n}\n```\n\nBy making these changes, the errors should be resolved, and the prayer data will be visible and updated on the home screen whenever the data is modified.\n\nRemember to test the app thoroughly after making these changes to ensure everything works as expected.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T11:42:36.813835Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "7b1470f5-6e47-4120-b73d-7f3b887b5e6a",
      "role": "human",
      "content": "can you help return main.dart in total and year_selection_screen.dart and prayer_provider.dart and prayer_service.dart",
      "created_at": "2024-06-04T11:48:29.014647Z",
      "sequence_order": 2,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T11:48:29.014647Z",
            "stop_timestamp": "2024-06-04T11:48:29.014647Z",
            "flags": null,
            "type": "text",
            "text": "can you help return main.dart in total and year_selection_screen.dart and prayer_provider.dart and prayer_service.dart",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T11:48:29.014647Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "0bd2ebbd-e13c-4613-8cf4-6e5ce0e65d29",
      "role": "assistant",
      "content": " Sure! Here are the updated files:\n\n`lib/main.dart`:\n\n```dart\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_data.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n\n  Hive.registerAdapter(PrayerDataAdapter());\n  final prayerProvider = PrayerProvider(PrayerService(hiveService));\n  await prayerProvider.loadData();\n  runApp(MyApp(prayerProvider: prayerProvider));\n}\n```\n\n`lib/screens/year_selection_screen.dart`:\n\n```dart\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\nimport '../models/prayer_data.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(PrayerData(\n      year: startYear,\n      month: startMonth,\n      prayersCompleted: {},\n      prayersMissed: {},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    ));\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\n`lib/providers/prayer_provider.dart`:\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  Map<String, PrayerData> _prayerData = {};\n\n  PrayerProvider(this._prayerService);\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  int get startYear => DateTime.now().year;\n  int get endYear => DateTime.now().year;\n\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getMissedPrayersForMonth(year, month, prayer);\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    return await _prayerService.getPrayerDataForMonth(year, month);\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    _prayerService.updatePrayerStats(\n        year, month, prayer, increaseCompletedCount);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForYear(year, percentageCompleted);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\n    notifyListeners();\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    return _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    return _prayerService.getPrayerCompletionPercentageForYear(year);\n  }\n}\n```\n\n`lib/services/prayer_service.dart`:\n\n```dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  final PrayerProvider _prayerProvider;\n\n  PrayerService(this._hiveService, this._prayerProvider);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map<String, dynamic>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(year, month, 50.0);\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    _prayerProvider.notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    // Implement the logic to find and increment the oldest missed prayer\n    // Update the prayer data and save it\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;",
      "created_at": "2024-06-04T11:48:29.014647Z",
      "sequence_order": 3,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T11:48:29.014647Z",
            "stop_timestamp": "2024-06-04T11:48:29.014647Z",
            "flags": null,
            "type": "text",
            "text": " Sure! Here are the updated files:\n\n`lib/main.dart`:\n\n```dart\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_data.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n\n  Hive.registerAdapter(PrayerDataAdapter());\n  final prayerProvider = PrayerProvider(PrayerService(hiveService));\n  await prayerProvider.loadData();\n  runApp(MyApp(prayerProvider: prayerProvider));\n}\n```\n\n`lib/screens/year_selection_screen.dart`:\n\n```dart\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\nimport '../models/prayer_data.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(PrayerData(\n      year: startYear,\n      month: startMonth,\n      prayersCompleted: {},\n      prayersMissed: {},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    ));\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\n`lib/providers/prayer_provider.dart`:\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  Map<String, PrayerData> _prayerData = {};\n\n  PrayerProvider(this._prayerService);\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  int get startYear => DateTime.now().year;\n  int get endYear => DateTime.now().year;\n\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getMissedPrayersForMonth(year, month, prayer);\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    return await _prayerService.getPrayerDataForMonth(year, month);\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    _prayerService.updatePrayerStats(\n        year, month, prayer, increaseCompletedCount);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForYear(year, percentageCompleted);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\n    notifyListeners();\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    return _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    return _prayerService.getPrayerCompletionPercentageForYear(year);\n  }\n}\n```\n\n`lib/services/prayer_service.dart`:\n\n```dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  final PrayerProvider _prayerProvider;\n\n  PrayerService(this._hiveService, this._prayerProvider);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map<String, dynamic>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(year, month, 50.0);\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    _prayerProvider.notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    // Implement the logic to find and increment the oldest missed prayer\n    // Update the prayer data and save it\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T11:48:29.014647Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "3b102003-52c7-4a7b-a568-7b203f36d891",
      "role": "human",
      "content": "return prayer service and edit details screen",
      "created_at": "2024-06-04T11:52:05.165410Z",
      "sequence_order": 4,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T11:52:05.165410Z",
            "stop_timestamp": "2024-06-04T11:52:05.165410Z",
            "flags": null,
            "type": "text",
            "text": "return prayer service and edit details screen",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T11:52:05.165410Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "7ad96032-484d-4fcd-8484-8a4e39627fed",
      "role": "assistant",
      "content": " Sure! Here's the updated `prayer_service.dart` and `edit_details_screen.dart`:\n\n`lib/services/prayer_service.dart`:\n\n```dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  final PrayerProvider _prayerProvider;\n\n  PrayerService(this._hiveService, this._prayerProvider);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map<String, dynamic>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(year, month, 50.0);\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    _prayerProvider.notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    // Find the earliest year and month with missed prayers\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear ||\n              (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed =\n          (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed =\n          (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1;\n        month <= (year == currentYear ? currentMonth - 1 : 12);\n        month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(\n      int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers)\n        prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n```\n\n`lib/screens/edit_details_screen.dart`:\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport '../platform_specific_widget/amana_snackbar.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({Key? key}) : super(key: key);\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    if (_selectedYear != null && _selectedMonth != null) {\n      _percentageCompleted =\n          prayerProvider.getPrayerCompletionPercentageForMonth(\n        _selectedYear!,\n        _selectedMonth!,\n      );\n    } else if (_selectedYear != null) {\n      _percentageCompleted =\n          prayerProvider.getPrayerCompletionPercentageForYear(\n        _selectedYear!,\n      );\n    }\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: [\n                DropdownMenuItem(\n                  child: Text('Select Year'),\n                  value: null,\n                ),\n                ...List.generate(1, (index) => DateTime.now().year - index)\n                    .map((year) => DropdownMenuItem(\n                          value: year,\n                          child: Text(year.toString()),\n                        ))\n                    .toList(),\n              ],\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                  if (year != null) {\n                    _percentageCompleted = prayerProvider\n                        .getPrayerCompletionPercentageForYear(year);\n                  }\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            SizedBox(height: 16),\n            if (_selectedYear != null)\n              DropdownButtonFormField<int>(\n                value: _selectedMonth,\n                items: [\n                  DropdownMenuItem(\n                    child: Text('Average for total year, or select month'),\n                    value: null,\n                  ),\n                  ...List.generate(\n                          _selectedYear == DateTime.now().year\n                              ? DateTime.now().month - 1\n                              : 12,\n                          (index) => index + 1)\n                      .map((month) => DropdownMenuItem(\n                            value: month,\n                            child: Text('Month $month'),\n                          ))\n                      .toList(),\n                ],\n                onChanged: (month) {\n                  setState(() {\n                    _selectedMonth = month;\n                    if (month != null) {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForMonth(\n                        _selectedYear!,\n                        month,\n                      );\n                    } else {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForYear(\n                        _selectedYear!,\n                      );\n                    }\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Month',\n                ),\n              ),\n            SizedBox(height: 16),\n            Slider(\n              value: _percentageCompleted,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_percentageCompleted.round()}%',\n              onChanged: (value) {\n                setState(() {\n                  _percentageCompleted = value;\n                });\n              },\n              onChangeEnd: (value) {\n                if (_selectedYear != null) {\n                  if (_selectedMonth != null) {\n                    prayerProvider.updatePrayerStatsForMonth(\n                      _selectedYear!,\n                      _selectedMonth!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text(\n                          'Changes saved for month $_selectedMonth of year $_selectedYear.'),\n                    );\n                  } else {\n                    prayerProvider.updatePrayerStatsForYear(\n                      _selectedYear!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text('Changes saved for year $_selectedYear.'),\n                    );\n                  }\n                }\n              },\n            ),\n          ],\n        ),\n      ),\n    );",
      "created_at": "2024-06-04T11:52:05.165410Z",
      "sequence_order": 5,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T11:52:05.165410Z",
            "stop_timestamp": "2024-06-04T11:52:05.165410Z",
            "flags": null,
            "type": "text",
            "text": " Sure! Here's the updated `prayer_service.dart` and `edit_details_screen.dart`:\n\n`lib/services/prayer_service.dart`:\n\n```dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  final PrayerProvider _prayerProvider;\n\n  PrayerService(this._hiveService, this._prayerProvider);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map<String, dynamic>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(year, month, 50.0);\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    _prayerProvider.notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    // Find the earliest year and month with missed prayers\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear ||\n              (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed =\n          (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed =\n          (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1;\n        month <= (year == currentYear ? currentMonth - 1 : 12);\n        month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(\n      int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers)\n        prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n```\n\n`lib/screens/edit_details_screen.dart`:\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport '../platform_specific_widget/amana_snackbar.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({Key? key}) : super(key: key);\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    if (_selectedYear != null && _selectedMonth != null) {\n      _percentageCompleted =\n          prayerProvider.getPrayerCompletionPercentageForMonth(\n        _selectedYear!,\n        _selectedMonth!,\n      );\n    } else if (_selectedYear != null) {\n      _percentageCompleted =\n          prayerProvider.getPrayerCompletionPercentageForYear(\n        _selectedYear!,\n      );\n    }\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: [\n                DropdownMenuItem(\n                  child: Text('Select Year'),\n                  value: null,\n                ),\n                ...List.generate(1, (index) => DateTime.now().year - index)\n                    .map((year) => DropdownMenuItem(\n                          value: year,\n                          child: Text(year.toString()),\n                        ))\n                    .toList(),\n              ],\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                  if (year != null) {\n                    _percentageCompleted = prayerProvider\n                        .getPrayerCompletionPercentageForYear(year);\n                  }\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            SizedBox(height: 16),\n            if (_selectedYear != null)\n              DropdownButtonFormField<int>(\n                value: _selectedMonth,\n                items: [\n                  DropdownMenuItem(\n                    child: Text('Average for total year, or select month'),\n                    value: null,\n                  ),\n                  ...List.generate(\n                          _selectedYear == DateTime.now().year\n                              ? DateTime.now().month - 1\n                              : 12,\n                          (index) => index + 1)\n                      .map((month) => DropdownMenuItem(\n                            value: month,\n                            child: Text('Month $month'),\n                          ))\n                      .toList(),\n                ],\n                onChanged: (month) {\n                  setState(() {\n                    _selectedMonth = month;\n                    if (month != null) {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForMonth(\n                        _selectedYear!,\n                        month,\n                      );\n                    } else {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForYear(\n                        _selectedYear!,\n                      );\n                    }\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Month',\n                ),\n              ),\n            SizedBox(height: 16),\n            Slider(\n              value: _percentageCompleted,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_percentageCompleted.round()}%',\n              onChanged: (value) {\n                setState(() {\n                  _percentageCompleted = value;\n                });\n              },\n              onChangeEnd: (value) {\n                if (_selectedYear != null) {\n                  if (_selectedMonth != null) {\n                    prayerProvider.updatePrayerStatsForMonth(\n                      _selectedYear!,\n                      _selectedMonth!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text(\n                          'Changes saved for month $_selectedMonth of year $_selectedYear.'),\n                    );\n                  } else {\n                    prayerProvider.updatePrayerStatsForYear(\n                      _selectedYear!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text('Changes saved for year $_selectedYear.'),\n                    );\n                  }\n                }\n              },\n            ),\n          ],\n        ),\n      ),\n    );",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T11:52:05.165410Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "99b59872-26ce-49c6-b60f-a81c9b361c73",
      "role": "human",
      "content": "return just edit details screen and be sure it has a start year and end year and the hadith modal and styles from year select screen",
      "created_at": "2024-06-04T11:55:41.692456Z",
      "sequence_order": 6,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T11:55:41.692456Z",
            "stop_timestamp": "2024-06-04T11:55:41.692456Z",
            "flags": null,
            "type": "text",
            "text": "return just edit details screen and be sure it has a start year and end year and the hadith modal and styles from year select screen",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T11:55:41.692456Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "cd7f4620-c3b1-4461-a877-3e5bcee4b2df",
      "role": "assistant",
      "content": " Here's the updated `edit_details_screen.dart` with the start year, end year, hadith modal, and styles from the year selection screen:\n\n```dart\nimport 'dart:io';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../constants.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../platform_specific_widget/amana_snackbar.dart';\nimport '../providers/prayer_provider.dart';\nimport '../widgets/hadith_modal.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({Key? key}) : super(key: key);\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _endYearController;\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: prayerProvider.startYear.toString());\n    _endYearController =\n        TextEditingController(text: prayerProvider.endYear.toString());\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    if (_selectedYear != null && _selectedMonth != null) {\n      _percentageCompleted =\n          prayerProvider.getPrayerCompletionPercentageForMonth(\n        _selectedYear!,\n        _selectedMonth!,\n      );\n    } else if (_selectedYear != null) {\n      _percentageCompleted =\n          prayerProvider.getPrayerCompletionPercentageForYear(\n        _selectedYear!,\n      );\n    }\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: [\n                DropdownMenuItem(\n                  child: Text('Select Year'),\n                  value: null,\n                ),\n                ...List.generate(1, (index) => DateTime.now().year - index)\n                    .map((year) => DropdownMenuItem(\n                          value: year,\n                          child: Text(year.toString()),\n                        ))\n                    .toList(),\n              ],\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                  if (year != null) {\n                    _percentageCompleted = prayerProvider\n                        .getPrayerCompletionPercentageForYear(year);\n                  }\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            SizedBox(height: 16),\n            if (_selectedYear != null)\n              DropdownButtonFormField<int>(\n                value: _selectedMonth,\n                items: [\n                  DropdownMenuItem(\n                    child: Text('Average for total year, or select month'),\n                    value: null,\n                  ),\n                  ...List.generate(\n                          _selectedYear == DateTime.now().year\n                              ? DateTime.now().month - 1\n                              : 12,\n                          (index) => index + 1)\n                      .map((month) => DropdownMenuItem(\n                            value: month,\n                            child: Text('Month $month'),\n                          ))\n                      .toList(),\n                ],\n                onChanged: (month) {\n                  setState(() {\n                    _selectedMonth = month;\n                    if (month != null) {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForMonth(\n                        _selectedYear!,\n                        month,\n                      );\n                    } else {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForYear(\n                        _selectedYear!,\n                      );\n                    }\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Month',\n                ),\n              ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Adjust the percentage of prayers completed for the selected year or month.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _percentageCompleted,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_percentageCompleted.round()}%',\n              onChanged: (value) {\n                setState(() {\n                  _percentageCompleted = value;\n                });\n              },\n              onChangeEnd: (value) {\n                if (_selectedYear != null) {\n                  if (_selectedMonth != null) {\n                    prayerProvider.updatePrayerStatsForMonth(\n                      _selectedYear!,\n                      _selectedMonth!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text(\n                          'Changes saved for month $_selectedMonth of year $_selectedYear.'),\n                    );\n                  } else {\n                    prayerProvider.updatePrayerStatsForYear(\n                      _selectedYear!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text('Changes saved for year $_selectedYear.'),\n                    );\n                  }\n                }\n              },\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: () {\n                Navigator.pop(context);\n              },\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\nThis updated `edit_details_screen.dart` includes the following changes:\n\n1. Added `_startYearController` and `_endYearController` to handle the start year and end year inputs.\n2. Added the `AmanaInputField` widgets for the start year and end year inputs, similar to the year selection screen.\n3. Adjusted the spacing and layout to match the styles from the year selection screen.\n4. Added the `_showHadithModal` function to display the hadith modal when the hadith text is tapped.\n5. Added the hadith text and gesture detector at the bottom of the screen, similar to the year selection screen.\n6. Updated the `AmanaSnackBar` to show the appropriate message when changes are saved for a specific year or month.\n7. Added the \"Save\" button using the `AmanaButton` widget.\n\nPlease note that you may need to adjust the imports based on your project structure and ensure that the necessary dependencies and files are available.",
      "created_at": "2024-06-04T11:55:41.692456Z",
      "sequence_order": 7,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T11:55:41.692456Z",
            "stop_timestamp": "2024-06-04T11:55:41.692456Z",
            "flags": null,
            "type": "text",
            "text": " Here's the updated `edit_details_screen.dart` with the start year, end year, hadith modal, and styles from the year selection screen:\n\n```dart\nimport 'dart:io';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../constants.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../platform_specific_widget/amana_snackbar.dart';\nimport '../providers/prayer_provider.dart';\nimport '../widgets/hadith_modal.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({Key? key}) : super(key: key);\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _endYearController;\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: prayerProvider.startYear.toString());\n    _endYearController =\n        TextEditingController(text: prayerProvider.endYear.toString());\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    if (_selectedYear != null && _selectedMonth != null) {\n      _percentageCompleted =\n          prayerProvider.getPrayerCompletionPercentageForMonth(\n        _selectedYear!,\n        _selectedMonth!,\n      );\n    } else if (_selectedYear != null) {\n      _percentageCompleted =\n          prayerProvider.getPrayerCompletionPercentageForYear(\n        _selectedYear!,\n      );\n    }\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: [\n                DropdownMenuItem(\n                  child: Text('Select Year'),\n                  value: null,\n                ),\n                ...List.generate(1, (index) => DateTime.now().year - index)\n                    .map((year) => DropdownMenuItem(\n                          value: year,\n                          child: Text(year.toString()),\n                        ))\n                    .toList(),\n              ],\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                  if (year != null) {\n                    _percentageCompleted = prayerProvider\n                        .getPrayerCompletionPercentageForYear(year);\n                  }\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            SizedBox(height: 16),\n            if (_selectedYear != null)\n              DropdownButtonFormField<int>(\n                value: _selectedMonth,\n                items: [\n                  DropdownMenuItem(\n                    child: Text('Average for total year, or select month'),\n                    value: null,\n                  ),\n                  ...List.generate(\n                          _selectedYear == DateTime.now().year\n                              ? DateTime.now().month - 1\n                              : 12,\n                          (index) => index + 1)\n                      .map((month) => DropdownMenuItem(\n                            value: month,\n                            child: Text('Month $month'),\n                          ))\n                      .toList(),\n                ],\n                onChanged: (month) {\n                  setState(() {\n                    _selectedMonth = month;\n                    if (month != null) {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForMonth(\n                        _selectedYear!,\n                        month,\n                      );\n                    } else {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForYear(\n                        _selectedYear!,\n                      );\n                    }\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Month',\n                ),\n              ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Adjust the percentage of prayers completed for the selected year or month.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _percentageCompleted,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_percentageCompleted.round()}%',\n              onChanged: (value) {\n                setState(() {\n                  _percentageCompleted = value;\n                });\n              },\n              onChangeEnd: (value) {\n                if (_selectedYear != null) {\n                  if (_selectedMonth != null) {\n                    prayerProvider.updatePrayerStatsForMonth(\n                      _selectedYear!,\n                      _selectedMonth!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text(\n                          'Changes saved for month $_selectedMonth of year $_selectedYear.'),\n                    );\n                  } else {\n                    prayerProvider.updatePrayerStatsForYear(\n                      _selectedYear!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text('Changes saved for year $_selectedYear.'),\n                    );\n                  }\n                }\n              },\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: () {\n                Navigator.pop(context);\n              },\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\nThis updated `edit_details_screen.dart` includes the following changes:\n\n1. Added `_startYearController` and `_endYearController` to handle the start year and end year inputs.\n2. Added the `AmanaInputField` widgets for the start year and end year inputs, similar to the year selection screen.\n3. Adjusted the spacing and layout to match the styles from the year selection screen.\n4. Added the `_showHadithModal` function to display the hadith modal when the hadith text is tapped.\n5. Added the hadith text and gesture detector at the bottom of the screen, similar to the year selection screen.\n6. Updated the `AmanaSnackBar` to show the appropriate message when changes are saved for a specific year or month.\n7. Added the \"Save\" button using the `AmanaButton` widget.\n\nPlease note that you may need to adjust the imports based on your project structure and ensure that the necessary dependencies and files are available.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T11:55:41.692456Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "bd6f297f-13db-4d35-a233-60c107dc8535",
      "role": "human",
      "content": "lib/main.dart:16:54: Error: Too few positional arguments: 2 required, 1 given.\n  final prayerProvider = PrayerProvider(PrayerService(hiveService));\n                                                     ^\nlib/services/prayer_service.dart:15:3: Context: Found this candidate, but the arguments don't match.\n  PrayerService(this._hiveService, this._prayerProvider);\n  ^^^^^^^^^^^^^\n\n// File: main.dart\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_data.dart';\nvoid main() async {\nWidgetsFlutterBinding.ensureInitialized();\nfinal hiveService = HiveService();\nawait hiveService.init();\nHive.registerAdapter(PrayerDataAdapter());\nfinal prayerProvider = PrayerProvider(PrayerService(hiveService));\nawait prayerProvider.loadData();\nrunApp(MyApp(prayerProvider: prayerProvider));\n}// File: lib/providers/prayer_provider.dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\nclass PrayerProvider with ChangeNotifier {\nfinal PrayerService _prayerService;\nMap<String, PrayerData> _prayerData = {};\nPrayerProvider(this._prayerService);\nMap<String, PrayerData> get prayerData => _prayerData;\nint get startYear => DateTime.now().year;\nint get endYear => DateTime.now().year;\nbool get isDataLoaded => _prayerService.isDataLoaded;\nList<String> get prayers => _prayerService.prayers;\nFuture<void> loadData() async {\nawait _prayerService.loadData();\n*prayerData = *prayerService.prayerData;\nnotifyListeners();\n }\nFuture<void> saveData(PrayerData data) async {\nawait _prayerService.savePrayerData(data);\n_prayerData['${data.year}-${data.month}'] = data;\nnotifyListeners();\n }\nvoid incrementPrayer(String prayer) {\n_prayerService.incrementPrayer(prayer);\nnotifyListeners();\n }\nint getCompletedPrayersForMonth(int year, int month, String prayer) {\nreturn _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n }\nint getMissedPrayersForMonth(int year, int month, String prayer) {\nreturn _prayerService.getMissedPrayersForMonth(year, month, prayer);\n }\nFuture<PrayerData> getPrayerDataForMonth(int year, int month) async {\nreturn await _prayerService.getPrayerDataForMonth(year, month);\n }\nvoid updatePrayerStats(\nint year, int month, String prayer, bool increaseCompletedCount) {\n_prayerService.updatePrayerStats(\nyear, month, prayer, increaseCompletedCount);\nnotifyListeners();\n }\nvoid updatePrayerStatsForYear(int year, double percentageCompleted) {\n_prayerService.updatePrayerStatsForYear(year, percentageCompleted);\nnotifyListeners();\n }\nvoid updatePrayerStatsForMonth(\nint year, int month, double percentageCompleted) {\n_prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\nnotifyListeners();\n }\ndouble getPrayerCompletionPercentageForMonth(int year, int month) {\nreturn _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n }\ndouble getPrayerCompletionPercentageForYear(int year) {\nreturn _prayerService.getPrayerCompletionPercentageForYear(year);\n }\n}",
      "created_at": "2024-06-04T11:59:13.757110Z",
      "sequence_order": 8,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T11:59:13.757110Z",
            "stop_timestamp": "2024-06-04T11:59:13.757110Z",
            "flags": null,
            "type": "text",
            "text": "lib/main.dart:16:54: Error: Too few positional arguments: 2 required, 1 given.\n  final prayerProvider = PrayerProvider(PrayerService(hiveService));\n                                                     ^\nlib/services/prayer_service.dart:15:3: Context: Found this candidate, but the arguments don't match.\n  PrayerService(this._hiveService, this._prayerProvider);\n  ^^^^^^^^^^^^^\n\n// File: main.dart\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_data.dart';\nvoid main() async {\nWidgetsFlutterBinding.ensureInitialized();\nfinal hiveService = HiveService();\nawait hiveService.init();\nHive.registerAdapter(PrayerDataAdapter());\nfinal prayerProvider = PrayerProvider(PrayerService(hiveService));\nawait prayerProvider.loadData();\nrunApp(MyApp(prayerProvider: prayerProvider));\n}// File: lib/providers/prayer_provider.dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\nclass PrayerProvider with ChangeNotifier {\nfinal PrayerService _prayerService;\nMap<String, PrayerData> _prayerData = {};\nPrayerProvider(this._prayerService);\nMap<String, PrayerData> get prayerData => _prayerData;\nint get startYear => DateTime.now().year;\nint get endYear => DateTime.now().year;\nbool get isDataLoaded => _prayerService.isDataLoaded;\nList<String> get prayers => _prayerService.prayers;\nFuture<void> loadData() async {\nawait _prayerService.loadData();\n*prayerData = *prayerService.prayerData;\nnotifyListeners();\n }\nFuture<void> saveData(PrayerData data) async {\nawait _prayerService.savePrayerData(data);\n_prayerData['${data.year}-${data.month}'] = data;\nnotifyListeners();\n }\nvoid incrementPrayer(String prayer) {\n_prayerService.incrementPrayer(prayer);\nnotifyListeners();\n }\nint getCompletedPrayersForMonth(int year, int month, String prayer) {\nreturn _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n }\nint getMissedPrayersForMonth(int year, int month, String prayer) {\nreturn _prayerService.getMissedPrayersForMonth(year, month, prayer);\n }\nFuture<PrayerData> getPrayerDataForMonth(int year, int month) async {\nreturn await _prayerService.getPrayerDataForMonth(year, month);\n }\nvoid updatePrayerStats(\nint year, int month, String prayer, bool increaseCompletedCount) {\n_prayerService.updatePrayerStats(\nyear, month, prayer, increaseCompletedCount);\nnotifyListeners();\n }\nvoid updatePrayerStatsForYear(int year, double percentageCompleted) {\n_prayerService.updatePrayerStatsForYear(year, percentageCompleted);\nnotifyListeners();\n }\nvoid updatePrayerStatsForMonth(\nint year, int month, double percentageCompleted) {\n_prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\nnotifyListeners();\n }\ndouble getPrayerCompletionPercentageForMonth(int year, int month) {\nreturn _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n }\ndouble getPrayerCompletionPercentageForYear(int year) {\nreturn _prayerService.getPrayerCompletionPercentageForYear(year);\n }\n}",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T11:59:13.757110Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "bc23142e-2768-496d-991f-8a0ca2835e2e",
      "role": "assistant",
      "content": " The error in `lib/main.dart` is caused by passing only one argument to the `PrayerService` constructor, while it expects two arguments according to the constructor definition in `lib/services/prayer_service.dart`.\n\nTo fix the error, you need to pass the `PrayerProvider` instance as the second argument to the `PrayerService` constructor in `lib/main.dart`. However, this creates a circular dependency because `PrayerProvider` depends on `PrayerService`, and `PrayerService` depends on `PrayerProvider`.\n\nTo resolve this, you can use a `ChangeNotifierProxyProvider` instead of creating the `PrayerProvider` instance directly in `main.dart`. Here's how you can modify the code:\n\n1. Update `lib/main.dart`:\n\n```dart\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_data.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  Hive.registerAdapter(PrayerDataAdapter());\n  runApp(MyApp(hiveService: hiveService));\n}\n```\n\n2. Update `lib/myApp.dart`:\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProxyProvider<HiveService, PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService, PrayerProvider(PrayerService(hiveService, null)))),\n          update: (_, hiveService, prayerProvider) => prayerProvider!..loadData(),\n        ),\n      ],\n      child: AmanaMaterialApp(\n        title: 'Amana Audit',\n        debugShowCheckedModeBanner: false,\n        theme: ThemeData(\n          fontFamily: \"OpenSans\",\n          scaffoldBackgroundColor: Colors.grey[100],\n          primarySwatch: Colors.blue,\n        ),\n        initialRoute: '/',\n        routes: {\n          '/': (context) => const HomeScreen(),\n          '/year-selection': (context) => const YearSelectionScreen(),\n          '/edit-details': (context) => const EditDetailsScreen(),\n        },\n      ),\n    );\n  }\n}\n```\n\nIn `lib/myApp.dart`, we use `MultiProvider` to provide both `HiveService` and `PrayerProvider`. The `ChangeNotifierProxyProvider` allows us to create the `PrayerProvider` instance with the `PrayerService` and `HiveService` dependencies, and also call the `loadData()` method when the `PrayerProvider` is created.\n\nWith these changes, the circular dependency is resolved, and the app should run without the error.",
      "created_at": "2024-06-04T11:59:13.757110Z",
      "sequence_order": 9,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T11:59:13.757110Z",
            "stop_timestamp": "2024-06-04T11:59:13.757110Z",
            "flags": null,
            "type": "text",
            "text": " The error in `lib/main.dart` is caused by passing only one argument to the `PrayerService` constructor, while it expects two arguments according to the constructor definition in `lib/services/prayer_service.dart`.\n\nTo fix the error, you need to pass the `PrayerProvider` instance as the second argument to the `PrayerService` constructor in `lib/main.dart`. However, this creates a circular dependency because `PrayerProvider` depends on `PrayerService`, and `PrayerService` depends on `PrayerProvider`.\n\nTo resolve this, you can use a `ChangeNotifierProxyProvider` instead of creating the `PrayerProvider` instance directly in `main.dart`. Here's how you can modify the code:\n\n1. Update `lib/main.dart`:\n\n```dart\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_data.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  Hive.registerAdapter(PrayerDataAdapter());\n  runApp(MyApp(hiveService: hiveService));\n}\n```\n\n2. Update `lib/myApp.dart`:\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProxyProvider<HiveService, PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService, PrayerProvider(PrayerService(hiveService, null)))),\n          update: (_, hiveService, prayerProvider) => prayerProvider!..loadData(),\n        ),\n      ],\n      child: AmanaMaterialApp(\n        title: 'Amana Audit',\n        debugShowCheckedModeBanner: false,\n        theme: ThemeData(\n          fontFamily: \"OpenSans\",\n          scaffoldBackgroundColor: Colors.grey[100],\n          primarySwatch: Colors.blue,\n        ),\n        initialRoute: '/',\n        routes: {\n          '/': (context) => const HomeScreen(),\n          '/year-selection': (context) => const YearSelectionScreen(),\n          '/edit-details': (context) => const EditDetailsScreen(),\n        },\n      ),\n    );\n  }\n}\n```\n\nIn `lib/myApp.dart`, we use `MultiProvider` to provide both `HiveService` and `PrayerProvider`. The `ChangeNotifierProxyProvider` allows us to create the `PrayerProvider` instance with the `PrayerService` and `HiveService` dependencies, and also call the `loadData()` method when the `PrayerProvider` is created.\n\nWith these changes, the circular dependency is resolved, and the app should run without the error.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T11:59:13.757110Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "94d8ae3b-3174-44aa-96e4-0ea07e962427",
      "role": "human",
      "content": "lib/myApp.dart:24:70: Error: The value 'null' can't be assigned to the parameter type 'PrayerProvider' because 'PrayerProvider'\nis not nullable.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\n              hiveService, PrayerProvider(PrayerService(hiveService, null)))),\n                                                                     ^",
      "created_at": "2024-06-04T12:02:22.756968Z",
      "sequence_order": 10,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:02:22.756968Z",
            "stop_timestamp": "2024-06-04T12:02:22.756968Z",
            "flags": null,
            "type": "text",
            "text": "lib/myApp.dart:24:70: Error: The value 'null' can't be assigned to the parameter type 'PrayerProvider' because 'PrayerProvider'\nis not nullable.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\n              hiveService, PrayerProvider(PrayerService(hiveService, null)))),\n                                                                     ^",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:02:22.756968Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "1f928351-1e30-47d6-9470-98b17ff93638",
      "role": "assistant",
      "content": " I apologize for the confusion. Let's fix the error by modifying the `MyApp` class in `lib/myApp.dart`. Here's the corrected code:\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService, _)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\nIn this updated code, we made the following changes:\n\n1. We replaced `ChangeNotifierProxyProvider` with `ChangeNotifierProvider` since we don't need to proxy the `HiveService`.\n\n2. Inside the `create` function of `ChangeNotifierProvider`, we create an instance of `PrayerProvider` by passing `PrayerService` with the `hiveService` and `_` (a placeholder for the `PrayerProvider` that will be created).\n\n3. We wrapped the `AmanaMaterialApp` with a `Consumer` widget that listens to the `PrayerProvider`. Inside the `builder` function of the `Consumer`, we call `prayerProvider.loadData()` to load the data when the app starts.\n\nWith these modifications, the error should be resolved, and the app should run without any issues.",
      "created_at": "2024-06-04T12:02:22.756968Z",
      "sequence_order": 11,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:02:22.756968Z",
            "stop_timestamp": "2024-06-04T12:02:22.756968Z",
            "flags": null,
            "type": "text",
            "text": " I apologize for the confusion. Let's fix the error by modifying the `MyApp` class in `lib/myApp.dart`. Here's the corrected code:\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService, _)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\nIn this updated code, we made the following changes:\n\n1. We replaced `ChangeNotifierProxyProvider` with `ChangeNotifierProvider` since we don't need to proxy the `HiveService`.\n\n2. Inside the `create` function of `ChangeNotifierProvider`, we create an instance of `PrayerProvider` by passing `PrayerService` with the `hiveService` and `_` (a placeholder for the `PrayerProvider` that will be created).\n\n3. We wrapped the `AmanaMaterialApp` with a `Consumer` widget that listens to the `PrayerProvider`. Inside the `builder` function of the `Consumer`, we call `prayerProvider.loadData()` to load the data when the app starts.\n\nWith these modifications, the error should be resolved, and the app should run without any issues.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:02:22.756968Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "d8a121cc-10c8-4615-9aff-32e91e828c3e",
      "role": "human",
      "content": "lib/myApp.dart:23:68: Error: The argument type 'BuildContext' can't be assigned to the parameter type 'PrayerProvider'.\n - 'BuildContext' is from 'package:flutter/src/widgets/framework.dart'\n ('/opt/homebrew/Caskroom/flutter/3.19.3/flutter/packages/flutter/lib/src/widgets/framework.dart').\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\n          create: (_) => PrayerProvider(PrayerService(hiveService, _)),\n                                                                   ^",
      "created_at": "2024-06-04T12:04:06.402700Z",
      "sequence_order": 12,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:04:06.402700Z",
            "stop_timestamp": "2024-06-04T12:04:06.402700Z",
            "flags": null,
            "type": "text",
            "text": "lib/myApp.dart:23:68: Error: The argument type 'BuildContext' can't be assigned to the parameter type 'PrayerProvider'.\n - 'BuildContext' is from 'package:flutter/src/widgets/framework.dart'\n ('/opt/homebrew/Caskroom/flutter/3.19.3/flutter/packages/flutter/lib/src/widgets/framework.dart').\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\n          create: (_) => PrayerProvider(PrayerService(hiveService, _)),\n                                                                   ^",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:04:06.402700Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "b5150f94-dd86-4233-89d6-eb64d1dd20cb",
      "role": "assistant",
      "content": " I apologize for the confusion. Let's fix the error by modifying the `MyApp` class in `lib/myApp.dart` again. Here's the corrected code:\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\nIn this updated code, we made the following change:\n\n- Inside the `create` function of `ChangeNotifierProvider`, we create an instance of `PrayerProvider` by passing `PrayerService` with only the `hiveService` argument, as the `PrayerProvider` argument is not needed in the constructor of `PrayerService`.\n\nWith this modification, the error should be resolved, and the app should run without any issues.",
      "created_at": "2024-06-04T12:04:06.402700Z",
      "sequence_order": 13,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:04:06.402700Z",
            "stop_timestamp": "2024-06-04T12:04:06.402700Z",
            "flags": null,
            "type": "text",
            "text": " I apologize for the confusion. Let's fix the error by modifying the `MyApp` class in `lib/myApp.dart` again. Here's the corrected code:\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\nIn this updated code, we made the following change:\n\n- Inside the `create` function of `ChangeNotifierProvider`, we create an instance of `PrayerProvider` by passing `PrayerService` with only the `hiveService` argument, as the `PrayerProvider` argument is not needed in the constructor of `PrayerService`.\n\nWith this modification, the error should be resolved, and the app should run without any issues.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:04:06.402700Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "4e3ce392-4cc9-4112-88cb-57e4fe482338",
      "role": "human",
      "content": "Restarted application in 774ms.\nTry again after fixing the above error(s).\nlib/myApp.dart:22:54: Error: Too few positional arguments: 2 required, 1 given.\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n                                                     ^\nlib/services/prayer_service.dart:15:3: Context: Found this candidate, but the arguments don't match.\n  PrayerService(this._hiveService, this._prayerProvider);",
      "created_at": "2024-06-04T12:06:31.455585Z",
      "sequence_order": 14,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:06:31.455585Z",
            "stop_timestamp": "2024-06-04T12:06:31.455585Z",
            "flags": null,
            "type": "text",
            "text": "Restarted application in 774ms.\nTry again after fixing the above error(s).\nlib/myApp.dart:22:54: Error: Too few positional arguments: 2 required, 1 given.\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n                                                     ^\nlib/services/prayer_service.dart:15:3: Context: Found this candidate, but the arguments don't match.\n  PrayerService(this._hiveService, this._prayerProvider);",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:06:31.455585Z",
        "attachments": [
          {
            "file_name": "paste.txt",
            "file_size": 78385,
            "file_type": "txt",
            "extracted_content": "\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./prayer_record.dart\n#############################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int fajrMissed;\n\n  @HiveField(3)\n  int dhuhrMissed;\n\n  @HiveField(4)\n  int asrMissed;\n\n  @HiveField(5)\n  int maghribMissed;\n\n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./main.dart\n####################\n\n// File: main.dart\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_data.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  Hive.registerAdapter(PrayerDataAdapter());\n  runApp(MyApp(hiveService: hiveService));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./prayer_record.g.dart\n###############################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\n// File: lib/providers/prayer_provider.dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  Map<String, PrayerData> _prayerData = {};\n\n  PrayerProvider(this._prayerService);\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  int get startYear => DateTime.now().year;\n  int get endYear => DateTime.now().year;\n\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getMissedPrayersForMonth(year, month, prayer);\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    return await _prayerService.getPrayerDataForMonth(year, month);\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    _prayerService.updatePrayerStats(\n        year, month, prayer, increaseCompletedCount);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForYear(year, percentageCompleted);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\n    notifyListeners();\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    return _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    return _prayerService.getPrayerCompletionPercentageForYear(year);\n  }\n}\n\n\n\n# File: ./models/prayer_record.dart\n####################################\n\nimport 'package:hive/hive.dart';\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n  @HiveField(1)\n  int month;\n  @HiveField(2)\n  int fajrMissed;\n  @HiveField(3)\n  int dhuhrMissed;\n  @HiveField(4)\n  int asrMissed;\n  @HiveField(5)\n  int maghribMissed;\n  @HiveField(6)\n  int ishaMissed;\n// Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./models/prayer_data.dart\n##################################\n\n// File: lib/models/prayer_data.dart\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_data.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerData {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  Map<String, int> prayersCompleted; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(3)\n  Map<String, int> prayersMissed; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(4)\n  int totalPrayed;\n\n  @HiveField(5)\n  int totalMissed;\n\n  @HiveField(6)\n  double percentagePrayed;\n\n  @HiveField(7)\n  double percentageMissed;\n\n  PrayerData({\n    required this.year,\n    required this.month,\n    required this.prayersCompleted,\n    required this.prayersMissed,\n    required this.totalPrayed,\n    required this.totalMissed,\n    required this.percentagePrayed,\n    required this.percentageMissed,\n  });\n\n  factory PrayerData.fromMap(Map<String, dynamic> map) {\n    return PrayerData(\n      year: map['year'],\n      month: map['month'],\n      prayersCompleted: Map<String, int>.from(map['prayersCompleted']),\n      prayersMissed: Map<String, int>.from(map['prayersMissed']),\n      totalPrayed: map['totalPrayed'],\n      totalMissed: map['totalMissed'],\n      percentagePrayed: map['percentagePrayed'],\n      percentageMissed: map['percentageMissed'],\n    );\n  }\n\n  Map<String, dynamic> toMap() {\n    return {\n      'year': year,\n      'month': month,\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'totalPrayed': totalPrayed,\n      'totalMissed': totalMissed,\n      'percentagePrayed': percentagePrayed,\n      'percentageMissed': percentageMissed,\n    };\n  }\n}\n\n\n\n# File: ./models/prayer_data.g.dart\n####################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_data.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerDataAdapter extends TypeAdapter<PrayerData> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerData read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerData(\n      year: fields[0] as int,\n      month: fields[1] as int,\n      prayersCompleted: (fields[2] as Map).cast<String, int>(),\n      prayersMissed: (fields[3] as Map).cast<String, int>(),\n      totalPrayed: fields[4] as int,\n      totalMissed: fields[5] as int,\n      percentagePrayed: fields[6] as double,\n      percentageMissed: fields[7] as double,\n    );\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerData obj) {\n    writer\n      ..writeByte(8)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.prayersCompleted)\n      ..writeByte(3)\n      ..write(obj.prayersMissed)\n      ..writeByte(4)\n      ..write(obj.totalPrayed)\n      ..writeByte(5)\n      ..write(obj.totalMissed)\n      ..writeByte(6)\n      ..write(obj.percentagePrayed)\n      ..writeByte(7)\n      ..write(obj.percentageMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerDataAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./models/prayer_record.g.dart\n######################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\n// File: screens/prayer_progress_card_material.dart\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n  final VoidCallback onPrayPressed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.year,\n    required this.month,\n    required this.onPrayPressed,\n  });\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(prayerProvider.getCompletedPrayersForMonth(\n          year, month, prayer)), // Fix: Wrap with Future.value()\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(prayerProvider.getMissedPrayersForMonth(\n              year, month, prayer)), // Fix: Wrap with Future.value()\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CircularProgressIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Card(\n              child: Padding(\n                padding: const EdgeInsets.all(14.0),\n                child: Column(\n                  mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                  children: [\n                    Text(prayer,\n                        style: TextStyle(\n                            fontWeight: FontWeight.bold, fontSize: 16)),\n                    ClipRRect(\n                      borderRadius: BorderRadius.circular(8),\n                      child: LinearProgressIndicator(\n                        value: totalPrayers > 0\n                            ? completedPrayers / totalPrayers\n                            : 0,\n                        minHeight: 12,\n                        backgroundColor: Colors.grey[300],\n                        valueColor:\n                            AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                      ),\n                    ),\n                    Text(\n                        '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                        style: TextStyle(fontSize: 14)),\n                    Text('$completedPrayers / $totalPrayers',\n                        style: TextStyle(fontSize: 12)),\n                    ElevatedButton(\n                      onPressed: onPrayPressed,\n                      child: Text('Pray'),\n                    ),\n                  ],\n                ),\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_details_screen.dart\n#############################################\n\nimport 'package:flutter/material.dart';\nimport '../services/hive_service.dart';\nimport '../models/prayer_record.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          // Implement logic to find and increment the oldest missed prayer\n\n          return Column(\n            children: [\n              // Display and update prayer details here\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport 'dart:io';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../constants.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../platform_specific_widget/amana_snackbar.dart';\nimport '../providers/prayer_provider.dart';\nimport '../widgets/hadith_modal.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({Key? key}) : super(key: key);\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _endYearController;\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: prayerProvider.startYear.toString());\n    _endYearController =\n        TextEditingController(text: prayerProvider.endYear.toString());\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    if (_selectedYear != null && _selectedMonth != null) {\n      _percentageCompleted =\n          prayerProvider.getPrayerCompletionPercentageForMonth(\n        _selectedYear!,\n        _selectedMonth!,\n      );\n    } else if (_selectedYear != null) {\n      _percentageCompleted =\n          prayerProvider.getPrayerCompletionPercentageForYear(\n        _selectedYear!,\n      );\n    }\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: [\n                DropdownMenuItem(\n                  child: Text('Select Year'),\n                  value: null,\n                ),\n                ...List.generate(1, (index) => DateTime.now().year - index)\n                    .map((year) => DropdownMenuItem(\n                          value: year,\n                          child: Text(year.toString()),\n                        ))\n                    .toList(),\n              ],\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                  if (year != null) {\n                    _percentageCompleted = prayerProvider\n                        .getPrayerCompletionPercentageForYear(year);\n                  }\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            SizedBox(height: 16),\n            if (_selectedYear != null)\n              DropdownButtonFormField<int>(\n                value: _selectedMonth,\n                items: [\n                  DropdownMenuItem(\n                    child: Text('Average for total year, or select month'),\n                    value: null,\n                  ),\n                  ...List.generate(\n                          _selectedYear == DateTime.now().year\n                              ? DateTime.now().month - 1\n                              : 12,\n                          (index) => index + 1)\n                      .map((month) => DropdownMenuItem(\n                            value: month,\n                            child: Text('Month $month'),\n                          ))\n                      .toList(),\n                ],\n                onChanged: (month) {\n                  setState(() {\n                    _selectedMonth = month;\n                    if (month != null) {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForMonth(\n                        _selectedYear!,\n                        month,\n                      );\n                    } else {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForYear(\n                        _selectedYear!,\n                      );\n                    }\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Month',\n                ),\n              ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Adjust the percentage of prayers completed for the selected year or month.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _percentageCompleted,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_percentageCompleted.round()}%',\n              onChanged: (value) {\n                setState(() {\n                  _percentageCompleted = value;\n                });\n              },\n              onChangeEnd: (value) {\n                if (_selectedYear != null) {\n                  if (_selectedMonth != null) {\n                    prayerProvider.updatePrayerStatsForMonth(\n                      _selectedYear!,\n                      _selectedMonth!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text(\n                          'Changes saved for month $_selectedMonth of year $_selectedYear.'),\n                    );\n                  } else {\n                    prayerProvider.updatePrayerStatsForYear(\n                      _selectedYear!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text('Changes saved for year $_selectedYear.'),\n                    );\n                  }\n                }\n              },\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: () {\n                Navigator.pop(context);\n              },\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\nimport '../models/prayer_data.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(PrayerData(\n      // Fix: Pass a PrayerData object\n      year: startYear,\n      month: startMonth,\n      prayersCompleted: {},\n      prayersMissed: {},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    ));\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\n// File: screens/prayer_progress_card_cupertino.dart\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n\n  const PrayerProgressCardCupertino({\n    required this.prayer,\n    required this.year,\n    required this.month,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(\n          prayerProvider.getCompletedPrayersForMonth(year, month, prayer)),\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(\n              prayerProvider.getMissedPrayersForMonth(year, month, prayer)),\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CupertinoActivityIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Container(\n              margin: EdgeInsets.all(8.0),\n              padding: EdgeInsets.all(14.0),\n              decoration: BoxDecoration(\n                color: CupertinoColors.white,\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: CupertinoColors.systemGrey.withOpacity(0.4),\n                    spreadRadius: 1,\n                    blurRadius: 3,\n                    offset: Offset(0, 2),\n                  ),\n                ],\n              ),\n              child: Column(\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                children: [\n                  Text(prayer,\n                      style:\n                          TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n                  SizedBox(height: 8),\n                  ClipRRect(\n                    borderRadius: BorderRadius.circular(8),\n                    child: LinearProgressIndicator(\n                      value: totalPrayers > 0\n                          ? completedPrayers / totalPrayers\n                          : 0,\n                      minHeight: 12,\n                      backgroundColor: CupertinoColors.systemGrey4,\n                      valueColor: AlwaysStoppedAnimation<Color>(\n                          CupertinoColors.activeGreen),\n                    ),\n                  ),\n                  SizedBox(height: 8),\n                  Text(\n                      '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                      style: TextStyle(fontSize: 14)),\n                  Text('$completedPrayers / $totalPrayers',\n                      style: TextStyle(fontSize: 12)),\n                  SizedBox(height: 8),\n                  CupertinoButton.filled(\n                    onPressed: () => prayerProvider.incrementPrayer(prayer),\n                    child: Text('Pray'),\n                  ),\n                ],\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\n// File: lib/screens/home_screen.dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\nimport '../models/prayer_data.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        final currentYear = DateTime.now().year;\n        final currentMonth = DateTime.now().month;\n        final prayers = prayerProvider.prayers;\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Prayer Tracker'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.pushNamed(context, '/edit-details');\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                FutureBuilder<PrayerData>(\n                  future: prayerProvider.getPrayerDataForMonth(\n                      currentYear, currentMonth),\n                  builder: (context, snapshot) {\n                    if (snapshot.connectionState == ConnectionState.waiting) {\n                      return CircularProgressIndicator();\n                    }\n                    final prayerData = snapshot.data;\n                    final totalPrayed = prayerData?.totalPrayed ?? 0;\n                    final totalPossible = prayerData?.totalPrayed ??\n                        0 + (prayerData?.totalMissed ?? 0);\n                    return Column(\n                      children: [\n                        LinearProgressIndicator(\n                          value: totalPossible > 0\n                              ? totalPrayed / totalPossible\n                              : 0,\n                          minHeight: 16,\n                          backgroundColor: Colors.grey[300],\n                          valueColor:\n                              AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                        ),\n                        SizedBox(height: 8),\n                        Row(\n                          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                          children: [\n                            Text('$totalPrayed'),\n                            Text('$totalPossible'),\n                          ],\n                        ),\n                      ],\n                    );\n                  },\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        year: currentYear,\n                        month: currentMonth,\n                        onPrayPressed: () {\n                          prayerProvider.incrementPrayer(prayer);\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/flutter_build/dart_plugin_registrant.dart\n###############################################################\n\n//\n// Generated file. Do not edit.\n// This file is generated from template in file `flutter_tools/lib/src/flutter_plugins.dart`.\n//\n\n// @dart = 3.3\n\nimport 'dart:io'; // flutter_ignore: dart_io_import.\nimport 'package:path_provider_android/path_provider_android.dart';\nimport 'package:shared_preferences_android/shared_preferences_android.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_linux/path_provider_linux.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_linux/shared_preferences_linux.dart';\nimport 'package:url_launcher_linux/url_launcher_linux.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_windows/path_provider_windows.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_windows/shared_preferences_windows.dart';\nimport 'package:url_launcher_windows/url_launcher_windows.dart';\n\n@pragma('vm:entry-point')\nclass _PluginRegistrant {\n\n  @pragma('vm:entry-point')\n  static void register() {\n    if (Platform.isAndroid) {\n      try {\n        PathProviderAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isIOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isLinux) {\n      try {\n        PathProviderLinux.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusLinuxPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesLinux.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherLinux.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isMacOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isWindows) {\n      try {\n        PathProviderWindows.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusWindowsPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesWindows.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherWindows.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./.dart_tool/build/entrypoint/build.dart\n#################################################\n\n// ignore_for_file: directives_ordering\n// ignore_for_file: no_leading_underscores_for_library_prefixes\nimport 'package:build_runner_core/build_runner_core.dart' as _i1;\nimport 'package:hive_generator/hive_generator.dart' as _i2;\nimport 'package:source_gen/builder.dart' as _i3;\nimport 'dart:isolate' as _i4;\nimport 'package:build_runner/build_runner.dart' as _i5;\nimport 'dart:io' as _i6;\n\nfinal _builders = <_i1.BuilderApplication>[\n  _i1.apply(\n    r'hive_generator:hive_generator',\n    [_i2.getBuilder],\n    _i1.toDependentsOf(r'hive_generator'),\n    hideOutput: true,\n    appliesBuilders: const [r'source_gen:combining_builder'],\n  ),\n  _i1.apply(\n    r'source_gen:combining_builder',\n    [_i3.combiningBuilder],\n    _i1.toNoneByDefault(),\n    hideOutput: false,\n    appliesBuilders: const [r'source_gen:part_cleanup'],\n  ),\n  _i1.applyPostProcess(\n    r'source_gen:part_cleanup',\n    _i3.partCleanup,\n  ),\n];\nvoid main(\n  List<String> args, [\n  _i4.SendPort? sendPort,\n]) async {\n  var result = await _i5.run(\n    args,\n    _builders,\n  );\n  sendPort?.send(result);\n  _i6.exitCode = result;\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\n// File: hive_service.dart\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    await Hive.deleteBoxFromDisk('prayerBox'); // Clear the existing box\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\n// File: lib/services/prayer_service.dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  final PrayerProvider _prayerProvider;\n\n  PrayerService(this._hiveService, this._prayerProvider);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map<String, dynamic>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(year, month, 50.0);\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    _prayerProvider.notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    // Find the earliest year and month with missed prayers\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear ||\n              (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed =\n          (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed =\n          (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1;\n        month <= (year == currentYear ? currentMonth - 1 : 12);\n        month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(\n      int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers)\n        prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n\n\n\n# File: ./widgets/progress_bar.dart\n####################################\n\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double value;\n\n  ProgressBar({required this.value});\n\n  @override\n  Widget build(BuildContext context) {\n    return LinearProgressIndicator(value: value);\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ï·º) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'Ø¹ÙŽÙ†Ù’ Ø£ÙŽØ¨ÙÙŠ Ù‡ÙØ±ÙŽÙŠÙ’Ø±ÙŽØ©ÙŽ Ø±ÙŽØ¶ÙÙŠÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ†Ù’Ù‡Ù Ù‚ÙŽØ§Ù„ÙŽ: Ù‚ÙŽØ§Ù„ÙŽ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù ØµÙŽÙ„ÙŽÙ‘Ù‰ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ÙˆÙŽØ³ÙŽÙ„ÙŽÙ‘Ù…ÙŽ: \" Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙŽ Ø¹ÙŽØ²ÙŽÙ‘ ÙˆÙŽØ¬ÙŽÙ„ÙŽÙ‘ Ù‚ÙŽØ§Ù„ÙŽ: Ù…ÙŽÙ†Ù’ Ø¹ÙŽØ§Ø¯ÙŽÙ‰ Ù„ÙÙŠ ÙˆÙŽÙ„ÙÙŠÙ‹Ù‘Ø§ØŒ ÙÙŽÙ‚ÙŽØ¯Ù’ Ø¢Ø°ÙŽÙ†Ù’ØªÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙŽØ±Ù’Ø¨ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨ÙŽ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø¨ÙØ´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽØ­ÙŽØ¨ÙŽÙ‘ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ù…ÙÙ…ÙŽÙ‘Ø§ Ø§ÙÙ’ØªÙŽØ±ÙŽØ¶Ù’ØªÙ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ÙŠÙŽØ²ÙŽØ§Ù„Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ ÙŠÙŽØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨Ù Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¨ÙØ§Ù„Ù†ÙŽÙ‘ÙˆÙŽØ§ÙÙÙ„Ù Ø­ÙŽØªÙŽÙ‘Ù‰ Ø£ÙØ­ÙØ¨ÙŽÙ‘Ù‡ÙØŒ ÙÙŽØ¥ÙØ°ÙŽØ§ Ø£ÙŽØ­Ù’Ø¨ÙŽØ¨Ù’ØªÙÙ‡ÙØŒ ÙƒÙÙ†Ù’ØªÙ Ø³ÙŽÙ…Ù’Ø¹ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙŽØ³Ù’Ù…ÙŽØ¹Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽØ¨ÙŽØµÙŽØ±ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙØ¨Ù’ØµÙØ±Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽÙŠÙŽØ¯ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽØ¨Ù’Ø·ÙØ´Ù Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ±ÙØ¬Ù’Ù„ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽÙ…Ù’Ø´ÙÙŠ Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ¥ÙÙ†Ù’ Ø³ÙŽØ£ÙŽÙ„ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹Ù’Ø·ÙÙŠÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ„ÙŽØ¦ÙÙ†Ù’ Ø§Ø³Ù’ØªÙŽØ¹ÙŽØ§Ø°ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹ÙÙŠØ°ÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽØ±ÙŽØ¯ÙŽÙ‘Ø¯Ù’ØªÙ Ø¹ÙŽÙ†Ù’ Ø´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽÙ†ÙŽØ§ ÙÙŽØ§Ø¹ÙÙ„ÙÙ‡Ù ØªÙŽØ±ÙŽØ¯ÙÙ‘Ø¯ÙÙŠ Ø¹ÙŽÙ†Ù’ Ù†ÙŽÙÙ’Ø³Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØŒ ÙŠÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ø§Ù„Ù’Ù…ÙŽÙˆÙ’ØªÙŽ ÙˆÙŽØ£ÙŽÙ†ÙŽØ§ Ø£ÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ù…ÙŽØ³ÙŽØ§Ø¡ÙŽØªÙŽÙ‡Ù - Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n"
          }
        ],
        "files": [
          {
            "file_name": "paste.txt"
          }
        ]
      }
    },
    {
      "id": "8a240566-ec68-440c-a5e6-ab450a6aa4d7",
      "role": "assistant",
      "content": " To fix the error in `lib/myApp.dart`, you need to pass the `PrayerProvider` instance to the `PrayerService` constructor. However, since you're creating the `PrayerProvider` instance in the same line, you can't directly pass it.\n\nHere's how you can modify `lib/myApp.dart` to resolve the issue:\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService, PrayerProvider(PrayerService(hiveService, null)))),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\nIn this modification, we create a temporary `PrayerProvider` instance with a `null` value for the `PrayerProvider` parameter in the `PrayerService` constructor. This allows us to pass the required arguments to the `PrayerService` constructor when creating the actual `PrayerProvider` instance.\n\nNote that this is a workaround to satisfy the constructor requirements, and the temporary `PrayerProvider` instance with `null` will not be used.\n\nAfter making this change, the error should be resolved, and the app should run without any issues.",
      "created_at": "2024-06-04T12:06:31.455585Z",
      "sequence_order": 15,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:06:31.455585Z",
            "stop_timestamp": "2024-06-04T12:06:31.455585Z",
            "flags": null,
            "type": "text",
            "text": " To fix the error in `lib/myApp.dart`, you need to pass the `PrayerProvider` instance to the `PrayerService` constructor. However, since you're creating the `PrayerProvider` instance in the same line, you can't directly pass it.\n\nHere's how you can modify `lib/myApp.dart` to resolve the issue:\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService, PrayerProvider(PrayerService(hiveService, null)))),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\nIn this modification, we create a temporary `PrayerProvider` instance with a `null` value for the `PrayerProvider` parameter in the `PrayerService` constructor. This allows us to pass the required arguments to the `PrayerService` constructor when creating the actual `PrayerProvider` instance.\n\nNote that this is a workaround to satisfy the constructor requirements, and the temporary `PrayerProvider` instance with `null` will not be used.\n\nAfter making this change, the error should be resolved, and the app should run without any issues.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:06:31.455585Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "488d180f-fd0c-4187-85f9-ad15c2a62548",
      "role": "human",
      "content": "think step by step about our goal and find a way around this error:\n\nlib/myApp.dart:23:70: Error: The value 'null' can't be assigned to the parameter type 'PrayerProvider' because 'PrayerProvider'\nis not nullable.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\n              hiveService, PrayerProvider(PrayerService(hiveService, null)))),\n                                                                     ^\nUse first principles and edit and return any file that needs to be updated. What's the simplest easiest way to do this?",
      "created_at": "2024-06-04T12:08:13.269348Z",
      "sequence_order": 16,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:08:13.269348Z",
            "stop_timestamp": "2024-06-04T12:08:13.269348Z",
            "flags": null,
            "type": "text",
            "text": "think step by step about our goal and find a way around this error:\n\nlib/myApp.dart:23:70: Error: The value 'null' can't be assigned to the parameter type 'PrayerProvider' because 'PrayerProvider'\nis not nullable.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\n              hiveService, PrayerProvider(PrayerService(hiveService, null)))),\n                                                                     ^\nUse first principles and edit and return any file that needs to be updated. What's the simplest easiest way to do this?",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:08:13.269348Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "68e442dc-8de8-470d-ab6a-c0d504ffec66",
      "role": "assistant",
      "content": " Let's think about this step by step and find a solution to the error.\n\n1. The error occurs because we are passing `null` to the `PrayerService` constructor, which expects a non-nullable `PrayerProvider` instance.\n\n2. The root cause of the issue is the circular dependency between `PrayerProvider` and `PrayerService`. `PrayerProvider` depends on `PrayerService`, and `PrayerService` depends on `PrayerProvider`.\n\n3. To break this circular dependency, we can remove the dependency of `PrayerService` on `PrayerProvider`. Instead, we can use a callback function to notify `PrayerProvider` when the prayer data is updated.\n\nHere's how we can modify the relevant files:\n\n`lib/services/prayer_service.dart`:\n```dart\n// File: lib/services/prayer_service.dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  // ... (rest of the code remains the same)\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    // ... (print statements remain the same)\n\n    onPrayerDataUpdated?.call();\n  }\n\n  // ... (rest of the code remains the same)\n}\n```\n\n`lib/providers/prayer_provider.dart`:\n```dart\n// File: lib/providers/prayer_provider.dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n\n  PrayerProvider(this._prayerService) {\n    _prayerService.onPrayerDataUpdated = _onPrayerDataUpdated;\n  }\n\n  void _onPrayerDataUpdated() {\n    notifyListeners();\n  }\n\n  // ... (rest of the code remains the same)\n}\n```\n\n`lib/myApp.dart`:\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            // ... (rest of the code remains the same)\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\nIn this solution:\n1. We remove the `PrayerProvider` parameter from the `PrayerService` constructor.\n2. We introduce a `PrayerDataUpdateCallback` typedef and an `onPrayerDataUpdated` callback in `PrayerService`.\n3. In the `savePrayerData` method of `PrayerService`, we invoke the `onPrayerDataUpdated` callback after saving the prayer data.\n4. In the `PrayerProvider` constructor, we assign the `_onPrayerDataUpdated` method to the `onPrayerDataUpdated` callback of `PrayerService`.\n5. The `_onPrayerDataUpdated` method in `PrayerProvider` calls `notifyListeners()` to trigger the UI update.\n\nWith these changes, the circular dependency is resolved, and the app should run without any errors.",
      "created_at": "2024-06-04T12:08:13.269348Z",
      "sequence_order": 17,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:08:13.269348Z",
            "stop_timestamp": "2024-06-04T12:08:13.269348Z",
            "flags": null,
            "type": "text",
            "text": " Let's think about this step by step and find a solution to the error.\n\n1. The error occurs because we are passing `null` to the `PrayerService` constructor, which expects a non-nullable `PrayerProvider` instance.\n\n2. The root cause of the issue is the circular dependency between `PrayerProvider` and `PrayerService`. `PrayerProvider` depends on `PrayerService`, and `PrayerService` depends on `PrayerProvider`.\n\n3. To break this circular dependency, we can remove the dependency of `PrayerService` on `PrayerProvider`. Instead, we can use a callback function to notify `PrayerProvider` when the prayer data is updated.\n\nHere's how we can modify the relevant files:\n\n`lib/services/prayer_service.dart`:\n```dart\n// File: lib/services/prayer_service.dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  // ... (rest of the code remains the same)\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    // ... (print statements remain the same)\n\n    onPrayerDataUpdated?.call();\n  }\n\n  // ... (rest of the code remains the same)\n}\n```\n\n`lib/providers/prayer_provider.dart`:\n```dart\n// File: lib/providers/prayer_provider.dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n\n  PrayerProvider(this._prayerService) {\n    _prayerService.onPrayerDataUpdated = _onPrayerDataUpdated;\n  }\n\n  void _onPrayerDataUpdated() {\n    notifyListeners();\n  }\n\n  // ... (rest of the code remains the same)\n}\n```\n\n`lib/myApp.dart`:\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            // ... (rest of the code remains the same)\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\nIn this solution:\n1. We remove the `PrayerProvider` parameter from the `PrayerService` constructor.\n2. We introduce a `PrayerDataUpdateCallback` typedef and an `onPrayerDataUpdated` callback in `PrayerService`.\n3. In the `savePrayerData` method of `PrayerService`, we invoke the `onPrayerDataUpdated` callback after saving the prayer data.\n4. In the `PrayerProvider` constructor, we assign the `_onPrayerDataUpdated` method to the `onPrayerDataUpdated` callback of `PrayerService`.\n5. The `_onPrayerDataUpdated` method in `PrayerProvider` calls `notifyListeners()` to trigger the UI update.\n\nWith these changes, the circular dependency is resolved, and the app should run without any errors.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:08:13.269348Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "4676009b-0243-411c-a499-9c57f6ceb91c",
      "role": "human",
      "content": "The home screen still doesn't have visible charts for the total prayers\n\n[ERROR:flutter/runtime/dart_vm_initializer.cc(41)] Unhandled Exception: type 'PrayerData' is not a subtype of type 'Map<String, dynamic>'\n#0      PrayerService.loadData.<anonymous closure> (package:amana/services/prayer_service.dart:24:67)\n#1      MapBase.map (dart:collection/maps.dart:82:28)\n#2      PrayerService.loadData (package:amana/services/prayer_service.dart:24:14)\n<asynchronous suspension>\n#3      PrayerProvider.loadData (package:amana/providers/prayer_provider.dart:27:5)\n<asynchronous suspension>\nI get this for my logs:\nwhen i change the years it should add to the edit screen a drop down to pick the year before the month\n\nyerData', 2024-4: Instance of 'PrayerData', 2024-5: Instance of 'PrayerData'}\n[ERROR:flutter/runtime/dart_vm_initializer.cc(41)] Unhandled Exception: type 'PrayerData' is not a subtype of type 'Map<String, dynamic>'\n#0      PrayerService.loadData.<anonymous closure> (package:amana/services/prayer_service.dart:24:67)\n#1      MapBase.map (dart:collection/maps.dart:82:28)\n#2      PrayerService.loadData (package:amana/services/prayer_service.dart:24:14)\n<asynchronous suspension>\n#3      PrayerProvider.loadData (package:amana/providers/prayer_provider.dart:27:5)\n<asynchronous suspension>",
      "created_at": "2024-06-04T12:20:06.218033Z",
      "sequence_order": 18,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:20:06.218033Z",
            "stop_timestamp": "2024-06-04T12:20:06.218033Z",
            "flags": null,
            "type": "text",
            "text": "The home screen still doesn't have visible charts for the total prayers\n\n[ERROR:flutter/runtime/dart_vm_initializer.cc(41)] Unhandled Exception: type 'PrayerData' is not a subtype of type 'Map<String, dynamic>'\n#0      PrayerService.loadData.<anonymous closure> (package:amana/services/prayer_service.dart:24:67)\n#1      MapBase.map (dart:collection/maps.dart:82:28)\n#2      PrayerService.loadData (package:amana/services/prayer_service.dart:24:14)\n<asynchronous suspension>\n#3      PrayerProvider.loadData (package:amana/providers/prayer_provider.dart:27:5)\n<asynchronous suspension>\nI get this for my logs:\nwhen i change the years it should add to the edit screen a drop down to pick the year before the month\n\nyerData', 2024-4: Instance of 'PrayerData', 2024-5: Instance of 'PrayerData'}\n[ERROR:flutter/runtime/dart_vm_initializer.cc(41)] Unhandled Exception: type 'PrayerData' is not a subtype of type 'Map<String, dynamic>'\n#0      PrayerService.loadData.<anonymous closure> (package:amana/services/prayer_service.dart:24:67)\n#1      MapBase.map (dart:collection/maps.dart:82:28)\n#2      PrayerService.loadData (package:amana/services/prayer_service.dart:24:14)\n<asynchronous suspension>\n#3      PrayerProvider.loadData (package:amana/providers/prayer_provider.dart:27:5)\n<asynchronous suspension>",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:20:06.218033Z",
        "attachments": [
          {
            "file_name": "paste.txt",
            "file_size": 8782,
            "file_type": "txt",
            "extracted_content": "\nflutter: Updated data: {2022-1: {year: 2022, month: 1, prayersCompleted: {Fajr: 20, Dhuhr: 16, Asr: 16, Maghrib: 16, Isha: 16}, prayersMissed: {Fajr: 11, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 82, totalMissed: 73, percentagePrayed: 50.0, percentageMissed: 50.0}, 2022-2: {year: 2022, month: 2, prayersCompleted: {Fajr: 14, Dhuhr: 14, Asr: 14, Maghrib: 14, Isha: 14}, prayersMissed: {Fajr: 14, Dhuhr: 14, Asr: 14, Maghrib: 14, Isha: 14}, totalPrayed: 70, totalMissed: 70, percentagePrayed: 50.0, percentageMissed: 50.0}, 2022-3: {year: 2022, month: 3, prayersCompleted: {Fajr: 16, Dhuhr: 16, Asr: 16, Maghrib: 16, Isha: 16}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 78, totalMissed: 77, percentagePrayed: 50.0, percentageMissed: 50.0}, 2022-4: {year: 2022, month: 4, prayersCompleted: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 75, totalMissed: 75, percentagePrayed: 50.0, percentageMissed: 50.0}, 2022-5: {year: 2022, month: 5, prayersCompleted: {Fajr: 16, Dhuhr: 16, Asr: 16, Maghrib: 16, Isha: 16}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 78, totalMissed: 77, percentagePrayed: 50.0, percentageMissed: 50.0}, 2022-6: {year: 2022, month: 6, prayersCompleted: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 75, totalMissed: 75, percentagePrayed: 50.0, percentageMissed: 50.0}, 2022-7: {year: 2022, month: 7, prayersCompleted: {Fajr: 16, Dhuhr: 16, Asr: 16, Maghrib: 16, Isha: 16}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 78, totalMissed: 77, percentagePrayed: 50.0, percentageMissed: 50.0}, 2022-8: {year: 2022, month: 8, prayersCompleted: {Fajr: 16, Dhuhr: 16, Asr: 16, Maghrib: 16, Isha: 16}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 78, totalMissed: 77, percentagePrayed: 50.0, percentageMissed: 50.0}, 2022-9: {year: 2022, month: 9, prayersCompleted: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 75, totalMissed: 75, percentagePrayed: 50.0, percentageMissed: 50.0}, 2022-10: {year: 2022, month: 10, prayersCompleted: {Fajr: 16, Dhuhr: 16, Asr: 16, Maghrib: 16, Isha: 16}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 78, totalMissed: 77, percentagePrayed: 50.0, percentageMissed: 50.0}, 2022-11: {year: 2022, month: 11, prayersCompleted: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 75, totalMissed: 75, percentagePrayed: 50.0, percentageMissed: 50.0}, 2022-12: {year: 2022, month: 12, prayersCompleted: {Fajr: 16, Dhuhr: 16, Asr: 16, Maghrib: 16, Isha: 16}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 78, totalMissed: 77, percentagePrayed: 50.0, percentageMissed: 50.0}, 2023-1: {year: 2023, month: 1, prayersCompleted: {Fajr: 16, Dhuhr: 16, Asr: 16, Maghrib: 16, Isha: 16}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 78, totalMissed: 77, percentagePrayed: 50.0, percentageMissed: 50.0}, 2023-2: {year: 2023, month: 2, prayersCompleted: {Fajr: 14, Dhuhr: 14, Asr: 14, Maghrib: 14, Isha: 14}, prayersMissed: {Fajr: 14, Dhuhr: 14, Asr: 14, Maghrib: 14, Isha: 14}, totalPrayed: 70, totalMissed: 70, percentagePrayed: 50.0, percentageMissed: 50.0}, 2023-3: {year: 2023, month: 3, prayersCompleted: {Fajr: 16, Dhuhr: 16, Asr: 16, Maghrib: 16, Isha: 16}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 78, totalMissed: 77, percentagePrayed: 50.0, percentageMissed: 50.0}, 2023-4: {year: 2023, month: 4, prayersCompleted: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 75, totalMissed: 75, percentagePrayed: 50.0, percentageMissed: 50.0}, 2023-5: {year: 2023, month: 5, prayersCompleted: {Fajr: 16, Dhuhr: 16, Asr: 16, Maghrib: 16, Isha: 16}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 78, totalMissed: 77, percentagePrayed: 50.0, percentageMissed: 50.0}, 2023-6: {year: 2023, month: 6, prayersCompleted: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 75, totalMissed: 75, percentagePrayed: 50.0, percentageMissed: 50.0}, 2023-7: {year: 2023, month: 7, prayersCompleted: {Fajr: 16, Dhuhr: 16, Asr: 16, Maghrib: 16, Isha: 16}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 78, totalMissed: 77, percentagePrayed: 50.0, percentageMissed: 50.0}, 2023-8: {year: 2023, month: 8, prayersCompleted: {Fajr: 16, Dhuhr: 16, Asr: 16, Maghrib: 16, Isha: 16}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 78, totalMissed: 77, percentagePrayed: 50.0, percentageMissed: 50.0}, 2023-9: {year: 2023, month: 9, prayersCompleted: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 75, totalMissed: 75, percentagePrayed: 50.0, percentageMissed: 50.0}, 2023-10: {year: 2023, month: 10, prayersCompleted: {Fajr: 16, Dhuhr: 16, Asr: 16, Maghrib: 16, Isha: 16}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 78, totalMissed: 77, percentagePrayed: 50.0, percentageMissed: 50.0}, 2023-11: {year: 2023, month: 11, prayersCompleted: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 75, totalMissed: 75, percentagePrayed: 50.0, percentageMissed: 50.0}, 2023-12: {year: 2023, month: 12, prayersCompleted: {Fajr: 16, Dhuhr: 16, Asr: 16, Maghrib: 16, Isha: 16}, prayersMissed: {Fajr: 15, Dhuhr: 15, Asr: 15, Maghrib: 15, Isha: 15}, totalPrayed: 78, totalMissed: 77, percentagePrayed: 50.0, percentageMissed: 50.0}, 2024-6: {year: 2024, month: 6, prayersCompleted: {Fajr: 0, Dhuhr: 0, Asr: 0, Maghrib: 0, Isha: 0}, prayersMissed: {Fajr: 0, Dhuhr: 0, Asr: 0, Maghrib: 0, Isha: 0}, totalPrayed: 0, totalMissed: 0, percentagePrayed: 0.0, percentageMissed: 0.0}, 2024-1: {year: 2024, month: 1, prayersCompleted: {Fajr: 3, Dhuhr: 3, Asr: 3, Maghrib: 3, Isha: 3}, prayersMissed: {Fajr: 28, Dhuhr: 28, Asr: 28, Maghrib: 28, Isha: 28}, totalPrayed: 16, totalMissed: 139, percentagePrayed: 10.0, percentageMissed: 90.0}, 2024-2: {year: 2024, month: 2, prayersCompleted: {Fajr: 22, Dhuhr: 22, Asr: 22, Maghrib: 22, Isha: 22}, prayersMissed: {Fajr: 7, Dhuhr: 7, Asr: 7, Maghrib: 7, Isha: 7}, totalPrayed: 109, totalMissed: 36, percentagePrayed: 75.0, percentageMissed: 25.0}, 2024-3: {year: 2024, month: 3, prayersCompleted: {Fajr: 11, Dhuhr: 11, Asr: 11, Maghrib: 11, Isha: 11}, prayersMissed: {Fajr: 20, Dhuhr: 20, Asr: 20, Maghrib: 20, Isha: 20}, totalPrayed: 54, totalMissed: 101, percentagePrayed: 35.0, percentageMissed: 65.0}, 2024-4: {year: 2024, month: 4, prayersCompleted: {Fajr: 11, Dhuhr: 11, Asr: 11, Maghrib: 11, Isha: 11}, prayersMissed: {Fajr: 19, Dhuhr: 19, Asr: 19, Maghrib: 19, Isha: 19}, totalPrayed: 53, totalMissed: 97, percentagePrayed: 35.0, percentageMissed: 65.0}, 2024-5: {year: 2024, month: 5, prayersCompleted: {Fajr: 11, Dhuhr: 11, Asr: 11, Maghrib: 11, Isha: 11}, prayersMissed: {Fajr: 20, Dhuhr: 20, Asr: 20, Maghrib: 20, Isha: 20}, totalPrayed: 54, totalMissed: 101, percentagePrayed: 35.0, percentageMissed: 65.0}}\nflutter: Saved data to Hive: {2022-1: Instance of 'PrayerData', 2022-2: Instance of 'PrayerData', 2022-3: Instance of 'PrayerData', 2022-4: Instance of 'PrayerData', 2022-5: Instance of 'PrayerData', 2022-6: Instance of 'PrayerData', 2022-7: Instance of 'PrayerData', 2022-8: Instance of 'PrayerData', 2022-9: Instance of 'PrayerData', 2022-10: Instance of 'PrayerData', 2022-11: Instance of 'PrayerData', 2022-12: Instance of 'PrayerData', 2023-1: Instance of 'PrayerData', 2023-2: Instance of 'PrayerData', 2023-3: Instance of 'PrayerData', 2023-4: Instance of 'PrayerData', 2023-5: Instance of 'PrayerData', 2023-6: Instance of 'PrayerData', 2023-7: Instance of 'PrayerData', 2023-8: Instance of 'PrayerData', 2023-9: Instance of 'PrayerData', 2023-10: Instance of 'PrayerData', 2023-11: Instance of 'PrayerData', 2023-12: Instance of 'PrayerData', 2024-6: Instance of 'PrayerData', 2024-1: Instance of 'PrayerData', 2024-2: Instance of 'PrayerData', 2024-3: Instance of 'PrayerData', 2024-4: Instance of 'PrayerData', 2024-5: Instance of 'PrayerData'}"
          }
        ],
        "files": [
          {
            "file_name": "paste.txt"
          }
        ]
      }
    },
    {
      "id": "c3118487-d469-41d2-83c3-e2d8c04d1738",
      "role": "assistant",
      "content": " It seems like there are a couple of issues here:\n\n1. The home screen doesn't have visible charts for the total prayers.\n2. There's an error when loading the prayer data, indicating a type mismatch.\n3. The edit screen should have a dropdown to pick the year before selecting the month.\n\nLet's address these issues one by one.\n\n1. Visible charts on the home screen:\n   - Make sure that you have the necessary widgets in the `HomeScreen` to display the charts.\n   - Ensure that you are properly accessing the prayer data from the `PrayerProvider` and passing it to the chart widgets.\n   - If you are using a library for charts, double-check that you have followed the correct implementation steps.\n\n2. Error when loading prayer data:\n   - The error message suggests that there's a type mismatch when mapping the loaded data.\n   - In the `PrayerService.loadData` method, you are expecting the loaded data to be of type `Map<String, dynamic>`, but it seems to be of type `PrayerData`.\n   - Modify the code to handle the correct data type. You can try the following:\n\n     ```dart\n     if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n       prayerData = Map<String, PrayerData>.from(\n         loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n       );\n     }\n     ```\n\n3. Dropdown for year selection in the edit screen:\n   - In the `EditDetailsScreen`, add a dropdown widget to select the year before the month dropdown.\n   - You can use the `DropdownButtonFormField` widget for this purpose.\n   - Populate the year dropdown with the available years from the prayer data.\n   - When a year is selected, update the state and filter the available months based on the selected year.\n   - Here's an example of how you can modify the `EditDetailsScreen`:\n\n     ```dart\n     class _EditDetailsScreenState extends State<EditDetailsScreen> {\n       int? _selectedYear;\n       int? _selectedMonth;\n       double _percentageCompleted = 0;\n\n       @override\n       void didChangeDependencies() {\n         super.didChangeDependencies();\n         final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n         if (_selectedYear == null) {\n           _selectedYear = prayerProvider.prayerData.keys.map((key) {\n             final parts = key.split('-');\n             return int.parse(parts[0]);\n           }).reduce((a, b) => a > b ? a : b);\n         }\n         // ... rest of the code\n       }\n\n       @override\n       Widget build(BuildContext context) {\n         final prayerProvider = Provider.of<PrayerProvider>(context);\n\n         return Scaffold(\n           appBar: AppBar(\n             title: Text('Edit Details'),\n           ),\n           body: Padding(\n             padding: const EdgeInsets.all(16.0),\n             child: Column(\n               crossAxisAlignment: CrossAxisAlignment.stretch,\n               children: [\n                 DropdownButtonFormField<int>(\n                   value: _selectedYear,\n                   items: prayerProvider.prayerData.keys.map((key) {\n                     final parts = key.split('-');\n                     final year = int.parse(parts[0]);\n                     return DropdownMenuItem(\n                       value: year,\n                       child: Text(year.toString()),\n                     );\n                   }).toSet().toList(),\n                   onChanged: (year) {\n                     setState(() {\n                       _selectedYear = year;\n                       _selectedMonth = null;\n                     });\n                   },\n                   decoration: InputDecoration(\n                     labelText: 'Select Year',\n                   ),\n                 ),\n                 // ... rest of the code\n               ],\n             ),\n           ),\n         );\n       }\n     }\n     ```\n\n   - Make sure to update the month dropdown to filter the available months based on the selected year.\n\nPlease try these suggestions and let me know if you have any further questions or if you encounter any issues.",
      "created_at": "2024-06-04T12:20:06.218033Z",
      "sequence_order": 19,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:20:06.218033Z",
            "stop_timestamp": "2024-06-04T12:20:06.218033Z",
            "flags": null,
            "type": "text",
            "text": " It seems like there are a couple of issues here:\n\n1. The home screen doesn't have visible charts for the total prayers.\n2. There's an error when loading the prayer data, indicating a type mismatch.\n3. The edit screen should have a dropdown to pick the year before selecting the month.\n\nLet's address these issues one by one.\n\n1. Visible charts on the home screen:\n   - Make sure that you have the necessary widgets in the `HomeScreen` to display the charts.\n   - Ensure that you are properly accessing the prayer data from the `PrayerProvider` and passing it to the chart widgets.\n   - If you are using a library for charts, double-check that you have followed the correct implementation steps.\n\n2. Error when loading prayer data:\n   - The error message suggests that there's a type mismatch when mapping the loaded data.\n   - In the `PrayerService.loadData` method, you are expecting the loaded data to be of type `Map<String, dynamic>`, but it seems to be of type `PrayerData`.\n   - Modify the code to handle the correct data type. You can try the following:\n\n     ```dart\n     if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n       prayerData = Map<String, PrayerData>.from(\n         loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n       );\n     }\n     ```\n\n3. Dropdown for year selection in the edit screen:\n   - In the `EditDetailsScreen`, add a dropdown widget to select the year before the month dropdown.\n   - You can use the `DropdownButtonFormField` widget for this purpose.\n   - Populate the year dropdown with the available years from the prayer data.\n   - When a year is selected, update the state and filter the available months based on the selected year.\n   - Here's an example of how you can modify the `EditDetailsScreen`:\n\n     ```dart\n     class _EditDetailsScreenState extends State<EditDetailsScreen> {\n       int? _selectedYear;\n       int? _selectedMonth;\n       double _percentageCompleted = 0;\n\n       @override\n       void didChangeDependencies() {\n         super.didChangeDependencies();\n         final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n         if (_selectedYear == null) {\n           _selectedYear = prayerProvider.prayerData.keys.map((key) {\n             final parts = key.split('-');\n             return int.parse(parts[0]);\n           }).reduce((a, b) => a > b ? a : b);\n         }\n         // ... rest of the code\n       }\n\n       @override\n       Widget build(BuildContext context) {\n         final prayerProvider = Provider.of<PrayerProvider>(context);\n\n         return Scaffold(\n           appBar: AppBar(\n             title: Text('Edit Details'),\n           ),\n           body: Padding(\n             padding: const EdgeInsets.all(16.0),\n             child: Column(\n               crossAxisAlignment: CrossAxisAlignment.stretch,\n               children: [\n                 DropdownButtonFormField<int>(\n                   value: _selectedYear,\n                   items: prayerProvider.prayerData.keys.map((key) {\n                     final parts = key.split('-');\n                     final year = int.parse(parts[0]);\n                     return DropdownMenuItem(\n                       value: year,\n                       child: Text(year.toString()),\n                     );\n                   }).toSet().toList(),\n                   onChanged: (year) {\n                     setState(() {\n                       _selectedYear = year;\n                       _selectedMonth = null;\n                     });\n                   },\n                   decoration: InputDecoration(\n                     labelText: 'Select Year',\n                   ),\n                 ),\n                 // ... rest of the code\n               ],\n             ),\n           ),\n         );\n       }\n     }\n     ```\n\n   - Make sure to update the month dropdown to filter the available months based on the selected year.\n\nPlease try these suggestions and let me know if you have any further questions or if you encounter any issues.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:20:06.218033Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "5b4c5c6c-cd8e-4aca-8181-5303a79acb92",
      "role": "human",
      "content": "let's return it as a map of strings so the home screen can visualize them on the bar graph and in the numbers:\n\n[ERROR:flutter/runtime/dart_vm_initializer.cc(41)] Unhandled Exception: type 'PrayerData' is not a subtype of type 'Map<String, dynamic>'\n#0      PrayerService.loadData.<anonymous closure> (package:amana/services/prayer_service.dart:24:67)\n#1      MapBase.map (dart:collection/maps.dart:82:28)\n#2      PrayerService.loadData (package:amana/services/prayer_service.dart:24:14)\n<asynchronous suspension>\n#3      PrayerProvider.loadData (package:amana/providers/prayer_provider.dart:27:5)\n<asynchronous suspension>\nplease return the updated edit details screen and home screen and the functions I need to update in prayer provider/service \n\n// File: lib/providers/prayer_provider.dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\nclass PrayerProvider with ChangeNotifier {\nfinal PrayerService _prayerService;\nPrayerProvider(this._prayerService) {\n*prayerService.onPrayerDataUpdated = *onPrayerDataUpdated;\n }\nvoid _onPrayerDataUpdated() {\nnotifyListeners();\n }\nMap<String, PrayerData> _prayerData = {};\nMap<String, PrayerData> get prayerData => _prayerData;\nint get startYear => DateTime.now().year;\nint get endYear => DateTime.now().year;\nbool get isDataLoaded => _prayerService.isDataLoaded;\nList<String> get prayers => _prayerService.prayers;\nFuture<void> loadData() async {\nawait _prayerService.loadData();\n*prayerData = *prayerService.prayerData;\nnotifyListeners();\n }\nFuture<void> saveData(PrayerData data) async {\nawait _prayerService.savePrayerData(data);\n_prayerData['${data.year}-${data.month}'] = data;\nnotifyListeners();\n }\nvoid incrementPrayer(String prayer) {\n_prayerService.incrementPrayer(prayer);\nnotifyListeners();\n }\nint getCompletedPrayersForMonth(int year, int month, String prayer) {\nreturn _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n }\nint getMissedPrayersForMonth(int year, int month, String prayer) {\nreturn _prayerService.getMissedPrayersForMonth(year, month, prayer);\n }\nFuture<PrayerData> getPrayerDataForMonth(int year, int month) async {\nreturn await _prayerService.getPrayerDataForMonth(year, month);\n }\nvoid updatePrayerStats(\nint year, int month, String prayer, bool increaseCompletedCount) {\n_prayerService.updatePrayerStats(\nyear, month, prayer, increaseCompletedCount);\nnotifyListeners();\n }\nvoid updatePrayerStatsForYear(int year, double percentageCompleted) {\n_prayerService.updatePrayerStatsForYear(year, percentageCompleted);\nnotifyListeners();\n }\nvoid updatePrayerStatsForMonth(\nint year, int month, double percentageCompleted) {\n_prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\nnotifyListeners();\n }\ndouble getPrayerCompletionPercentageForMonth(int year, int month) {\nreturn _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n }\ndouble getPrayerCompletionPercentageForYear(int year) {\nreturn _prayerService.getPrayerCompletionPercentageForYear(year);\n }\n}// File: lib/screens/home_screen.dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\nimport '../models/prayer_data.dart';\nclass HomeScreen extends StatelessWidget {\nconst HomeScreen({Key? key}) : super(key: key);\n@override\nWidget build(BuildContext context) {\nreturn Consumer<PrayerProvider>(\nbuilder: (context, prayerProvider, _) {\nif (!prayerProvider.isDataLoaded) {\nprayerProvider.loadData();\nreturn Scaffold(body: Center(child: CircularProgressIndicator()));\n }\nfinal currentYear = DateTime.now().year;\nfinal currentMonth = DateTime.now().month;\nfinal prayers = prayerProvider.prayers;\nreturn Scaffold(\nappBar: AppBar(\ntitle: Text('Prayer Tracker'),\nactions: [\nIconButton(\nicon: Icon(Icons.edit),\nonPressed: () {\nNavigator.pushNamed(context, '/edit-details');\n },\n ),\n ],\n ),\nbody: Padding(\npadding: const EdgeInsets.all(16.0),\nchild: Column(\ncrossAxisAlignment: CrossAxisAlignment.stretch,\nchildren: [\nFutureBuilder<PrayerData>(\nfuture: prayerProvider.getPrayerDataForMonth(\ncurrentYear, currentMonth),\nbuilder: (context, snapshot) {\nif (snapshot.connectionState == ConnectionState.waiting) {\nreturn CircularProgressIndicator();\n }\nfinal prayerData = snapshot.data;\nfinal totalPrayed = prayerData?.totalPrayed ?? 0;\nfinal totalPossible = prayerData?.totalPrayed ??\n0 + (prayerData?.totalMissed ?? 0);\nreturn Column(\nchildren: [\nLinearProgressIndicator(\nvalue: totalPossible > 0\n? totalPrayed / totalPossible\n: 0,\nminHeight: 16,\nbackgroundColor: Colors.grey[300],\nvalueColor:\nAlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n ),\nSizedBox(height: 8),\nRow(\nmainAxisAlignment: MainAxisAlignment.spaceBetween,\nchildren: [\nText('$totalPrayed'),\nText('$totalPossible'),\n ],\n ),\n ],\n );\n },\n ),\nSizedBox(height: 16),\nExpanded(\nchild: GridView.count(\ncrossAxisCount: 2,\nchildAspectRatio: 1.5,\ncrossAxisSpacing: 12,\nmainAxisSpacing: 12,\nchildren: prayers.map((prayer) {\nreturn PrayerProgressCardMaterial(\nprayer: prayer,\nyear: currentYear,\nmonth: currentMonth,\nonPrayPressed: () {\nprayerProvider.incrementPrayer(prayer);\n },\n );\n }).toList(),\n ),\n ),\n ],\n ),\n ),\n );\n },\n );\n }\n}",
      "created_at": "2024-06-04T12:23:36.074421Z",
      "sequence_order": 20,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:23:36.074421Z",
            "stop_timestamp": "2024-06-04T12:23:36.074421Z",
            "flags": null,
            "type": "text",
            "text": "let's return it as a map of strings so the home screen can visualize them on the bar graph and in the numbers:\n\n[ERROR:flutter/runtime/dart_vm_initializer.cc(41)] Unhandled Exception: type 'PrayerData' is not a subtype of type 'Map<String, dynamic>'\n#0      PrayerService.loadData.<anonymous closure> (package:amana/services/prayer_service.dart:24:67)\n#1      MapBase.map (dart:collection/maps.dart:82:28)\n#2      PrayerService.loadData (package:amana/services/prayer_service.dart:24:14)\n<asynchronous suspension>\n#3      PrayerProvider.loadData (package:amana/providers/prayer_provider.dart:27:5)\n<asynchronous suspension>\nplease return the updated edit details screen and home screen and the functions I need to update in prayer provider/service \n\n// File: lib/providers/prayer_provider.dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\nclass PrayerProvider with ChangeNotifier {\nfinal PrayerService _prayerService;\nPrayerProvider(this._prayerService) {\n*prayerService.onPrayerDataUpdated = *onPrayerDataUpdated;\n }\nvoid _onPrayerDataUpdated() {\nnotifyListeners();\n }\nMap<String, PrayerData> _prayerData = {};\nMap<String, PrayerData> get prayerData => _prayerData;\nint get startYear => DateTime.now().year;\nint get endYear => DateTime.now().year;\nbool get isDataLoaded => _prayerService.isDataLoaded;\nList<String> get prayers => _prayerService.prayers;\nFuture<void> loadData() async {\nawait _prayerService.loadData();\n*prayerData = *prayerService.prayerData;\nnotifyListeners();\n }\nFuture<void> saveData(PrayerData data) async {\nawait _prayerService.savePrayerData(data);\n_prayerData['${data.year}-${data.month}'] = data;\nnotifyListeners();\n }\nvoid incrementPrayer(String prayer) {\n_prayerService.incrementPrayer(prayer);\nnotifyListeners();\n }\nint getCompletedPrayersForMonth(int year, int month, String prayer) {\nreturn _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n }\nint getMissedPrayersForMonth(int year, int month, String prayer) {\nreturn _prayerService.getMissedPrayersForMonth(year, month, prayer);\n }\nFuture<PrayerData> getPrayerDataForMonth(int year, int month) async {\nreturn await _prayerService.getPrayerDataForMonth(year, month);\n }\nvoid updatePrayerStats(\nint year, int month, String prayer, bool increaseCompletedCount) {\n_prayerService.updatePrayerStats(\nyear, month, prayer, increaseCompletedCount);\nnotifyListeners();\n }\nvoid updatePrayerStatsForYear(int year, double percentageCompleted) {\n_prayerService.updatePrayerStatsForYear(year, percentageCompleted);\nnotifyListeners();\n }\nvoid updatePrayerStatsForMonth(\nint year, int month, double percentageCompleted) {\n_prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\nnotifyListeners();\n }\ndouble getPrayerCompletionPercentageForMonth(int year, int month) {\nreturn _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n }\ndouble getPrayerCompletionPercentageForYear(int year) {\nreturn _prayerService.getPrayerCompletionPercentageForYear(year);\n }\n}// File: lib/screens/home_screen.dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\nimport '../models/prayer_data.dart';\nclass HomeScreen extends StatelessWidget {\nconst HomeScreen({Key? key}) : super(key: key);\n@override\nWidget build(BuildContext context) {\nreturn Consumer<PrayerProvider>(\nbuilder: (context, prayerProvider, _) {\nif (!prayerProvider.isDataLoaded) {\nprayerProvider.loadData();\nreturn Scaffold(body: Center(child: CircularProgressIndicator()));\n }\nfinal currentYear = DateTime.now().year;\nfinal currentMonth = DateTime.now().month;\nfinal prayers = prayerProvider.prayers;\nreturn Scaffold(\nappBar: AppBar(\ntitle: Text('Prayer Tracker'),\nactions: [\nIconButton(\nicon: Icon(Icons.edit),\nonPressed: () {\nNavigator.pushNamed(context, '/edit-details');\n },\n ),\n ],\n ),\nbody: Padding(\npadding: const EdgeInsets.all(16.0),\nchild: Column(\ncrossAxisAlignment: CrossAxisAlignment.stretch,\nchildren: [\nFutureBuilder<PrayerData>(\nfuture: prayerProvider.getPrayerDataForMonth(\ncurrentYear, currentMonth),\nbuilder: (context, snapshot) {\nif (snapshot.connectionState == ConnectionState.waiting) {\nreturn CircularProgressIndicator();\n }\nfinal prayerData = snapshot.data;\nfinal totalPrayed = prayerData?.totalPrayed ?? 0;\nfinal totalPossible = prayerData?.totalPrayed ??\n0 + (prayerData?.totalMissed ?? 0);\nreturn Column(\nchildren: [\nLinearProgressIndicator(\nvalue: totalPossible > 0\n? totalPrayed / totalPossible\n: 0,\nminHeight: 16,\nbackgroundColor: Colors.grey[300],\nvalueColor:\nAlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n ),\nSizedBox(height: 8),\nRow(\nmainAxisAlignment: MainAxisAlignment.spaceBetween,\nchildren: [\nText('$totalPrayed'),\nText('$totalPossible'),\n ],\n ),\n ],\n );\n },\n ),\nSizedBox(height: 16),\nExpanded(\nchild: GridView.count(\ncrossAxisCount: 2,\nchildAspectRatio: 1.5,\ncrossAxisSpacing: 12,\nmainAxisSpacing: 12,\nchildren: prayers.map((prayer) {\nreturn PrayerProgressCardMaterial(\nprayer: prayer,\nyear: currentYear,\nmonth: currentMonth,\nonPrayPressed: () {\nprayerProvider.incrementPrayer(prayer);\n },\n );\n }).toList(),\n ),\n ),\n ],\n ),\n ),\n );\n },\n );\n }\n}",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:23:36.074421Z",
        "attachments": [
          {
            "file_name": "paste.txt",
            "file_size": 7674,
            "file_type": "txt",
            "extracted_content": "// File: lib/services/prayer_service.dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map<String, dynamic>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(year, month, 50.0);\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    onPrayerDataUpdated?.call();\n  }\n\n  void incrementPrayer(String prayer) {\n    // Find the earliest year and month with missed prayers\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear ||\n              (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed =\n          (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed =\n          (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1;\n        month <= (year == currentYear ? currentMonth - 1 : 12);\n        month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(\n      int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers)\n        prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n"
          }
        ],
        "files": [
          {
            "file_name": "paste.txt"
          }
        ]
      }
    },
    {
      "id": "443f0728-0eb9-4600-b719-ffea56f08dcd",
      "role": "assistant",
      "content": " To resolve the issue and return the prayer data as a map of strings, you can modify the `PrayerService.loadData` method and the `HomeScreen` widget. Here are the updated code snippets:\n\n1. Update the `loadData` method in `prayer_service.dart`:\n\n```dart\nFuture<void> loadData() async {\n  var loadedData = await _hiveService.loadData('prayerData');\n\n  if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n    prayerData = Map<String, PrayerData>.from(\n      loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n    );\n  }\n\n  // ... (rest of the code remains the same)\n}\n```\n\n2. Update the `EditDetailsScreen` in `edit_details_screen.dart`:\n\n```dart\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    if (_selectedYear == null) {\n      _selectedYear = prayerProvider.prayerData.keys.map((key) {\n        final parts = key.split('-');\n        return int.parse(parts[0]);\n      }).reduce((a, b) => a > b ? a : b);\n    }\n    // ... (rest of the code remains the same)\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: prayerProvider.prayerData.keys.map((key) {\n                final parts = key.split('-');\n                final year = int.parse(parts[0]);\n                return DropdownMenuItem(\n                  value: year,\n                  child: Text(year.toString()),\n                );\n              }).toSet().toList(),\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            // ... (rest of the code remains the same)\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\n3. Update the `HomeScreen` in `home_screen.dart`:\n\n```dart\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        final currentYear = DateTime.now().year;\n        final currentMonth = DateTime.now().month;\n        final prayers = prayerProvider.prayers;\n        final prayerDataMap = prayerProvider.prayerData;\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Prayer Tracker'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.pushNamed(context, '/edit-details');\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                FutureBuilder<Map<String, dynamic>>(\n                  future: prayerProvider.getPrayerDataForMonth(currentYear, currentMonth).then((data) => data.toMap()),\n                  builder: (context, snapshot) {\n                    if (snapshot.connectionState == ConnectionState.waiting) {\n                      return CircularProgressIndicator();\n                    }\n                    final prayerDataMap = snapshot.data;\n                    final totalPrayed = prayerDataMap?['totalPrayed'] ?? 0;\n                    final totalPossible = prayerDataMap?['totalPrayed'] ?? 0 + (prayerDataMap?['totalMissed'] ?? 0);\n                    return Column(\n                      children: [\n                        LinearProgressIndicator(\n                          value: totalPossible > 0 ? totalPrayed / totalPossible : 0,\n                          minHeight: 16,\n                          backgroundColor: Colors.grey[300],\n                          valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                        ),\n                        SizedBox(height: 8),\n                        Row(\n                          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                          children: [\n                            Text('$totalPrayed'),\n                            Text('$totalPossible'),\n                          ],\n                        ),\n                      ],\n                    );\n                  },\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        year: currentYear,\n                        month: currentMonth,\n                        onPrayPressed: () {\n                          prayerProvider.incrementPrayer(prayer);\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n```\n\nThese changes should resolve the type mismatch error and allow the prayer data to be displayed on the home screen and edit details screen.",
      "created_at": "2024-06-04T12:23:36.074421Z",
      "sequence_order": 21,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:23:36.074421Z",
            "stop_timestamp": "2024-06-04T12:23:36.074421Z",
            "flags": null,
            "type": "text",
            "text": " To resolve the issue and return the prayer data as a map of strings, you can modify the `PrayerService.loadData` method and the `HomeScreen` widget. Here are the updated code snippets:\n\n1. Update the `loadData` method in `prayer_service.dart`:\n\n```dart\nFuture<void> loadData() async {\n  var loadedData = await _hiveService.loadData('prayerData');\n\n  if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n    prayerData = Map<String, PrayerData>.from(\n      loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n    );\n  }\n\n  // ... (rest of the code remains the same)\n}\n```\n\n2. Update the `EditDetailsScreen` in `edit_details_screen.dart`:\n\n```dart\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    if (_selectedYear == null) {\n      _selectedYear = prayerProvider.prayerData.keys.map((key) {\n        final parts = key.split('-');\n        return int.parse(parts[0]);\n      }).reduce((a, b) => a > b ? a : b);\n    }\n    // ... (rest of the code remains the same)\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: prayerProvider.prayerData.keys.map((key) {\n                final parts = key.split('-');\n                final year = int.parse(parts[0]);\n                return DropdownMenuItem(\n                  value: year,\n                  child: Text(year.toString()),\n                );\n              }).toSet().toList(),\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            // ... (rest of the code remains the same)\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\n3. Update the `HomeScreen` in `home_screen.dart`:\n\n```dart\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        final currentYear = DateTime.now().year;\n        final currentMonth = DateTime.now().month;\n        final prayers = prayerProvider.prayers;\n        final prayerDataMap = prayerProvider.prayerData;\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Prayer Tracker'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.pushNamed(context, '/edit-details');\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                FutureBuilder<Map<String, dynamic>>(\n                  future: prayerProvider.getPrayerDataForMonth(currentYear, currentMonth).then((data) => data.toMap()),\n                  builder: (context, snapshot) {\n                    if (snapshot.connectionState == ConnectionState.waiting) {\n                      return CircularProgressIndicator();\n                    }\n                    final prayerDataMap = snapshot.data;\n                    final totalPrayed = prayerDataMap?['totalPrayed'] ?? 0;\n                    final totalPossible = prayerDataMap?['totalPrayed'] ?? 0 + (prayerDataMap?['totalMissed'] ?? 0);\n                    return Column(\n                      children: [\n                        LinearProgressIndicator(\n                          value: totalPossible > 0 ? totalPrayed / totalPossible : 0,\n                          minHeight: 16,\n                          backgroundColor: Colors.grey[300],\n                          valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                        ),\n                        SizedBox(height: 8),\n                        Row(\n                          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                          children: [\n                            Text('$totalPrayed'),\n                            Text('$totalPossible'),\n                          ],\n                        ),\n                      ],\n                    );\n                  },\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        year: currentYear,\n                        month: currentMonth,\n                        onPrayPressed: () {\n                          prayerProvider.incrementPrayer(prayer);\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n```\n\nThese changes should resolve the type mismatch error and allow the prayer data to be displayed on the home screen and edit details screen.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:23:36.074421Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "5639cefe-524b-4b26-93b4-f915753dd193",
      "role": "human",
      "content": "I'm just getting spinning cirlces for the home screen and I can't save the year start and the year end for the edit screen. Think step by step about our goals and ensure the code allows me to take the original values from the constants file and then update start year and end year (if the current year is this year, go only up to the current month) and then be sure the home screen displays the aggregate data for all prayers completed and all prayers to be done and all individual prayers to do and done",
      "created_at": "2024-06-04T12:32:35.217924Z",
      "sequence_order": 22,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:32:35.217924Z",
            "stop_timestamp": "2024-06-04T12:32:35.217924Z",
            "flags": null,
            "type": "text",
            "text": "I'm just getting spinning cirlces for the home screen and I can't save the year start and the year end for the edit screen. Think step by step about our goals and ensure the code allows me to take the original values from the constants file and then update start year and end year (if the current year is this year, go only up to the current month) and then be sure the home screen displays the aggregate data for all prayers completed and all prayers to be done and all individual prayers to do and done",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:32:35.217924Z",
        "attachments": [
          {
            "file_name": "paste.txt",
            "file_size": 78494,
            "file_type": "txt",
            "extracted_content": "\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./prayer_record.dart\n#############################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int fajrMissed;\n\n  @HiveField(3)\n  int dhuhrMissed;\n\n  @HiveField(4)\n  int asrMissed;\n\n  @HiveField(5)\n  int maghribMissed;\n\n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./main.dart\n####################\n\n// File: main.dart\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_data.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  Hive.registerAdapter(PrayerDataAdapter());\n  runApp(MyApp(hiveService: hiveService));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./prayer_record.g.dart\n###############################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\n// File: lib/providers/prayer_provider.dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n\n  PrayerProvider(this._prayerService) {\n    _prayerService.onPrayerDataUpdated = _onPrayerDataUpdated;\n  }\n\n  void _onPrayerDataUpdated() {\n    notifyListeners();\n  }\n\n  Map<String, PrayerData> _prayerData = {};\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  int get startYear => DateTime.now().year;\n  int get endYear => DateTime.now().year;\n\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getMissedPrayersForMonth(year, month, prayer);\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    return await _prayerService.getPrayerDataForMonth(year, month);\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    _prayerService.updatePrayerStats(\n        year, month, prayer, increaseCompletedCount);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForYear(year, percentageCompleted);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\n    notifyListeners();\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    return _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    return _prayerService.getPrayerCompletionPercentageForYear(year);\n  }\n}\n\n\n\n# File: ./models/prayer_record.dart\n####################################\n\nimport 'package:hive/hive.dart';\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n  @HiveField(1)\n  int month;\n  @HiveField(2)\n  int fajrMissed;\n  @HiveField(3)\n  int dhuhrMissed;\n  @HiveField(4)\n  int asrMissed;\n  @HiveField(5)\n  int maghribMissed;\n  @HiveField(6)\n  int ishaMissed;\n// Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./models/prayer_data.dart\n##################################\n\n// File: lib/models/prayer_data.dart\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_data.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerData {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  Map<String, int> prayersCompleted; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(3)\n  Map<String, int> prayersMissed; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(4)\n  int totalPrayed;\n\n  @HiveField(5)\n  int totalMissed;\n\n  @HiveField(6)\n  double percentagePrayed;\n\n  @HiveField(7)\n  double percentageMissed;\n\n  PrayerData({\n    required this.year,\n    required this.month,\n    required this.prayersCompleted,\n    required this.prayersMissed,\n    required this.totalPrayed,\n    required this.totalMissed,\n    required this.percentagePrayed,\n    required this.percentageMissed,\n  });\n\n  factory PrayerData.fromMap(Map<String, dynamic> map) {\n    return PrayerData(\n      year: map['year'],\n      month: map['month'],\n      prayersCompleted: Map<String, int>.from(map['prayersCompleted']),\n      prayersMissed: Map<String, int>.from(map['prayersMissed']),\n      totalPrayed: map['totalPrayed'],\n      totalMissed: map['totalMissed'],\n      percentagePrayed: map['percentagePrayed'],\n      percentageMissed: map['percentageMissed'],\n    );\n  }\n\n  Map<String, dynamic> toMap() {\n    return {\n      'year': year,\n      'month': month,\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'totalPrayed': totalPrayed,\n      'totalMissed': totalMissed,\n      'percentagePrayed': percentagePrayed,\n      'percentageMissed': percentageMissed,\n    };\n  }\n}\n\n\n\n# File: ./models/prayer_data.g.dart\n####################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_data.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerDataAdapter extends TypeAdapter<PrayerData> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerData read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerData(\n      year: fields[0] as int,\n      month: fields[1] as int,\n      prayersCompleted: (fields[2] as Map).cast<String, int>(),\n      prayersMissed: (fields[3] as Map).cast<String, int>(),\n      totalPrayed: fields[4] as int,\n      totalMissed: fields[5] as int,\n      percentagePrayed: fields[6] as double,\n      percentageMissed: fields[7] as double,\n    );\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerData obj) {\n    writer\n      ..writeByte(8)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.prayersCompleted)\n      ..writeByte(3)\n      ..write(obj.prayersMissed)\n      ..writeByte(4)\n      ..write(obj.totalPrayed)\n      ..writeByte(5)\n      ..write(obj.totalMissed)\n      ..writeByte(6)\n      ..write(obj.percentagePrayed)\n      ..writeByte(7)\n      ..write(obj.percentageMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerDataAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./models/prayer_record.g.dart\n######################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\n// File: screens/prayer_progress_card_material.dart\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n  final VoidCallback onPrayPressed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.year,\n    required this.month,\n    required this.onPrayPressed,\n  });\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(prayerProvider.getCompletedPrayersForMonth(\n          year, month, prayer)), // Fix: Wrap with Future.value()\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(prayerProvider.getMissedPrayersForMonth(\n              year, month, prayer)), // Fix: Wrap with Future.value()\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CircularProgressIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Card(\n              child: Padding(\n                padding: const EdgeInsets.all(14.0),\n                child: Column(\n                  mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                  children: [\n                    Text(prayer,\n                        style: TextStyle(\n                            fontWeight: FontWeight.bold, fontSize: 16)),\n                    ClipRRect(\n                      borderRadius: BorderRadius.circular(8),\n                      child: LinearProgressIndicator(\n                        value: totalPrayers > 0\n                            ? completedPrayers / totalPrayers\n                            : 0,\n                        minHeight: 12,\n                        backgroundColor: Colors.grey[300],\n                        valueColor:\n                            AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                      ),\n                    ),\n                    Text(\n                        '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                        style: TextStyle(fontSize: 14)),\n                    Text('$completedPrayers / $totalPrayers',\n                        style: TextStyle(fontSize: 12)),\n                    ElevatedButton(\n                      onPressed: onPrayPressed,\n                      child: Text('Pray'),\n                    ),\n                  ],\n                ),\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_details_screen.dart\n#############################################\n\nimport 'package:flutter/material.dart';\nimport '../services/hive_service.dart';\nimport '../models/prayer_record.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          // Implement logic to find and increment the oldest missed prayer\n\n          return Column(\n            children: [\n              // Display and update prayer details here\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport 'dart:io';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../constants.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../platform_specific_widget/amana_snackbar.dart';\nimport '../providers/prayer_provider.dart';\nimport '../widgets/hadith_modal.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({Key? key}) : super(key: key);\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _endYearController;\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: prayerProvider.startYear.toString());\n    _endYearController =\n        TextEditingController(text: prayerProvider.endYear.toString());\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    if (_selectedYear == null) {\n      _selectedYear = prayerProvider.prayerData.keys.map((key) {\n        final parts = key.split('-');\n        return int.parse(parts[0]);\n      }).reduce((a, b) => a > b ? a : b);\n    }\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: [\n                DropdownMenuItem(\n                  child: Text('Select Year'),\n                  value: null,\n                ),\n                ...List.generate(1, (index) => DateTime.now().year - index)\n                    .map((year) => DropdownMenuItem(\n                          value: year,\n                          child: Text(year.toString()),\n                        ))\n                    .toList(),\n              ],\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                  if (year != null) {\n                    _percentageCompleted = prayerProvider\n                        .getPrayerCompletionPercentageForYear(year);\n                  }\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            SizedBox(height: 16),\n            if (_selectedYear != null)\n              DropdownButtonFormField<int>(\n                value: _selectedMonth,\n                items: [\n                  DropdownMenuItem(\n                    child: Text('Average for total year, or select month'),\n                    value: null,\n                  ),\n                  ...List.generate(\n                          _selectedYear == DateTime.now().year\n                              ? DateTime.now().month - 1\n                              : 12,\n                          (index) => index + 1)\n                      .map((month) => DropdownMenuItem(\n                            value: month,\n                            child: Text('Month $month'),\n                          ))\n                      .toList(),\n                ],\n                onChanged: (month) {\n                  setState(() {\n                    _selectedMonth = month;\n                    if (month != null) {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForMonth(\n                        _selectedYear!,\n                        month,\n                      );\n                    } else {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForYear(\n                        _selectedYear!,\n                      );\n                    }\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Month',\n                ),\n              ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Adjust the percentage of prayers completed for the selected year or month.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _percentageCompleted,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_percentageCompleted.round()}%',\n              onChanged: (value) {\n                setState(() {\n                  _percentageCompleted = value;\n                });\n              },\n              onChangeEnd: (value) {\n                if (_selectedYear != null) {\n                  if (_selectedMonth != null) {\n                    prayerProvider.updatePrayerStatsForMonth(\n                      _selectedYear!,\n                      _selectedMonth!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text(\n                          'Changes saved for month $_selectedMonth of year $_selectedYear.'),\n                    );\n                  } else {\n                    prayerProvider.updatePrayerStatsForYear(\n                      _selectedYear!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text('Changes saved for year $_selectedYear.'),\n                    );\n                  }\n                }\n              },\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: () {\n                Navigator.pop(context);\n              },\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\nimport '../models/prayer_data.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(PrayerData(\n      // Fix: Pass a PrayerData object\n      year: startYear,\n      month: startMonth,\n      prayersCompleted: {},\n      prayersMissed: {},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    ));\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\n// File: screens/prayer_progress_card_cupertino.dart\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n\n  const PrayerProgressCardCupertino({\n    required this.prayer,\n    required this.year,\n    required this.month,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(\n          prayerProvider.getCompletedPrayersForMonth(year, month, prayer)),\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(\n              prayerProvider.getMissedPrayersForMonth(year, month, prayer)),\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CupertinoActivityIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Container(\n              margin: EdgeInsets.all(8.0),\n              padding: EdgeInsets.all(14.0),\n              decoration: BoxDecoration(\n                color: CupertinoColors.white,\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: CupertinoColors.systemGrey.withOpacity(0.4),\n                    spreadRadius: 1,\n                    blurRadius: 3,\n                    offset: Offset(0, 2),\n                  ),\n                ],\n              ),\n              child: Column(\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                children: [\n                  Text(prayer,\n                      style:\n                          TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n                  SizedBox(height: 8),\n                  ClipRRect(\n                    borderRadius: BorderRadius.circular(8),\n                    child: LinearProgressIndicator(\n                      value: totalPrayers > 0\n                          ? completedPrayers / totalPrayers\n                          : 0,\n                      minHeight: 12,\n                      backgroundColor: CupertinoColors.systemGrey4,\n                      valueColor: AlwaysStoppedAnimation<Color>(\n                          CupertinoColors.activeGreen),\n                    ),\n                  ),\n                  SizedBox(height: 8),\n                  Text(\n                      '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                      style: TextStyle(fontSize: 14)),\n                  Text('$completedPrayers / $totalPrayers',\n                      style: TextStyle(fontSize: 12)),\n                  SizedBox(height: 8),\n                  CupertinoButton.filled(\n                    onPressed: () => prayerProvider.incrementPrayer(prayer),\n                    child: Text('Pray'),\n                  ),\n                ],\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\n// File: lib/screens/home_screen.dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\nimport '../models/prayer_data.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        final currentYear = DateTime.now().year;\n        final currentMonth = DateTime.now().month;\n        final prayers = prayerProvider.prayers;\n        final prayerDataMap = prayerProvider.prayerData;\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Prayer Tracker'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.pushNamed(context, '/edit-details');\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                FutureBuilder<Map<String, dynamic>>(\n                  future: prayerProvider\n                      .getPrayerDataForMonth(currentYear, currentMonth)\n                      .then((data) => data.toMap()),\n                  builder: (context, snapshot) {\n                    if (snapshot.connectionState == ConnectionState.waiting) {\n                      return CircularProgressIndicator();\n                    }\n                    final prayerDataMap = snapshot.data;\n                    final totalPrayed = prayerDataMap?['totalPrayed'] ?? 0;\n                    final totalPossible = prayerDataMap?['totalPrayed'] ??\n                        0 + (prayerDataMap?['totalMissed'] ?? 0);\n                    return Column(\n                      children: [\n                        LinearProgressIndicator(\n                          value: totalPossible > 0\n                              ? totalPrayed / totalPossible\n                              : 0,\n                          minHeight: 16,\n                          backgroundColor: Colors.grey[300],\n                          valueColor:\n                              AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                        ),\n                        SizedBox(height: 8),\n                        Row(\n                          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                          children: [\n                            Text('$totalPrayed'),\n                            Text('$totalPossible'),\n                          ],\n                        ),\n                      ],\n                    );\n                  },\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        year: currentYear,\n                        month: currentMonth,\n                        onPrayPressed: () {\n                          prayerProvider.incrementPrayer(prayer);\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/flutter_build/dart_plugin_registrant.dart\n###############################################################\n\n//\n// Generated file. Do not edit.\n// This file is generated from template in file `flutter_tools/lib/src/flutter_plugins.dart`.\n//\n\n// @dart = 3.3\n\nimport 'dart:io'; // flutter_ignore: dart_io_import.\nimport 'package:path_provider_android/path_provider_android.dart';\nimport 'package:shared_preferences_android/shared_preferences_android.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_linux/path_provider_linux.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_linux/shared_preferences_linux.dart';\nimport 'package:url_launcher_linux/url_launcher_linux.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_windows/path_provider_windows.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_windows/shared_preferences_windows.dart';\nimport 'package:url_launcher_windows/url_launcher_windows.dart';\n\n@pragma('vm:entry-point')\nclass _PluginRegistrant {\n\n  @pragma('vm:entry-point')\n  static void register() {\n    if (Platform.isAndroid) {\n      try {\n        PathProviderAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isIOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isLinux) {\n      try {\n        PathProviderLinux.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusLinuxPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesLinux.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherLinux.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isMacOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isWindows) {\n      try {\n        PathProviderWindows.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusWindowsPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesWindows.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherWindows.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./.dart_tool/build/entrypoint/build.dart\n#################################################\n\n// ignore_for_file: directives_ordering\n// ignore_for_file: no_leading_underscores_for_library_prefixes\nimport 'package:build_runner_core/build_runner_core.dart' as _i1;\nimport 'package:hive_generator/hive_generator.dart' as _i2;\nimport 'package:source_gen/builder.dart' as _i3;\nimport 'dart:isolate' as _i4;\nimport 'package:build_runner/build_runner.dart' as _i5;\nimport 'dart:io' as _i6;\n\nfinal _builders = <_i1.BuilderApplication>[\n  _i1.apply(\n    r'hive_generator:hive_generator',\n    [_i2.getBuilder],\n    _i1.toDependentsOf(r'hive_generator'),\n    hideOutput: true,\n    appliesBuilders: const [r'source_gen:combining_builder'],\n  ),\n  _i1.apply(\n    r'source_gen:combining_builder',\n    [_i3.combiningBuilder],\n    _i1.toNoneByDefault(),\n    hideOutput: false,\n    appliesBuilders: const [r'source_gen:part_cleanup'],\n  ),\n  _i1.applyPostProcess(\n    r'source_gen:part_cleanup',\n    _i3.partCleanup,\n  ),\n];\nvoid main(\n  List<String> args, [\n  _i4.SendPort? sendPort,\n]) async {\n  var result = await _i5.run(\n    args,\n    _builders,\n  );\n  sendPort?.send(result);\n  _i6.exitCode = result;\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\n// File: hive_service.dart\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    await Hive.deleteBoxFromDisk('prayerBox'); // Clear the existing box\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\n// File: lib/services/prayer_service.dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(year, month, 50.0);\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    onPrayerDataUpdated?.call();\n  }\n\n  void incrementPrayer(String prayer) {\n    // Find the earliest year and month with missed prayers\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear ||\n              (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed =\n          (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed =\n          (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1;\n        month <= (year == currentYear ? currentMonth - 1 : 12);\n        month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(\n      int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers)\n        prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n\n\n\n# File: ./widgets/progress_bar.dart\n####################################\n\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double value;\n\n  ProgressBar({required this.value});\n\n  @override\n  Widget build(BuildContext context) {\n    return LinearProgressIndicator(value: value);\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ï·º) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'Ø¹ÙŽÙ†Ù’ Ø£ÙŽØ¨ÙÙŠ Ù‡ÙØ±ÙŽÙŠÙ’Ø±ÙŽØ©ÙŽ Ø±ÙŽØ¶ÙÙŠÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ†Ù’Ù‡Ù Ù‚ÙŽØ§Ù„ÙŽ: Ù‚ÙŽØ§Ù„ÙŽ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù ØµÙŽÙ„ÙŽÙ‘Ù‰ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ÙˆÙŽØ³ÙŽÙ„ÙŽÙ‘Ù…ÙŽ: \" Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙŽ Ø¹ÙŽØ²ÙŽÙ‘ ÙˆÙŽØ¬ÙŽÙ„ÙŽÙ‘ Ù‚ÙŽØ§Ù„ÙŽ: Ù…ÙŽÙ†Ù’ Ø¹ÙŽØ§Ø¯ÙŽÙ‰ Ù„ÙÙŠ ÙˆÙŽÙ„ÙÙŠÙ‹Ù‘Ø§ØŒ ÙÙŽÙ‚ÙŽØ¯Ù’ Ø¢Ø°ÙŽÙ†Ù’ØªÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙŽØ±Ù’Ø¨ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨ÙŽ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø¨ÙØ´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽØ­ÙŽØ¨ÙŽÙ‘ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ù…ÙÙ…ÙŽÙ‘Ø§ Ø§ÙÙ’ØªÙŽØ±ÙŽØ¶Ù’ØªÙ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ÙŠÙŽØ²ÙŽØ§Ù„Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ ÙŠÙŽØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨Ù Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¨ÙØ§Ù„Ù†ÙŽÙ‘ÙˆÙŽØ§ÙÙÙ„Ù Ø­ÙŽØªÙŽÙ‘Ù‰ Ø£ÙØ­ÙØ¨ÙŽÙ‘Ù‡ÙØŒ ÙÙŽØ¥ÙØ°ÙŽØ§ Ø£ÙŽØ­Ù’Ø¨ÙŽØ¨Ù’ØªÙÙ‡ÙØŒ ÙƒÙÙ†Ù’ØªÙ Ø³ÙŽÙ…Ù’Ø¹ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙŽØ³Ù’Ù…ÙŽØ¹Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽØ¨ÙŽØµÙŽØ±ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙØ¨Ù’ØµÙØ±Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽÙŠÙŽØ¯ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽØ¨Ù’Ø·ÙØ´Ù Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ±ÙØ¬Ù’Ù„ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽÙ…Ù’Ø´ÙÙŠ Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ¥ÙÙ†Ù’ Ø³ÙŽØ£ÙŽÙ„ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹Ù’Ø·ÙÙŠÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ„ÙŽØ¦ÙÙ†Ù’ Ø§Ø³Ù’ØªÙŽØ¹ÙŽØ§Ø°ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹ÙÙŠØ°ÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽØ±ÙŽØ¯ÙŽÙ‘Ø¯Ù’ØªÙ Ø¹ÙŽÙ†Ù’ Ø´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽÙ†ÙŽØ§ ÙÙŽØ§Ø¹ÙÙ„ÙÙ‡Ù ØªÙŽØ±ÙŽØ¯ÙÙ‘Ø¯ÙÙŠ Ø¹ÙŽÙ†Ù’ Ù†ÙŽÙÙ’Ø³Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØŒ ÙŠÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ø§Ù„Ù’Ù…ÙŽÙˆÙ’ØªÙŽ ÙˆÙŽØ£ÙŽÙ†ÙŽØ§ Ø£ÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ù…ÙŽØ³ÙŽØ§Ø¡ÙŽØªÙŽÙ‡Ù - Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n"
          }
        ],
        "files": [
          {
            "file_name": "paste.txt"
          }
        ]
      }
    },
    {
      "id": "71dd0327-d19b-4f17-a52a-a3c11591170a",
      "role": "assistant",
      "content": " To achieve the goals you mentioned and ensure the code works as expected, let's go through the steps and make the necessary changes:\n\n1. Update the `constants.dart` file to include the start year and end year:\n\n```dart\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n```\n\n2. In the `PrayerProvider` class, update the `startYear` and `endYear` getters to use the values from `constants.dart`:\n\n```dart\nint get startYear => kDefaultStartYear;\nint get endYear => kDefaultEndYear;\n```\n\n3. In the `EditDetailsScreen`, update the `initState` method to initialize the `_startYearController` and `_endYearController` with the values from `constants.dart`:\n\n```dart\n@override\nvoid initState() {\n  super.initState();\n  _startYearController = TextEditingController(text: kDefaultStartYear.toString());\n  _endYearController = TextEditingController(text: kDefaultEndYear.toString());\n  // ... (rest of the code remains the same)\n}\n```\n\n4. Add a save button in the `EditDetailsScreen` to update the start year and end year when pressed:\n\n```dart\nElevatedButton(\n  onPressed: () {\n    final startYear = int.parse(_startYearController.text);\n    final endYear = int.parse(_endYearController.text);\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    prayerProvider.updateStartAndEndYear(startYear, endYear);\n    Navigator.pop(context);\n  },\n  child: Text('Save'),\n),\n```\n\n5. In the `PrayerProvider` class, add a method to update the start year and end year:\n\n```dart\nvoid updateStartAndEndYear(int startYear, int endYear) {\n  _prayerService.updateStartAndEndYear(startYear, endYear);\n  notifyListeners();\n}\n```\n\n6. In the `PrayerService` class, add a method to update the start year and end year:\n\n```dart\nvoid updateStartAndEndYear(int startYear, int endYear) {\n  final currentYear = DateTime.now().year;\n  final currentMonth = DateTime.now().month;\n\n  for (int year = startYear; year <= endYear; year++) {\n    final endMonth = year == currentYear ? currentMonth : 12;\n    for (int month = 1; month <= endMonth; month++) {\n      final key = '$year-$month';\n      if (!prayerData.containsKey(key)) {\n        prayerData[key] = _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed);\n      }\n    }\n  }\n  savePrayerData(prayerData.values.first);\n}\n```\n\n7. In the `HomeScreen`, update the `FutureBuilder` to display the aggregate data for all prayers completed and all prayers to be done:\n\n```dart\nFutureBuilder<Map<String, dynamic>>(\n  future: prayerProvider.getAggregatedPrayerData(),\n  builder: (context, snapshot) {\n    if (snapshot.connectionState == ConnectionState.waiting) {\n      return CircularProgressIndicator();\n    }\n    final aggregatedData = snapshot.data;\n    final totalPrayed = aggregatedData?['totalPrayed'] ?? 0;\n    final totalPossible = aggregatedData?['totalPossible'] ?? 0;\n    return Column(\n      children: [\n        LinearProgressIndicator(\n          value: totalPossible > 0 ? totalPrayed / totalPossible : 0,\n          minHeight: 16,\n          backgroundColor: Colors.grey[300],\n          valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n        ),\n        SizedBox(height: 8),\n        Row(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text('$totalPrayed'),\n            Text('$totalPossible'),\n          ],\n        ),\n      ],\n    );\n  },\n),\n```\n\n8. In the `PrayerProvider` class, add a method to get the aggregated prayer data:\n\n```dart\nFuture<Map<String, dynamic>> getAggregatedPrayerData() async {\n  return await _prayerService.getAggregatedPrayerData();\n}\n```\n\n9. In the `PrayerService` class, add a method to calculate the aggregated prayer data:\n\n```dart\nFuture<Map<String, dynamic>> getAggregatedPrayerData() async {\n  int totalPrayed = 0;\n  int totalPossible = 0;\n\n  for (final data in prayerData.values) {\n    totalPrayed += data.totalPrayed;\n    totalPossible += data.totalPrayed + data.totalMissed;\n  }\n\n  return {\n    'totalPrayed': totalPrayed,\n    'totalPossible': totalPossible,\n  };\n}\n```\n\nWith these changes, the code should work as expected. The start year and end year will be initialized with the values from `constants.dart`, and you can update them in the `EditDetailsScreen`. The `HomeScreen` will display the aggregate data for all prayers completed and all prayers to be done, as well as the individual prayer progress.\n\nRemember to test the app thoroughly to ensure everything works as intended.",
      "created_at": "2024-06-04T12:32:35.217924Z",
      "sequence_order": 23,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:32:35.217924Z",
            "stop_timestamp": "2024-06-04T12:32:35.217924Z",
            "flags": null,
            "type": "text",
            "text": " To achieve the goals you mentioned and ensure the code works as expected, let's go through the steps and make the necessary changes:\n\n1. Update the `constants.dart` file to include the start year and end year:\n\n```dart\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n```\n\n2. In the `PrayerProvider` class, update the `startYear` and `endYear` getters to use the values from `constants.dart`:\n\n```dart\nint get startYear => kDefaultStartYear;\nint get endYear => kDefaultEndYear;\n```\n\n3. In the `EditDetailsScreen`, update the `initState` method to initialize the `_startYearController` and `_endYearController` with the values from `constants.dart`:\n\n```dart\n@override\nvoid initState() {\n  super.initState();\n  _startYearController = TextEditingController(text: kDefaultStartYear.toString());\n  _endYearController = TextEditingController(text: kDefaultEndYear.toString());\n  // ... (rest of the code remains the same)\n}\n```\n\n4. Add a save button in the `EditDetailsScreen` to update the start year and end year when pressed:\n\n```dart\nElevatedButton(\n  onPressed: () {\n    final startYear = int.parse(_startYearController.text);\n    final endYear = int.parse(_endYearController.text);\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    prayerProvider.updateStartAndEndYear(startYear, endYear);\n    Navigator.pop(context);\n  },\n  child: Text('Save'),\n),\n```\n\n5. In the `PrayerProvider` class, add a method to update the start year and end year:\n\n```dart\nvoid updateStartAndEndYear(int startYear, int endYear) {\n  _prayerService.updateStartAndEndYear(startYear, endYear);\n  notifyListeners();\n}\n```\n\n6. In the `PrayerService` class, add a method to update the start year and end year:\n\n```dart\nvoid updateStartAndEndYear(int startYear, int endYear) {\n  final currentYear = DateTime.now().year;\n  final currentMonth = DateTime.now().month;\n\n  for (int year = startYear; year <= endYear; year++) {\n    final endMonth = year == currentYear ? currentMonth : 12;\n    for (int month = 1; month <= endMonth; month++) {\n      final key = '$year-$month';\n      if (!prayerData.containsKey(key)) {\n        prayerData[key] = _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed);\n      }\n    }\n  }\n  savePrayerData(prayerData.values.first);\n}\n```\n\n7. In the `HomeScreen`, update the `FutureBuilder` to display the aggregate data for all prayers completed and all prayers to be done:\n\n```dart\nFutureBuilder<Map<String, dynamic>>(\n  future: prayerProvider.getAggregatedPrayerData(),\n  builder: (context, snapshot) {\n    if (snapshot.connectionState == ConnectionState.waiting) {\n      return CircularProgressIndicator();\n    }\n    final aggregatedData = snapshot.data;\n    final totalPrayed = aggregatedData?['totalPrayed'] ?? 0;\n    final totalPossible = aggregatedData?['totalPossible'] ?? 0;\n    return Column(\n      children: [\n        LinearProgressIndicator(\n          value: totalPossible > 0 ? totalPrayed / totalPossible : 0,\n          minHeight: 16,\n          backgroundColor: Colors.grey[300],\n          valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n        ),\n        SizedBox(height: 8),\n        Row(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text('$totalPrayed'),\n            Text('$totalPossible'),\n          ],\n        ),\n      ],\n    );\n  },\n),\n```\n\n8. In the `PrayerProvider` class, add a method to get the aggregated prayer data:\n\n```dart\nFuture<Map<String, dynamic>> getAggregatedPrayerData() async {\n  return await _prayerService.getAggregatedPrayerData();\n}\n```\n\n9. In the `PrayerService` class, add a method to calculate the aggregated prayer data:\n\n```dart\nFuture<Map<String, dynamic>> getAggregatedPrayerData() async {\n  int totalPrayed = 0;\n  int totalPossible = 0;\n\n  for (final data in prayerData.values) {\n    totalPrayed += data.totalPrayed;\n    totalPossible += data.totalPrayed + data.totalMissed;\n  }\n\n  return {\n    'totalPrayed': totalPrayed,\n    'totalPossible': totalPossible,\n  };\n}\n```\n\nWith these changes, the code should work as expected. The start year and end year will be initialized with the values from `constants.dart`, and you can update them in the `EditDetailsScreen`. The `HomeScreen` will display the aggregate data for all prayers completed and all prayers to be done, as well as the individual prayer progress.\n\nRemember to test the app thoroughly to ensure everything works as intended.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:32:35.217924Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "5376ef8a-c9ea-4f24-a6a3-9f89fbe6d20d",
      "role": "human",
      "content": "return home screen and prayer provider and prayer service in full",
      "created_at": "2024-06-04T12:48:56.131081Z",
      "sequence_order": 24,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:48:56.131081Z",
            "stop_timestamp": "2024-06-04T12:48:56.131081Z",
            "flags": null,
            "type": "text",
            "text": "return home screen and prayer provider and prayer service in full",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:48:56.131081Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "8e0cdc6a-a918-4c08-9229-3943ae57c423",
      "role": "assistant",
      "content": " Here are the updated `home_screen.dart`, `prayer_provider.dart`, and `prayer_service.dart` files:\n\n`lib/screens/home_screen.dart`:\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\nimport '../models/prayer_data.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        final currentYear = DateTime.now().year;\n        final currentMonth = DateTime.now().month;\n        final prayers = prayerProvider.prayers;\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Prayer Tracker'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.pushNamed(context, '/edit-details');\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                FutureBuilder<Map<String, dynamic>>(\n                  future: prayerProvider.getAggregatedPrayerData(),\n                  builder: (context, snapshot) {\n                    if (snapshot.connectionState == ConnectionState.waiting) {\n                      return CircularProgressIndicator();\n                    }\n                    final aggregatedData = snapshot.data;\n                    final totalPrayed = aggregatedData?['totalPrayed'] ?? 0;\n                    final totalPossible = aggregatedData?['totalPossible'] ?? 0;\n                    return Column(\n                      children: [\n                        LinearProgressIndicator(\n                          value: totalPossible > 0 ? totalPrayed / totalPossible : 0,\n                          minHeight: 16,\n                          backgroundColor: Colors.grey[300],\n                          valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                        ),\n                        SizedBox(height: 8),\n                        Row(\n                          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                          children: [\n                            Text('$totalPrayed'),\n                            Text('$totalPossible'),\n                          ],\n                        ),\n                      ],\n                    );\n                  },\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        year: currentYear,\n                        month: currentMonth,\n                        onPrayPressed: () {\n                          prayerProvider.incrementPrayer(prayer);\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n```\n\n`lib/providers/prayer_provider.dart`:\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n\n  PrayerProvider(this._prayerService) {\n    _prayerService.onPrayerDataUpdated = _onPrayerDataUpdated;\n  }\n\n  void _onPrayerDataUpdated() {\n    notifyListeners();\n  }\n\n  Map<String, PrayerData> _prayerData = {};\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  int get startYear => kDefaultStartYear;\n  int get endYear => kDefaultEndYear;\n\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getMissedPrayersForMonth(year, month, prayer);\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    return await _prayerService.getPrayerDataForMonth(year, month);\n  }\n\n  void updatePrayerStats(int year, int month, String prayer, bool increaseCompletedCount) {\n    _prayerService.updatePrayerStats(year, month, prayer, increaseCompletedCount);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForYear(year, percentageCompleted);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForMonth(int year, int month, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\n    notifyListeners();\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    return _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    return _prayerService.getPrayerCompletionPercentageForYear(year);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    return await _prayerService.getAggregatedPrayerData();\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    _prayerService.updateStartAndEndYear(startYear, endYear);\n    notifyListeners();\n  }\n}\n```\n\n`lib/services/prayer_service.dart`:\n```dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed);\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    onPrayerDataUpdated?.call();\n  }\n\n  void incrementPrayer(String prayer) {\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear || (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] = (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed = (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed = (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1; month <= (year == currentYear ? currentMonth - 1 : 12); month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int year = startYear; year <= endYear; year++) {\n      final endMonth = year == currentYear ? currentMonth : 12;\n      for (int month = 1; month <= endMonth; month++) {\n        final key = '$year-$month';\n        if (!prayerData.containsKey(key)) {\n          prayerData[key] = _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed);\n        }\n      }\n    }\n    savePrayerData(prayerData.values.first);\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayer",
      "created_at": "2024-06-04T12:48:56.131081Z",
      "sequence_order": 25,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T12:48:56.131081Z",
            "stop_timestamp": "2024-06-04T12:48:56.131081Z",
            "flags": null,
            "type": "text",
            "text": " Here are the updated `home_screen.dart`, `prayer_provider.dart`, and `prayer_service.dart` files:\n\n`lib/screens/home_screen.dart`:\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\nimport '../models/prayer_data.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        final currentYear = DateTime.now().year;\n        final currentMonth = DateTime.now().month;\n        final prayers = prayerProvider.prayers;\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Prayer Tracker'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.pushNamed(context, '/edit-details');\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                FutureBuilder<Map<String, dynamic>>(\n                  future: prayerProvider.getAggregatedPrayerData(),\n                  builder: (context, snapshot) {\n                    if (snapshot.connectionState == ConnectionState.waiting) {\n                      return CircularProgressIndicator();\n                    }\n                    final aggregatedData = snapshot.data;\n                    final totalPrayed = aggregatedData?['totalPrayed'] ?? 0;\n                    final totalPossible = aggregatedData?['totalPossible'] ?? 0;\n                    return Column(\n                      children: [\n                        LinearProgressIndicator(\n                          value: totalPossible > 0 ? totalPrayed / totalPossible : 0,\n                          minHeight: 16,\n                          backgroundColor: Colors.grey[300],\n                          valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                        ),\n                        SizedBox(height: 8),\n                        Row(\n                          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                          children: [\n                            Text('$totalPrayed'),\n                            Text('$totalPossible'),\n                          ],\n                        ),\n                      ],\n                    );\n                  },\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        year: currentYear,\n                        month: currentMonth,\n                        onPrayPressed: () {\n                          prayerProvider.incrementPrayer(prayer);\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n```\n\n`lib/providers/prayer_provider.dart`:\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n\n  PrayerProvider(this._prayerService) {\n    _prayerService.onPrayerDataUpdated = _onPrayerDataUpdated;\n  }\n\n  void _onPrayerDataUpdated() {\n    notifyListeners();\n  }\n\n  Map<String, PrayerData> _prayerData = {};\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  int get startYear => kDefaultStartYear;\n  int get endYear => kDefaultEndYear;\n\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getMissedPrayersForMonth(year, month, prayer);\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    return await _prayerService.getPrayerDataForMonth(year, month);\n  }\n\n  void updatePrayerStats(int year, int month, String prayer, bool increaseCompletedCount) {\n    _prayerService.updatePrayerStats(year, month, prayer, increaseCompletedCount);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForYear(year, percentageCompleted);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForMonth(int year, int month, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\n    notifyListeners();\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    return _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    return _prayerService.getPrayerCompletionPercentageForYear(year);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    return await _prayerService.getAggregatedPrayerData();\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    _prayerService.updateStartAndEndYear(startYear, endYear);\n    notifyListeners();\n  }\n}\n```\n\n`lib/services/prayer_service.dart`:\n```dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed);\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    onPrayerDataUpdated?.call();\n  }\n\n  void incrementPrayer(String prayer) {\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear || (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] = (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed = (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed = (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1; month <= (year == currentYear ? currentMonth - 1 : 12); month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int year = startYear; year <= endYear; year++) {\n      final endMonth = year == currentYear ? currentMonth : 12;\n      for (int month = 1; month <= endMonth; month++) {\n        final key = '$year-$month';\n        if (!prayerData.containsKey(key)) {\n          prayerData[key] = _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed);\n        }\n      }\n    }\n    savePrayerData(prayerData.values.first);\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayer",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T12:48:56.131081Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "d1a46f7a-ae36-49a9-963e-b29e7563eea3",
      "role": "human",
      "content": "--- xcodebuild: WARNING: Using the first of multiple matching destinations:\n{ platform:macOS, arch:arm64, id:00008112-001A04E41123C01E, name:My Mac }\n{ platform:macOS, arch:x86_64, id:00008112-001A04E41123C01E, name:My Mac }\nlib/providers/prayer_provider.dart:82:33: Error: The method 'getAggregatedPrayerData' isn't defined for the class 'PrayerService'.\n - 'PrayerService' is from 'package:amana/services/prayer_service.dart' ('lib/services/prayer_service.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'getAggregatedPrayerData'.\n    return await _prayerService.getAggregatedPrayerData();\n                                ^^^^^^^^^^^^^^^^^^^^^^^\nlib/services/prayer_service.dart:31:53: Error: The argument type 'int' can't be assigned to the parameter type 'double'.\n              _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed);\n                                                    ^\nlib/services/prayer_service.dart:195:53: Error: The argument type 'int' can't be assigned to the parameter type 'double'.\n              _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed);\n                                                    ^\nTarget kernel_snapshot failed: Exception\nCommand PhaseScriptExecution failed with a nonzero exit code\nwarning: Run script build phase 'Run Script' will be run during every build because it does not specify any outputs. To address this warning, either add output dependencies to the script phase, or configure it to run in every build by unchecking \"Based on dependency analysis\" in the script phase. (in target 'Flutter Assemble' from project 'Runner')\n** BUILD FAILED **\n\nreturn the entire prayer service file and any other ones with bugs, \n\nHere is the current prayer service:",
      "created_at": "2024-06-04T13:17:18.124472Z",
      "sequence_order": 26,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T13:17:18.124472Z",
            "stop_timestamp": "2024-06-04T13:17:18.124472Z",
            "flags": null,
            "type": "text",
            "text": "--- xcodebuild: WARNING: Using the first of multiple matching destinations:\n{ platform:macOS, arch:arm64, id:00008112-001A04E41123C01E, name:My Mac }\n{ platform:macOS, arch:x86_64, id:00008112-001A04E41123C01E, name:My Mac }\nlib/providers/prayer_provider.dart:82:33: Error: The method 'getAggregatedPrayerData' isn't defined for the class 'PrayerService'.\n - 'PrayerService' is from 'package:amana/services/prayer_service.dart' ('lib/services/prayer_service.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'getAggregatedPrayerData'.\n    return await _prayerService.getAggregatedPrayerData();\n                                ^^^^^^^^^^^^^^^^^^^^^^^\nlib/services/prayer_service.dart:31:53: Error: The argument type 'int' can't be assigned to the parameter type 'double'.\n              _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed);\n                                                    ^\nlib/services/prayer_service.dart:195:53: Error: The argument type 'int' can't be assigned to the parameter type 'double'.\n              _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed);\n                                                    ^\nTarget kernel_snapshot failed: Exception\nCommand PhaseScriptExecution failed with a nonzero exit code\nwarning: Run script build phase 'Run Script' will be run during every build because it does not specify any outputs. To address this warning, either add output dependencies to the script phase, or configure it to run in every build by unchecking \"Based on dependency analysis\" in the script phase. (in target 'Flutter Assemble' from project 'Runner')\n** BUILD FAILED **\n\nreturn the entire prayer service file and any other ones with bugs, \n\nHere is the current prayer service:",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T13:17:18.124472Z",
        "attachments": [
          {
            "file_name": "paste.txt",
            "file_size": 8218,
            "file_type": "txt",
            "extracted_content": "import 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] =\n              _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed);\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    onPrayerDataUpdated?.call();\n  }\n\n  void incrementPrayer(String prayer) {\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear ||\n              (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed =\n          (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed =\n          (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1;\n        month <= (year == currentYear ? currentMonth - 1 : 12);\n        month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int year = startYear; year <= endYear; year++) {\n      final endMonth = year == currentYear ? currentMonth : 12;\n      for (int month = 1; month <= endMonth; month++) {\n        final key = '$year-$month';\n        if (!prayerData.containsKey(key)) {\n          prayerData[key] =\n              _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed);\n        }\n      }\n    }\n    savePrayerData(prayerData.values.first);\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(\n      int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers)\n        prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n"
          }
        ],
        "files": [
          {
            "file_name": "paste.txt"
          }
        ]
      }
    },
    {
      "id": "fa3a4364-ad58-4924-b8be-3acb6f01377f",
      "role": "assistant",
      "content": " Here's the updated `prayer_service.dart` file with the necessary fixes:\n\n```dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    onPrayerDataUpdated?.call();\n  }\n\n  void incrementPrayer(String prayer) {\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 && (data.year < earliestYear || (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] = (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed = (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed = (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1; month <= (year == currentYear ? currentMonth - 1 : 12); month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int year = startYear; year <= endYear; year++) {\n      final endMonth = year == currentYear ? currentMonth : 12;\n      for (int month = 1; month <= endMonth; month++) {\n        final key = '$year-$month';\n        if (!prayerData.containsKey(key)) {\n          prayerData[key] = _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n    }\n    savePrayerData(prayerData.values.first);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    int totalPrayed = 0;\n    int totalPossible = 0;\n\n    for (final data in prayerData.values) {\n      totalPrayed += data.totalPrayed;\n      totalPossible += data.totalPrayed + data.totalMissed;\n    }\n\n    return {\n      'totalPrayed': totalPrayed,\n      'totalPossible': totalPossible,\n    };\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers) prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n```\n\nThe main changes made to the `prayer_service.dart` file are:\n\n1. In the `loadData` and `updateStartAndEndYear` methods, the `kDefaultPercentageMissed` constant is converted to a double using `kDefaultPercentageMissed.toDouble()` to match the parameter type of the `_calculatePrayerData` method.\n\n2. The `getAggregatedPrayerData` method is added to calculate the total prayed and total possible prayers across all prayer data.\n\nThese changes should resolve the errors you were encountering.\n\nAs for the `prayer_provider.dart` file, it looks like the error is related to the `getAggregatedPrayerData` method not being defined in the `PrayerService` class. However, with the addition of the `getAggregatedPrayerData` method in the `prayer_service.dart` file, this error should be resolved.\n\nIf you encounter any other issues or errors, please let me know, and I'll be happy to assist you further.",
      "created_at": "2024-06-04T13:17:18.124472Z",
      "sequence_order": 27,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T13:17:18.124472Z",
            "stop_timestamp": "2024-06-04T13:17:18.124472Z",
            "flags": null,
            "type": "text",
            "text": " Here's the updated `prayer_service.dart` file with the necessary fixes:\n\n```dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    onPrayerDataUpdated?.call();\n  }\n\n  void incrementPrayer(String prayer) {\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 && (data.year < earliestYear || (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] = (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed = (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed = (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1; month <= (year == currentYear ? currentMonth - 1 : 12); month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int year = startYear; year <= endYear; year++) {\n      final endMonth = year == currentYear ? currentMonth : 12;\n      for (int month = 1; month <= endMonth; month++) {\n        final key = '$year-$month';\n        if (!prayerData.containsKey(key)) {\n          prayerData[key] = _calculatePrayerData(year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n    }\n    savePrayerData(prayerData.values.first);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    int totalPrayed = 0;\n    int totalPossible = 0;\n\n    for (final data in prayerData.values) {\n      totalPrayed += data.totalPrayed;\n      totalPossible += data.totalPrayed + data.totalMissed;\n    }\n\n    return {\n      'totalPrayed': totalPrayed,\n      'totalPossible': totalPossible,\n    };\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers) prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n```\n\nThe main changes made to the `prayer_service.dart` file are:\n\n1. In the `loadData` and `updateStartAndEndYear` methods, the `kDefaultPercentageMissed` constant is converted to a double using `kDefaultPercentageMissed.toDouble()` to match the parameter type of the `_calculatePrayerData` method.\n\n2. The `getAggregatedPrayerData` method is added to calculate the total prayed and total possible prayers across all prayer data.\n\nThese changes should resolve the errors you were encountering.\n\nAs for the `prayer_provider.dart` file, it looks like the error is related to the `getAggregatedPrayerData` method not being defined in the `PrayerService` class. However, with the addition of the `getAggregatedPrayerData` method in the `prayer_service.dart` file, this error should be resolved.\n\nIf you encounter any other issues or errors, please let me know, and I'll be happy to assist you further.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T13:17:18.124472Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "bf7dd4ab-3ca6-4084-a8c7-f88b9278f89f",
      "role": "human",
      "content": "home screen just shows cirle loading loops \n'package:flutter/src/material/dropdown.dart': Failed\nassertion: line 1619 pos 15: 'items == null || items.isEmpty lI\nvalue == null ||\nitems.where((DropdownMenultem<T> item) {\nreturn item.value == value;\n}) .length == 1': There should be exactly one item with\n[DropdownButton]'s value: 2023.\nEither zero or 2 or more [DropdownMenultem]s were\ndetected with the same value\nSee also: https://flutter.dev/docs/testing/errors\n\nand i can't go to the edit details page",
      "created_at": "2024-06-04T13:38:12.808075Z",
      "sequence_order": 28,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T13:38:12.808075Z",
            "stop_timestamp": "2024-06-04T13:38:12.808075Z",
            "flags": null,
            "type": "text",
            "text": "home screen just shows cirle loading loops \n'package:flutter/src/material/dropdown.dart': Failed\nassertion: line 1619 pos 15: 'items == null || items.isEmpty lI\nvalue == null ||\nitems.where((DropdownMenultem<T> item) {\nreturn item.value == value;\n}) .length == 1': There should be exactly one item with\n[DropdownButton]'s value: 2023.\nEither zero or 2 or more [DropdownMenultem]s were\ndetected with the same value\nSee also: https://flutter.dev/docs/testing/errors\n\nand i can't go to the edit details page",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T13:38:12.808075Z",
        "attachments": [
          {
            "file_name": "paste.txt",
            "file_size": 79420,
            "file_type": "txt",
            "extracted_content": "\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./prayer_record.dart\n#############################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int fajrMissed;\n\n  @HiveField(3)\n  int dhuhrMissed;\n\n  @HiveField(4)\n  int asrMissed;\n\n  @HiveField(5)\n  int maghribMissed;\n\n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./main.dart\n####################\n\n// File: main.dart\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_data.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  Hive.registerAdapter(PrayerDataAdapter());\n  runApp(MyApp(hiveService: hiveService));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./prayer_record.g.dart\n###############################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n\n  PrayerProvider(this._prayerService) {\n    _prayerService.onPrayerDataUpdated = _onPrayerDataUpdated;\n  }\n\n  void _onPrayerDataUpdated() {\n    notifyListeners();\n  }\n\n  Map<String, PrayerData> _prayerData = {};\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  int get startYear => kDefaultStartYear;\n  int get endYear => kDefaultEndYear;\n\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getMissedPrayersForMonth(year, month, prayer);\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    return await _prayerService.getPrayerDataForMonth(year, month);\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    _prayerService.updatePrayerStats(\n        year, month, prayer, increaseCompletedCount);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForYear(year, percentageCompleted);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\n    notifyListeners();\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    return _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    return _prayerService.getPrayerCompletionPercentageForYear(year);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    return await _prayerService.getAggregatedPrayerData();\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    _prayerService.updateStartAndEndYear(startYear, endYear);\n    notifyListeners();\n  }\n}\n\n\n\n# File: ./models/prayer_record.dart\n####################################\n\nimport 'package:hive/hive.dart';\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n  @HiveField(1)\n  int month;\n  @HiveField(2)\n  int fajrMissed;\n  @HiveField(3)\n  int dhuhrMissed;\n  @HiveField(4)\n  int asrMissed;\n  @HiveField(5)\n  int maghribMissed;\n  @HiveField(6)\n  int ishaMissed;\n// Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./models/prayer_data.dart\n##################################\n\n// File: lib/models/prayer_data.dart\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_data.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerData {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  Map<String, int> prayersCompleted; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(3)\n  Map<String, int> prayersMissed; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(4)\n  int totalPrayed;\n\n  @HiveField(5)\n  int totalMissed;\n\n  @HiveField(6)\n  double percentagePrayed;\n\n  @HiveField(7)\n  double percentageMissed;\n\n  PrayerData({\n    required this.year,\n    required this.month,\n    required this.prayersCompleted,\n    required this.prayersMissed,\n    required this.totalPrayed,\n    required this.totalMissed,\n    required this.percentagePrayed,\n    required this.percentageMissed,\n  });\n\n  factory PrayerData.fromMap(Map<String, dynamic> map) {\n    return PrayerData(\n      year: map['year'],\n      month: map['month'],\n      prayersCompleted: Map<String, int>.from(map['prayersCompleted']),\n      prayersMissed: Map<String, int>.from(map['prayersMissed']),\n      totalPrayed: map['totalPrayed'],\n      totalMissed: map['totalMissed'],\n      percentagePrayed: map['percentagePrayed'],\n      percentageMissed: map['percentageMissed'],\n    );\n  }\n\n  Map<String, dynamic> toMap() {\n    return {\n      'year': year,\n      'month': month,\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'totalPrayed': totalPrayed,\n      'totalMissed': totalMissed,\n      'percentagePrayed': percentagePrayed,\n      'percentageMissed': percentageMissed,\n    };\n  }\n}\n\n\n\n# File: ./models/prayer_data.g.dart\n####################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_data.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerDataAdapter extends TypeAdapter<PrayerData> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerData read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerData(\n      year: fields[0] as int,\n      month: fields[1] as int,\n      prayersCompleted: (fields[2] as Map).cast<String, int>(),\n      prayersMissed: (fields[3] as Map).cast<String, int>(),\n      totalPrayed: fields[4] as int,\n      totalMissed: fields[5] as int,\n      percentagePrayed: fields[6] as double,\n      percentageMissed: fields[7] as double,\n    );\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerData obj) {\n    writer\n      ..writeByte(8)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.prayersCompleted)\n      ..writeByte(3)\n      ..write(obj.prayersMissed)\n      ..writeByte(4)\n      ..write(obj.totalPrayed)\n      ..writeByte(5)\n      ..write(obj.totalMissed)\n      ..writeByte(6)\n      ..write(obj.percentagePrayed)\n      ..writeByte(7)\n      ..write(obj.percentageMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerDataAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./models/prayer_record.g.dart\n######################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\n// File: screens/prayer_progress_card_material.dart\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n  final VoidCallback onPrayPressed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.year,\n    required this.month,\n    required this.onPrayPressed,\n  });\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(prayerProvider.getCompletedPrayersForMonth(\n          year, month, prayer)), // Fix: Wrap with Future.value()\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(prayerProvider.getMissedPrayersForMonth(\n              year, month, prayer)), // Fix: Wrap with Future.value()\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CircularProgressIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Card(\n              child: Padding(\n                padding: const EdgeInsets.all(14.0),\n                child: Column(\n                  mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                  children: [\n                    Text(prayer,\n                        style: TextStyle(\n                            fontWeight: FontWeight.bold, fontSize: 16)),\n                    ClipRRect(\n                      borderRadius: BorderRadius.circular(8),\n                      child: LinearProgressIndicator(\n                        value: totalPrayers > 0\n                            ? completedPrayers / totalPrayers\n                            : 0,\n                        minHeight: 12,\n                        backgroundColor: Colors.grey[300],\n                        valueColor:\n                            AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                      ),\n                    ),\n                    Text(\n                        '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                        style: TextStyle(fontSize: 14)),\n                    Text('$completedPrayers / $totalPrayers',\n                        style: TextStyle(fontSize: 12)),\n                    ElevatedButton(\n                      onPressed: onPrayPressed,\n                      child: Text('Pray'),\n                    ),\n                  ],\n                ),\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_details_screen.dart\n#############################################\n\nimport 'package:flutter/material.dart';\nimport '../services/hive_service.dart';\nimport '../models/prayer_record.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          // Implement logic to find and increment the oldest missed prayer\n\n          return Column(\n            children: [\n              // Display and update prayer details here\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport 'dart:io';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../constants.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../platform_specific_widget/amana_snackbar.dart';\nimport '../providers/prayer_provider.dart';\nimport '../widgets/hadith_modal.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({Key? key}) : super(key: key);\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _endYearController;\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: prayerProvider.startYear.toString());\n    _endYearController =\n        TextEditingController(text: prayerProvider.endYear.toString());\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    if (_selectedYear == null) {\n      _selectedYear = prayerProvider.prayerData.keys.map((key) {\n        final parts = key.split('-');\n        return int.parse(parts[0]);\n      }).reduce((a, b) => a > b ? a : b);\n    }\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: [\n                DropdownMenuItem(\n                  child: Text('Select Year'),\n                  value: null,\n                ),\n                ...List.generate(1, (index) => DateTime.now().year - index)\n                    .map((year) => DropdownMenuItem(\n                          value: year,\n                          child: Text(year.toString()),\n                        ))\n                    .toList(),\n              ],\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                  if (year != null) {\n                    _percentageCompleted = prayerProvider\n                        .getPrayerCompletionPercentageForYear(year);\n                  }\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            SizedBox(height: 16),\n            if (_selectedYear != null)\n              DropdownButtonFormField<int>(\n                value: _selectedMonth,\n                items: [\n                  DropdownMenuItem(\n                    child: Text('Average for total year, or select month'),\n                    value: null,\n                  ),\n                  ...List.generate(\n                          _selectedYear == DateTime.now().year\n                              ? DateTime.now().month - 1\n                              : 12,\n                          (index) => index + 1)\n                      .map((month) => DropdownMenuItem(\n                            value: month,\n                            child: Text('Month $month'),\n                          ))\n                      .toList(),\n                ],\n                onChanged: (month) {\n                  setState(() {\n                    _selectedMonth = month;\n                    if (month != null) {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForMonth(\n                        _selectedYear!,\n                        month,\n                      );\n                    } else {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForYear(\n                        _selectedYear!,\n                      );\n                    }\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Month',\n                ),\n              ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Adjust the percentage of prayers completed for the selected year or month.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _percentageCompleted,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_percentageCompleted.round()}%',\n              onChanged: (value) {\n                setState(() {\n                  _percentageCompleted = value;\n                });\n              },\n              onChangeEnd: (value) {\n                if (_selectedYear != null) {\n                  if (_selectedMonth != null) {\n                    prayerProvider.updatePrayerStatsForMonth(\n                      _selectedYear!,\n                      _selectedMonth!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text(\n                          'Changes saved for month $_selectedMonth of year $_selectedYear.'),\n                    );\n                  } else {\n                    prayerProvider.updatePrayerStatsForYear(\n                      _selectedYear!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text('Changes saved for year $_selectedYear.'),\n                    );\n                  }\n                }\n              },\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: () {\n                Navigator.pop(context);\n              },\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\nimport '../models/prayer_data.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(PrayerData(\n      // Fix: Pass a PrayerData object\n      year: startYear,\n      month: startMonth,\n      prayersCompleted: {},\n      prayersMissed: {},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    ));\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\n// File: screens/prayer_progress_card_cupertino.dart\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n\n  const PrayerProgressCardCupertino({\n    required this.prayer,\n    required this.year,\n    required this.month,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(\n          prayerProvider.getCompletedPrayersForMonth(year, month, prayer)),\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(\n              prayerProvider.getMissedPrayersForMonth(year, month, prayer)),\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CupertinoActivityIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Container(\n              margin: EdgeInsets.all(8.0),\n              padding: EdgeInsets.all(14.0),\n              decoration: BoxDecoration(\n                color: CupertinoColors.white,\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: CupertinoColors.systemGrey.withOpacity(0.4),\n                    spreadRadius: 1,\n                    blurRadius: 3,\n                    offset: Offset(0, 2),\n                  ),\n                ],\n              ),\n              child: Column(\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                children: [\n                  Text(prayer,\n                      style:\n                          TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n                  SizedBox(height: 8),\n                  ClipRRect(\n                    borderRadius: BorderRadius.circular(8),\n                    child: LinearProgressIndicator(\n                      value: totalPrayers > 0\n                          ? completedPrayers / totalPrayers\n                          : 0,\n                      minHeight: 12,\n                      backgroundColor: CupertinoColors.systemGrey4,\n                      valueColor: AlwaysStoppedAnimation<Color>(\n                          CupertinoColors.activeGreen),\n                    ),\n                  ),\n                  SizedBox(height: 8),\n                  Text(\n                      '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                      style: TextStyle(fontSize: 14)),\n                  Text('$completedPrayers / $totalPrayers',\n                      style: TextStyle(fontSize: 12)),\n                  SizedBox(height: 8),\n                  CupertinoButton.filled(\n                    onPressed: () => prayerProvider.incrementPrayer(prayer),\n                    child: Text('Pray'),\n                  ),\n                ],\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\nimport '../models/prayer_data.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          prayerProvider.loadData();\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        final currentYear = DateTime.now().year;\n        final currentMonth = DateTime.now().month;\n        final prayers = prayerProvider.prayers;\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Prayer Tracker'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.pushNamed(context, '/edit-details');\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                FutureBuilder<Map<String, dynamic>>(\n                  future: prayerProvider.getAggregatedPrayerData(),\n                  builder: (context, snapshot) {\n                    if (snapshot.connectionState == ConnectionState.waiting) {\n                      return CircularProgressIndicator();\n                    }\n                    final aggregatedData = snapshot.data;\n                    final totalPrayed = aggregatedData?['totalPrayed'] ?? 0;\n                    final totalPossible = aggregatedData?['totalPossible'] ?? 0;\n                    return Column(\n                      children: [\n                        LinearProgressIndicator(\n                          value: totalPossible > 0\n                              ? totalPrayed / totalPossible\n                              : 0,\n                          minHeight: 16,\n                          backgroundColor: Colors.grey[300],\n                          valueColor:\n                              AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                        ),\n                        SizedBox(height: 8),\n                        Row(\n                          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                          children: [\n                            Text('$totalPrayed'),\n                            Text('$totalPossible'),\n                          ],\n                        ),\n                      ],\n                    );\n                  },\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        year: currentYear,\n                        month: currentMonth,\n                        onPrayPressed: () {\n                          prayerProvider.incrementPrayer(prayer);\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/flutter_build/dart_plugin_registrant.dart\n###############################################################\n\n//\n// Generated file. Do not edit.\n// This file is generated from template in file `flutter_tools/lib/src/flutter_plugins.dart`.\n//\n\n// @dart = 3.3\n\nimport 'dart:io'; // flutter_ignore: dart_io_import.\nimport 'package:path_provider_android/path_provider_android.dart';\nimport 'package:shared_preferences_android/shared_preferences_android.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_linux/path_provider_linux.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_linux/shared_preferences_linux.dart';\nimport 'package:url_launcher_linux/url_launcher_linux.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_windows/path_provider_windows.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_windows/shared_preferences_windows.dart';\nimport 'package:url_launcher_windows/url_launcher_windows.dart';\n\n@pragma('vm:entry-point')\nclass _PluginRegistrant {\n\n  @pragma('vm:entry-point')\n  static void register() {\n    if (Platform.isAndroid) {\n      try {\n        PathProviderAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isIOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isLinux) {\n      try {\n        PathProviderLinux.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusLinuxPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesLinux.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherLinux.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isMacOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isWindows) {\n      try {\n        PathProviderWindows.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusWindowsPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesWindows.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherWindows.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./.dart_tool/build/entrypoint/build.dart\n#################################################\n\n// ignore_for_file: directives_ordering\n// ignore_for_file: no_leading_underscores_for_library_prefixes\nimport 'package:build_runner_core/build_runner_core.dart' as _i1;\nimport 'package:hive_generator/hive_generator.dart' as _i2;\nimport 'package:source_gen/builder.dart' as _i3;\nimport 'dart:isolate' as _i4;\nimport 'package:build_runner/build_runner.dart' as _i5;\nimport 'dart:io' as _i6;\n\nfinal _builders = <_i1.BuilderApplication>[\n  _i1.apply(\n    r'hive_generator:hive_generator',\n    [_i2.getBuilder],\n    _i1.toDependentsOf(r'hive_generator'),\n    hideOutput: true,\n    appliesBuilders: const [r'source_gen:combining_builder'],\n  ),\n  _i1.apply(\n    r'source_gen:combining_builder',\n    [_i3.combiningBuilder],\n    _i1.toNoneByDefault(),\n    hideOutput: false,\n    appliesBuilders: const [r'source_gen:part_cleanup'],\n  ),\n  _i1.applyPostProcess(\n    r'source_gen:part_cleanup',\n    _i3.partCleanup,\n  ),\n];\nvoid main(\n  List<String> args, [\n  _i4.SendPort? sendPort,\n]) async {\n  var result = await _i5.run(\n    args,\n    _builders,\n  );\n  sendPort?.send(result);\n  _i6.exitCode = result;\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\n// File: hive_service.dart\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    await Hive.deleteBoxFromDisk('prayerBox'); // Clear the existing box\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n\n    if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    onPrayerDataUpdated?.call();\n  }\n\n  void incrementPrayer(String prayer) {\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear ||\n              (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed =\n          (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed =\n          (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1;\n        month <= (year == currentYear ? currentMonth - 1 : 12);\n        month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int year = startYear; year <= endYear; year++) {\n      final endMonth = year == currentYear ? currentMonth : 12;\n      for (int month = 1; month <= endMonth; month++) {\n        final key = '$year-$month';\n        if (!prayerData.containsKey(key)) {\n          prayerData[key] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n    }\n    savePrayerData(prayerData.values.first);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    int totalPrayed = 0;\n    int totalPossible = 0;\n\n    for (final data in prayerData.values) {\n      totalPrayed += data.totalPrayed;\n      totalPossible += data.totalPrayed + data.totalMissed;\n    }\n\n    return {\n      'totalPrayed': totalPrayed,\n      'totalPossible': totalPossible,\n    };\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(\n      int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers)\n        prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n\n\n\n# File: ./widgets/progress_bar.dart\n####################################\n\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double value;\n\n  ProgressBar({required this.value});\n\n  @override\n  Widget build(BuildContext context) {\n    return LinearProgressIndicator(value: value);\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ï·º) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'Ø¹ÙŽÙ†Ù’ Ø£ÙŽØ¨ÙÙŠ Ù‡ÙØ±ÙŽÙŠÙ’Ø±ÙŽØ©ÙŽ Ø±ÙŽØ¶ÙÙŠÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ†Ù’Ù‡Ù Ù‚ÙŽØ§Ù„ÙŽ: Ù‚ÙŽØ§Ù„ÙŽ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù ØµÙŽÙ„ÙŽÙ‘Ù‰ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ÙˆÙŽØ³ÙŽÙ„ÙŽÙ‘Ù…ÙŽ: \" Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙŽ Ø¹ÙŽØ²ÙŽÙ‘ ÙˆÙŽØ¬ÙŽÙ„ÙŽÙ‘ Ù‚ÙŽØ§Ù„ÙŽ: Ù…ÙŽÙ†Ù’ Ø¹ÙŽØ§Ø¯ÙŽÙ‰ Ù„ÙÙŠ ÙˆÙŽÙ„ÙÙŠÙ‹Ù‘Ø§ØŒ ÙÙŽÙ‚ÙŽØ¯Ù’ Ø¢Ø°ÙŽÙ†Ù’ØªÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙŽØ±Ù’Ø¨ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨ÙŽ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø¨ÙØ´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽØ­ÙŽØ¨ÙŽÙ‘ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ù…ÙÙ…ÙŽÙ‘Ø§ Ø§ÙÙ’ØªÙŽØ±ÙŽØ¶Ù’ØªÙ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ÙŠÙŽØ²ÙŽØ§Ù„Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ ÙŠÙŽØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨Ù Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¨ÙØ§Ù„Ù†ÙŽÙ‘ÙˆÙŽØ§ÙÙÙ„Ù Ø­ÙŽØªÙŽÙ‘Ù‰ Ø£ÙØ­ÙØ¨ÙŽÙ‘Ù‡ÙØŒ ÙÙŽØ¥ÙØ°ÙŽØ§ Ø£ÙŽØ­Ù’Ø¨ÙŽØ¨Ù’ØªÙÙ‡ÙØŒ ÙƒÙÙ†Ù’ØªÙ Ø³ÙŽÙ…Ù’Ø¹ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙŽØ³Ù’Ù…ÙŽØ¹Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽØ¨ÙŽØµÙŽØ±ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙØ¨Ù’ØµÙØ±Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽÙŠÙŽØ¯ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽØ¨Ù’Ø·ÙØ´Ù Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ±ÙØ¬Ù’Ù„ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽÙ…Ù’Ø´ÙÙŠ Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ¥ÙÙ†Ù’ Ø³ÙŽØ£ÙŽÙ„ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹Ù’Ø·ÙÙŠÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ„ÙŽØ¦ÙÙ†Ù’ Ø§Ø³Ù’ØªÙŽØ¹ÙŽØ§Ø°ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹ÙÙŠØ°ÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽØ±ÙŽØ¯ÙŽÙ‘Ø¯Ù’ØªÙ Ø¹ÙŽÙ†Ù’ Ø´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽÙ†ÙŽØ§ ÙÙŽØ§Ø¹ÙÙ„ÙÙ‡Ù ØªÙŽØ±ÙŽØ¯ÙÙ‘Ø¯ÙÙŠ Ø¹ÙŽÙ†Ù’ Ù†ÙŽÙÙ’Ø³Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØŒ ÙŠÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ø§Ù„Ù’Ù…ÙŽÙˆÙ’ØªÙŽ ÙˆÙŽØ£ÙŽÙ†ÙŽØ§ Ø£ÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ù…ÙŽØ³ÙŽØ§Ø¡ÙŽØªÙŽÙ‡Ù - Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n"
          }
        ],
        "files": [
          {
            "file_name": "paste.txt"
          }
        ]
      }
    },
    {
      "id": "3d08b5ee-76b1-4f06-b6fd-17487f832390",
      "role": "assistant",
      "content": " Here are the updated `home_screen.dart` and `edit_details_screen.dart` files with the necessary changes to resolve the issues:\n\n`lib/screens/home_screen.dart`:\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          // Show a loading indicator while data is being loaded\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        final currentYear = DateTime.now().year;\n        final currentMonth = DateTime.now().month;\n        final prayers = prayerProvider.prayers;\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Prayer Tracker'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.pushNamed(context, '/edit-details');\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                FutureBuilder<Map<String, dynamic>>(\n                  future: prayerProvider.getAggregatedPrayerData(),\n                  builder: (context, snapshot) {\n                    if (snapshot.connectionState == ConnectionState.waiting) {\n                      return CircularProgressIndicator();\n                    }\n                    final aggregatedData = snapshot.data;\n                    final totalPrayed = aggregatedData?['totalPrayed'] ?? 0;\n                    final totalPossible = aggregatedData?['totalPossible'] ?? 0;\n                    return Column(\n                      children: [\n                        LinearProgressIndicator(\n                          value: totalPossible > 0 ? totalPrayed / totalPossible : 0,\n                          minHeight: 16,\n                          backgroundColor: Colors.grey[300],\n                          valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                        ),\n                        SizedBox(height: 8),\n                        Row(\n                          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                          children: [\n                            Text('$totalPrayed'),\n                            Text('$totalPossible'),\n                          ],\n                        ),\n                      ],\n                    );\n                  },\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        year: currentYear,\n                        month: currentMonth,\n                        onPrayPressed: () {\n                          prayerProvider.incrementPrayer(prayer);\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n```\n\n`lib/screens/edit_details_screen.dart`:\n```dart\nimport 'dart:io';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../constants.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../platform_specific_widget/amana_snackbar.dart';\nimport '../providers/prayer_provider.dart';\nimport '../widgets/hadith_modal.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({Key? key}) : super(key: key);\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _endYearController;\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController = TextEditingController(text: prayerProvider.startYear.toString());\n    _endYearController = TextEditingController(text: prayerProvider.endYear.toString());\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    if (_selectedYear == null) {\n      _selectedYear = prayerProvider.prayerData.keys.map((key) {\n        final parts = key.split('-');\n        return int.parse(parts[0]);\n      }).reduce((a, b) => a > b ? a : b);\n    }\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment: kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: [\n                DropdownMenuItem(\n                  child: Text('Select Year'),\n                  value: null,\n                ),\n                ...prayerProvider.prayerData.keys.map((key) {\n                  final parts = key.split('-');\n                  final year = int.parse(parts[0]);\n                  return DropdownMenuItem(\n                    value: year,\n                    child: Text(year.toString()),\n                  );\n                }).toSet().toList(),\n              ],\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                  if (year != null) {\n                    _percentageCompleted = prayerProvider.getPrayerCompletionPercentageForYear(year);\n                  }\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            SizedBox(height: 16),\n            if (_selectedYear != null)\n              DropdownButtonFormField<int>(\n                value: _selectedMonth,\n                items: [\n                  DropdownMenuItem(\n                    child: Text('Average for total year, or select month'),\n                    value: null,\n                  ),\n                  ...List.generate(\n                    _selectedYear == DateTime.now().year ? DateTime.now().month - 1 : 12,\n                    (index) => index + 1,\n                  ).map((month) => DropdownMenuItem(\n                        value: month,\n                        child: Text('Month $month'),\n                      )),\n                ],\n                onChanged: (month) {\n                  setState(() {\n                    _selectedMonth = month;\n                    if (month != null) {\n                      _percentageCompleted = prayerProvider.getPrayerCompletionPercentageForMonth(\n                        _selectedYear!,\n                        month,\n                      );\n                    } else {\n                      _percentageCompleted = prayerProvider.getPrayerCompletionPercentageForYear(\n                        _selectedYear!,\n                      );\n                    }\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Month',\n                ),\n              ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Adjust the percentage of prayers completed for the selected year or month.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _percentageCompleted,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_percentageCompleted.round()}%',\n              onChanged: (value) {\n                setState(() {\n                  _percentageCompleted = value;\n                });\n              },\n              onChangeEnd: (value) {\n                if (_selectedYear != null) {\n                  if (_selectedMonth != null) {\n                    prayerProvider.updatePrayerStatsForMonth(\n                      _selectedYear!,\n                      _selectedMonth!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text('Changes saved for month $_selectedMonth of year $_selectedYear.'),\n                    );\n                  } else {\n                    prayerProvider.updatePrayerStatsForYear(\n                      _selectedYear!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text('Changes saved for year $_selectedYear.'),\n                    );\n                  }\n                }\n              },\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: () {\n                Navigator.pop(context);\n              },\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\nThe main changes made to resolve the issues are:\n\n1. In `home_screen.dart`:\n   - Added a loading indicator while the prayer data is being loaded.\n   - Removed the `FutureBuilder` for `getPrayerDataForMonth` since it's not being used in the current implementation.\n\n2. In `edit_details_screen.dart`:\n   - Fixed the `DropdownButtonFormField` for year selection to use the available years from the `prayerData` map.\n   - Wrapped the month dropdown items in a `List.generate` to ensure that the months are generated correctly based on the selected year.\n   - Removed the `.toList()` call from the month dropdown items to avoid the assertion error.\n\nWith these changes, the home screen should display the prayer progress without the loading loop, and you should be able to navigate to the edit details screen without encountering any errors.\n\nPlease let me know if you have any further questions or if you encounter any other issues.",
      "created_at": "2024-06-04T13:38:12.808075Z",
      "sequence_order": 29,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T13:38:12.808075Z",
            "stop_timestamp": "2024-06-04T13:38:12.808075Z",
            "flags": null,
            "type": "text",
            "text": " Here are the updated `home_screen.dart` and `edit_details_screen.dart` files with the necessary changes to resolve the issues:\n\n`lib/screens/home_screen.dart`:\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          // Show a loading indicator while data is being loaded\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        final currentYear = DateTime.now().year;\n        final currentMonth = DateTime.now().month;\n        final prayers = prayerProvider.prayers;\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Prayer Tracker'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.pushNamed(context, '/edit-details');\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                FutureBuilder<Map<String, dynamic>>(\n                  future: prayerProvider.getAggregatedPrayerData(),\n                  builder: (context, snapshot) {\n                    if (snapshot.connectionState == ConnectionState.waiting) {\n                      return CircularProgressIndicator();\n                    }\n                    final aggregatedData = snapshot.data;\n                    final totalPrayed = aggregatedData?['totalPrayed'] ?? 0;\n                    final totalPossible = aggregatedData?['totalPossible'] ?? 0;\n                    return Column(\n                      children: [\n                        LinearProgressIndicator(\n                          value: totalPossible > 0 ? totalPrayed / totalPossible : 0,\n                          minHeight: 16,\n                          backgroundColor: Colors.grey[300],\n                          valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                        ),\n                        SizedBox(height: 8),\n                        Row(\n                          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                          children: [\n                            Text('$totalPrayed'),\n                            Text('$totalPossible'),\n                          ],\n                        ),\n                      ],\n                    );\n                  },\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        year: currentYear,\n                        month: currentMonth,\n                        onPrayPressed: () {\n                          prayerProvider.incrementPrayer(prayer);\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n```\n\n`lib/screens/edit_details_screen.dart`:\n```dart\nimport 'dart:io';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../constants.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../platform_specific_widget/amana_snackbar.dart';\nimport '../providers/prayer_provider.dart';\nimport '../widgets/hadith_modal.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({Key? key}) : super(key: key);\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _endYearController;\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController = TextEditingController(text: prayerProvider.startYear.toString());\n    _endYearController = TextEditingController(text: prayerProvider.endYear.toString());\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    if (_selectedYear == null) {\n      _selectedYear = prayerProvider.prayerData.keys.map((key) {\n        final parts = key.split('-');\n        return int.parse(parts[0]);\n      }).reduce((a, b) => a > b ? a : b);\n    }\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment: kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: [\n                DropdownMenuItem(\n                  child: Text('Select Year'),\n                  value: null,\n                ),\n                ...prayerProvider.prayerData.keys.map((key) {\n                  final parts = key.split('-');\n                  final year = int.parse(parts[0]);\n                  return DropdownMenuItem(\n                    value: year,\n                    child: Text(year.toString()),\n                  );\n                }).toSet().toList(),\n              ],\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                  if (year != null) {\n                    _percentageCompleted = prayerProvider.getPrayerCompletionPercentageForYear(year);\n                  }\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            SizedBox(height: 16),\n            if (_selectedYear != null)\n              DropdownButtonFormField<int>(\n                value: _selectedMonth,\n                items: [\n                  DropdownMenuItem(\n                    child: Text('Average for total year, or select month'),\n                    value: null,\n                  ),\n                  ...List.generate(\n                    _selectedYear == DateTime.now().year ? DateTime.now().month - 1 : 12,\n                    (index) => index + 1,\n                  ).map((month) => DropdownMenuItem(\n                        value: month,\n                        child: Text('Month $month'),\n                      )),\n                ],\n                onChanged: (month) {\n                  setState(() {\n                    _selectedMonth = month;\n                    if (month != null) {\n                      _percentageCompleted = prayerProvider.getPrayerCompletionPercentageForMonth(\n                        _selectedYear!,\n                        month,\n                      );\n                    } else {\n                      _percentageCompleted = prayerProvider.getPrayerCompletionPercentageForYear(\n                        _selectedYear!,\n                      );\n                    }\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Month',\n                ),\n              ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Adjust the percentage of prayers completed for the selected year or month.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _percentageCompleted,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_percentageCompleted.round()}%',\n              onChanged: (value) {\n                setState(() {\n                  _percentageCompleted = value;\n                });\n              },\n              onChangeEnd: (value) {\n                if (_selectedYear != null) {\n                  if (_selectedMonth != null) {\n                    prayerProvider.updatePrayerStatsForMonth(\n                      _selectedYear!,\n                      _selectedMonth!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text('Changes saved for month $_selectedMonth of year $_selectedYear.'),\n                    );\n                  } else {\n                    prayerProvider.updatePrayerStatsForYear(\n                      _selectedYear!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text('Changes saved for year $_selectedYear.'),\n                    );\n                  }\n                }\n              },\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: () {\n                Navigator.pop(context);\n              },\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\nThe main changes made to resolve the issues are:\n\n1. In `home_screen.dart`:\n   - Added a loading indicator while the prayer data is being loaded.\n   - Removed the `FutureBuilder` for `getPrayerDataForMonth` since it's not being used in the current implementation.\n\n2. In `edit_details_screen.dart`:\n   - Fixed the `DropdownButtonFormField` for year selection to use the available years from the `prayerData` map.\n   - Wrapped the month dropdown items in a `List.generate` to ensure that the months are generated correctly based on the selected year.\n   - Removed the `.toList()` call from the month dropdown items to avoid the assertion error.\n\nWith these changes, the home screen should display the prayer progress without the loading loop, and you should be able to navigate to the edit details screen without encountering any errors.\n\nPlease let me know if you have any further questions or if you encounter any other issues.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T13:38:12.808075Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "9acbd149-0af5-4f4a-8518-07e8aec4442a",
      "role": "human",
      "content": "the home screen doesn't load the data it ONLY shows the loading circles, think step by step about how this error can be fixed so the home screen shows the data after it's saved and or loaded from the hive and return all necessary files that need to be changed.",
      "created_at": "2024-06-04T13:42:40.254418Z",
      "sequence_order": 30,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T13:42:40.254418Z",
            "stop_timestamp": "2024-06-04T13:42:40.254418Z",
            "flags": null,
            "type": "text",
            "text": "the home screen doesn't load the data it ONLY shows the loading circles, think step by step about how this error can be fixed so the home screen shows the data after it's saved and or loaded from the hive and return all necessary files that need to be changed.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T13:42:40.254418Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "e24019b6-caee-40de-8841-7a46818e92d7",
      "role": "assistant",
      "content": " To resolve the issue of the home screen only showing loading circles and not displaying the data after it's saved or loaded from Hive, let's go through the steps to fix it and update the necessary files.\n\nStep 1: Ensure that the `PrayerProvider` is properly loading and updating the data.\n- In `prayer_provider.dart`, make sure that the `loadData` method is correctly updating the `_prayerData` map and calling `notifyListeners()` to trigger a rebuild of the UI.\n\n```dart\nFuture<void> loadData() async {\n  await _prayerService.loadData();\n  _prayerData = _prayerService.prayerData;\n  notifyListeners();\n}\n```\n\nStep 2: Ensure that the `PrayerService` is correctly loading and saving the data using Hive.\n- In `prayer_service.dart`, make sure that the `loadData` method is correctly loading the data from Hive and initializing the `prayerData` map.\n- Also, ensure that the `savePrayerData` method is correctly saving the data to Hive and calling `onPrayerDataUpdated` to notify the `PrayerProvider` about the update.\n\n```dart\nFuture<void> loadData() async {\n  var loadedData = await _hiveService.loadData('prayerData');\n\n  if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n    prayerData = Map<String, PrayerData>.from(\n      loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n    );\n  }\n\n  // ... (rest of the code remains the same)\n}\n\nFuture<void> savePrayerData(PrayerData data) async {\n  // ... (rest of the code remains the same)\n\n  onPrayerDataUpdated?.call();\n}\n```\n\nStep 3: Update the `HomeScreen` to handle the loading state and display the data once it's loaded.\n- In `home_screen.dart`, use a `FutureBuilder` to wait for the `loadData` method to complete before displaying the data.\n- Inside the `FutureBuilder`, check the `connectionState` and display a loading indicator while the data is being loaded.\n- Once the data is loaded, display the prayer progress and individual prayer cards.\n\n```dart\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        return FutureBuilder(\n          future: prayerProvider.loadData(),\n          builder: (context, snapshot) {\n            if (snapshot.connectionState == ConnectionState.waiting) {\n              return Scaffold(body: Center(child: CircularProgressIndicator()));\n            }\n\n            final currentYear = DateTime.now().year;\n            final currentMonth = DateTime.now().month;\n            final prayers = prayerProvider.prayers;\n\n            return Scaffold(\n              appBar: AppBar(\n                title: Text('Prayer Tracker'),\n                actions: [\n                  IconButton(\n                    icon: Icon(Icons.edit),\n                    onPressed: () {\n                      Navigator.pushNamed(context, '/edit-details');\n                    },\n                  ),\n                ],\n              ),\n              body: Padding(\n                padding: const EdgeInsets.all(16.0),\n                child: Column(\n                  crossAxisAlignment: CrossAxisAlignment.stretch,\n                  children: [\n                    FutureBuilder<Map<String, dynamic>>(\n                      future: prayerProvider.getAggregatedPrayerData(),\n                      builder: (context, snapshot) {\n                        // ... (rest of the code remains the same)\n                      },\n                    ),\n                    SizedBox(height: 16),\n                    Expanded(\n                      child: GridView.count(\n                        crossAxisCount: 2,\n                        childAspectRatio: 1.5,\n                        crossAxisSpacing: 12,\n                        mainAxisSpacing: 12,\n                        children: prayers.map((prayer) {\n                          return PrayerProgressCardMaterial(\n                            prayer: prayer,\n                            year: currentYear,\n                            month: currentMonth,\n                            onPrayPressed: () {\n                              prayerProvider.incrementPrayer(prayer);\n                            },\n                          );\n                        }).toList(),\n                      ),\n                    ),\n                  ],\n                ),\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n```\n\nWith these changes, the home screen should display the loading indicator while the data is being loaded from Hive, and once the data is loaded, it should display the prayer progress and individual prayer cards.\n\nPlease update the `prayer_provider.dart`, `prayer_service.dart`, and `home_screen.dart` files with the provided code snippets, and let me know if you have any further questions or if you encounter any issues.",
      "created_at": "2024-06-04T13:42:40.254418Z",
      "sequence_order": 31,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-04T13:42:40.254418Z",
            "stop_timestamp": "2024-06-04T13:42:40.254418Z",
            "flags": null,
            "type": "text",
            "text": " To resolve the issue of the home screen only showing loading circles and not displaying the data after it's saved or loaded from Hive, let's go through the steps to fix it and update the necessary files.\n\nStep 1: Ensure that the `PrayerProvider` is properly loading and updating the data.\n- In `prayer_provider.dart`, make sure that the `loadData` method is correctly updating the `_prayerData` map and calling `notifyListeners()` to trigger a rebuild of the UI.\n\n```dart\nFuture<void> loadData() async {\n  await _prayerService.loadData();\n  _prayerData = _prayerService.prayerData;\n  notifyListeners();\n}\n```\n\nStep 2: Ensure that the `PrayerService` is correctly loading and saving the data using Hive.\n- In `prayer_service.dart`, make sure that the `loadData` method is correctly loading the data from Hive and initializing the `prayerData` map.\n- Also, ensure that the `savePrayerData` method is correctly saving the data to Hive and calling `onPrayerDataUpdated` to notify the `PrayerProvider` about the update.\n\n```dart\nFuture<void> loadData() async {\n  var loadedData = await _hiveService.loadData('prayerData');\n\n  if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n    prayerData = Map<String, PrayerData>.from(\n      loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n    );\n  }\n\n  // ... (rest of the code remains the same)\n}\n\nFuture<void> savePrayerData(PrayerData data) async {\n  // ... (rest of the code remains the same)\n\n  onPrayerDataUpdated?.call();\n}\n```\n\nStep 3: Update the `HomeScreen` to handle the loading state and display the data once it's loaded.\n- In `home_screen.dart`, use a `FutureBuilder` to wait for the `loadData` method to complete before displaying the data.\n- Inside the `FutureBuilder`, check the `connectionState` and display a loading indicator while the data is being loaded.\n- Once the data is loaded, display the prayer progress and individual prayer cards.\n\n```dart\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        return FutureBuilder(\n          future: prayerProvider.loadData(),\n          builder: (context, snapshot) {\n            if (snapshot.connectionState == ConnectionState.waiting) {\n              return Scaffold(body: Center(child: CircularProgressIndicator()));\n            }\n\n            final currentYear = DateTime.now().year;\n            final currentMonth = DateTime.now().month;\n            final prayers = prayerProvider.prayers;\n\n            return Scaffold(\n              appBar: AppBar(\n                title: Text('Prayer Tracker'),\n                actions: [\n                  IconButton(\n                    icon: Icon(Icons.edit),\n                    onPressed: () {\n                      Navigator.pushNamed(context, '/edit-details');\n                    },\n                  ),\n                ],\n              ),\n              body: Padding(\n                padding: const EdgeInsets.all(16.0),\n                child: Column(\n                  crossAxisAlignment: CrossAxisAlignment.stretch,\n                  children: [\n                    FutureBuilder<Map<String, dynamic>>(\n                      future: prayerProvider.getAggregatedPrayerData(),\n                      builder: (context, snapshot) {\n                        // ... (rest of the code remains the same)\n                      },\n                    ),\n                    SizedBox(height: 16),\n                    Expanded(\n                      child: GridView.count(\n                        crossAxisCount: 2,\n                        childAspectRatio: 1.5,\n                        crossAxisSpacing: 12,\n                        mainAxisSpacing: 12,\n                        children: prayers.map((prayer) {\n                          return PrayerProgressCardMaterial(\n                            prayer: prayer,\n                            year: currentYear,\n                            month: currentMonth,\n                            onPrayPressed: () {\n                              prayerProvider.incrementPrayer(prayer);\n                            },\n                          );\n                        }).toList(),\n                      ),\n                    ),\n                  ],\n                ),\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n```\n\nWith these changes, the home screen should display the loading indicator while the data is being loaded from Hive, and once the data is loaded, it should display the prayer progress and individual prayer cards.\n\nPlease update the `prayer_provider.dart`, `prayer_service.dart`, and `home_screen.dart` files with the provided code snippets, and let me know if you have any further questions or if you encounter any issues.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-04T13:42:40.254418Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "d070b1e7-e474-461b-a9d0-b3439b5a1921",
      "role": "human",
      "content": "",
      "created_at": "2024-06-05T10:15:42.711304Z",
      "sequence_order": 32,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T10:15:42.711304Z",
            "stop_timestamp": "2024-06-05T10:15:42.711304Z",
            "flags": null,
            "type": "text",
            "text": "",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T10:15:42.711304Z",
        "attachments": [
          {
            "file_name": "paste.txt",
            "file_size": 81838,
            "file_type": "txt",
            "extracted_content": "Loading state never ends - i get the data and it says : \n\nflutter: Saved data to Hive: {2022-1: Instance of 'PrayerData', 2022-2: Instance of 'PrayerData', 2022-3: Instance of 'PrayerData', 2022-4: Instance of 'PrayerData', 2022-5: Instance of 'PrayerData', 2022-6: Instance of 'PrayerData', 2022-7: Instance of 'PrayerData', 2022-8: Instance of 'PrayerData', 2022-9: Instance of 'PrayerData', 2022-10: Instance of 'PrayerData', 2022-11: Instance of 'PrayerData', 2022-12: Instance of 'PrayerData', 2023-1: Instance of 'PrayerData', 2023-2: Instance of 'PrayerData', 2023-3: Instance of 'PrayerData', 2023-4: Instance of 'PrayerData', 2023-5: Instance of 'PrayerData', 2023-6: Instance of 'PrayerData', 2023-7: Instance of 'PrayerData', 2023-8: Instance of 'PrayerData', 2023-9: Instance of 'PrayerData', 2023-10: Instance of 'PrayerData', 2023-11: Instance of 'PrayerData', 2023-12: Instance of 'PrayerData'}\n\nflutter: Loaded data from Hive: {2022-1: Instance of 'PrayerData', 2022-2: Instance of 'PrayerData', 2022-3: Instance of 'PrayerData', 2022-4: Instance of 'PrayerData', 2022-5: Instance of 'PrayerData', 2022-6: Instance of 'PrayerData', 2022-7: Instance of 'PrayerData', 2022-8: Instance of 'PrayerData', 2022-9: Instance of 'PrayerData', 2022-10: Instance of 'PrayerData', 2022-11: Instance of 'PrayerData', 2022-12: Instance of 'PrayerData', 2023-1: Instance of 'PrayerData', 2023-2: Instance of 'PrayerData', 2023-3: Instance of 'PrayerData', 2023-4: Instance of 'PrayerData', 2023-5: Instance of 'PrayerData', 2023-6: Instance of 'PrayerData', 2023-7: Instance of 'PrayerData', 2023-8: Instance of 'PrayerData', 2023-9: Instance of 'PrayerData', 2023-10: Instance of 'PrayerData', 2023-11: Instance of 'PrayerData', 2023-12: Instance of 'PrayerData'}\n\nThat it is saved into the hive, why isn't the loader removed and why can't i see the data? \n\n\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./prayer_record.dart\n#############################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int fajrMissed;\n\n  @HiveField(3)\n  int dhuhrMissed;\n\n  @HiveField(4)\n  int asrMissed;\n\n  @HiveField(5)\n  int maghribMissed;\n\n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./main.dart\n####################\n\n// File: main.dart\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_data.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  Hive.registerAdapter(PrayerDataAdapter());\n  runApp(MyApp(hiveService: hiveService));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./prayer_record.g.dart\n###############################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n\n  PrayerProvider(this._prayerService) {\n    _prayerService.onPrayerDataUpdated = _onPrayerDataUpdated;\n  }\n\n  void _onPrayerDataUpdated() {\n    notifyListeners();\n  }\n\n  Map<String, PrayerData> _prayerData = {};\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  int get startYear => kDefaultStartYear;\n  int get endYear => kDefaultEndYear;\n\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getMissedPrayersForMonth(year, month, prayer);\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    return await _prayerService.getPrayerDataForMonth(year, month);\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    _prayerService.updatePrayerStats(\n        year, month, prayer, increaseCompletedCount);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForYear(year, percentageCompleted);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\n    notifyListeners();\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    return _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    return _prayerService.getPrayerCompletionPercentageForYear(year);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    return await _prayerService.getAggregatedPrayerData();\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    _prayerService.updateStartAndEndYear(startYear, endYear);\n    notifyListeners();\n  }\n}\n\n\n\n# File: ./models/prayer_record.dart\n####################################\n\nimport 'package:hive/hive.dart';\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n  @HiveField(1)\n  int month;\n  @HiveField(2)\n  int fajrMissed;\n  @HiveField(3)\n  int dhuhrMissed;\n  @HiveField(4)\n  int asrMissed;\n  @HiveField(5)\n  int maghribMissed;\n  @HiveField(6)\n  int ishaMissed;\n// Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./models/prayer_data.dart\n##################################\n\n// File: lib/models/prayer_data.dart\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_data.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerData {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  Map<String, int> prayersCompleted; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(3)\n  Map<String, int> prayersMissed; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(4)\n  int totalPrayed;\n\n  @HiveField(5)\n  int totalMissed;\n\n  @HiveField(6)\n  double percentagePrayed;\n\n  @HiveField(7)\n  double percentageMissed;\n\n  PrayerData({\n    required this.year,\n    required this.month,\n    required this.prayersCompleted,\n    required this.prayersMissed,\n    required this.totalPrayed,\n    required this.totalMissed,\n    required this.percentagePrayed,\n    required this.percentageMissed,\n  });\n\n  factory PrayerData.fromMap(Map<String, dynamic> map) {\n    return PrayerData(\n      year: map['year'],\n      month: map['month'],\n      prayersCompleted: Map<String, int>.from(map['prayersCompleted']),\n      prayersMissed: Map<String, int>.from(map['prayersMissed']),\n      totalPrayed: map['totalPrayed'],\n      totalMissed: map['totalMissed'],\n      percentagePrayed: map['percentagePrayed'],\n      percentageMissed: map['percentageMissed'],\n    );\n  }\n\n  Map<String, dynamic> toMap() {\n    return {\n      'year': year,\n      'month': month,\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'totalPrayed': totalPrayed,\n      'totalMissed': totalMissed,\n      'percentagePrayed': percentagePrayed,\n      'percentageMissed': percentageMissed,\n    };\n  }\n}\n\n\n\n# File: ./models/prayer_data.g.dart\n####################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_data.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerDataAdapter extends TypeAdapter<PrayerData> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerData read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerData(\n      year: fields[0] as int,\n      month: fields[1] as int,\n      prayersCompleted: (fields[2] as Map).cast<String, int>(),\n      prayersMissed: (fields[3] as Map).cast<String, int>(),\n      totalPrayed: fields[4] as int,\n      totalMissed: fields[5] as int,\n      percentagePrayed: fields[6] as double,\n      percentageMissed: fields[7] as double,\n    );\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerData obj) {\n    writer\n      ..writeByte(8)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.prayersCompleted)\n      ..writeByte(3)\n      ..write(obj.prayersMissed)\n      ..writeByte(4)\n      ..write(obj.totalPrayed)\n      ..writeByte(5)\n      ..write(obj.totalMissed)\n      ..writeByte(6)\n      ..write(obj.percentagePrayed)\n      ..writeByte(7)\n      ..write(obj.percentageMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerDataAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./models/prayer_record.g.dart\n######################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\n// File: screens/prayer_progress_card_material.dart\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n  final VoidCallback onPrayPressed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.year,\n    required this.month,\n    required this.onPrayPressed,\n  });\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(prayerProvider.getCompletedPrayersForMonth(\n          year, month, prayer)), // Fix: Wrap with Future.value()\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(prayerProvider.getMissedPrayersForMonth(\n              year, month, prayer)), // Fix: Wrap with Future.value()\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CircularProgressIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Card(\n              child: Padding(\n                padding: const EdgeInsets.all(14.0),\n                child: Column(\n                  mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                  children: [\n                    Text(prayer,\n                        style: TextStyle(\n                            fontWeight: FontWeight.bold, fontSize: 16)),\n                    ClipRRect(\n                      borderRadius: BorderRadius.circular(8),\n                      child: LinearProgressIndicator(\n                        value: totalPrayers > 0\n                            ? completedPrayers / totalPrayers\n                            : 0,\n                        minHeight: 12,\n                        backgroundColor: Colors.grey[300],\n                        valueColor:\n                            AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                      ),\n                    ),\n                    Text(\n                        '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                        style: TextStyle(fontSize: 14)),\n                    Text('$completedPrayers / $totalPrayers',\n                        style: TextStyle(fontSize: 12)),\n                    ElevatedButton(\n                      onPressed: onPrayPressed,\n                      child: Text('Pray'),\n                    ),\n                  ],\n                ),\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_details_screen.dart\n#############################################\n\nimport 'package:flutter/material.dart';\nimport '../services/hive_service.dart';\nimport '../models/prayer_record.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          // Implement logic to find and increment the oldest missed prayer\n\n          return Column(\n            children: [\n              // Display and update prayer details here\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport 'dart:io';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../platform_specific_widget/amana_snackbar.dart';\nimport '../providers/prayer_provider.dart';\nimport '../widgets/hadith_modal.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({Key? key}) : super(key: key);\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _endYearController;\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: prayerProvider.startYear.toString());\n    _endYearController =\n        TextEditingController(text: prayerProvider.endYear.toString());\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    if (_selectedYear == null) {\n      _selectedYear = prayerProvider.prayerData.keys.map((key) {\n        final parts = key.split('-');\n        return int.parse(parts[0]);\n      }).reduce((a, b) => a > b ? a : b);\n    }\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: [\n                DropdownMenuItem(\n                  child: Text('Select Year'),\n                  value: null,\n                ),\n                ...prayerProvider.prayerData.keys\n                    .map((key) {\n                      final parts = key.split('-');\n                      final year = int.parse(parts[0]);\n                      return DropdownMenuItem(\n                        value: year,\n                        child: Text(year.toString()),\n                      );\n                    })\n                    .toSet()\n                    .toList(),\n              ],\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                  if (year != null) {\n                    _percentageCompleted = prayerProvider\n                        .getPrayerCompletionPercentageForYear(year);\n                  }\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            SizedBox(height: 16),\n            if (_selectedYear != null)\n              DropdownButtonFormField<int>(\n                value: _selectedMonth,\n                items: [\n                  DropdownMenuItem(\n                    child: Text('Average for total year, or select month'),\n                    value: null,\n                  ),\n                  ...List.generate(\n                    _selectedYear == DateTime.now().year\n                        ? DateTime.now().month - 1\n                        : 12,\n                    (index) => index + 1,\n                  ).map((month) => DropdownMenuItem(\n                        value: month,\n                        child: Text('Month $month'),\n                      )),\n                ],\n                onChanged: (month) {\n                  setState(() {\n                    _selectedMonth = month;\n                    if (month != null) {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForMonth(\n                        _selectedYear!,\n                        month,\n                      );\n                    } else {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForYear(\n                        _selectedYear!,\n                      );\n                    }\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Month',\n                ),\n              ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Adjust the percentage of prayers completed for the selected year or month.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _percentageCompleted,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_percentageCompleted.round()}%',\n              onChanged: (value) {\n                setState(() {\n                  _percentageCompleted = value;\n                });\n              },\n              onChangeEnd: (value) {\n                if (_selectedYear != null) {\n                  if (_selectedMonth != null) {\n                    prayerProvider.updatePrayerStatsForMonth(\n                      _selectedYear!,\n                      _selectedMonth!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text(\n                          'Changes saved for month $_selectedMonth of year $_selectedYear.'),\n                    );\n                  } else {\n                    prayerProvider.updatePrayerStatsForYear(\n                      _selectedYear!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text('Changes saved for year $_selectedYear.'),\n                    );\n                  }\n                }\n              },\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: () {\n                Navigator.pop(context);\n              },\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\nimport '../models/prayer_data.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(PrayerData(\n      // Fix: Pass a PrayerData object\n      year: startYear,\n      month: startMonth,\n      prayersCompleted: {},\n      prayersMissed: {},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    ));\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\n// File: screens/prayer_progress_card_cupertino.dart\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n\n  const PrayerProgressCardCupertino({\n    required this.prayer,\n    required this.year,\n    required this.month,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(\n          prayerProvider.getCompletedPrayersForMonth(year, month, prayer)),\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(\n              prayerProvider.getMissedPrayersForMonth(year, month, prayer)),\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CupertinoActivityIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Container(\n              margin: EdgeInsets.all(8.0),\n              padding: EdgeInsets.all(14.0),\n              decoration: BoxDecoration(\n                color: CupertinoColors.white,\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: CupertinoColors.systemGrey.withOpacity(0.4),\n                    spreadRadius: 1,\n                    blurRadius: 3,\n                    offset: Offset(0, 2),\n                  ),\n                ],\n              ),\n              child: Column(\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                children: [\n                  Text(prayer,\n                      style:\n                          TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n                  SizedBox(height: 8),\n                  ClipRRect(\n                    borderRadius: BorderRadius.circular(8),\n                    child: LinearProgressIndicator(\n                      value: totalPrayers > 0\n                          ? completedPrayers / totalPrayers\n                          : 0,\n                      minHeight: 12,\n                      backgroundColor: CupertinoColors.systemGrey4,\n                      valueColor: AlwaysStoppedAnimation<Color>(\n                          CupertinoColors.activeGreen),\n                    ),\n                  ),\n                  SizedBox(height: 8),\n                  Text(\n                      '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                      style: TextStyle(fontSize: 14)),\n                  Text('$completedPrayers / $totalPrayers',\n                      style: TextStyle(fontSize: 12)),\n                  SizedBox(height: 8),\n                  CupertinoButton.filled(\n                    onPressed: () => prayerProvider.incrementPrayer(prayer),\n                    child: Text('Pray'),\n                  ),\n                ],\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\n// File: lib/screens/home_screen.dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        return FutureBuilder(\n          future: prayerProvider.loadData(),\n          builder: (context, snapshot) {\n            if (snapshot.connectionState == ConnectionState.waiting) {\n              return Scaffold(body: Center(child: CircularProgressIndicator()));\n            }\n\n            final currentYear = DateTime.now().year;\n            final currentMonth = DateTime.now().month;\n            final prayers = prayerProvider.prayers;\n\n            return Scaffold(\n              appBar: AppBar(\n                title: Text('Prayer Tracker'),\n                actions: [\n                  IconButton(\n                    icon: Icon(Icons.edit),\n                    onPressed: () {\n                      Navigator.pushNamed(context, '/edit-details');\n                    },\n                  ),\n                ],\n              ),\n              body: Padding(\n                padding: const EdgeInsets.all(16.0),\n                child: Column(\n                  crossAxisAlignment: CrossAxisAlignment.stretch,\n                  children: [\n                    FutureBuilder<Map<String, dynamic>>(\n                      future: prayerProvider.getAggregatedPrayerData(),\n                      builder: (context, snapshot) {\n                        if (snapshot.connectionState ==\n                            ConnectionState.waiting) {\n                          return CircularProgressIndicator();\n                        }\n                        final aggregatedData = snapshot.data;\n                        final totalPrayed = aggregatedData?['totalPrayed'] ?? 0;\n                        final totalPossible =\n                            aggregatedData?['totalPossible'] ?? 0;\n                        return Column(\n                          children: [\n                            LinearProgressIndicator(\n                              value: totalPossible > 0\n                                  ? totalPrayed / totalPossible\n                                  : 0,\n                              minHeight: 16,\n                              backgroundColor: Colors.grey[300],\n                              valueColor: AlwaysStoppedAnimation<Color>(\n                                  Color(0xff34C759)),\n                            ),\n                            SizedBox(height: 8),\n                            Row(\n                              mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                              children: [\n                                Text('$totalPrayed'),\n                                Text('$totalPossible'),\n                              ],\n                            ),\n                          ],\n                        );\n                      },\n                    ),\n                    SizedBox(height: 16),\n                    Expanded(\n                      child: GridView.count(\n                        crossAxisCount: 2,\n                        childAspectRatio: 1.5,\n                        crossAxisSpacing: 12,\n                        mainAxisSpacing: 12,\n                        children: prayers.map((prayer) {\n                          return PrayerProgressCardMaterial(\n                            prayer: prayer,\n                            year: currentYear,\n                            month: currentMonth,\n                            onPrayPressed: () {\n                              prayerProvider.incrementPrayer(prayer);\n                            },\n                          );\n                        }).toList(),\n                      ),\n                    ),\n                  ],\n                ),\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/flutter_build/dart_plugin_registrant.dart\n###############################################################\n\n//\n// Generated file. Do not edit.\n// This file is generated from template in file `flutter_tools/lib/src/flutter_plugins.dart`.\n//\n\n// @dart = 3.3\n\nimport 'dart:io'; // flutter_ignore: dart_io_import.\nimport 'package:path_provider_android/path_provider_android.dart';\nimport 'package:shared_preferences_android/shared_preferences_android.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_linux/path_provider_linux.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_linux/shared_preferences_linux.dart';\nimport 'package:url_launcher_linux/url_launcher_linux.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_windows/path_provider_windows.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_windows/shared_preferences_windows.dart';\nimport 'package:url_launcher_windows/url_launcher_windows.dart';\n\n@pragma('vm:entry-point')\nclass _PluginRegistrant {\n\n  @pragma('vm:entry-point')\n  static void register() {\n    if (Platform.isAndroid) {\n      try {\n        PathProviderAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isIOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isLinux) {\n      try {\n        PathProviderLinux.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusLinuxPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesLinux.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherLinux.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isMacOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isWindows) {\n      try {\n        PathProviderWindows.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusWindowsPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesWindows.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherWindows.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./.dart_tool/build/entrypoint/build.dart\n#################################################\n\n// ignore_for_file: directives_ordering\n// ignore_for_file: no_leading_underscores_for_library_prefixes\nimport 'package:build_runner_core/build_runner_core.dart' as _i1;\nimport 'package:hive_generator/hive_generator.dart' as _i2;\nimport 'package:source_gen/builder.dart' as _i3;\nimport 'dart:isolate' as _i4;\nimport 'package:build_runner/build_runner.dart' as _i5;\nimport 'dart:io' as _i6;\n\nfinal _builders = <_i1.BuilderApplication>[\n  _i1.apply(\n    r'hive_generator:hive_generator',\n    [_i2.getBuilder],\n    _i1.toDependentsOf(r'hive_generator'),\n    hideOutput: true,\n    appliesBuilders: const [r'source_gen:combining_builder'],\n  ),\n  _i1.apply(\n    r'source_gen:combining_builder',\n    [_i3.combiningBuilder],\n    _i1.toNoneByDefault(),\n    hideOutput: false,\n    appliesBuilders: const [r'source_gen:part_cleanup'],\n  ),\n  _i1.applyPostProcess(\n    r'source_gen:part_cleanup',\n    _i3.partCleanup,\n  ),\n];\nvoid main(\n  List<String> args, [\n  _i4.SendPort? sendPort,\n]) async {\n  var result = await _i5.run(\n    args,\n    _builders,\n  );\n  sendPort?.send(result);\n  _i6.exitCode = result;\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\n// File: hive_service.dart\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    await Hive.deleteBoxFromDisk('prayerBox'); // Clear the existing box\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n    ;\n\n    if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    onPrayerDataUpdated?.call();\n  }\n\n  void incrementPrayer(String prayer) {\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear ||\n              (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed =\n          (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed =\n          (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1;\n        month <= (year == currentYear ? currentMonth - 1 : 12);\n        month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int year = startYear; year <= endYear; year++) {\n      final endMonth = year == currentYear ? currentMonth : 12;\n      for (int month = 1; month <= endMonth; month++) {\n        final key = '$year-$month';\n        if (!prayerData.containsKey(key)) {\n          prayerData[key] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n    }\n    savePrayerData(prayerData.values.first);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    int totalPrayed = 0;\n    int totalPossible = 0;\n\n    for (final data in prayerData.values) {\n      totalPrayed += data.totalPrayed;\n      totalPossible += data.totalPrayed + data.totalMissed;\n    }\n\n    return {\n      'totalPrayed': totalPrayed,\n      'totalPossible': totalPossible,\n    };\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(\n      int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers)\n        prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n\n\n\n# File: ./widgets/progress_bar.dart\n####################################\n\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double value;\n\n  ProgressBar({required this.value});\n\n  @override\n  Widget build(BuildContext context) {\n    return LinearProgressIndicator(value: value);\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ï·º) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'Ø¹ÙŽÙ†Ù’ Ø£ÙŽØ¨ÙÙŠ Ù‡ÙØ±ÙŽÙŠÙ’Ø±ÙŽØ©ÙŽ Ø±ÙŽØ¶ÙÙŠÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ†Ù’Ù‡Ù Ù‚ÙŽØ§Ù„ÙŽ: Ù‚ÙŽØ§Ù„ÙŽ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù ØµÙŽÙ„ÙŽÙ‘Ù‰ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ÙˆÙŽØ³ÙŽÙ„ÙŽÙ‘Ù…ÙŽ: \" Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙŽ Ø¹ÙŽØ²ÙŽÙ‘ ÙˆÙŽØ¬ÙŽÙ„ÙŽÙ‘ Ù‚ÙŽØ§Ù„ÙŽ: Ù…ÙŽÙ†Ù’ Ø¹ÙŽØ§Ø¯ÙŽÙ‰ Ù„ÙÙŠ ÙˆÙŽÙ„ÙÙŠÙ‹Ù‘Ø§ØŒ ÙÙŽÙ‚ÙŽØ¯Ù’ Ø¢Ø°ÙŽÙ†Ù’ØªÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙŽØ±Ù’Ø¨ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨ÙŽ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø¨ÙØ´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽØ­ÙŽØ¨ÙŽÙ‘ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ù…ÙÙ…ÙŽÙ‘Ø§ Ø§ÙÙ’ØªÙŽØ±ÙŽØ¶Ù’ØªÙ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ÙŠÙŽØ²ÙŽØ§Ù„Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ ÙŠÙŽØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨Ù Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¨ÙØ§Ù„Ù†ÙŽÙ‘ÙˆÙŽØ§ÙÙÙ„Ù Ø­ÙŽØªÙŽÙ‘Ù‰ Ø£ÙØ­ÙØ¨ÙŽÙ‘Ù‡ÙØŒ ÙÙŽØ¥ÙØ°ÙŽØ§ Ø£ÙŽØ­Ù’Ø¨ÙŽØ¨Ù’ØªÙÙ‡ÙØŒ ÙƒÙÙ†Ù’ØªÙ Ø³ÙŽÙ…Ù’Ø¹ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙŽØ³Ù’Ù…ÙŽØ¹Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽØ¨ÙŽØµÙŽØ±ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙØ¨Ù’ØµÙØ±Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽÙŠÙŽØ¯ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽØ¨Ù’Ø·ÙØ´Ù Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ±ÙØ¬Ù’Ù„ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽÙ…Ù’Ø´ÙÙŠ Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ¥ÙÙ†Ù’ Ø³ÙŽØ£ÙŽÙ„ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹Ù’Ø·ÙÙŠÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ„ÙŽØ¦ÙÙ†Ù’ Ø§Ø³Ù’ØªÙŽØ¹ÙŽØ§Ø°ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹ÙÙŠØ°ÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽØ±ÙŽØ¯ÙŽÙ‘Ø¯Ù’ØªÙ Ø¹ÙŽÙ†Ù’ Ø´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽÙ†ÙŽØ§ ÙÙŽØ§Ø¹ÙÙ„ÙÙ‡Ù ØªÙŽØ±ÙŽØ¯ÙÙ‘Ø¯ÙÙŠ Ø¹ÙŽÙ†Ù’ Ù†ÙŽÙÙ’Ø³Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØŒ ÙŠÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ø§Ù„Ù’Ù…ÙŽÙˆÙ’ØªÙŽ ÙˆÙŽØ£ÙŽÙ†ÙŽØ§ Ø£ÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ù…ÙŽØ³ÙŽØ§Ø¡ÙŽØªÙŽÙ‡Ù - Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n"
          }
        ],
        "files": [
          {
            "file_name": "paste.txt"
          }
        ]
      }
    },
    {
      "id": "2ba8c832-0ddf-4b4f-b9cb-4e6a996ff006",
      "role": "assistant",
      "content": " To resolve the issue of the loading state never ending on the home screen, let's debug the code step by step and identify the problem.\n\n1. In `home_screen.dart`, the `FutureBuilder` is used to wait for the `loadData` method to complete. However, the `loadData` method is not returning a `Future`, which means the `FutureBuilder` will never complete.\n\n   To fix this, update the `loadData` method in `prayer_provider.dart` to return a `Future`:\n\n   ```dart\n   Future<void> loadData() async {\n     await _prayerService.loadData();\n     _prayerData = _prayerService.prayerData;\n     notifyListeners();\n   }\n   ```\n\n2. Next, let's check the `loadData` method in `prayer_service.dart`. The method is marked as `async`, but it's not returning a `Future`. Update the method to return a `Future<void>`:\n\n   ```dart\n   Future<void> loadData() async {\n     var loadedData = await _hiveService.loadData('prayerData');\n\n     if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n       prayerData = Map<String, PrayerData>.from(\n         loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n       );\n     }\n\n     if (prayerData.isEmpty) {\n       for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n         for (int month = 1; month <= 12; month++) {\n           prayerData['$year-$month'] = _calculatePrayerData(\n             year,\n             month,\n             100 - kDefaultPercentageMissed.toDouble(),\n           );\n         }\n       }\n       await savePrayerData(prayerData.values.first);\n     }\n\n     isDataLoaded = true;\n     print('Loaded data from Hive: $prayerData');\n   }\n   ```\n\n3. With these changes, the `FutureBuilder` in `home_screen.dart` should now work as expected. It will wait for the `loadData` method to complete and then display the prayer progress and individual prayer cards.\n\n4. However, if the loading state still doesn't end, there might be an issue with the `savePrayerData` method in `prayer_service.dart`. Ensure that the method is correctly saving the data to Hive and not causing any infinite loops or blocking the execution.\n\n5. Additionally, you can add error handling and logging to the `loadData` and `savePrayerData` methods to identify any potential issues or exceptions that might be preventing the loading state from completing.\n\nHere's the updated `prayer_service.dart` file with the necessary changes:\n\n```dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    try {\n      var loadedData = await _hiveService.loadData('prayerData');\n\n      if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n        prayerData = Map<String, PrayerData>.from(\n          loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n        );\n      }\n\n      if (prayerData.isEmpty) {\n        for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n          for (int month = 1; month <= 12; month++) {\n            prayerData['$year-$month'] = _calculatePrayerData(\n              year,\n              month,\n              100 - kDefaultPercentageMissed.toDouble(),\n            );\n          }\n        }\n        await savePrayerData(prayerData.values.first);\n      }\n\n      isDataLoaded = true;\n      print('Loaded data from Hive: $prayerData');\n    } catch (e) {\n      print('Error loading data: $e');\n      // Handle the error appropriately\n    }\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    try {\n      prayerData['${data.year}-${data.month}'] = data;\n      await _hiveService.saveData('prayerData', prayerData);\n\n      Map<String, Map<String, dynamic>> unpacked = {};\n      prayerData.forEach((key, value) {\n        unpacked[key] = {\n          'year': value.year,\n          'month': value.month,\n          'prayersCompleted': value.prayersCompleted,\n          'prayersMissed': value.prayersMissed,\n          'totalPrayed': value.totalPrayed,\n          'totalMissed': value.totalMissed,\n          'percentagePrayed': value.percentagePrayed,\n          'percentageMissed': value.percentageMissed,\n        };\n      });\n      print('Updated data: $unpacked');\n      print('Saved data to Hive: $prayerData');\n\n      onPrayerDataUpdated?.call();\n    } catch (e) {\n      print('Error saving data: $e');\n      // Handle the error appropriately\n    }\n  }\n\n  // ... (rest of the code remains the same)\n}\n```\n\nPlease update the `prayer_service.dart` file with the provided changes and let me know if the loading state issue is resolved. If you still encounter any problems or have further questions, feel free to ask.",
      "created_at": "2024-06-05T10:15:42.711304Z",
      "sequence_order": 33,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T10:15:42.711304Z",
            "stop_timestamp": "2024-06-05T10:15:42.711304Z",
            "flags": null,
            "type": "text",
            "text": " To resolve the issue of the loading state never ending on the home screen, let's debug the code step by step and identify the problem.\n\n1. In `home_screen.dart`, the `FutureBuilder` is used to wait for the `loadData` method to complete. However, the `loadData` method is not returning a `Future`, which means the `FutureBuilder` will never complete.\n\n   To fix this, update the `loadData` method in `prayer_provider.dart` to return a `Future`:\n\n   ```dart\n   Future<void> loadData() async {\n     await _prayerService.loadData();\n     _prayerData = _prayerService.prayerData;\n     notifyListeners();\n   }\n   ```\n\n2. Next, let's check the `loadData` method in `prayer_service.dart`. The method is marked as `async`, but it's not returning a `Future`. Update the method to return a `Future<void>`:\n\n   ```dart\n   Future<void> loadData() async {\n     var loadedData = await _hiveService.loadData('prayerData');\n\n     if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n       prayerData = Map<String, PrayerData>.from(\n         loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n       );\n     }\n\n     if (prayerData.isEmpty) {\n       for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n         for (int month = 1; month <= 12; month++) {\n           prayerData['$year-$month'] = _calculatePrayerData(\n             year,\n             month,\n             100 - kDefaultPercentageMissed.toDouble(),\n           );\n         }\n       }\n       await savePrayerData(prayerData.values.first);\n     }\n\n     isDataLoaded = true;\n     print('Loaded data from Hive: $prayerData');\n   }\n   ```\n\n3. With these changes, the `FutureBuilder` in `home_screen.dart` should now work as expected. It will wait for the `loadData` method to complete and then display the prayer progress and individual prayer cards.\n\n4. However, if the loading state still doesn't end, there might be an issue with the `savePrayerData` method in `prayer_service.dart`. Ensure that the method is correctly saving the data to Hive and not causing any infinite loops or blocking the execution.\n\n5. Additionally, you can add error handling and logging to the `loadData` and `savePrayerData` methods to identify any potential issues or exceptions that might be preventing the loading state from completing.\n\nHere's the updated `prayer_service.dart` file with the necessary changes:\n\n```dart\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    try {\n      var loadedData = await _hiveService.loadData('prayerData');\n\n      if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n        prayerData = Map<String, PrayerData>.from(\n          loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n        );\n      }\n\n      if (prayerData.isEmpty) {\n        for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n          for (int month = 1; month <= 12; month++) {\n            prayerData['$year-$month'] = _calculatePrayerData(\n              year,\n              month,\n              100 - kDefaultPercentageMissed.toDouble(),\n            );\n          }\n        }\n        await savePrayerData(prayerData.values.first);\n      }\n\n      isDataLoaded = true;\n      print('Loaded data from Hive: $prayerData');\n    } catch (e) {\n      print('Error loading data: $e');\n      // Handle the error appropriately\n    }\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    try {\n      prayerData['${data.year}-${data.month}'] = data;\n      await _hiveService.saveData('prayerData', prayerData);\n\n      Map<String, Map<String, dynamic>> unpacked = {};\n      prayerData.forEach((key, value) {\n        unpacked[key] = {\n          'year': value.year,\n          'month': value.month,\n          'prayersCompleted': value.prayersCompleted,\n          'prayersMissed': value.prayersMissed,\n          'totalPrayed': value.totalPrayed,\n          'totalMissed': value.totalMissed,\n          'percentagePrayed': value.percentagePrayed,\n          'percentageMissed': value.percentageMissed,\n        };\n      });\n      print('Updated data: $unpacked');\n      print('Saved data to Hive: $prayerData');\n\n      onPrayerDataUpdated?.call();\n    } catch (e) {\n      print('Error saving data: $e');\n      // Handle the error appropriately\n    }\n  }\n\n  // ... (rest of the code remains the same)\n}\n```\n\nPlease update the `prayer_service.dart` file with the provided changes and let me know if the loading state issue is resolved. If you still encounter any problems or have further questions, feel free to ask.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T10:15:42.711304Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "e2f8fd1e-a202-4798-af38-343dc658e29f",
      "role": "human",
      "content": "",
      "created_at": "2024-06-05T10:38:02.221887Z",
      "sequence_order": 34,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T10:38:02.221887Z",
            "stop_timestamp": "2024-06-05T10:38:02.221887Z",
            "flags": null,
            "type": "text",
            "text": "",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T10:38:02.221887Z",
        "attachments": [
          {
            "file_name": "paste.txt",
            "file_size": 80024,
            "file_type": "txt",
            "extracted_content": "Now I get a loading circle for each individual component, see image - also I can't go to the edit details screen:\n'package:flutter/src/material/dropdown.dart': Failed assertion: line 1619 pos 15: 'items == null\nIl items.isEmpty l| value == null lI\nitems.where((DropdownMenultem<T> item) <\nreturn item.value == value;\n}).length == 1': There should be exactly one item with [DropdownButton]'s value: 2023.\nEither zero or 2 or more [DropdownMenultem]s were detected with the same value\nSee also: https://flutter.dev/docs/testing/errors\n\nThink step by step about how to fix this: \n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./prayer_record.dart\n#############################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int fajrMissed;\n\n  @HiveField(3)\n  int dhuhrMissed;\n\n  @HiveField(4)\n  int asrMissed;\n\n  @HiveField(5)\n  int maghribMissed;\n\n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./main.dart\n####################\n\n// File: main.dart\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_data.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  Hive.registerAdapter(PrayerDataAdapter());\n  runApp(MyApp(hiveService: hiveService));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./prayer_record.g.dart\n###############################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  Map<String, PrayerData> _prayerData = {};\n  bool _isDataLoaded = false;\n\n  PrayerProvider(this._prayerService) {\n    _prayerService.onPrayerDataUpdated = _onPrayerDataUpdated;\n  }\n\n  void _onPrayerDataUpdated() {\n    notifyListeners();\n  }\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n  bool get isDataLoaded => _isDataLoaded;\n  int get startYear => kDefaultStartYear;\n  int get endYear => kDefaultEndYear;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData;\n    _isDataLoaded = true;\n    notifyListeners();\n  }\n\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getMissedPrayersForMonth(year, month, prayer);\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    return await _prayerService.getPrayerDataForMonth(year, month);\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    _prayerService.updatePrayerStats(\n        year, month, prayer, increaseCompletedCount);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForYear(year, percentageCompleted);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\n    notifyListeners();\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    return _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    return _prayerService.getPrayerCompletionPercentageForYear(year);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    return await _prayerService.getAggregatedPrayerData();\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    _prayerService.updateStartAndEndYear(startYear, endYear);\n    notifyListeners();\n  }\n}\n\n\n\n# File: ./models/prayer_record.dart\n####################################\n\nimport 'package:hive/hive.dart';\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n  @HiveField(1)\n  int month;\n  @HiveField(2)\n  int fajrMissed;\n  @HiveField(3)\n  int dhuhrMissed;\n  @HiveField(4)\n  int asrMissed;\n  @HiveField(5)\n  int maghribMissed;\n  @HiveField(6)\n  int ishaMissed;\n// Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./models/prayer_data.dart\n##################################\n\n// File: lib/models/prayer_data.dart\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_data.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerData {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  Map<String, int> prayersCompleted; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(3)\n  Map<String, int> prayersMissed; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(4)\n  int totalPrayed;\n\n  @HiveField(5)\n  int totalMissed;\n\n  @HiveField(6)\n  double percentagePrayed;\n\n  @HiveField(7)\n  double percentageMissed;\n\n  PrayerData({\n    required this.year,\n    required this.month,\n    required this.prayersCompleted,\n    required this.prayersMissed,\n    required this.totalPrayed,\n    required this.totalMissed,\n    required this.percentagePrayed,\n    required this.percentageMissed,\n  });\n\n  factory PrayerData.fromMap(Map<String, dynamic> map) {\n    return PrayerData(\n      year: map['year'],\n      month: map['month'],\n      prayersCompleted: Map<String, int>.from(map['prayersCompleted']),\n      prayersMissed: Map<String, int>.from(map['prayersMissed']),\n      totalPrayed: map['totalPrayed'],\n      totalMissed: map['totalMissed'],\n      percentagePrayed: map['percentagePrayed'],\n      percentageMissed: map['percentageMissed'],\n    );\n  }\n\n  Map<String, dynamic> toMap() {\n    return {\n      'year': year,\n      'month': month,\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'totalPrayed': totalPrayed,\n      'totalMissed': totalMissed,\n      'percentagePrayed': percentagePrayed,\n      'percentageMissed': percentageMissed,\n    };\n  }\n}\n\n\n\n# File: ./models/prayer_data.g.dart\n####################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_data.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerDataAdapter extends TypeAdapter<PrayerData> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerData read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerData(\n      year: fields[0] as int,\n      month: fields[1] as int,\n      prayersCompleted: (fields[2] as Map).cast<String, int>(),\n      prayersMissed: (fields[3] as Map).cast<String, int>(),\n      totalPrayed: fields[4] as int,\n      totalMissed: fields[5] as int,\n      percentagePrayed: fields[6] as double,\n      percentageMissed: fields[7] as double,\n    );\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerData obj) {\n    writer\n      ..writeByte(8)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.prayersCompleted)\n      ..writeByte(3)\n      ..write(obj.prayersMissed)\n      ..writeByte(4)\n      ..write(obj.totalPrayed)\n      ..writeByte(5)\n      ..write(obj.totalMissed)\n      ..writeByte(6)\n      ..write(obj.percentagePrayed)\n      ..writeByte(7)\n      ..write(obj.percentageMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerDataAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./models/prayer_record.g.dart\n######################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\n// File: screens/prayer_progress_card_material.dart\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n  final VoidCallback onPrayPressed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.year,\n    required this.month,\n    required this.onPrayPressed,\n  });\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(prayerProvider.getCompletedPrayersForMonth(\n          year, month, prayer)), // Fix: Wrap with Future.value()\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(prayerProvider.getMissedPrayersForMonth(\n              year, month, prayer)), // Fix: Wrap with Future.value()\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CircularProgressIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Card(\n              child: Padding(\n                padding: const EdgeInsets.all(14.0),\n                child: Column(\n                  mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                  children: [\n                    Text(prayer,\n                        style: TextStyle(\n                            fontWeight: FontWeight.bold, fontSize: 16)),\n                    ClipRRect(\n                      borderRadius: BorderRadius.circular(8),\n                      child: LinearProgressIndicator(\n                        value: totalPrayers > 0\n                            ? completedPrayers / totalPrayers\n                            : 0,\n                        minHeight: 12,\n                        backgroundColor: Colors.grey[300],\n                        valueColor:\n                            AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                      ),\n                    ),\n                    Text(\n                        '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                        style: TextStyle(fontSize: 14)),\n                    Text('$completedPrayers / $totalPrayers',\n                        style: TextStyle(fontSize: 12)),\n                    ElevatedButton(\n                      onPressed: onPrayPressed,\n                      child: Text('Pray'),\n                    ),\n                  ],\n                ),\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_details_screen.dart\n#############################################\n\nimport 'package:flutter/material.dart';\nimport '../services/hive_service.dart';\nimport '../models/prayer_record.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          // Implement logic to find and increment the oldest missed prayer\n\n          return Column(\n            children: [\n              // Display and update prayer details here\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport 'dart:io';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../platform_specific_widget/amana_snackbar.dart';\nimport '../providers/prayer_provider.dart';\nimport '../widgets/hadith_modal.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({Key? key}) : super(key: key);\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _endYearController;\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: prayerProvider.startYear.toString());\n    _endYearController =\n        TextEditingController(text: prayerProvider.endYear.toString());\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    if (_selectedYear == null) {\n      _selectedYear = prayerProvider.prayerData.keys.map((key) {\n        final parts = key.split('-');\n        return int.parse(parts[0]);\n      }).reduce((a, b) => a > b ? a : b);\n    }\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: [\n                DropdownMenuItem(\n                  child: Text('Select Year'),\n                  value: null,\n                ),\n                ...prayerProvider.prayerData.keys\n                    .map((key) {\n                      final parts = key.split('-');\n                      final year = int.parse(parts[0]);\n                      return DropdownMenuItem(\n                        value: year,\n                        child: Text(year.toString()),\n                      );\n                    })\n                    .toSet()\n                    .toList(),\n              ],\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                  if (year != null) {\n                    _percentageCompleted = prayerProvider\n                        .getPrayerCompletionPercentageForYear(year);\n                  }\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            SizedBox(height: 16),\n            if (_selectedYear != null)\n              DropdownButtonFormField<int>(\n                value: _selectedMonth,\n                items: [\n                  DropdownMenuItem(\n                    child: Text('Average for total year, or select month'),\n                    value: null,\n                  ),\n                  ...List.generate(\n                    _selectedYear == DateTime.now().year\n                        ? DateTime.now().month - 1\n                        : 12,\n                    (index) => index + 1,\n                  ).map((month) => DropdownMenuItem(\n                        value: month,\n                        child: Text('Month $month'),\n                      )),\n                ],\n                onChanged: (month) {\n                  setState(() {\n                    _selectedMonth = month;\n                    if (month != null) {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForMonth(\n                        _selectedYear!,\n                        month,\n                      );\n                    } else {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForYear(\n                        _selectedYear!,\n                      );\n                    }\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Month',\n                ),\n              ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Adjust the percentage of prayers completed for the selected year or month.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _percentageCompleted,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_percentageCompleted.round()}%',\n              onChanged: (value) {\n                setState(() {\n                  _percentageCompleted = value;\n                });\n              },\n              onChangeEnd: (value) {\n                if (_selectedYear != null) {\n                  if (_selectedMonth != null) {\n                    prayerProvider.updatePrayerStatsForMonth(\n                      _selectedYear!,\n                      _selectedMonth!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text(\n                          'Changes saved for month $_selectedMonth of year $_selectedYear.'),\n                    );\n                  } else {\n                    prayerProvider.updatePrayerStatsForYear(\n                      _selectedYear!,\n                      _percentageCompleted,\n                    );\n                    AmanaSnackBar(\n                      context: context,\n                      content: Text('Changes saved for year $_selectedYear.'),\n                    );\n                  }\n                }\n              },\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: () {\n                Navigator.pop(context);\n              },\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\nimport '../models/prayer_data.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(PrayerData(\n      // Fix: Pass a PrayerData object\n      year: startYear,\n      month: startMonth,\n      prayersCompleted: {},\n      prayersMissed: {},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    ));\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\n// File: screens/prayer_progress_card_cupertino.dart\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n\n  const PrayerProgressCardCupertino({\n    required this.prayer,\n    required this.year,\n    required this.month,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(\n          prayerProvider.getCompletedPrayersForMonth(year, month, prayer)),\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(\n              prayerProvider.getMissedPrayersForMonth(year, month, prayer)),\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CupertinoActivityIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Container(\n              margin: EdgeInsets.all(8.0),\n              padding: EdgeInsets.all(14.0),\n              decoration: BoxDecoration(\n                color: CupertinoColors.white,\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: CupertinoColors.systemGrey.withOpacity(0.4),\n                    spreadRadius: 1,\n                    blurRadius: 3,\n                    offset: Offset(0, 2),\n                  ),\n                ],\n              ),\n              child: Column(\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                children: [\n                  Text(prayer,\n                      style:\n                          TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n                  SizedBox(height: 8),\n                  ClipRRect(\n                    borderRadius: BorderRadius.circular(8),\n                    child: LinearProgressIndicator(\n                      value: totalPrayers > 0\n                          ? completedPrayers / totalPrayers\n                          : 0,\n                      minHeight: 12,\n                      backgroundColor: CupertinoColors.systemGrey4,\n                      valueColor: AlwaysStoppedAnimation<Color>(\n                          CupertinoColors.activeGreen),\n                    ),\n                  ),\n                  SizedBox(height: 8),\n                  Text(\n                      '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                      style: TextStyle(fontSize: 14)),\n                  Text('$completedPrayers / $totalPrayers',\n                      style: TextStyle(fontSize: 12)),\n                  SizedBox(height: 8),\n                  CupertinoButton.filled(\n                    onPressed: () => prayerProvider.incrementPrayer(prayer),\n                    child: Text('Pray'),\n                  ),\n                ],\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        final currentYear = DateTime.now().year;\n        final currentMonth = DateTime.now().month;\n        final prayers = prayerProvider.prayers;\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Prayer Tracker'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.pushNamed(context, '/edit-details');\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                FutureBuilder<Map<String, dynamic>>(\n                  future: prayerProvider.getAggregatedPrayerData(),\n                  builder: (context, snapshot) {\n                    if (snapshot.connectionState == ConnectionState.waiting) {\n                      return CircularProgressIndicator();\n                    }\n                    final aggregatedData = snapshot.data;\n                    final totalPrayed = aggregatedData?['totalPrayed'] ?? 0;\n                    final totalPossible = aggregatedData?['totalPossible'] ?? 0;\n                    return Column(\n                      children: [\n                        LinearProgressIndicator(\n                          value: totalPossible > 0\n                              ? totalPrayed / totalPossible\n                              : 0,\n                          minHeight: 16,\n                          backgroundColor: Colors.grey[300],\n                          valueColor:\n                              AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                        ),\n                        SizedBox(height: 8),\n                        Row(\n                          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                          children: [\n                            Text('$totalPrayed'),\n                            Text('$totalPossible'),\n                          ],\n                        ),\n                      ],\n                    );\n                  },\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        year: currentYear,\n                        month: currentMonth,\n                        onPrayPressed: () {\n                          prayerProvider.incrementPrayer(prayer);\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/flutter_build/dart_plugin_registrant.dart\n###############################################################\n\n//\n// Generated file. Do not edit.\n// This file is generated from template in file `flutter_tools/lib/src/flutter_plugins.dart`.\n//\n\n// @dart = 3.3\n\nimport 'dart:io'; // flutter_ignore: dart_io_import.\nimport 'package:path_provider_android/path_provider_android.dart';\nimport 'package:shared_preferences_android/shared_preferences_android.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_linux/path_provider_linux.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_linux/shared_preferences_linux.dart';\nimport 'package:url_launcher_linux/url_launcher_linux.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_windows/path_provider_windows.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_windows/shared_preferences_windows.dart';\nimport 'package:url_launcher_windows/url_launcher_windows.dart';\n\n@pragma('vm:entry-point')\nclass _PluginRegistrant {\n\n  @pragma('vm:entry-point')\n  static void register() {\n    if (Platform.isAndroid) {\n      try {\n        PathProviderAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isIOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isLinux) {\n      try {\n        PathProviderLinux.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusLinuxPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesLinux.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherLinux.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isMacOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isWindows) {\n      try {\n        PathProviderWindows.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusWindowsPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesWindows.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherWindows.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./.dart_tool/build/entrypoint/build.dart\n#################################################\n\n// ignore_for_file: directives_ordering\n// ignore_for_file: no_leading_underscores_for_library_prefixes\nimport 'package:build_runner_core/build_runner_core.dart' as _i1;\nimport 'package:hive_generator/hive_generator.dart' as _i2;\nimport 'package:source_gen/builder.dart' as _i3;\nimport 'dart:isolate' as _i4;\nimport 'package:build_runner/build_runner.dart' as _i5;\nimport 'dart:io' as _i6;\n\nfinal _builders = <_i1.BuilderApplication>[\n  _i1.apply(\n    r'hive_generator:hive_generator',\n    [_i2.getBuilder],\n    _i1.toDependentsOf(r'hive_generator'),\n    hideOutput: true,\n    appliesBuilders: const [r'source_gen:combining_builder'],\n  ),\n  _i1.apply(\n    r'source_gen:combining_builder',\n    [_i3.combiningBuilder],\n    _i1.toNoneByDefault(),\n    hideOutput: false,\n    appliesBuilders: const [r'source_gen:part_cleanup'],\n  ),\n  _i1.applyPostProcess(\n    r'source_gen:part_cleanup',\n    _i3.partCleanup,\n  ),\n];\nvoid main(\n  List<String> args, [\n  _i4.SendPort? sendPort,\n]) async {\n  var result = await _i5.run(\n    args,\n    _builders,\n  );\n  sendPort?.send(result);\n  _i6.exitCode = result;\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\n// File: hive_service.dart\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    await Hive.deleteBoxFromDisk('prayerBox'); // Clear the existing box\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n    ;\n\n    if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    onPrayerDataUpdated?.call();\n  }\n\n  void incrementPrayer(String prayer) {\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear ||\n              (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed =\n          (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed =\n          (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1;\n        month <= (year == currentYear ? currentMonth - 1 : 12);\n        month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int year = startYear; year <= endYear; year++) {\n      final endMonth = year == currentYear ? currentMonth : 12;\n      for (int month = 1; month <= endMonth; month++) {\n        final key = '$year-$month';\n        if (!prayerData.containsKey(key)) {\n          prayerData[key] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n    }\n    savePrayerData(prayerData.values.first);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    int totalPrayed = 0;\n    int totalPossible = 0;\n\n    for (final data in prayerData.values) {\n      totalPrayed += data.totalPrayed;\n      totalPossible += data.totalPrayed + data.totalMissed;\n    }\n\n    return {\n      'totalPrayed': totalPrayed,\n      'totalPossible': totalPossible,\n    };\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(\n      int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers)\n        prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n\n\n\n# File: ./widgets/progress_bar.dart\n####################################\n\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double value;\n\n  ProgressBar({required this.value});\n\n  @override\n  Widget build(BuildContext context) {\n    return LinearProgressIndicator(value: value);\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ï·º) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'Ø¹ÙŽÙ†Ù’ Ø£ÙŽØ¨ÙÙŠ Ù‡ÙØ±ÙŽÙŠÙ’Ø±ÙŽØ©ÙŽ Ø±ÙŽØ¶ÙÙŠÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ†Ù’Ù‡Ù Ù‚ÙŽØ§Ù„ÙŽ: Ù‚ÙŽØ§Ù„ÙŽ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù ØµÙŽÙ„ÙŽÙ‘Ù‰ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ÙˆÙŽØ³ÙŽÙ„ÙŽÙ‘Ù…ÙŽ: \" Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙŽ Ø¹ÙŽØ²ÙŽÙ‘ ÙˆÙŽØ¬ÙŽÙ„ÙŽÙ‘ Ù‚ÙŽØ§Ù„ÙŽ: Ù…ÙŽÙ†Ù’ Ø¹ÙŽØ§Ø¯ÙŽÙ‰ Ù„ÙÙŠ ÙˆÙŽÙ„ÙÙŠÙ‹Ù‘Ø§ØŒ ÙÙŽÙ‚ÙŽØ¯Ù’ Ø¢Ø°ÙŽÙ†Ù’ØªÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙŽØ±Ù’Ø¨ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨ÙŽ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø¨ÙØ´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽØ­ÙŽØ¨ÙŽÙ‘ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ù…ÙÙ…ÙŽÙ‘Ø§ Ø§ÙÙ’ØªÙŽØ±ÙŽØ¶Ù’ØªÙ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ÙŠÙŽØ²ÙŽØ§Ù„Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ ÙŠÙŽØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨Ù Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¨ÙØ§Ù„Ù†ÙŽÙ‘ÙˆÙŽØ§ÙÙÙ„Ù Ø­ÙŽØªÙŽÙ‘Ù‰ Ø£ÙØ­ÙØ¨ÙŽÙ‘Ù‡ÙØŒ ÙÙŽØ¥ÙØ°ÙŽØ§ Ø£ÙŽØ­Ù’Ø¨ÙŽØ¨Ù’ØªÙÙ‡ÙØŒ ÙƒÙÙ†Ù’ØªÙ Ø³ÙŽÙ…Ù’Ø¹ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙŽØ³Ù’Ù…ÙŽØ¹Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽØ¨ÙŽØµÙŽØ±ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙØ¨Ù’ØµÙØ±Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽÙŠÙŽØ¯ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽØ¨Ù’Ø·ÙØ´Ù Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ±ÙØ¬Ù’Ù„ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽÙ…Ù’Ø´ÙÙŠ Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ¥ÙÙ†Ù’ Ø³ÙŽØ£ÙŽÙ„ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹Ù’Ø·ÙÙŠÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ„ÙŽØ¦ÙÙ†Ù’ Ø§Ø³Ù’ØªÙŽØ¹ÙŽØ§Ø°ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹ÙÙŠØ°ÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽØ±ÙŽØ¯ÙŽÙ‘Ø¯Ù’ØªÙ Ø¹ÙŽÙ†Ù’ Ø´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽÙ†ÙŽØ§ ÙÙŽØ§Ø¹ÙÙ„ÙÙ‡Ù ØªÙŽØ±ÙŽØ¯ÙÙ‘Ø¯ÙÙŠ Ø¹ÙŽÙ†Ù’ Ù†ÙŽÙÙ’Ø³Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØŒ ÙŠÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ø§Ù„Ù’Ù…ÙŽÙˆÙ’ØªÙŽ ÙˆÙŽØ£ÙŽÙ†ÙŽØ§ Ø£ÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ù…ÙŽØ³ÙŽØ§Ø¡ÙŽØªÙŽÙ‡Ù - Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n"
          }
        ],
        "files": [
          {
            "file_name": "paste.txt"
          }
        ]
      }
    },
    {
      "id": "e2a22220-d01d-43d1-9e27-d4fba47bbdfe",
      "role": "assistant",
      "content": " To fix the issues with the loading circles for each individual component and the error in the edit details screen, let's go through the code step by step and make the necessary changes.\n\n1. In `prayer_progress_card_material.dart`, remove the `FutureBuilder` for `getMissedPrayersForMonth` and combine it with the `FutureBuilder` for `getCompletedPrayersForMonth`:\n\n```dart\n@override\nWidget build(BuildContext context) {\n  final prayerProvider = Provider.of<PrayerProvider>(context);\n\n  return FutureBuilder<Map<String, int>>(\n    future: Future.value({\n      'completed': prayerProvider.getCompletedPrayersForMonth(year, month, prayer),\n      'missed': prayerProvider.getMissedPrayersForMonth(year, month, prayer),\n    }),\n    builder: (context, snapshot) {\n      if (snapshot.connectionState == ConnectionState.waiting) {\n        return CircularProgressIndicator();\n      }\n      final completedPrayers = snapshot.data?['completed'] ?? 0;\n      final missedPrayers = snapshot.data?['missed'] ?? 0;\n      final totalPrayers = completedPrayers + missedPrayers;\n\n      return Card(\n        // ... (rest of the code remains the same)\n      );\n    },\n  );\n}\n```\n\n2. In `edit_details_screen.dart`, update the `DropdownButtonFormField` for year selection to ensure that the `value` property matches one of the items:\n\n```dart\nDropdownButtonFormField<int>(\n  value: _selectedYear,\n  items: [\n    DropdownMenuItem(\n      child: Text('Select Year'),\n      value: null,\n    ),\n    ...prayerProvider.prayerData.keys\n        .map((key) {\n          final parts = key.split('-');\n          final year = int.parse(parts[0]);\n          return DropdownMenuItem(\n            value: year,\n            child: Text(year.toString()),\n          );\n        })\n        .toSet()\n        .toList(),\n  ],\n  onChanged: (year) {\n    setState(() {\n      _selectedYear = year;\n      _selectedMonth = null;\n      if (year != null) {\n        _percentageCompleted = prayerProvider.getPrayerCompletionPercentageForYear(year);\n      }\n    });\n  },\n  decoration: InputDecoration(\n    labelText: 'Select Year',\n  ),\n),\n```\n\n3. In `edit_details_screen.dart`, update the `initState` method to set the initial value of `_selectedYear` to `null`:\n\n```dart\n@override\nvoid initState() {\n  super.initState();\n  final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n  _startYearController = TextEditingController(text: prayerProvider.startYear.toString());\n  _endYearController = TextEditingController(text: prayerProvider.endYear.toString());\n  _selectedYear = null;\n}\n```\n\n4. In `edit_details_screen.dart`, update the `didChangeDependencies` method to set the initial value of `_selectedYear` only if it is `null`:\n\n```dart\n@override\nvoid didChangeDependencies() {\n  super.didChangeDependencies();\n  final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n  if (_selectedYear == null && prayerProvider.prayerData.isNotEmpty) {\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n}\n```\n\nWith these changes, the loading circles for each individual component should be resolved, and the error in the edit details screen should be fixed.\n\nAdditionally, make sure that the `PrayerService` methods `getCompletedPrayersForMonth` and `getMissedPrayersForMonth` are returning the correct data and not causing any errors or infinite loops.\n\nPlease update the relevant files with the provided changes and let me know if you encounter any further issues.",
      "created_at": "2024-06-05T10:38:02.221887Z",
      "sequence_order": 35,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T10:38:02.221887Z",
            "stop_timestamp": "2024-06-05T10:38:02.221887Z",
            "flags": null,
            "type": "text",
            "text": " To fix the issues with the loading circles for each individual component and the error in the edit details screen, let's go through the code step by step and make the necessary changes.\n\n1. In `prayer_progress_card_material.dart`, remove the `FutureBuilder` for `getMissedPrayersForMonth` and combine it with the `FutureBuilder` for `getCompletedPrayersForMonth`:\n\n```dart\n@override\nWidget build(BuildContext context) {\n  final prayerProvider = Provider.of<PrayerProvider>(context);\n\n  return FutureBuilder<Map<String, int>>(\n    future: Future.value({\n      'completed': prayerProvider.getCompletedPrayersForMonth(year, month, prayer),\n      'missed': prayerProvider.getMissedPrayersForMonth(year, month, prayer),\n    }),\n    builder: (context, snapshot) {\n      if (snapshot.connectionState == ConnectionState.waiting) {\n        return CircularProgressIndicator();\n      }\n      final completedPrayers = snapshot.data?['completed'] ?? 0;\n      final missedPrayers = snapshot.data?['missed'] ?? 0;\n      final totalPrayers = completedPrayers + missedPrayers;\n\n      return Card(\n        // ... (rest of the code remains the same)\n      );\n    },\n  );\n}\n```\n\n2. In `edit_details_screen.dart`, update the `DropdownButtonFormField` for year selection to ensure that the `value` property matches one of the items:\n\n```dart\nDropdownButtonFormField<int>(\n  value: _selectedYear,\n  items: [\n    DropdownMenuItem(\n      child: Text('Select Year'),\n      value: null,\n    ),\n    ...prayerProvider.prayerData.keys\n        .map((key) {\n          final parts = key.split('-');\n          final year = int.parse(parts[0]);\n          return DropdownMenuItem(\n            value: year,\n            child: Text(year.toString()),\n          );\n        })\n        .toSet()\n        .toList(),\n  ],\n  onChanged: (year) {\n    setState(() {\n      _selectedYear = year;\n      _selectedMonth = null;\n      if (year != null) {\n        _percentageCompleted = prayerProvider.getPrayerCompletionPercentageForYear(year);\n      }\n    });\n  },\n  decoration: InputDecoration(\n    labelText: 'Select Year',\n  ),\n),\n```\n\n3. In `edit_details_screen.dart`, update the `initState` method to set the initial value of `_selectedYear` to `null`:\n\n```dart\n@override\nvoid initState() {\n  super.initState();\n  final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n  _startYearController = TextEditingController(text: prayerProvider.startYear.toString());\n  _endYearController = TextEditingController(text: prayerProvider.endYear.toString());\n  _selectedYear = null;\n}\n```\n\n4. In `edit_details_screen.dart`, update the `didChangeDependencies` method to set the initial value of `_selectedYear` only if it is `null`:\n\n```dart\n@override\nvoid didChangeDependencies() {\n  super.didChangeDependencies();\n  final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n  if (_selectedYear == null && prayerProvider.prayerData.isNotEmpty) {\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n}\n```\n\nWith these changes, the loading circles for each individual component should be resolved, and the error in the edit details screen should be fixed.\n\nAdditionally, make sure that the `PrayerService` methods `getCompletedPrayersForMonth` and `getMissedPrayersForMonth` are returning the correct data and not causing any errors or infinite loops.\n\nPlease update the relevant files with the provided changes and let me know if you encounter any further issues.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T10:38:02.221887Z",
        "attachments": [],
        "files": []
      }
    }
  ]
}
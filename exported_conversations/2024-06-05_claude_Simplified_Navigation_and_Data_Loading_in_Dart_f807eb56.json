{
  "id": "f807eb56-50a3-4edb-b66b-e5cce5394f33",
  "source": "claude",
  "title": "Simplified Navigation and Data Loading in Dart",
  "created_at": "2024-06-05T12:24:28.908244Z",
  "updated_at": "2024-06-05T13:11:08.456243Z",
  "summary": "",
  "message_count": 14,
  "messages": [
    {
      "id": "bf703c83-1344-43aa-9ca4-8495bcd4a4bc",
      "role": "human",
      "content": "",
      "created_at": "2024-06-05T12:25:24.560075Z",
      "sequence_order": 0,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T12:25:24.560075Z",
            "stop_timestamp": "2024-06-05T12:25:24.560075Z",
            "flags": null,
            "type": "text",
            "text": "",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T12:25:24.560075Z",
        "attachments": [
          {
            "file_name": "paste.txt",
            "file_size": 8665,
            "file_type": "txt",
            "extracted_content": "To resolve the issue of the loading state never ending on the home screen, let's debug the code step by step and identify the problem.\n\nIn home_screen.dart, the FutureBuilder is used to wait for the loadData method to complete. However, the loadData method is not returning a Future, which means the FutureBuilder will never complete.\nTo fix this, update the loadData method in prayer_provider.dart to return a Future:\ndartCopy codeFuture<void> loadData() async {\n  await _prayerService.loadData();\n  _prayerData = _prayerService.prayerData;\n  notifyListeners();\n}\n\nNext, let's check the loadData method in prayer_service.dart. The method is marked as async, but it's not returning a Future. Update the method to return a Future<void>:\ndartCopy codeFuture<void> loadData() async {\n  var loadedData = await _hiveService.loadData('prayerData');\n\n  if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n    prayerData = Map<String, PrayerData>.from(\n      loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n    );\n  }\n\n  if (prayerData.isEmpty) {\n    for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        prayerData['$year-$month'] = _calculatePrayerData(\n          year,\n          month,\n          100 - kDefaultPercentageMissed.toDouble(),\n        );\n      }\n    }\n    await savePrayerData(prayerData.values.first);\n  }\n\n  isDataLoaded = true;\n  print('Loaded data from Hive: $prayerData');\n}\n\nWith these changes, the FutureBuilder in home_screen.dart should now work as expected. It will wait for the loadData method to complete and then display the prayer progress and individual prayer cards.\nHowever, if the loading state still doesn't end, there might be an issue with the savePrayerData method in prayer_service.dart. Ensure that the method is correctly saving the data to Hive and not causing any infinite loops or blocking the execution.\nAdditionally, you can add error handling and logging to the loadData and savePrayerData methods to identify any potential issues or exceptions that might be preventing the loading state from completing.\n\nHere's the updated prayer_service.dart file with the necessary changes:\ndartCopy codeimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    try {\n      var loadedData = await _hiveService.loadData('prayerData');\n\n      if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n        prayerData = Map<String, PrayerData>.from(\n          loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n        );\n      }\n\n      if (prayerData.isEmpty) {\n        for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n          for (int month = 1; month <= 12; month++) {\n            prayerData['$year-$month'] = _calculatePrayerData(\n              year,\n              month,\n              100 - kDefaultPercentageMissed.toDouble(),\n            );\n          }\n        }\n        await savePrayerData(prayerData.values.first);\n      }\n\n      isDataLoaded = true;\n      print('Loaded data from Hive: $prayerData');\n    } catch (e) {\n      print('Error loading data: $e');\n      // Handle the error appropriately\n    }\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    try {\n      prayerData['${data.year}-${data.month}'] = data;\n      await _hiveService.saveData('prayerData', prayerData);\n\n      Map<String, Map<String, dynamic>> unpacked = {};\n      prayerData.forEach((key, value) {\n        unpacked[key] = {\n          'year': value.year,\n          'month': value.month,\n          'prayersCompleted': value.prayersCompleted,\n          'prayersMissed': value.prayersMissed,\n          'totalPrayed': value.totalPrayed,\n          'totalMissed': value.totalMissed,\n          'percentagePrayed': value.percentagePrayed,\n          'percentageMissed': value.percentageMissed,\n        };\n      });\n      print('Updated data: $unpacked');\n      print('Saved data to Hive: $prayerData');\n\n      onPrayerDataUpdated?.call();\n    } catch (e) {\n      print('Error saving data: $e');\n      // Handle the error appropriately\n    }\n  }\n\n  // ... (rest of the code remains the same)\n}\nPlease update the prayer_service.dart file with the provided changes and let me know if the loading state issue is resolved. If you still encounter any problems or have further questions, feel free to ask. CopyRetryClaude does not have the ability to run the code it generates yet.Now I get a loading circle for each individual component, see image - also I can't go to the edit details screen:\n'package:flutter/src/material/dropdown.dart': Failed assertion: line 1619 pos 15: 'itepastedBG\nTo fix the issues with the loading circles for each individual component and the error in the edit details screen, let's go through the code step by step and make the necessary changes.\n\nIn prayer_progress_card_material.dart, remove the FutureBuilder for getMissedPrayersForMonth and combine it with the FutureBuilder for getCompletedPrayersForMonth:\n\ndartCopy code@override\nWidget build(BuildContext context) {\n  final prayerProvider = Provider.of<PrayerProvider>(context);\n\n  return FutureBuilder<Map<String, int>>(\n    future: Future.value({\n      'completed': prayerProvider.getCompletedPrayersForMonth(year, month, prayer),\n      'missed': prayerProvider.getMissedPrayersForMonth(year, month, prayer),\n    }),\n    builder: (context, snapshot) {\n      if (snapshot.connectionState == ConnectionState.waiting) {\n        return CircularProgressIndicator();\n      }\n      final completedPrayers = snapshot.data?['completed'] ?? 0;\n      final missedPrayers = snapshot.data?['missed'] ?? 0;\n      final totalPrayers = completedPrayers + missedPrayers;\n\n      return Card(\n        // ... (rest of the code remains the same)\n      );\n    },\n  );\n}\n\nIn edit_details_screen.dart, update the DropdownButtonFormField for year selection to ensure that the value property matches one of the items:\n\ndartCopy codeDropdownButtonFormField<int>(\n  value: _selectedYear,\n  items: [\n    DropdownMenuItem(\n      child: Text('Select Year'),\n      value: null,\n    ),\n    ...prayerProvider.prayerData.keys\n        .map((key) {\n          final parts = key.split('-');\n          final year = int.parse(parts[0]);\n          return DropdownMenuItem(\n            value: year,\n            child: Text(year.toString()),\n          );\n        })\n        .toSet()\n        .toList(),\n  ],\n  onChanged: (year) {\n    setState(() {\n      _selectedYear = year;\n      _selectedMonth = null;\n      if (year != null) {\n        _percentageCompleted = prayerProvider.getPrayerCompletionPercentageForYear(year);\n      }\n    });\n  },\n  decoration: InputDecoration(\n    labelText: 'Select Year',\n  ),\n),\n\nIn edit_details_screen.dart, update the initState method to set the initial value of _selectedYear to null:\n\ndartCopy code@override\nvoid initState() {\n  super.initState();\n  final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n  _startYearController = TextEditingController(text: prayerProvider.startYear.toString());\n  _endYearController = TextEditingController(text: prayerProvider.endYear.toString());\n  _selectedYear = null;\n}\n\nIn edit_details_screen.dart, update the didChangeDependencies method to set the initial value of _selectedYear only if it is null:\n\ndartCopy code@override\nvoid didChangeDependencies() {\n  super.didChangeDependencies();\n  final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n  if (_selectedYear == null && prayerProvider.prayerData.isNotEmpty) {\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n}\nWith these changes, the loading circles for each individual component should be resolved, and the error in the edit details screen should be fixed.\nAdditionally, make sure that the PrayerService methods getCompletedPrayersForMonth and getMissedPrayersForMonth are returning the correct data and not causing any errors or infinite loops.\nPlease update the relevant files with the provided changes and let me know if you encounter any further issues."
          },
          {
            "file_name": "paste-2.txt",
            "file_size": 86297,
            "file_type": "txt",
            "extracted_content": "it's not working, think strategically as a 10x programmer and come up with an elegant and simple solution to navigation and data loading that isn't complicated and uses the fewest frameworks and additional services\n\nIt's not working at all now, I get this error when I attempt to load:\n'package:flutter/src/material/dropdown.dart': Failed assertion: line 1619 pos 15: 'items == null\nIl items.isEmpty I| value == null |I\nitems.where ((DropdownMenultem<T> item){\nreturn item.value == value;\n}).length == 1': There should be exactly one item with [DropdownButton]'s value: 2024.\nEither zero or 2 or more [DropdownMenultem]s were detected with the same value\nSee also: https://flutter.dev/docs/testing/errors\n'}\n\nlib/screens/prayer_progress_card_material.dart:37:52: Error: The operator '[]' isn't defined for the class 'int'.\nTry correcting the operator to an existing operator, or defining a '[]' operator.\n            final completedPrayers = snapshot.data?['completed'] ?? 0;\n                                                   ^\nlib/screens/prayer_progress_card_material.dart:38:49: Error: The operator '[]' isn't defined for the class 'int'.\nTry correcting the operator to an existing operator, or defining a '[]' operator.\n            final missedPrayers = snapshot.data?['missed'] ?? 0;\n                                                ^\n\n\nTo resolve the issue of the loading state never ending on the home screen, let's debug the code step by step and identify the problem.\n\nIn home_screen.dart, the FutureBuilder is used to wait for the loadData method to complete. However, the loadData method is not returning a Future, which means the FutureBuilder will never complete.\nTo fix this, update the loadData method in prayer_provider.dart to return a Future:\ndartCopy codeFuture<void> loadData() async {\n  await _prayerService.loadData();\n  _prayerData = _prayerService.prayerData;\n  notifyListeners();\n}\n\nNext, let's check the loadData method in prayer_service.dart. The method is marked as async, but it's not returning a Future. Update the method to return a Future<void>:\ndartCopy codeFuture<void> loadData() async {\n  var loadedData = await _hiveService.loadData('prayerData');\n\n  if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n    prayerData = Map<String, PrayerData>.from(\n      loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n    );\n  }\n\n  if (prayerData.isEmpty) {\n    for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        prayerData['$year-$month'] = _calculatePrayerData(\n          year,\n          month,\n          100 - kDefaultPercentageMissed.toDouble(),\n        );\n      }\n    }\n    await savePrayerData(prayerData.values.first);\n  }\n\n  isDataLoaded = true;\n  print('Loaded data from Hive: $prayerData');\n}\n\nWith these changes, the FutureBuilder in home_screen.dart should now work as expected. It will wait for the loadData method to complete and then display the prayer progress and individual prayer cards.\nHowever, if the loading state still doesn't end, there might be an issue with the savePrayerData method in prayer_service.dart. Ensure that the method is correctly saving the data to Hive and not causing any infinite loops or blocking the execution.\nAdditionally, you can add error handling and logging to the loadData and savePrayerData methods to identify any potential issues or exceptions that might be preventing the loading state from completing.\n\nHere's the updated prayer_service.dart file with the necessary changes:\ndartCopy codeimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    try {\n      var loadedData = await _hiveService.loadData('prayerData');\n\n      if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n        prayerData = Map<String, PrayerData>.from(\n          loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n        );\n      }\n\n      if (prayerData.isEmpty) {\n        for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n          for (int month = 1; month <= 12; month++) {\n            prayerData['$year-$month'] = _calculatePrayerData(\n              year,\n              month,\n              100 - kDefaultPercentageMissed.toDouble(),\n            );\n          }\n        }\n        await savePrayerData(prayerData.values.first);\n      }\n\n      isDataLoaded = true;\n      print('Loaded data from Hive: $prayerData');\n    } catch (e) {\n      print('Error loading data: $e');\n      // Handle the error appropriately\n    }\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    try {\n      prayerData['${data.year}-${data.month}'] = data;\n      await _hiveService.saveData('prayerData', prayerData);\n\n      Map<String, Map<String, dynamic>> unpacked = {};\n      prayerData.forEach((key, value) {\n        unpacked[key] = {\n          'year': value.year,\n          'month': value.month,\n          'prayersCompleted': value.prayersCompleted,\n          'prayersMissed': value.prayersMissed,\n          'totalPrayed': value.totalPrayed,\n          'totalMissed': value.totalMissed,\n          'percentagePrayed': value.percentagePrayed,\n          'percentageMissed': value.percentageMissed,\n        };\n      });\n      print('Updated data: $unpacked');\n      print('Saved data to Hive: $prayerData');\n\n      onPrayerDataUpdated?.call();\n    } catch (e) {\n      print('Error saving data: $e');\n      // Handle the error appropriately\n    }\n  }\n\n  // ... (rest of the code remains the same)\n}\nPlease update the prayer_service.dart file with the provided changes and let me know if the loading state issue is resolved. If you still encounter any problems or have further questions, feel free to ask. CopyRetryClaude does not have the ability to run the code it generates yet.Now I get a loading circle for each individual component, see image - also I can't go to the edit details screen:\n'package:flutter/src/material/dropdown.dart': Failed assertion: line 1619 pos 15: 'itepastedBG\nTo fix the issues with the loading circles for each individual component and the error in the edit details screen, let's go through the code step by step and make the necessary changes.\n\nIn prayer_progress_card_material.dart, remove the FutureBuilder for getMissedPrayersForMonth and combine it with the FutureBuilder for getCompletedPrayersForMonth:\n\ndartCopy code@override\nWidget build(BuildContext context) {\n  final prayerProvider = Provider.of<PrayerProvider>(context);\n\n  return FutureBuilder<Map<String, int>>(\n    future: Future.value({\n      'completed': prayerProvider.getCompletedPrayersForMonth(year, month, prayer),\n      'missed': prayerProvider.getMissedPrayersForMonth(year, month, prayer),\n    }),\n    builder: (context, snapshot) {\n      if (snapshot.connectionState == ConnectionState.waiting) {\n        return CircularProgressIndicator();\n      }\n      final completedPrayers = snapshot.data?['completed'] ?? 0;\n      final missedPrayers = snapshot.data?['missed'] ?? 0;\n      final totalPrayers = completedPrayers + missedPrayers;\n\n      return Card(\n        // ... (rest of the code remains the same)\n      );\n    },\n  );\n}\n\nIn edit_details_screen.dart, update the DropdownButtonFormField for year selection to ensure that the value property matches one of the items:\n\ndartCopy codeDropdownButtonFormField<int>(\n  value: _selectedYear,\n  items: [\n    DropdownMenuItem(\n      child: Text('Select Year'),\n      value: null,\n    ),\n    ...prayerProvider.prayerData.keys\n        .map((key) {\n          final parts = key.split('-');\n          final year = int.parse(parts[0]);\n          return DropdownMenuItem(\n            value: year,\n            child: Text(year.toString()),\n          );\n        })\n        .toSet()\n        .toList(),\n  ],\n  onChanged: (year) {\n    setState(() {\n      _selectedYear = year;\n      _selectedMonth = null;\n      if (year != null) {\n        _percentageCompleted = prayerProvider.getPrayerCompletionPercentageForYear(year);\n      }\n    });\n  },\n  decoration: InputDecoration(\n    labelText: 'Select Year',\n  ),\n),\n\nIn edit_details_screen.dart, update the initState method to set the initial value of _selectedYear to null:\n\ndartCopy code@override\nvoid initState() {\n  super.initState();\n  final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n  _startYearController = TextEditingController(text: prayerProvider.startYear.toString());\n  _endYearController = TextEditingController(text: prayerProvider.endYear.toString());\n  _selectedYear = null;\n}\n\nIn edit_details_screen.dart, update the didChangeDependencies method to set the initial value of _selectedYear only if it is null:\n\ndartCopy code@override\nvoid didChangeDependencies() {\n  super.didChangeDependencies();\n  final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n  if (_selectedYear == null && prayerProvider.prayerData.isNotEmpty) {\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n}\nWith these changes, the loading circles for each individual component should be resolved, and the error in the edit details screen should be fixed.\nAdditionally, make sure that the PrayerService methods getCompletedPrayersForMonth and getMissedPrayersForMonth are returning the correct data and not causing any errors or infinite loops.\nPlease update the relevant files with the provided changes and let me know if you encounter any further issues.\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./prayer_record.dart\n#############################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int fajrMissed;\n\n  @HiveField(3)\n  int dhuhrMissed;\n\n  @HiveField(4)\n  int asrMissed;\n\n  @HiveField(5)\n  int maghribMissed;\n\n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./main.dart\n####################\n\n// File: main.dart\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_data.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  Hive.registerAdapter(PrayerDataAdapter());\n  runApp(MyApp(hiveService: hiveService));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./prayer_record.g.dart\n###############################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  Map<String, PrayerData> _prayerData = {};\n  bool _isDataLoaded = false;\n\n  PrayerProvider(this._prayerService) {\n    _prayerService.onPrayerDataUpdated = _onPrayerDataUpdated;\n  }\n\n  void _onPrayerDataUpdated() {\n    notifyListeners();\n  }\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n  bool get isDataLoaded => _isDataLoaded;\n  int get startYear => kDefaultStartYear;\n  int get endYear => kDefaultEndYear;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData;\n    _isDataLoaded = true;\n    notifyListeners();\n  }\n\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getMissedPrayersForMonth(year, month, prayer);\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    return await _prayerService.getPrayerDataForMonth(year, month);\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    _prayerService.updatePrayerStats(\n        year, month, prayer, increaseCompletedCount);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForYear(year, percentageCompleted);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\n    notifyListeners();\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    return _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    return _prayerService.getPrayerCompletionPercentageForYear(year);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    return await _prayerService.getAggregatedPrayerData();\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    _prayerService.updateStartAndEndYear(startYear, endYear);\n    notifyListeners();\n  }\n}\n\n\n\n# File: ./models/prayer_record.dart\n####################################\n\nimport 'package:hive/hive.dart';\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n  @HiveField(1)\n  int month;\n  @HiveField(2)\n  int fajrMissed;\n  @HiveField(3)\n  int dhuhrMissed;\n  @HiveField(4)\n  int asrMissed;\n  @HiveField(5)\n  int maghribMissed;\n  @HiveField(6)\n  int ishaMissed;\n// Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./models/prayer_data.dart\n##################################\n\n// File: lib/models/prayer_data.dart\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_data.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerData {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  Map<String, int> prayersCompleted; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(3)\n  Map<String, int> prayersMissed; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(4)\n  int totalPrayed;\n\n  @HiveField(5)\n  int totalMissed;\n\n  @HiveField(6)\n  double percentagePrayed;\n\n  @HiveField(7)\n  double percentageMissed;\n\n  PrayerData({\n    required this.year,\n    required this.month,\n    required this.prayersCompleted,\n    required this.prayersMissed,\n    required this.totalPrayed,\n    required this.totalMissed,\n    required this.percentagePrayed,\n    required this.percentageMissed,\n  });\n\n  factory PrayerData.fromMap(Map<String, dynamic> map) {\n    return PrayerData(\n      year: map['year'],\n      month: map['month'],\n      prayersCompleted: Map<String, int>.from(map['prayersCompleted']),\n      prayersMissed: Map<String, int>.from(map['prayersMissed']),\n      totalPrayed: map['totalPrayed'],\n      totalMissed: map['totalMissed'],\n      percentagePrayed: map['percentagePrayed'],\n      percentageMissed: map['percentageMissed'],\n    );\n  }\n\n  Map<String, dynamic> toMap() {\n    return {\n      'year': year,\n      'month': month,\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'totalPrayed': totalPrayed,\n      'totalMissed': totalMissed,\n      'percentagePrayed': percentagePrayed,\n      'percentageMissed': percentageMissed,\n    };\n  }\n}\n\n\n\n# File: ./models/prayer_data.g.dart\n####################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_data.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerDataAdapter extends TypeAdapter<PrayerData> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerData read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerData(\n      year: fields[0] as int,\n      month: fields[1] as int,\n      prayersCompleted: (fields[2] as Map).cast<String, int>(),\n      prayersMissed: (fields[3] as Map).cast<String, int>(),\n      totalPrayed: fields[4] as int,\n      totalMissed: fields[5] as int,\n      percentagePrayed: fields[6] as double,\n      percentageMissed: fields[7] as double,\n    );\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerData obj) {\n    writer\n      ..writeByte(8)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.prayersCompleted)\n      ..writeByte(3)\n      ..write(obj.prayersMissed)\n      ..writeByte(4)\n      ..write(obj.totalPrayed)\n      ..writeByte(5)\n      ..write(obj.totalMissed)\n      ..writeByte(6)\n      ..write(obj.percentagePrayed)\n      ..writeByte(7)\n      ..write(obj.percentageMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerDataAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./models/prayer_record.g.dart\n######################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\n// File: screens/prayer_progress_card_material.dart\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n  final VoidCallback onPrayPressed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.year,\n    required this.month,\n    required this.onPrayPressed,\n  });\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<Map<String, int>>(\n      future: Future.value({\n        'completed':\n            prayerProvider.getCompletedPrayersForMonth(year, month, prayer),\n        'missed': prayerProvider.getMissedPrayersForMonth(year, month, prayer),\n      }), // Fix: Wrap with Future.value()\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(prayerProvider.getMissedPrayersForMonth(\n              year, month, prayer)), // Fix: Wrap with Future.value()\n          builder: (context, snapshot) {\n            if (snapshot.connectionState == ConnectionState.waiting) {\n              return CircularProgressIndicator();\n            }\n            final completedPrayers = snapshot.data?['completed'] ?? 0;\n            final missedPrayers = snapshot.data?['missed'] ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Card(\n              child: Padding(\n                padding: const EdgeInsets.all(14.0),\n                child: Column(\n                  mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                  children: [\n                    Text(prayer,\n                        style: TextStyle(\n                            fontWeight: FontWeight.bold, fontSize: 16)),\n                    ClipRRect(\n                      borderRadius: BorderRadius.circular(8),\n                      child: LinearProgressIndicator(\n                        value: totalPrayers > 0\n                            ? completedPrayers / totalPrayers\n                            : 0,\n                        minHeight: 12,\n                        backgroundColor: Colors.grey[300],\n                        valueColor:\n                            AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                      ),\n                    ),\n                    Text(\n                        '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                        style: TextStyle(fontSize: 14)),\n                    Text('$completedPrayers / $totalPrayers',\n                        style: TextStyle(fontSize: 12)),\n                    ElevatedButton(\n                      onPressed: onPrayPressed,\n                      child: Text('Pray'),\n                    ),\n                  ],\n                ),\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_details_screen.dart\n#############################################\n\nimport 'package:flutter/material.dart';\nimport '../services/hive_service.dart';\nimport '../models/prayer_record.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          // Implement logic to find and increment the oldest missed prayer\n\n          return Column(\n            children: [\n              // Display and update prayer details here\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({Key? key}) : super(key: key);\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _selectedYear = DateTime.now().year;\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: SingleChildScrollView(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: [\n                DropdownMenuItem(\n                  child: Text('Select Year'),\n                  value: null,\n                ),\n                ...prayerProvider.prayerData.keys\n                    .map((key) {\n                      final parts = key.split('-');\n                      final year = int.parse(parts[0]);\n                      return DropdownMenuItem(\n                        value: year,\n                        child: Text(year.toString()),\n                      );\n                    })\n                    .toSet()\n                    .toList(),\n              ],\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                  if (year != null) {\n                    _percentageCompleted = prayerProvider\n                        .getPrayerCompletionPercentageForYear(year);\n                  }\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            SizedBox(height: 16),\n            if (_selectedYear != null)\n              DropdownButtonFormField<int>(\n                value: _selectedMonth,\n                items: [\n                  DropdownMenuItem(\n                    child: Text('Average for total year, or select month'),\n                    value: null,\n                  ),\n                  ...List.generate(\n                    _selectedYear == DateTime.now().year\n                        ? DateTime.now().month - 1\n                        : 12,\n                    (index) => index + 1,\n                  ).map((month) => DropdownMenuItem(\n                        value: month,\n                        child: Text('Month $month'),\n                      )),\n                ],\n                onChanged: (month) {\n                  setState(() {\n                    _selectedMonth = month;\n                    if (month != null) {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForMonth(\n                        _selectedYear!,\n                        month,\n                      );\n                    } else {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForYear(\n                        _selectedYear!,\n                      );\n                    }\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Month',\n                ),\n              ),\n            SizedBox(height: 16),\n            Text(\n              'ðŸ•‹ Adjust the percentage of prayers completed for the selected year or month.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16),\n            Slider(\n              value: _percentageCompleted,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_percentageCompleted.round()}%',\n              onChanged: (value) {\n                setState(() {\n                  _percentageCompleted = value;\n                });\n              },\n              onChangeEnd: (value) {\n                if (_selectedYear != null) {\n                  if (_selectedMonth != null) {\n                    prayerProvider.updatePrayerStatsForMonth(\n                      _selectedYear!,\n                      _selectedMonth!,\n                      _percentageCompleted,\n                    );\n                    ScaffoldMessenger.of(context).showSnackBar(\n                      SnackBar(\n                          content: Text(\n                              'Changes saved for month $_selectedMonth of year $_selectedYear.')),\n                    );\n                  } else {\n                    prayerProvider.updatePrayerStatsForYear(\n                      _selectedYear!,\n                      _percentageCompleted,\n                    );\n                    ScaffoldMessenger.of(context).showSnackBar(\n                      SnackBar(\n                          content:\n                              Text('Changes saved for year $_selectedYear.')),\n                    );\n                  }\n                }\n              },\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\nimport '../models/prayer_data.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(PrayerData(\n      // Fix: Pass a PrayerData object\n      year: startYear,\n      month: startMonth,\n      prayersCompleted: {},\n      prayersMissed: {},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    ));\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\n// File: screens/prayer_progress_card_cupertino.dart\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n\n  const PrayerProgressCardCupertino({\n    required this.prayer,\n    required this.year,\n    required this.month,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(\n          prayerProvider.getCompletedPrayersForMonth(year, month, prayer)),\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(\n              prayerProvider.getMissedPrayersForMonth(year, month, prayer)),\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CupertinoActivityIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Container(\n              margin: EdgeInsets.all(8.0),\n              padding: EdgeInsets.all(14.0),\n              decoration: BoxDecoration(\n                color: CupertinoColors.white,\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: CupertinoColors.systemGrey.withOpacity(0.4),\n                    spreadRadius: 1,\n                    blurRadius: 3,\n                    offset: Offset(0, 2),\n                  ),\n                ],\n              ),\n              child: Column(\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                children: [\n                  Text(prayer,\n                      style:\n                          TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n                  SizedBox(height: 8),\n                  ClipRRect(\n                    borderRadius: BorderRadius.circular(8),\n                    child: LinearProgressIndicator(\n                      value: totalPrayers > 0\n                          ? completedPrayers / totalPrayers\n                          : 0,\n                      minHeight: 12,\n                      backgroundColor: CupertinoColors.systemGrey4,\n                      valueColor: AlwaysStoppedAnimation<Color>(\n                          CupertinoColors.activeGreen),\n                    ),\n                  ),\n                  SizedBox(height: 8),\n                  Text(\n                      '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                      style: TextStyle(fontSize: 14)),\n                  Text('$completedPrayers / $totalPrayers',\n                      style: TextStyle(fontSize: 12)),\n                  SizedBox(height: 8),\n                  CupertinoButton.filled(\n                    onPressed: () => prayerProvider.incrementPrayer(prayer),\n                    child: Text('Pray'),\n                  ),\n                ],\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        final currentYear = DateTime.now().year;\n        final currentMonth = DateTime.now().month;\n        final prayers = prayerProvider.prayers;\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Prayer Tracker'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.pushNamed(context, '/edit-details');\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                FutureBuilder<Map<String, dynamic>>(\n                  future: prayerProvider.getAggregatedPrayerData(),\n                  builder: (context, snapshot) {\n                    if (snapshot.connectionState == ConnectionState.waiting) {\n                      return CircularProgressIndicator();\n                    }\n                    final aggregatedData = snapshot.data;\n                    final totalPrayed = aggregatedData?['totalPrayed'] ?? 0;\n                    final totalPossible = aggregatedData?['totalPossible'] ?? 0;\n                    return Column(\n                      children: [\n                        LinearProgressIndicator(\n                          value: totalPossible > 0\n                              ? totalPrayed / totalPossible\n                              : 0,\n                          minHeight: 16,\n                          backgroundColor: Colors.grey[300],\n                          valueColor:\n                              AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                        ),\n                        SizedBox(height: 8),\n                        Row(\n                          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                          children: [\n                            Text('$totalPrayed'),\n                            Text('$totalPossible'),\n                          ],\n                        ),\n                      ],\n                    );\n                  },\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        year: currentYear,\n                        month: currentMonth,\n                        onPrayPressed: () {\n                          prayerProvider.incrementPrayer(prayer);\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/flutter_build/dart_plugin_registrant.dart\n###############################################################\n\n//\n// Generated file. Do not edit.\n// This file is generated from template in file `flutter_tools/lib/src/flutter_plugins.dart`.\n//\n\n// @dart = 3.3\n\nimport 'dart:io'; // flutter_ignore: dart_io_import.\nimport 'package:path_provider_android/path_provider_android.dart';\nimport 'package:shared_preferences_android/shared_preferences_android.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_linux/path_provider_linux.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_linux/shared_preferences_linux.dart';\nimport 'package:url_launcher_linux/url_launcher_linux.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_windows/path_provider_windows.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_windows/shared_preferences_windows.dart';\nimport 'package:url_launcher_windows/url_launcher_windows.dart';\n\n@pragma('vm:entry-point')\nclass _PluginRegistrant {\n\n  @pragma('vm:entry-point')\n  static void register() {\n    if (Platform.isAndroid) {\n      try {\n        PathProviderAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isIOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isLinux) {\n      try {\n        PathProviderLinux.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusLinuxPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesLinux.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherLinux.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isMacOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isWindows) {\n      try {\n        PathProviderWindows.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusWindowsPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesWindows.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherWindows.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./.dart_tool/build/entrypoint/build.dart\n#################################################\n\n// ignore_for_file: directives_ordering\n// ignore_for_file: no_leading_underscores_for_library_prefixes\nimport 'package:build_runner_core/build_runner_core.dart' as _i1;\nimport 'package:hive_generator/hive_generator.dart' as _i2;\nimport 'package:source_gen/builder.dart' as _i3;\nimport 'dart:isolate' as _i4;\nimport 'package:build_runner/build_runner.dart' as _i5;\nimport 'dart:io' as _i6;\n\nfinal _builders = <_i1.BuilderApplication>[\n  _i1.apply(\n    r'hive_generator:hive_generator',\n    [_i2.getBuilder],\n    _i1.toDependentsOf(r'hive_generator'),\n    hideOutput: true,\n    appliesBuilders: const [r'source_gen:combining_builder'],\n  ),\n  _i1.apply(\n    r'source_gen:combining_builder',\n    [_i3.combiningBuilder],\n    _i1.toNoneByDefault(),\n    hideOutput: false,\n    appliesBuilders: const [r'source_gen:part_cleanup'],\n  ),\n  _i1.applyPostProcess(\n    r'source_gen:part_cleanup',\n    _i3.partCleanup,\n  ),\n];\nvoid main(\n  List<String> args, [\n  _i4.SendPort? sendPort,\n]) async {\n  var result = await _i5.run(\n    args,\n    _builders,\n  );\n  sendPort?.send(result);\n  _i6.exitCode = result;\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\n// File: hive_service.dart\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    await Hive.deleteBoxFromDisk('prayerBox'); // Clear the existing box\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n    ;\n\n    if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    onPrayerDataUpdated?.call();\n  }\n\n  void incrementPrayer(String prayer) {\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear ||\n              (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed =\n          (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed =\n          (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1;\n        month <= (year == currentYear ? currentMonth - 1 : 12);\n        month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int year = startYear; year <= endYear; year++) {\n      final endMonth = year == currentYear ? currentMonth : 12;\n      for (int month = 1; month <= endMonth; month++) {\n        final key = '$year-$month';\n        if (!prayerData.containsKey(key)) {\n          prayerData[key] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n    }\n    savePrayerData(prayerData.values.first);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    int totalPrayed = 0;\n    int totalPossible = 0;\n\n    for (final data in prayerData.values) {\n      totalPrayed += data.totalPrayed;\n      totalPossible += data.totalPrayed + data.totalMissed;\n    }\n\n    return {\n      'totalPrayed': totalPrayed,\n      'totalPossible': totalPossible,\n    };\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(\n      int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers)\n        prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n\n\n\n# File: ./widgets/progress_bar.dart\n####################################\n\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double value;\n\n  ProgressBar({required this.value});\n\n  @override\n  Widget build(BuildContext context) {\n    return LinearProgressIndicator(value: value);\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ï·º) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'Ø¹ÙŽÙ†Ù’ Ø£ÙŽØ¨ÙÙŠ Ù‡ÙØ±ÙŽÙŠÙ’Ø±ÙŽØ©ÙŽ Ø±ÙŽØ¶ÙÙŠÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ†Ù’Ù‡Ù Ù‚ÙŽØ§Ù„ÙŽ: Ù‚ÙŽØ§Ù„ÙŽ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù ØµÙŽÙ„ÙŽÙ‘Ù‰ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ÙˆÙŽØ³ÙŽÙ„ÙŽÙ‘Ù…ÙŽ: \" Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙŽ Ø¹ÙŽØ²ÙŽÙ‘ ÙˆÙŽØ¬ÙŽÙ„ÙŽÙ‘ Ù‚ÙŽØ§Ù„ÙŽ: Ù…ÙŽÙ†Ù’ Ø¹ÙŽØ§Ø¯ÙŽÙ‰ Ù„ÙÙŠ ÙˆÙŽÙ„ÙÙŠÙ‹Ù‘Ø§ØŒ ÙÙŽÙ‚ÙŽØ¯Ù’ Ø¢Ø°ÙŽÙ†Ù’ØªÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙŽØ±Ù’Ø¨ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨ÙŽ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø¨ÙØ´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽØ­ÙŽØ¨ÙŽÙ‘ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ù…ÙÙ…ÙŽÙ‘Ø§ Ø§ÙÙ’ØªÙŽØ±ÙŽØ¶Ù’ØªÙ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ÙŠÙŽØ²ÙŽØ§Ù„Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ ÙŠÙŽØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨Ù Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¨ÙØ§Ù„Ù†ÙŽÙ‘ÙˆÙŽØ§ÙÙÙ„Ù Ø­ÙŽØªÙŽÙ‘Ù‰ Ø£ÙØ­ÙØ¨ÙŽÙ‘Ù‡ÙØŒ ÙÙŽØ¥ÙØ°ÙŽØ§ Ø£ÙŽØ­Ù’Ø¨ÙŽØ¨Ù’ØªÙÙ‡ÙØŒ ÙƒÙÙ†Ù’ØªÙ Ø³ÙŽÙ…Ù’Ø¹ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙŽØ³Ù’Ù…ÙŽØ¹Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽØ¨ÙŽØµÙŽØ±ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙØ¨Ù’ØµÙØ±Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽÙŠÙŽØ¯ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽØ¨Ù’Ø·ÙØ´Ù Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ±ÙØ¬Ù’Ù„ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽÙ…Ù’Ø´ÙÙŠ Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ¥ÙÙ†Ù’ Ø³ÙŽØ£ÙŽÙ„ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹Ù’Ø·ÙÙŠÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ„ÙŽØ¦ÙÙ†Ù’ Ø§Ø³Ù’ØªÙŽØ¹ÙŽØ§Ø°ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹ÙÙŠØ°ÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽØ±ÙŽØ¯ÙŽÙ‘Ø¯Ù’ØªÙ Ø¹ÙŽÙ†Ù’ Ø´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽÙ†ÙŽØ§ ÙÙŽØ§Ø¹ÙÙ„ÙÙ‡Ù ØªÙŽØ±ÙŽØ¯ÙÙ‘Ø¯ÙÙŠ Ø¹ÙŽÙ†Ù’ Ù†ÙŽÙÙ’Ø³Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØŒ ÙŠÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ø§Ù„Ù’Ù…ÙŽÙˆÙ’ØªÙŽ ÙˆÙŽØ£ÙŽÙ†ÙŽØ§ Ø£ÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ù…ÙŽØ³ÙŽØ§Ø¡ÙŽØªÙŽÙ‡Ù - Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n"
          }
        ],
        "files": [
          {
            "file_name": "paste.txt"
          },
          {
            "file_name": "paste-2.txt"
          }
        ]
      }
    },
    {
      "id": "c2154843-7254-499d-8d60-2629f0c0c6c5",
      "role": "assistant",
      "content": " Here's an elegant and simplified approach to navigation and data loading using the fewest frameworks and services:\n\n1. Create a simple router class to handle navigation:\n\n```dart\nclass AppRouter {\n  static const home = '/';\n  static const editDetails = '/edit-details';\n\n  static Route<dynamic> generateRoute(RouteSettings settings) {\n    switch (settings.name) {\n      case home:\n        return MaterialPageRoute(builder: (_) => HomeScreen());\n      case editDetails:\n        return MaterialPageRoute(builder: (_) => EditDetailsScreen());\n      default:\n        return MaterialPageRoute(\n          builder: (_) => Scaffold(\n            body: Center(\n              child: Text('No route defined for ${settings.name}'),\n            ),\n          ),\n        );\n    }\n  }\n}\n```\n\n2. Update the `MaterialApp` widget to use the `AppRouter`:\n\n```dart\nMaterialApp(\n  title: 'Prayer Tracker',\n  theme: ThemeData(\n    primarySwatch: Colors.blue,\n  ),\n  initialRoute: AppRouter.home,\n  onGenerateRoute: AppRouter.generateRoute,\n);\n```\n\n3. Simplify the `PrayerProvider` to handle data loading and state management:\n\n```dart\nclass PrayerProvider with ChangeNotifier {\n  Map<String, PrayerData> _prayerData = {};\n  bool _isLoading = true;\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n  bool get isLoading => _isLoading;\n\n  Future<void> loadData() async {\n    // Simulate data loading delay\n    await Future.delayed(Duration(seconds: 2));\n\n    // Load prayer data from a data source (e.g., JSON file, API)\n    final jsonString = await rootBundle.loadString('assets/prayer_data.json');\n    final jsonData = json.decode(jsonString) as Map<String, dynamic>;\n\n    _prayerData = jsonData.map((key, value) => MapEntry(key, PrayerData.fromJson(value)));\n\n    _isLoading = false;\n    notifyListeners();\n  }\n\n  // Other methods for updating and managing prayer data\n}\n```\n\n4. Update the `HomeScreen` to use the simplified `PrayerProvider`:\n\n```dart\nclass HomeScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, child) {\n          if (provider.isLoading) {\n            return Center(child: CircularProgressIndicator());\n          }\n\n          // Display prayer data and UI components\n          return ListView(\n            children: [\n              // Prayer progress card\n              // Prayer completion percentage\n              // Edit details button\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n5. Update the `EditDetailsScreen` to use the simplified `PrayerProvider`:\n\n```dart\nclass EditDetailsScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, child) {\n          // Display form fields for editing prayer details\n          return ListView(\n            children: [\n              // Year dropdown\n              // Month dropdown\n              // Percentage completed slider\n              // Save button\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\nThis simplified approach uses the `Provider` package for state management and a basic router class for navigation. It eliminates the need for complex navigation logic and reduces the reliance on additional frameworks and services.\n\nThe `PrayerProvider` handles loading the prayer data from a JSON file (`prayer_data.json`) and manages the state of the loaded data. The `HomeScreen` and `EditDetailsScreen` consume the `PrayerProvider` to display the prayer data and provide editing functionality.\n\nRemember to create the `prayer_data.json` file in the `assets` folder with the initial prayer data.\n\nThis approach aims to provide a clean and straightforward architecture for the prayer tracking app, focusing on simplicity and minimizing dependencies.",
      "created_at": "2024-06-05T12:25:24.560075Z",
      "sequence_order": 1,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T12:25:24.560075Z",
            "stop_timestamp": "2024-06-05T12:25:24.560075Z",
            "flags": null,
            "type": "text",
            "text": " Here's an elegant and simplified approach to navigation and data loading using the fewest frameworks and services:\n\n1. Create a simple router class to handle navigation:\n\n```dart\nclass AppRouter {\n  static const home = '/';\n  static const editDetails = '/edit-details';\n\n  static Route<dynamic> generateRoute(RouteSettings settings) {\n    switch (settings.name) {\n      case home:\n        return MaterialPageRoute(builder: (_) => HomeScreen());\n      case editDetails:\n        return MaterialPageRoute(builder: (_) => EditDetailsScreen());\n      default:\n        return MaterialPageRoute(\n          builder: (_) => Scaffold(\n            body: Center(\n              child: Text('No route defined for ${settings.name}'),\n            ),\n          ),\n        );\n    }\n  }\n}\n```\n\n2. Update the `MaterialApp` widget to use the `AppRouter`:\n\n```dart\nMaterialApp(\n  title: 'Prayer Tracker',\n  theme: ThemeData(\n    primarySwatch: Colors.blue,\n  ),\n  initialRoute: AppRouter.home,\n  onGenerateRoute: AppRouter.generateRoute,\n);\n```\n\n3. Simplify the `PrayerProvider` to handle data loading and state management:\n\n```dart\nclass PrayerProvider with ChangeNotifier {\n  Map<String, PrayerData> _prayerData = {};\n  bool _isLoading = true;\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n  bool get isLoading => _isLoading;\n\n  Future<void> loadData() async {\n    // Simulate data loading delay\n    await Future.delayed(Duration(seconds: 2));\n\n    // Load prayer data from a data source (e.g., JSON file, API)\n    final jsonString = await rootBundle.loadString('assets/prayer_data.json');\n    final jsonData = json.decode(jsonString) as Map<String, dynamic>;\n\n    _prayerData = jsonData.map((key, value) => MapEntry(key, PrayerData.fromJson(value)));\n\n    _isLoading = false;\n    notifyListeners();\n  }\n\n  // Other methods for updating and managing prayer data\n}\n```\n\n4. Update the `HomeScreen` to use the simplified `PrayerProvider`:\n\n```dart\nclass HomeScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, child) {\n          if (provider.isLoading) {\n            return Center(child: CircularProgressIndicator());\n          }\n\n          // Display prayer data and UI components\n          return ListView(\n            children: [\n              // Prayer progress card\n              // Prayer completion percentage\n              // Edit details button\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n5. Update the `EditDetailsScreen` to use the simplified `PrayerProvider`:\n\n```dart\nclass EditDetailsScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, child) {\n          // Display form fields for editing prayer details\n          return ListView(\n            children: [\n              // Year dropdown\n              // Month dropdown\n              // Percentage completed slider\n              // Save button\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\nThis simplified approach uses the `Provider` package for state management and a basic router class for navigation. It eliminates the need for complex navigation logic and reduces the reliance on additional frameworks and services.\n\nThe `PrayerProvider` handles loading the prayer data from a JSON file (`prayer_data.json`) and manages the state of the loaded data. The `HomeScreen` and `EditDetailsScreen` consume the `PrayerProvider` to display the prayer data and provide editing functionality.\n\nRemember to create the `prayer_data.json` file in the `assets` folder with the initial prayer data.\n\nThis approach aims to provide a clean and straightforward architecture for the prayer tracking app, focusing on simplicity and minimizing dependencies.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T12:25:24.560075Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "68350209-299d-406e-a8d6-e4ccd27f72e3",
      "role": "human",
      "content": "think step by step how to improve the code and return any files in their totality so i can copy and paste",
      "created_at": "2024-06-05T12:28:18.460104Z",
      "sequence_order": 2,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T12:28:18.460104Z",
            "stop_timestamp": "2024-06-05T12:28:18.460104Z",
            "flags": null,
            "type": "text",
            "text": "think step by step how to improve the code and return any files in their totality so i can copy and paste",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T12:28:18.460104Z",
        "attachments": [
          {
            "file_name": "paste.txt",
            "file_size": 8665,
            "file_type": "txt",
            "extracted_content": "To resolve the issue of the loading state never ending on the home screen, let's debug the code step by step and identify the problem.\n\nIn home_screen.dart, the FutureBuilder is used to wait for the loadData method to complete. However, the loadData method is not returning a Future, which means the FutureBuilder will never complete.\nTo fix this, update the loadData method in prayer_provider.dart to return a Future:\ndartCopy codeFuture<void> loadData() async {\n  await _prayerService.loadData();\n  _prayerData = _prayerService.prayerData;\n  notifyListeners();\n}\n\nNext, let's check the loadData method in prayer_service.dart. The method is marked as async, but it's not returning a Future. Update the method to return a Future<void>:\ndartCopy codeFuture<void> loadData() async {\n  var loadedData = await _hiveService.loadData('prayerData');\n\n  if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n    prayerData = Map<String, PrayerData>.from(\n      loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n    );\n  }\n\n  if (prayerData.isEmpty) {\n    for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        prayerData['$year-$month'] = _calculatePrayerData(\n          year,\n          month,\n          100 - kDefaultPercentageMissed.toDouble(),\n        );\n      }\n    }\n    await savePrayerData(prayerData.values.first);\n  }\n\n  isDataLoaded = true;\n  print('Loaded data from Hive: $prayerData');\n}\n\nWith these changes, the FutureBuilder in home_screen.dart should now work as expected. It will wait for the loadData method to complete and then display the prayer progress and individual prayer cards.\nHowever, if the loading state still doesn't end, there might be an issue with the savePrayerData method in prayer_service.dart. Ensure that the method is correctly saving the data to Hive and not causing any infinite loops or blocking the execution.\nAdditionally, you can add error handling and logging to the loadData and savePrayerData methods to identify any potential issues or exceptions that might be preventing the loading state from completing.\n\nHere's the updated prayer_service.dart file with the necessary changes:\ndartCopy codeimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    try {\n      var loadedData = await _hiveService.loadData('prayerData');\n\n      if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n        prayerData = Map<String, PrayerData>.from(\n          loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n        );\n      }\n\n      if (prayerData.isEmpty) {\n        for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n          for (int month = 1; month <= 12; month++) {\n            prayerData['$year-$month'] = _calculatePrayerData(\n              year,\n              month,\n              100 - kDefaultPercentageMissed.toDouble(),\n            );\n          }\n        }\n        await savePrayerData(prayerData.values.first);\n      }\n\n      isDataLoaded = true;\n      print('Loaded data from Hive: $prayerData');\n    } catch (e) {\n      print('Error loading data: $e');\n      // Handle the error appropriately\n    }\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    try {\n      prayerData['${data.year}-${data.month}'] = data;\n      await _hiveService.saveData('prayerData', prayerData);\n\n      Map<String, Map<String, dynamic>> unpacked = {};\n      prayerData.forEach((key, value) {\n        unpacked[key] = {\n          'year': value.year,\n          'month': value.month,\n          'prayersCompleted': value.prayersCompleted,\n          'prayersMissed': value.prayersMissed,\n          'totalPrayed': value.totalPrayed,\n          'totalMissed': value.totalMissed,\n          'percentagePrayed': value.percentagePrayed,\n          'percentageMissed': value.percentageMissed,\n        };\n      });\n      print('Updated data: $unpacked');\n      print('Saved data to Hive: $prayerData');\n\n      onPrayerDataUpdated?.call();\n    } catch (e) {\n      print('Error saving data: $e');\n      // Handle the error appropriately\n    }\n  }\n\n  // ... (rest of the code remains the same)\n}\nPlease update the prayer_service.dart file with the provided changes and let me know if the loading state issue is resolved. If you still encounter any problems or have further questions, feel free to ask. CopyRetryClaude does not have the ability to run the code it generates yet.Now I get a loading circle for each individual component, see image - also I can't go to the edit details screen:\n'package:flutter/src/material/dropdown.dart': Failed assertion: line 1619 pos 15: 'itepastedBG\nTo fix the issues with the loading circles for each individual component and the error in the edit details screen, let's go through the code step by step and make the necessary changes.\n\nIn prayer_progress_card_material.dart, remove the FutureBuilder for getMissedPrayersForMonth and combine it with the FutureBuilder for getCompletedPrayersForMonth:\n\ndartCopy code@override\nWidget build(BuildContext context) {\n  final prayerProvider = Provider.of<PrayerProvider>(context);\n\n  return FutureBuilder<Map<String, int>>(\n    future: Future.value({\n      'completed': prayerProvider.getCompletedPrayersForMonth(year, month, prayer),\n      'missed': prayerProvider.getMissedPrayersForMonth(year, month, prayer),\n    }),\n    builder: (context, snapshot) {\n      if (snapshot.connectionState == ConnectionState.waiting) {\n        return CircularProgressIndicator();\n      }\n      final completedPrayers = snapshot.data?['completed'] ?? 0;\n      final missedPrayers = snapshot.data?['missed'] ?? 0;\n      final totalPrayers = completedPrayers + missedPrayers;\n\n      return Card(\n        // ... (rest of the code remains the same)\n      );\n    },\n  );\n}\n\nIn edit_details_screen.dart, update the DropdownButtonFormField for year selection to ensure that the value property matches one of the items:\n\ndartCopy codeDropdownButtonFormField<int>(\n  value: _selectedYear,\n  items: [\n    DropdownMenuItem(\n      child: Text('Select Year'),\n      value: null,\n    ),\n    ...prayerProvider.prayerData.keys\n        .map((key) {\n          final parts = key.split('-');\n          final year = int.parse(parts[0]);\n          return DropdownMenuItem(\n            value: year,\n            child: Text(year.toString()),\n          );\n        })\n        .toSet()\n        .toList(),\n  ],\n  onChanged: (year) {\n    setState(() {\n      _selectedYear = year;\n      _selectedMonth = null;\n      if (year != null) {\n        _percentageCompleted = prayerProvider.getPrayerCompletionPercentageForYear(year);\n      }\n    });\n  },\n  decoration: InputDecoration(\n    labelText: 'Select Year',\n  ),\n),\n\nIn edit_details_screen.dart, update the initState method to set the initial value of _selectedYear to null:\n\ndartCopy code@override\nvoid initState() {\n  super.initState();\n  final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n  _startYearController = TextEditingController(text: prayerProvider.startYear.toString());\n  _endYearController = TextEditingController(text: prayerProvider.endYear.toString());\n  _selectedYear = null;\n}\n\nIn edit_details_screen.dart, update the didChangeDependencies method to set the initial value of _selectedYear only if it is null:\n\ndartCopy code@override\nvoid didChangeDependencies() {\n  super.didChangeDependencies();\n  final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n  if (_selectedYear == null && prayerProvider.prayerData.isNotEmpty) {\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n}\nWith these changes, the loading circles for each individual component should be resolved, and the error in the edit details screen should be fixed.\nAdditionally, make sure that the PrayerService methods getCompletedPrayersForMonth and getMissedPrayersForMonth are returning the correct data and not causing any errors or infinite loops.\nPlease update the relevant files with the provided changes and let me know if you encounter any further issues."
          },
          {
            "file_name": "paste-2.txt",
            "file_size": 86297,
            "file_type": "txt",
            "extracted_content": "it's not working, think strategically as a 10x programmer and come up with an elegant and simple solution to navigation and data loading that isn't complicated and uses the fewest frameworks and additional services\n\nIt's not working at all now, I get this error when I attempt to load:\n'package:flutter/src/material/dropdown.dart': Failed assertion: line 1619 pos 15: 'items == null\nIl items.isEmpty I| value == null |I\nitems.where ((DropdownMenultem<T> item){\nreturn item.value == value;\n}).length == 1': There should be exactly one item with [DropdownButton]'s value: 2024.\nEither zero or 2 or more [DropdownMenultem]s were detected with the same value\nSee also: https://flutter.dev/docs/testing/errors\n'}\n\nlib/screens/prayer_progress_card_material.dart:37:52: Error: The operator '[]' isn't defined for the class 'int'.\nTry correcting the operator to an existing operator, or defining a '[]' operator.\n            final completedPrayers = snapshot.data?['completed'] ?? 0;\n                                                   ^\nlib/screens/prayer_progress_card_material.dart:38:49: Error: The operator '[]' isn't defined for the class 'int'.\nTry correcting the operator to an existing operator, or defining a '[]' operator.\n            final missedPrayers = snapshot.data?['missed'] ?? 0;\n                                                ^\n\n\nTo resolve the issue of the loading state never ending on the home screen, let's debug the code step by step and identify the problem.\n\nIn home_screen.dart, the FutureBuilder is used to wait for the loadData method to complete. However, the loadData method is not returning a Future, which means the FutureBuilder will never complete.\nTo fix this, update the loadData method in prayer_provider.dart to return a Future:\ndartCopy codeFuture<void> loadData() async {\n  await _prayerService.loadData();\n  _prayerData = _prayerService.prayerData;\n  notifyListeners();\n}\n\nNext, let's check the loadData method in prayer_service.dart. The method is marked as async, but it's not returning a Future. Update the method to return a Future<void>:\ndartCopy codeFuture<void> loadData() async {\n  var loadedData = await _hiveService.loadData('prayerData');\n\n  if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n    prayerData = Map<String, PrayerData>.from(\n      loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n    );\n  }\n\n  if (prayerData.isEmpty) {\n    for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        prayerData['$year-$month'] = _calculatePrayerData(\n          year,\n          month,\n          100 - kDefaultPercentageMissed.toDouble(),\n        );\n      }\n    }\n    await savePrayerData(prayerData.values.first);\n  }\n\n  isDataLoaded = true;\n  print('Loaded data from Hive: $prayerData');\n}\n\nWith these changes, the FutureBuilder in home_screen.dart should now work as expected. It will wait for the loadData method to complete and then display the prayer progress and individual prayer cards.\nHowever, if the loading state still doesn't end, there might be an issue with the savePrayerData method in prayer_service.dart. Ensure that the method is correctly saving the data to Hive and not causing any infinite loops or blocking the execution.\nAdditionally, you can add error handling and logging to the loadData and savePrayerData methods to identify any potential issues or exceptions that might be preventing the loading state from completing.\n\nHere's the updated prayer_service.dart file with the necessary changes:\ndartCopy codeimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    try {\n      var loadedData = await _hiveService.loadData('prayerData');\n\n      if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n        prayerData = Map<String, PrayerData>.from(\n          loadedData.map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n        );\n      }\n\n      if (prayerData.isEmpty) {\n        for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n          for (int month = 1; month <= 12; month++) {\n            prayerData['$year-$month'] = _calculatePrayerData(\n              year,\n              month,\n              100 - kDefaultPercentageMissed.toDouble(),\n            );\n          }\n        }\n        await savePrayerData(prayerData.values.first);\n      }\n\n      isDataLoaded = true;\n      print('Loaded data from Hive: $prayerData');\n    } catch (e) {\n      print('Error loading data: $e');\n      // Handle the error appropriately\n    }\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    try {\n      prayerData['${data.year}-${data.month}'] = data;\n      await _hiveService.saveData('prayerData', prayerData);\n\n      Map<String, Map<String, dynamic>> unpacked = {};\n      prayerData.forEach((key, value) {\n        unpacked[key] = {\n          'year': value.year,\n          'month': value.month,\n          'prayersCompleted': value.prayersCompleted,\n          'prayersMissed': value.prayersMissed,\n          'totalPrayed': value.totalPrayed,\n          'totalMissed': value.totalMissed,\n          'percentagePrayed': value.percentagePrayed,\n          'percentageMissed': value.percentageMissed,\n        };\n      });\n      print('Updated data: $unpacked');\n      print('Saved data to Hive: $prayerData');\n\n      onPrayerDataUpdated?.call();\n    } catch (e) {\n      print('Error saving data: $e');\n      // Handle the error appropriately\n    }\n  }\n\n  // ... (rest of the code remains the same)\n}\nPlease update the prayer_service.dart file with the provided changes and let me know if the loading state issue is resolved. If you still encounter any problems or have further questions, feel free to ask. CopyRetryClaude does not have the ability to run the code it generates yet.Now I get a loading circle for each individual component, see image - also I can't go to the edit details screen:\n'package:flutter/src/material/dropdown.dart': Failed assertion: line 1619 pos 15: 'itepastedBG\nTo fix the issues with the loading circles for each individual component and the error in the edit details screen, let's go through the code step by step and make the necessary changes.\n\nIn prayer_progress_card_material.dart, remove the FutureBuilder for getMissedPrayersForMonth and combine it with the FutureBuilder for getCompletedPrayersForMonth:\n\ndartCopy code@override\nWidget build(BuildContext context) {\n  final prayerProvider = Provider.of<PrayerProvider>(context);\n\n  return FutureBuilder<Map<String, int>>(\n    future: Future.value({\n      'completed': prayerProvider.getCompletedPrayersForMonth(year, month, prayer),\n      'missed': prayerProvider.getMissedPrayersForMonth(year, month, prayer),\n    }),\n    builder: (context, snapshot) {\n      if (snapshot.connectionState == ConnectionState.waiting) {\n        return CircularProgressIndicator();\n      }\n      final completedPrayers = snapshot.data?['completed'] ?? 0;\n      final missedPrayers = snapshot.data?['missed'] ?? 0;\n      final totalPrayers = completedPrayers + missedPrayers;\n\n      return Card(\n        // ... (rest of the code remains the same)\n      );\n    },\n  );\n}\n\nIn edit_details_screen.dart, update the DropdownButtonFormField for year selection to ensure that the value property matches one of the items:\n\ndartCopy codeDropdownButtonFormField<int>(\n  value: _selectedYear,\n  items: [\n    DropdownMenuItem(\n      child: Text('Select Year'),\n      value: null,\n    ),\n    ...prayerProvider.prayerData.keys\n        .map((key) {\n          final parts = key.split('-');\n          final year = int.parse(parts[0]);\n          return DropdownMenuItem(\n            value: year,\n            child: Text(year.toString()),\n          );\n        })\n        .toSet()\n        .toList(),\n  ],\n  onChanged: (year) {\n    setState(() {\n      _selectedYear = year;\n      _selectedMonth = null;\n      if (year != null) {\n        _percentageCompleted = prayerProvider.getPrayerCompletionPercentageForYear(year);\n      }\n    });\n  },\n  decoration: InputDecoration(\n    labelText: 'Select Year',\n  ),\n),\n\nIn edit_details_screen.dart, update the initState method to set the initial value of _selectedYear to null:\n\ndartCopy code@override\nvoid initState() {\n  super.initState();\n  final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n  _startYearController = TextEditingController(text: prayerProvider.startYear.toString());\n  _endYearController = TextEditingController(text: prayerProvider.endYear.toString());\n  _selectedYear = null;\n}\n\nIn edit_details_screen.dart, update the didChangeDependencies method to set the initial value of _selectedYear only if it is null:\n\ndartCopy code@override\nvoid didChangeDependencies() {\n  super.didChangeDependencies();\n  final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n  if (_selectedYear == null && prayerProvider.prayerData.isNotEmpty) {\n    _selectedYear = prayerProvider.prayerData.keys.map((key) {\n      final parts = key.split('-');\n      return int.parse(parts[0]);\n    }).reduce((a, b) => a > b ? a : b);\n  }\n}\nWith these changes, the loading circles for each individual component should be resolved, and the error in the edit details screen should be fixed.\nAdditionally, make sure that the PrayerService methods getCompletedPrayersForMonth and getMissedPrayersForMonth are returning the correct data and not causing any errors or infinite loops.\nPlease update the relevant files with the provided changes and let me know if you encounter any further issues.\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./prayer_record.dart\n#############################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int fajrMissed;\n\n  @HiveField(3)\n  int dhuhrMissed;\n\n  @HiveField(4)\n  int asrMissed;\n\n  @HiveField(5)\n  int maghribMissed;\n\n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./main.dart\n####################\n\n// File: main.dart\nimport 'myApp.dart';\nimport 'package:flutter/material.dart';\nimport 'services/hive_service.dart';\nimport 'package:hive_flutter/hive_flutter.dart';\nimport 'models/prayer_data.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  Hive.registerAdapter(PrayerDataAdapter());\n  runApp(MyApp(hiveService: hiveService));\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./prayer_record.g.dart\n###############################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../services/prayer_service.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n  Map<String, PrayerData> _prayerData = {};\n  bool _isDataLoaded = false;\n\n  PrayerProvider(this._prayerService) {\n    _prayerService.onPrayerDataUpdated = _onPrayerDataUpdated;\n  }\n\n  void _onPrayerDataUpdated() {\n    notifyListeners();\n  }\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n  bool get isDataLoaded => _isDataLoaded;\n  int get startYear => kDefaultStartYear;\n  int get endYear => kDefaultEndYear;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData;\n    _isDataLoaded = true;\n    notifyListeners();\n  }\n\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getMissedPrayersForMonth(year, month, prayer);\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    return await _prayerService.getPrayerDataForMonth(year, month);\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    _prayerService.updatePrayerStats(\n        year, month, prayer, increaseCompletedCount);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForYear(year, percentageCompleted);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\n    notifyListeners();\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    return _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    return _prayerService.getPrayerCompletionPercentageForYear(year);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    return await _prayerService.getAggregatedPrayerData();\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    _prayerService.updateStartAndEndYear(startYear, endYear);\n    notifyListeners();\n  }\n}\n\n\n\n# File: ./models/prayer_record.dart\n####################################\n\nimport 'package:hive/hive.dart';\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n  @HiveField(1)\n  int month;\n  @HiveField(2)\n  int fajrMissed;\n  @HiveField(3)\n  int dhuhrMissed;\n  @HiveField(4)\n  int asrMissed;\n  @HiveField(5)\n  int maghribMissed;\n  @HiveField(6)\n  int ishaMissed;\n// Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./models/prayer_data.dart\n##################################\n\n// File: lib/models/prayer_data.dart\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_data.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerData {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  Map<String, int> prayersCompleted; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(3)\n  Map<String, int> prayersMissed; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(4)\n  int totalPrayed;\n\n  @HiveField(5)\n  int totalMissed;\n\n  @HiveField(6)\n  double percentagePrayed;\n\n  @HiveField(7)\n  double percentageMissed;\n\n  PrayerData({\n    required this.year,\n    required this.month,\n    required this.prayersCompleted,\n    required this.prayersMissed,\n    required this.totalPrayed,\n    required this.totalMissed,\n    required this.percentagePrayed,\n    required this.percentageMissed,\n  });\n\n  factory PrayerData.fromMap(Map<String, dynamic> map) {\n    return PrayerData(\n      year: map['year'],\n      month: map['month'],\n      prayersCompleted: Map<String, int>.from(map['prayersCompleted']),\n      prayersMissed: Map<String, int>.from(map['prayersMissed']),\n      totalPrayed: map['totalPrayed'],\n      totalMissed: map['totalMissed'],\n      percentagePrayed: map['percentagePrayed'],\n      percentageMissed: map['percentageMissed'],\n    );\n  }\n\n  Map<String, dynamic> toMap() {\n    return {\n      'year': year,\n      'month': month,\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'totalPrayed': totalPrayed,\n      'totalMissed': totalMissed,\n      'percentagePrayed': percentagePrayed,\n      'percentageMissed': percentageMissed,\n    };\n  }\n}\n\n\n\n# File: ./models/prayer_data.g.dart\n####################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_data.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerDataAdapter extends TypeAdapter<PrayerData> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerData read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerData(\n      year: fields[0] as int,\n      month: fields[1] as int,\n      prayersCompleted: (fields[2] as Map).cast<String, int>(),\n      prayersMissed: (fields[3] as Map).cast<String, int>(),\n      totalPrayed: fields[4] as int,\n      totalMissed: fields[5] as int,\n      percentagePrayed: fields[6] as double,\n      percentageMissed: fields[7] as double,\n    );\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerData obj) {\n    writer\n      ..writeByte(8)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.prayersCompleted)\n      ..writeByte(3)\n      ..write(obj.prayersMissed)\n      ..writeByte(4)\n      ..write(obj.totalPrayed)\n      ..writeByte(5)\n      ..write(obj.totalMissed)\n      ..writeByte(6)\n      ..write(obj.percentagePrayed)\n      ..writeByte(7)\n      ..write(obj.percentageMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerDataAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./models/prayer_record.g.dart\n######################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\n// File: screens/prayer_progress_card_material.dart\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n  final VoidCallback onPrayPressed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.year,\n    required this.month,\n    required this.onPrayPressed,\n  });\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<Map<String, int>>(\n      future: Future.value({\n        'completed':\n            prayerProvider.getCompletedPrayersForMonth(year, month, prayer),\n        'missed': prayerProvider.getMissedPrayersForMonth(year, month, prayer),\n      }), // Fix: Wrap with Future.value()\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(prayerProvider.getMissedPrayersForMonth(\n              year, month, prayer)), // Fix: Wrap with Future.value()\n          builder: (context, snapshot) {\n            if (snapshot.connectionState == ConnectionState.waiting) {\n              return CircularProgressIndicator();\n            }\n            final completedPrayers = snapshot.data?['completed'] ?? 0;\n            final missedPrayers = snapshot.data?['missed'] ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Card(\n              child: Padding(\n                padding: const EdgeInsets.all(14.0),\n                child: Column(\n                  mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                  children: [\n                    Text(prayer,\n                        style: TextStyle(\n                            fontWeight: FontWeight.bold, fontSize: 16)),\n                    ClipRRect(\n                      borderRadius: BorderRadius.circular(8),\n                      child: LinearProgressIndicator(\n                        value: totalPrayers > 0\n                            ? completedPrayers / totalPrayers\n                            : 0,\n                        minHeight: 12,\n                        backgroundColor: Colors.grey[300],\n                        valueColor:\n                            AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                      ),\n                    ),\n                    Text(\n                        '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                        style: TextStyle(fontSize: 14)),\n                    Text('$completedPrayers / $totalPrayers',\n                        style: TextStyle(fontSize: 12)),\n                    ElevatedButton(\n                      onPressed: onPrayPressed,\n                      child: Text('Pray'),\n                    ),\n                  ],\n                ),\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_details_screen.dart\n#############################################\n\nimport 'package:flutter/material.dart';\nimport '../services/hive_service.dart';\nimport '../models/prayer_record.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          // Implement logic to find and increment the oldest missed prayer\n\n          return Column(\n            children: [\n              // Display and update prayer details here\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  const EditDetailsScreen({Key? key}) : super(key: key);\n\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  int? _selectedMonth;\n  double _percentageCompleted = 0;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _selectedYear = DateTime.now().year;\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: SingleChildScrollView(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            DropdownButtonFormField<int>(\n              value: _selectedYear,\n              items: [\n                DropdownMenuItem(\n                  child: Text('Select Year'),\n                  value: null,\n                ),\n                ...prayerProvider.prayerData.keys\n                    .map((key) {\n                      final parts = key.split('-');\n                      final year = int.parse(parts[0]);\n                      return DropdownMenuItem(\n                        value: year,\n                        child: Text(year.toString()),\n                      );\n                    })\n                    .toSet()\n                    .toList(),\n              ],\n              onChanged: (year) {\n                setState(() {\n                  _selectedYear = year;\n                  _selectedMonth = null;\n                  if (year != null) {\n                    _percentageCompleted = prayerProvider\n                        .getPrayerCompletionPercentageForYear(year);\n                  }\n                });\n              },\n              decoration: InputDecoration(\n                labelText: 'Select Year',\n              ),\n            ),\n            SizedBox(height: 16),\n            if (_selectedYear != null)\n              DropdownButtonFormField<int>(\n                value: _selectedMonth,\n                items: [\n                  DropdownMenuItem(\n                    child: Text('Average for total year, or select month'),\n                    value: null,\n                  ),\n                  ...List.generate(\n                    _selectedYear == DateTime.now().year\n                        ? DateTime.now().month - 1\n                        : 12,\n                    (index) => index + 1,\n                  ).map((month) => DropdownMenuItem(\n                        value: month,\n                        child: Text('Month $month'),\n                      )),\n                ],\n                onChanged: (month) {\n                  setState(() {\n                    _selectedMonth = month;\n                    if (month != null) {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForMonth(\n                        _selectedYear!,\n                        month,\n                      );\n                    } else {\n                      _percentageCompleted =\n                          prayerProvider.getPrayerCompletionPercentageForYear(\n                        _selectedYear!,\n                      );\n                    }\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Month',\n                ),\n              ),\n            SizedBox(height: 16),\n            Text(\n              'ðŸ•‹ Adjust the percentage of prayers completed for the selected year or month.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16),\n            Slider(\n              value: _percentageCompleted,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_percentageCompleted.round()}%',\n              onChanged: (value) {\n                setState(() {\n                  _percentageCompleted = value;\n                });\n              },\n              onChangeEnd: (value) {\n                if (_selectedYear != null) {\n                  if (_selectedMonth != null) {\n                    prayerProvider.updatePrayerStatsForMonth(\n                      _selectedYear!,\n                      _selectedMonth!,\n                      _percentageCompleted,\n                    );\n                    ScaffoldMessenger.of(context).showSnackBar(\n                      SnackBar(\n                          content: Text(\n                              'Changes saved for month $_selectedMonth of year $_selectedYear.')),\n                    );\n                  } else {\n                    prayerProvider.updatePrayerStatsForYear(\n                      _selectedYear!,\n                      _percentageCompleted,\n                    );\n                    ScaffoldMessenger.of(context).showSnackBar(\n                      SnackBar(\n                          content:\n                              Text('Changes saved for year $_selectedYear.')),\n                    );\n                  }\n                }\n              },\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\nimport '../models/prayer_data.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(PrayerData(\n      // Fix: Pass a PrayerData object\n      year: startYear,\n      month: startMonth,\n      prayersCompleted: {},\n      prayersMissed: {},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    ));\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\n// File: screens/prayer_progress_card_cupertino.dart\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n\n  const PrayerProgressCardCupertino({\n    required this.prayer,\n    required this.year,\n    required this.month,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(\n          prayerProvider.getCompletedPrayersForMonth(year, month, prayer)),\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(\n              prayerProvider.getMissedPrayersForMonth(year, month, prayer)),\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CupertinoActivityIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Container(\n              margin: EdgeInsets.all(8.0),\n              padding: EdgeInsets.all(14.0),\n              decoration: BoxDecoration(\n                color: CupertinoColors.white,\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: CupertinoColors.systemGrey.withOpacity(0.4),\n                    spreadRadius: 1,\n                    blurRadius: 3,\n                    offset: Offset(0, 2),\n                  ),\n                ],\n              ),\n              child: Column(\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                children: [\n                  Text(prayer,\n                      style:\n                          TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n                  SizedBox(height: 8),\n                  ClipRRect(\n                    borderRadius: BorderRadius.circular(8),\n                    child: LinearProgressIndicator(\n                      value: totalPrayers > 0\n                          ? completedPrayers / totalPrayers\n                          : 0,\n                      minHeight: 12,\n                      backgroundColor: CupertinoColors.systemGrey4,\n                      valueColor: AlwaysStoppedAnimation<Color>(\n                          CupertinoColors.activeGreen),\n                    ),\n                  ),\n                  SizedBox(height: 8),\n                  Text(\n                      '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                      style: TextStyle(fontSize: 14)),\n                  Text('$completedPrayers / $totalPrayers',\n                      style: TextStyle(fontSize: 12)),\n                  SizedBox(height: 8),\n                  CupertinoButton.filled(\n                    onPressed: () => prayerProvider.incrementPrayer(prayer),\n                    child: Text('Pray'),\n                  ),\n                ],\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\n\nclass HomeScreen extends StatelessWidget {\n  const HomeScreen({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Consumer<PrayerProvider>(\n      builder: (context, prayerProvider, _) {\n        if (!prayerProvider.isDataLoaded) {\n          return Scaffold(body: Center(child: CircularProgressIndicator()));\n        }\n\n        final currentYear = DateTime.now().year;\n        final currentMonth = DateTime.now().month;\n        final prayers = prayerProvider.prayers;\n\n        return Scaffold(\n          appBar: AppBar(\n            title: Text('Prayer Tracker'),\n            actions: [\n              IconButton(\n                icon: Icon(Icons.edit),\n                onPressed: () {\n                  Navigator.pushNamed(context, '/edit-details');\n                },\n              ),\n            ],\n          ),\n          body: Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Column(\n              crossAxisAlignment: CrossAxisAlignment.stretch,\n              children: [\n                FutureBuilder<Map<String, dynamic>>(\n                  future: prayerProvider.getAggregatedPrayerData(),\n                  builder: (context, snapshot) {\n                    if (snapshot.connectionState == ConnectionState.waiting) {\n                      return CircularProgressIndicator();\n                    }\n                    final aggregatedData = snapshot.data;\n                    final totalPrayed = aggregatedData?['totalPrayed'] ?? 0;\n                    final totalPossible = aggregatedData?['totalPossible'] ?? 0;\n                    return Column(\n                      children: [\n                        LinearProgressIndicator(\n                          value: totalPossible > 0\n                              ? totalPrayed / totalPossible\n                              : 0,\n                          minHeight: 16,\n                          backgroundColor: Colors.grey[300],\n                          valueColor:\n                              AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                        ),\n                        SizedBox(height: 8),\n                        Row(\n                          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                          children: [\n                            Text('$totalPrayed'),\n                            Text('$totalPossible'),\n                          ],\n                        ),\n                      ],\n                    );\n                  },\n                ),\n                SizedBox(height: 16),\n                Expanded(\n                  child: GridView.count(\n                    crossAxisCount: 2,\n                    childAspectRatio: 1.5,\n                    crossAxisSpacing: 12,\n                    mainAxisSpacing: 12,\n                    children: prayers.map((prayer) {\n                      return PrayerProgressCardMaterial(\n                        prayer: prayer,\n                        year: currentYear,\n                        month: currentMonth,\n                        onPrayPressed: () {\n                          prayerProvider.incrementPrayer(prayer);\n                        },\n                      );\n                    }).toList(),\n                  ),\n                ),\n              ],\n            ),\n          ),\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/flutter_build/dart_plugin_registrant.dart\n###############################################################\n\n//\n// Generated file. Do not edit.\n// This file is generated from template in file `flutter_tools/lib/src/flutter_plugins.dart`.\n//\n\n// @dart = 3.3\n\nimport 'dart:io'; // flutter_ignore: dart_io_import.\nimport 'package:path_provider_android/path_provider_android.dart';\nimport 'package:shared_preferences_android/shared_preferences_android.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_linux/path_provider_linux.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_linux/shared_preferences_linux.dart';\nimport 'package:url_launcher_linux/url_launcher_linux.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_windows/path_provider_windows.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_windows/shared_preferences_windows.dart';\nimport 'package:url_launcher_windows/url_launcher_windows.dart';\n\n@pragma('vm:entry-point')\nclass _PluginRegistrant {\n\n  @pragma('vm:entry-point')\n  static void register() {\n    if (Platform.isAndroid) {\n      try {\n        PathProviderAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isIOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isLinux) {\n      try {\n        PathProviderLinux.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusLinuxPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesLinux.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherLinux.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isMacOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isWindows) {\n      try {\n        PathProviderWindows.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusWindowsPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesWindows.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherWindows.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./.dart_tool/build/entrypoint/build.dart\n#################################################\n\n// ignore_for_file: directives_ordering\n// ignore_for_file: no_leading_underscores_for_library_prefixes\nimport 'package:build_runner_core/build_runner_core.dart' as _i1;\nimport 'package:hive_generator/hive_generator.dart' as _i2;\nimport 'package:source_gen/builder.dart' as _i3;\nimport 'dart:isolate' as _i4;\nimport 'package:build_runner/build_runner.dart' as _i5;\nimport 'dart:io' as _i6;\n\nfinal _builders = <_i1.BuilderApplication>[\n  _i1.apply(\n    r'hive_generator:hive_generator',\n    [_i2.getBuilder],\n    _i1.toDependentsOf(r'hive_generator'),\n    hideOutput: true,\n    appliesBuilders: const [r'source_gen:combining_builder'],\n  ),\n  _i1.apply(\n    r'source_gen:combining_builder',\n    [_i3.combiningBuilder],\n    _i1.toNoneByDefault(),\n    hideOutput: false,\n    appliesBuilders: const [r'source_gen:part_cleanup'],\n  ),\n  _i1.applyPostProcess(\n    r'source_gen:part_cleanup',\n    _i3.partCleanup,\n  ),\n];\nvoid main(\n  List<String> args, [\n  _i4.SendPort? sendPort,\n]) async {\n  var result = await _i5.run(\n    args,\n    _builders,\n  );\n  sendPort?.send(result);\n  _i6.exitCode = result;\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\n// File: hive_service.dart\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    await Hive.deleteBoxFromDisk('prayerBox'); // Clear the existing box\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n    ;\n\n    if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    onPrayerDataUpdated?.call();\n  }\n\n  void incrementPrayer(String prayer) {\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear ||\n              (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed =\n          (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed =\n          (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1;\n        month <= (year == currentYear ? currentMonth - 1 : 12);\n        month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int year = startYear; year <= endYear; year++) {\n      final endMonth = year == currentYear ? currentMonth : 12;\n      for (int month = 1; month <= endMonth; month++) {\n        final key = '$year-$month';\n        if (!prayerData.containsKey(key)) {\n          prayerData[key] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n    }\n    savePrayerData(prayerData.values.first);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    int totalPrayed = 0;\n    int totalPossible = 0;\n\n    for (final data in prayerData.values) {\n      totalPrayed += data.totalPrayed;\n      totalPossible += data.totalPrayed + data.totalMissed;\n    }\n\n    return {\n      'totalPrayed': totalPrayed,\n      'totalPossible': totalPossible,\n    };\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(\n      int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers)\n        prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n\n\n\n# File: ./widgets/progress_bar.dart\n####################################\n\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double value;\n\n  ProgressBar({required this.value});\n\n  @override\n  Widget build(BuildContext context) {\n    return LinearProgressIndicator(value: value);\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ï·º) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'Ø¹ÙŽÙ†Ù’ Ø£ÙŽØ¨ÙÙŠ Ù‡ÙØ±ÙŽÙŠÙ’Ø±ÙŽØ©ÙŽ Ø±ÙŽØ¶ÙÙŠÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ†Ù’Ù‡Ù Ù‚ÙŽØ§Ù„ÙŽ: Ù‚ÙŽØ§Ù„ÙŽ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù ØµÙŽÙ„ÙŽÙ‘Ù‰ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ÙˆÙŽØ³ÙŽÙ„ÙŽÙ‘Ù…ÙŽ: \" Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙŽ Ø¹ÙŽØ²ÙŽÙ‘ ÙˆÙŽØ¬ÙŽÙ„ÙŽÙ‘ Ù‚ÙŽØ§Ù„ÙŽ: Ù…ÙŽÙ†Ù’ Ø¹ÙŽØ§Ø¯ÙŽÙ‰ Ù„ÙÙŠ ÙˆÙŽÙ„ÙÙŠÙ‹Ù‘Ø§ØŒ ÙÙŽÙ‚ÙŽØ¯Ù’ Ø¢Ø°ÙŽÙ†Ù’ØªÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙŽØ±Ù’Ø¨ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨ÙŽ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø¨ÙØ´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽØ­ÙŽØ¨ÙŽÙ‘ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ù…ÙÙ…ÙŽÙ‘Ø§ Ø§ÙÙ’ØªÙŽØ±ÙŽØ¶Ù’ØªÙ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ÙŠÙŽØ²ÙŽØ§Ù„Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ ÙŠÙŽØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨Ù Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¨ÙØ§Ù„Ù†ÙŽÙ‘ÙˆÙŽØ§ÙÙÙ„Ù Ø­ÙŽØªÙŽÙ‘Ù‰ Ø£ÙØ­ÙØ¨ÙŽÙ‘Ù‡ÙØŒ ÙÙŽØ¥ÙØ°ÙŽØ§ Ø£ÙŽØ­Ù’Ø¨ÙŽØ¨Ù’ØªÙÙ‡ÙØŒ ÙƒÙÙ†Ù’ØªÙ Ø³ÙŽÙ…Ù’Ø¹ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙŽØ³Ù’Ù…ÙŽØ¹Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽØ¨ÙŽØµÙŽØ±ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙØ¨Ù’ØµÙØ±Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽÙŠÙŽØ¯ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽØ¨Ù’Ø·ÙØ´Ù Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ±ÙØ¬Ù’Ù„ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽÙ…Ù’Ø´ÙÙŠ Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ¥ÙÙ†Ù’ Ø³ÙŽØ£ÙŽÙ„ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹Ù’Ø·ÙÙŠÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ„ÙŽØ¦ÙÙ†Ù’ Ø§Ø³Ù’ØªÙŽØ¹ÙŽØ§Ø°ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹ÙÙŠØ°ÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽØ±ÙŽØ¯ÙŽÙ‘Ø¯Ù’ØªÙ Ø¹ÙŽÙ†Ù’ Ø´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽÙ†ÙŽØ§ ÙÙŽØ§Ø¹ÙÙ„ÙÙ‡Ù ØªÙŽØ±ÙŽØ¯ÙÙ‘Ø¯ÙÙŠ Ø¹ÙŽÙ†Ù’ Ù†ÙŽÙÙ’Ø³Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØŒ ÙŠÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ø§Ù„Ù’Ù…ÙŽÙˆÙ’ØªÙŽ ÙˆÙŽØ£ÙŽÙ†ÙŽØ§ Ø£ÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ù…ÙŽØ³ÙŽØ§Ø¡ÙŽØªÙŽÙ‡Ù - Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n"
          }
        ],
        "files": [
          {
            "file_name": "paste.txt"
          },
          {
            "file_name": "paste-2.txt"
          }
        ]
      }
    },
    {
      "id": "b8a46284-24c2-45a5-b1f4-c70d7d3320ba",
      "role": "assistant",
      "content": " Here are the steps to improve the code and simplify the navigation and data loading:\n\n1. Simplify the `PrayerProvider` class:\n   - Remove the dependency on `PrayerService` and handle the data management within the provider itself.\n   - Load the initial prayer data from a local JSON file instead of generating it dynamically.\n   - Provide methods to update and save the prayer data.\n\n2. Update the `HomeScreen` to use the simplified `PrayerProvider`:\n   - Remove the `FutureBuilder` and use the `Consumer` to access the prayer data directly from the provider.\n   - Display the prayer progress and individual prayer cards based on the current month and year.\n\n3. Update the `EditDetailsScreen` to use the simplified `PrayerProvider`:\n   - Remove the `FutureBuilder` and use the `Consumer` to access the prayer data directly from the provider.\n   - Allow editing the prayer details for a selected year and month.\n\n4. Simplify the navigation by using named routes:\n   - Define named routes for each screen in the `MaterialApp` widget.\n   - Use `Navigator.pushNamed` to navigate between screens.\n\nHere are the updated files with the improvements:\n\n# File: prayer_provider.dart\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/services.dart' show rootBundle;\nimport 'dart:convert';\nimport '../models/prayer_data.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  Map<String, PrayerData> _prayerData = {};\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  Future<void> loadData() async {\n    final jsonString = await rootBundle.loadString('assets/prayer_data.json');\n    final jsonData = json.decode(jsonString) as Map<String, dynamic>;\n\n    _prayerData = jsonData.map(\n      (key, value) => MapEntry(key, PrayerData.fromJson(value)),\n    );\n\n    notifyListeners();\n  }\n\n  void updatePrayerData(PrayerData updatedData) {\n    _prayerData['${updatedData.year}-${updatedData.month}'] = updatedData;\n    notifyListeners();\n  }\n\n  void incrementPrayer(int year, int month, String prayer) {\n    final key = '$year-$month';\n    if (_prayerData.containsKey(key)) {\n      final data = _prayerData[key]!;\n      data.prayersCompleted[prayer] = (data.prayersCompleted[prayer] ?? 0) + 1;\n      data.totalPrayed++;\n      notifyListeners();\n    }\n  }\n\n  PrayerData getPrayerDataForMonth(int year, int month) {\n    final key = '$year-$month';\n    return _prayerData[key] ?? PrayerData.empty();\n  }\n}\n```\n\n# File: home_screen.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card.dart';\n\nclass HomeScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n        actions: [\n          IconButton(\n            icon: Icon(Icons.edit),\n            onPressed: () {\n              Navigator.pushNamed(context, '/edit-details');\n            },\n          ),\n        ],\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final currentYear = DateTime.now().year;\n          final currentMonth = DateTime.now().month;\n          final prayerData = provider.getPrayerDataForMonth(currentYear, currentMonth);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Display total progress\n              LinearProgressIndicator(\n                value: prayerData.totalPrayed / (prayerData.totalPrayed + prayerData.totalMissed),\n              ),\n              SizedBox(height: 16.0),\n\n              // Display individual prayer cards\n              GridView.count(\n                crossAxisCount: 2,\n                shrinkWrap: true,\n                children: prayerData.prayersCompleted.keys.map((prayer) {\n                  return PrayerProgressCard(\n                    prayer: prayer,\n                    completed: prayerData.prayersCompleted[prayer] ?? 0,\n                    total: prayerData.prayersCompleted[prayer]! + (prayerData.prayersMissed[prayer] ?? 0),\n                    onPrayPressed: () {\n                      provider.incrementPrayer(currentYear, currentMonth, prayer);\n                    },\n                  );\n                }).toList(),\n              ),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n# File: edit_details_screen.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  int? _selectedMonth;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final years = provider.prayerData.keys.map((key) => key.split('-')[0]).toSet();\n          final months = List.generate(12, (index) => index + 1);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Year dropdown\n              DropdownButtonFormField<int>(\n                value: _selectedYear,\n                items: years.map((year) {\n                  return DropdownMenuItem(\n                    value: int.parse(year),\n                    child: Text(year),\n                  );\n                }).toList(),\n                onChanged: (value) {\n                  setState(() {\n                    _selectedYear = value;\n                    _selectedMonth = null;\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Year',\n                ),\n              ),\n              SizedBox(height: 16.0),\n\n              // Month dropdown\n              if (_selectedYear != null)\n                DropdownButtonFormField<int>(\n                  value: _selectedMonth,\n                  items: months.map((month) {\n                    return DropdownMenuItem(\n                      value: month,\n                      child: Text(month.toString()),\n                    );\n                  }).toList(),\n                  onChanged: (value) {\n                    setState(() {\n                      _selectedMonth = value;\n                    });\n                  },\n                  decoration: InputDecoration(\n                    labelText: 'Select Month',\n                  ),\n                ),\n              SizedBox(height: 16.0),\n\n              // Prayer data form fields\n              if (_selectedYear != null && _selectedMonth != null)\n                // Display form fields for editing prayer data\n                // ...\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n# File: main.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/edit_details_screen.dart';\n\nvoid main() {\n  runApp(MyApp());\n}\n\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return ChangeNotifierProvider(\n      create: (_) => PrayerProvider()..loadData(),\n      child: MaterialApp(\n        title: 'Prayer Tracker',\n        theme: ThemeData(\n          primarySwatch: Colors.blue,\n        ),\n        initialRoute: '/',\n        routes: {\n          '/': (context) => HomeScreen(),\n          '/edit-details': (context) => EditDetailsScreen(),\n        },\n      ),\n    );\n  }\n}\n```\n\nThese are the main files that have been updated to simplify the navigation and data loading. The `PrayerProvider` now handles the data management internally, and the screens use the `Consumer` to access the prayer data directly from the provider. The navigation has been simplified by using named routes.\n\nRemember to create the `assets/prayer_data.json` file with the initial prayer data.\n\nNote: The code provided assumes the existence of the `PrayerData` model class and the `PrayerProgressCard` widget, which you would need to implement separately.\n\nPlease let me know if you have any further questions!",
      "created_at": "2024-06-05T12:28:18.460104Z",
      "sequence_order": 3,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T12:28:18.460104Z",
            "stop_timestamp": "2024-06-05T12:28:18.460104Z",
            "flags": null,
            "type": "text",
            "text": " Here are the steps to improve the code and simplify the navigation and data loading:\n\n1. Simplify the `PrayerProvider` class:\n   - Remove the dependency on `PrayerService` and handle the data management within the provider itself.\n   - Load the initial prayer data from a local JSON file instead of generating it dynamically.\n   - Provide methods to update and save the prayer data.\n\n2. Update the `HomeScreen` to use the simplified `PrayerProvider`:\n   - Remove the `FutureBuilder` and use the `Consumer` to access the prayer data directly from the provider.\n   - Display the prayer progress and individual prayer cards based on the current month and year.\n\n3. Update the `EditDetailsScreen` to use the simplified `PrayerProvider`:\n   - Remove the `FutureBuilder` and use the `Consumer` to access the prayer data directly from the provider.\n   - Allow editing the prayer details for a selected year and month.\n\n4. Simplify the navigation by using named routes:\n   - Define named routes for each screen in the `MaterialApp` widget.\n   - Use `Navigator.pushNamed` to navigate between screens.\n\nHere are the updated files with the improvements:\n\n# File: prayer_provider.dart\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/services.dart' show rootBundle;\nimport 'dart:convert';\nimport '../models/prayer_data.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  Map<String, PrayerData> _prayerData = {};\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  Future<void> loadData() async {\n    final jsonString = await rootBundle.loadString('assets/prayer_data.json');\n    final jsonData = json.decode(jsonString) as Map<String, dynamic>;\n\n    _prayerData = jsonData.map(\n      (key, value) => MapEntry(key, PrayerData.fromJson(value)),\n    );\n\n    notifyListeners();\n  }\n\n  void updatePrayerData(PrayerData updatedData) {\n    _prayerData['${updatedData.year}-${updatedData.month}'] = updatedData;\n    notifyListeners();\n  }\n\n  void incrementPrayer(int year, int month, String prayer) {\n    final key = '$year-$month';\n    if (_prayerData.containsKey(key)) {\n      final data = _prayerData[key]!;\n      data.prayersCompleted[prayer] = (data.prayersCompleted[prayer] ?? 0) + 1;\n      data.totalPrayed++;\n      notifyListeners();\n    }\n  }\n\n  PrayerData getPrayerDataForMonth(int year, int month) {\n    final key = '$year-$month';\n    return _prayerData[key] ?? PrayerData.empty();\n  }\n}\n```\n\n# File: home_screen.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card.dart';\n\nclass HomeScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n        actions: [\n          IconButton(\n            icon: Icon(Icons.edit),\n            onPressed: () {\n              Navigator.pushNamed(context, '/edit-details');\n            },\n          ),\n        ],\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final currentYear = DateTime.now().year;\n          final currentMonth = DateTime.now().month;\n          final prayerData = provider.getPrayerDataForMonth(currentYear, currentMonth);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Display total progress\n              LinearProgressIndicator(\n                value: prayerData.totalPrayed / (prayerData.totalPrayed + prayerData.totalMissed),\n              ),\n              SizedBox(height: 16.0),\n\n              // Display individual prayer cards\n              GridView.count(\n                crossAxisCount: 2,\n                shrinkWrap: true,\n                children: prayerData.prayersCompleted.keys.map((prayer) {\n                  return PrayerProgressCard(\n                    prayer: prayer,\n                    completed: prayerData.prayersCompleted[prayer] ?? 0,\n                    total: prayerData.prayersCompleted[prayer]! + (prayerData.prayersMissed[prayer] ?? 0),\n                    onPrayPressed: () {\n                      provider.incrementPrayer(currentYear, currentMonth, prayer);\n                    },\n                  );\n                }).toList(),\n              ),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n# File: edit_details_screen.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  int? _selectedMonth;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final years = provider.prayerData.keys.map((key) => key.split('-')[0]).toSet();\n          final months = List.generate(12, (index) => index + 1);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Year dropdown\n              DropdownButtonFormField<int>(\n                value: _selectedYear,\n                items: years.map((year) {\n                  return DropdownMenuItem(\n                    value: int.parse(year),\n                    child: Text(year),\n                  );\n                }).toList(),\n                onChanged: (value) {\n                  setState(() {\n                    _selectedYear = value;\n                    _selectedMonth = null;\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Year',\n                ),\n              ),\n              SizedBox(height: 16.0),\n\n              // Month dropdown\n              if (_selectedYear != null)\n                DropdownButtonFormField<int>(\n                  value: _selectedMonth,\n                  items: months.map((month) {\n                    return DropdownMenuItem(\n                      value: month,\n                      child: Text(month.toString()),\n                    );\n                  }).toList(),\n                  onChanged: (value) {\n                    setState(() {\n                      _selectedMonth = value;\n                    });\n                  },\n                  decoration: InputDecoration(\n                    labelText: 'Select Month',\n                  ),\n                ),\n              SizedBox(height: 16.0),\n\n              // Prayer data form fields\n              if (_selectedYear != null && _selectedMonth != null)\n                // Display form fields for editing prayer data\n                // ...\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n# File: main.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/edit_details_screen.dart';\n\nvoid main() {\n  runApp(MyApp());\n}\n\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return ChangeNotifierProvider(\n      create: (_) => PrayerProvider()..loadData(),\n      child: MaterialApp(\n        title: 'Prayer Tracker',\n        theme: ThemeData(\n          primarySwatch: Colors.blue,\n        ),\n        initialRoute: '/',\n        routes: {\n          '/': (context) => HomeScreen(),\n          '/edit-details': (context) => EditDetailsScreen(),\n        },\n      ),\n    );\n  }\n}\n```\n\nThese are the main files that have been updated to simplify the navigation and data loading. The `PrayerProvider` now handles the data management internally, and the screens use the `Consumer` to access the prayer data directly from the provider. The navigation has been simplified by using named routes.\n\nRemember to create the `assets/prayer_data.json` file with the initial prayer data.\n\nNote: The code provided assumes the existence of the `PrayerData` model class and the `PrayerProgressCard` widget, which you would need to implement separately.\n\nPlease let me know if you have any further questions!",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T12:28:18.460104Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "2dae6400-6cc3-4288-8249-ac647ccbed64",
      "role": "human",
      "content": "--- xcodebuild: WARNING: Using the first of multiple matching destinations:\n{ platform:macOS, arch:arm64, id:00008112-001A04E41123C01E, name:My Mac }\n{ platform:macOS, arch:x86_64, id:00008112-001A04E41123C01E, name:My Mac }\nlib/screens/home_screen.dart:4:8: Error: Error when reading 'lib/screens/prayer_progress_card.dart': No such file or directory\nimport 'prayer_progress_card.dart';\n       ^\nlib/providers/prayer_provider.dart:16:48: Error: Member not found: 'PrayerData.fromJson'.\n      (key, value) => MapEntry(key, PrayerData.fromJson(value)),\n                                               ^^^^^^^^\nlib/providers/prayer_provider.dart:39:43: Error: Member not found: 'PrayerData.empty'.\n    return _prayerData[key] ?? PrayerData.empty();\n                                          ^^^^^\nlib/screens/home_screen.dart:43:26: Error: The method 'PrayerProgressCard' isn't defined for the class 'HomeScreen'.\n - 'HomeScreen' is from 'package:amana/screens/home_screen.dart' ('lib/screens/home_screen.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'PrayerProgressCard'.\n                  return PrayerProgressCard(\n                         ^^^^^^^^^^^^^^^^^^\nlib/screens/home_screen.dart:53:20: Error: The argument type 'List<dynamic>' can't be assigned to the parameter type 'List<Widget>'.\n - 'List' is from 'dart:core'.\n - 'Widget' is from 'package:flutter/src/widgets/framework.dart' ('/opt/homebrew/Caskroom/flutter/3.19.3/flutter/packages/flutter/lib/src/widgets/framework.dart').\n                }).toList(),\n                   ^\nlib/screens/edit_details_screen.dart:74:13: Error: Expected an identifier, but got ']'.\nTry inserting an identifier before ']'.\n            ],\n            ^\nTarget kernel_snapshot failed: Exception\nCommand PhaseScriptExecution failed with a nonzero exit code\n** BUILD FAILED **\n\n\nDon't use json we have a constants file:\namana_audit/lib/constants.dart",
      "created_at": "2024-06-05T12:40:13.796903Z",
      "sequence_order": 4,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T12:40:13.796903Z",
            "stop_timestamp": "2024-06-05T12:40:13.796903Z",
            "flags": null,
            "type": "text",
            "text": "--- xcodebuild: WARNING: Using the first of multiple matching destinations:\n{ platform:macOS, arch:arm64, id:00008112-001A04E41123C01E, name:My Mac }\n{ platform:macOS, arch:x86_64, id:00008112-001A04E41123C01E, name:My Mac }\nlib/screens/home_screen.dart:4:8: Error: Error when reading 'lib/screens/prayer_progress_card.dart': No such file or directory\nimport 'prayer_progress_card.dart';\n       ^\nlib/providers/prayer_provider.dart:16:48: Error: Member not found: 'PrayerData.fromJson'.\n      (key, value) => MapEntry(key, PrayerData.fromJson(value)),\n                                               ^^^^^^^^\nlib/providers/prayer_provider.dart:39:43: Error: Member not found: 'PrayerData.empty'.\n    return _prayerData[key] ?? PrayerData.empty();\n                                          ^^^^^\nlib/screens/home_screen.dart:43:26: Error: The method 'PrayerProgressCard' isn't defined for the class 'HomeScreen'.\n - 'HomeScreen' is from 'package:amana/screens/home_screen.dart' ('lib/screens/home_screen.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'PrayerProgressCard'.\n                  return PrayerProgressCard(\n                         ^^^^^^^^^^^^^^^^^^\nlib/screens/home_screen.dart:53:20: Error: The argument type 'List<dynamic>' can't be assigned to the parameter type 'List<Widget>'.\n - 'List' is from 'dart:core'.\n - 'Widget' is from 'package:flutter/src/widgets/framework.dart' ('/opt/homebrew/Caskroom/flutter/3.19.3/flutter/packages/flutter/lib/src/widgets/framework.dart').\n                }).toList(),\n                   ^\nlib/screens/edit_details_screen.dart:74:13: Error: Expected an identifier, but got ']'.\nTry inserting an identifier before ']'.\n            ],\n            ^\nTarget kernel_snapshot failed: Exception\nCommand PhaseScriptExecution failed with a nonzero exit code\n** BUILD FAILED **\n\n\nDon't use json we have a constants file:\namana_audit/lib/constants.dart",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T12:40:13.796903Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "e5f2ea4f-15ee-497c-8c76-cbba6b1bb675",
      "role": "assistant",
      "content": " Apologies for the confusion. Let's update the code to use the constants file instead of JSON for the initial prayer data. Here are the updated files:\n\n# File: prayer_provider.dart\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  Map<String, PrayerData> _prayerData = {};\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  Future<void> loadData() async {\n    _prayerData = {};\n\n    for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final key = '$year-$month';\n        _prayerData[key] = PrayerData(\n          year: year,\n          month: month,\n          prayersCompleted: {},\n          prayersMissed: {},\n          totalPrayed: 0,\n          totalMissed: 0,\n          percentagePrayed: 0,\n          percentageMissed: 0,\n        );\n      }\n    }\n\n    notifyListeners();\n  }\n\n  void updatePrayerData(PrayerData updatedData) {\n    _prayerData['${updatedData.year}-${updatedData.month}'] = updatedData;\n    notifyListeners();\n  }\n\n  void incrementPrayer(int year, int month, String prayer) {\n    final key = '$year-$month';\n    if (_prayerData.containsKey(key)) {\n      final data = _prayerData[key]!;\n      data.prayersCompleted[prayer] = (data.prayersCompleted[prayer] ?? 0) + 1;\n      data.totalPrayed++;\n      notifyListeners();\n    }\n  }\n\n  PrayerData getPrayerDataForMonth(int year, int month) {\n    final key = '$year-$month';\n    return _prayerData[key] ?? PrayerData.empty();\n  }\n}\n```\n\n# File: home_screen.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\n\nclass HomeScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n        actions: [\n          IconButton(\n            icon: Icon(Icons.edit),\n            onPressed: () {\n              Navigator.pushNamed(context, '/edit-details');\n            },\n          ),\n        ],\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final currentYear = DateTime.now().year;\n          final currentMonth = DateTime.now().month;\n          final prayerData = provider.getPrayerDataForMonth(currentYear, currentMonth);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Display total progress\n              LinearProgressIndicator(\n                value: prayerData.totalPrayed / (prayerData.totalPrayed + prayerData.totalMissed),\n              ),\n              SizedBox(height: 16.0),\n\n              // Display individual prayer cards\n              GridView.count(\n                crossAxisCount: 2,\n                shrinkWrap: true,\n                children: prayerData.prayersCompleted.keys.map((prayer) {\n                  return PrayerProgressCardMaterial(\n                    prayer: prayer,\n                    year: currentYear,\n                    month: currentMonth,\n                    onPrayPressed: () {\n                      provider.incrementPrayer(currentYear, currentMonth, prayer);\n                    },\n                  );\n                }).toList(),\n              ),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n# File: edit_details_screen.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport '../constants.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  int? _selectedMonth;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final years = List.generate(kDefaultEndYear - kDefaultStartYear + 1, (index) => kDefaultStartYear + index);\n          final months = List.generate(12, (index) => index + 1);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Year dropdown\n              DropdownButtonFormField<int>(\n                value: _selectedYear,\n                items: years.map((year) {\n                  return DropdownMenuItem(\n                    value: year,\n                    child: Text(year.toString()),\n                  );\n                }).toList(),\n                onChanged: (value) {\n                  setState(() {\n                    _selectedYear = value;\n                    _selectedMonth = null;\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Year',\n                ),\n              ),\n              SizedBox(height: 16.0),\n\n              // Month dropdown\n              if (_selectedYear != null)\n                DropdownButtonFormField<int>(\n                  value: _selectedMonth,\n                  items: months.map((month) {\n                    return DropdownMenuItem(\n                      value: month,\n                      child: Text(month.toString()),\n                    );\n                  }).toList(),\n                  onChanged: (value) {\n                    setState(() {\n                      _selectedMonth = value;\n                    });\n                  },\n                  decoration: InputDecoration(\n                    labelText: 'Select Month',\n                  ),\n                ),\n              SizedBox(height: 16.0),\n\n              // Prayer data form fields\n              if (_selectedYear != null && _selectedMonth != null)\n                // Display form fields for editing prayer data\n                // ...\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\nIn the updated code, the `PrayerProvider` now uses the `kDefaultStartYear` and `kDefaultEndYear` constants from the `constants.dart` file to generate the initial prayer data instead of loading it from a JSON file.\n\nThe `HomeScreen` imports the `PrayerProgressCardMaterial` widget instead of the non-existent `PrayerProgressCard` widget.\n\nThe `EditDetailsScreen` also uses the constants to generate the year dropdown options.\n\nPlease make sure you have the `PrayerData` model class and the `PrayerProgressCardMaterial` widget implemented correctly.\n\nLet me know if you have any further questions or if you encounter any issues with the updated code.",
      "created_at": "2024-06-05T12:40:13.796903Z",
      "sequence_order": 5,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T12:40:13.796903Z",
            "stop_timestamp": "2024-06-05T12:40:13.796903Z",
            "flags": null,
            "type": "text",
            "text": " Apologies for the confusion. Let's update the code to use the constants file instead of JSON for the initial prayer data. Here are the updated files:\n\n# File: prayer_provider.dart\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  Map<String, PrayerData> _prayerData = {};\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  Future<void> loadData() async {\n    _prayerData = {};\n\n    for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final key = '$year-$month';\n        _prayerData[key] = PrayerData(\n          year: year,\n          month: month,\n          prayersCompleted: {},\n          prayersMissed: {},\n          totalPrayed: 0,\n          totalMissed: 0,\n          percentagePrayed: 0,\n          percentageMissed: 0,\n        );\n      }\n    }\n\n    notifyListeners();\n  }\n\n  void updatePrayerData(PrayerData updatedData) {\n    _prayerData['${updatedData.year}-${updatedData.month}'] = updatedData;\n    notifyListeners();\n  }\n\n  void incrementPrayer(int year, int month, String prayer) {\n    final key = '$year-$month';\n    if (_prayerData.containsKey(key)) {\n      final data = _prayerData[key]!;\n      data.prayersCompleted[prayer] = (data.prayersCompleted[prayer] ?? 0) + 1;\n      data.totalPrayed++;\n      notifyListeners();\n    }\n  }\n\n  PrayerData getPrayerDataForMonth(int year, int month) {\n    final key = '$year-$month';\n    return _prayerData[key] ?? PrayerData.empty();\n  }\n}\n```\n\n# File: home_screen.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\n\nclass HomeScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n        actions: [\n          IconButton(\n            icon: Icon(Icons.edit),\n            onPressed: () {\n              Navigator.pushNamed(context, '/edit-details');\n            },\n          ),\n        ],\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final currentYear = DateTime.now().year;\n          final currentMonth = DateTime.now().month;\n          final prayerData = provider.getPrayerDataForMonth(currentYear, currentMonth);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Display total progress\n              LinearProgressIndicator(\n                value: prayerData.totalPrayed / (prayerData.totalPrayed + prayerData.totalMissed),\n              ),\n              SizedBox(height: 16.0),\n\n              // Display individual prayer cards\n              GridView.count(\n                crossAxisCount: 2,\n                shrinkWrap: true,\n                children: prayerData.prayersCompleted.keys.map((prayer) {\n                  return PrayerProgressCardMaterial(\n                    prayer: prayer,\n                    year: currentYear,\n                    month: currentMonth,\n                    onPrayPressed: () {\n                      provider.incrementPrayer(currentYear, currentMonth, prayer);\n                    },\n                  );\n                }).toList(),\n              ),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n# File: edit_details_screen.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport '../constants.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  int? _selectedMonth;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final years = List.generate(kDefaultEndYear - kDefaultStartYear + 1, (index) => kDefaultStartYear + index);\n          final months = List.generate(12, (index) => index + 1);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Year dropdown\n              DropdownButtonFormField<int>(\n                value: _selectedYear,\n                items: years.map((year) {\n                  return DropdownMenuItem(\n                    value: year,\n                    child: Text(year.toString()),\n                  );\n                }).toList(),\n                onChanged: (value) {\n                  setState(() {\n                    _selectedYear = value;\n                    _selectedMonth = null;\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Year',\n                ),\n              ),\n              SizedBox(height: 16.0),\n\n              // Month dropdown\n              if (_selectedYear != null)\n                DropdownButtonFormField<int>(\n                  value: _selectedMonth,\n                  items: months.map((month) {\n                    return DropdownMenuItem(\n                      value: month,\n                      child: Text(month.toString()),\n                    );\n                  }).toList(),\n                  onChanged: (value) {\n                    setState(() {\n                      _selectedMonth = value;\n                    });\n                  },\n                  decoration: InputDecoration(\n                    labelText: 'Select Month',\n                  ),\n                ),\n              SizedBox(height: 16.0),\n\n              // Prayer data form fields\n              if (_selectedYear != null && _selectedMonth != null)\n                // Display form fields for editing prayer data\n                // ...\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\nIn the updated code, the `PrayerProvider` now uses the `kDefaultStartYear` and `kDefaultEndYear` constants from the `constants.dart` file to generate the initial prayer data instead of loading it from a JSON file.\n\nThe `HomeScreen` imports the `PrayerProgressCardMaterial` widget instead of the non-existent `PrayerProgressCard` widget.\n\nThe `EditDetailsScreen` also uses the constants to generate the year dropdown options.\n\nPlease make sure you have the `PrayerData` model class and the `PrayerProgressCardMaterial` widget implemented correctly.\n\nLet me know if you have any further questions or if you encounter any issues with the updated code.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T12:40:13.796903Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "551939a0-95d3-479d-a234-e0e68746cb7e",
      "role": "human",
      "content": "Launching lib/main.dart on macOS in debug mode...\n--- xcodebuild: WARNING: Using the first of multiple matching destinations:\n{ platform:macOS, arch:arm64, id:00008112-001A04E41123C01E, name:My Mac }\n{ platform:macOS, arch:x86_64, id:00008112-001A04E41123C01E, name:My Mac }\nlib/providers/prayer_provider.dart:49:43: Error: Member not found: 'PrayerData.empty'.\n    return _prayerData[key] ?? PrayerData.empty();\n                                          ^^^^^\nlib/screens/edit_details_screen.dart:75:13: Error: Expected an identifier, but got ']'.\nTry inserting an identifier before ']'.\n            ],\n            ^\nlib/screens/prayer_progress_card_material.dart:26:28: Error: The method 'getCompletedPrayersForMonth' isn't defined for the class 'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'getCompletedPrayersForMonth'.\n            prayerProvider.getCompletedPrayersForMonth(year, month, prayer),\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nlib/screens/prayer_progress_card_material.dart:27:34: Error: The method 'getMissedPrayersForMonth' isn't defined for the class 'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'getMissedPrayersForMonth'.\n        'missed': prayerProvider.getMissedPrayersForMonth(year, month, prayer),\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^\nlib/screens/prayer_progress_card_material.dart:31:47: Error: The method 'getMissedPrayersForMonth' isn't defined for the class 'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'getMissedPrayersForMonth'.\n          future: Future.value(prayerProvider.getMissedPrayersForMonth(\n                                              ^^^^^^^^^^^^^^^^^^^^^^^^\nlib/screens/prayer_progress_card_material.dart:37:52: Error: The operator '[]' isn't defined for the class 'int'.\nTry correcting the operator to an existing operator, or defining a '[]' operator.\n            final completedPrayers = snapshot.data?['completed'] ?? 0;\n                                                   ^\nlib/screens/prayer_progress_card_material.dart:38:49: Error: The operator '[]' isn't defined for the class 'int'.\nTry correcting the operator to an existing operator, or defining a '[]' operator.\n            final missedPrayers = snapshot.data?['missed'] ?? 0;\n                                                ^\nTarget kernel_snapshot failed: Exception\nCommand PhaseScriptExecution failed with a nonzero exit code\n** BUILD FAILED **\n\n\nFix and return all files updated to work",
      "created_at": "2024-06-05T12:45:54.706716Z",
      "sequence_order": 6,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T12:45:54.706716Z",
            "stop_timestamp": "2024-06-05T12:45:54.706716Z",
            "flags": null,
            "type": "text",
            "text": "Launching lib/main.dart on macOS in debug mode...\n--- xcodebuild: WARNING: Using the first of multiple matching destinations:\n{ platform:macOS, arch:arm64, id:00008112-001A04E41123C01E, name:My Mac }\n{ platform:macOS, arch:x86_64, id:00008112-001A04E41123C01E, name:My Mac }\nlib/providers/prayer_provider.dart:49:43: Error: Member not found: 'PrayerData.empty'.\n    return _prayerData[key] ?? PrayerData.empty();\n                                          ^^^^^\nlib/screens/edit_details_screen.dart:75:13: Error: Expected an identifier, but got ']'.\nTry inserting an identifier before ']'.\n            ],\n            ^\nlib/screens/prayer_progress_card_material.dart:26:28: Error: The method 'getCompletedPrayersForMonth' isn't defined for the class 'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'getCompletedPrayersForMonth'.\n            prayerProvider.getCompletedPrayersForMonth(year, month, prayer),\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nlib/screens/prayer_progress_card_material.dart:27:34: Error: The method 'getMissedPrayersForMonth' isn't defined for the class 'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'getMissedPrayersForMonth'.\n        'missed': prayerProvider.getMissedPrayersForMonth(year, month, prayer),\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^\nlib/screens/prayer_progress_card_material.dart:31:47: Error: The method 'getMissedPrayersForMonth' isn't defined for the class 'PrayerProvider'.\n - 'PrayerProvider' is from 'package:amana/providers/prayer_provider.dart' ('lib/providers/prayer_provider.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'getMissedPrayersForMonth'.\n          future: Future.value(prayerProvider.getMissedPrayersForMonth(\n                                              ^^^^^^^^^^^^^^^^^^^^^^^^\nlib/screens/prayer_progress_card_material.dart:37:52: Error: The operator '[]' isn't defined for the class 'int'.\nTry correcting the operator to an existing operator, or defining a '[]' operator.\n            final completedPrayers = snapshot.data?['completed'] ?? 0;\n                                                   ^\nlib/screens/prayer_progress_card_material.dart:38:49: Error: The operator '[]' isn't defined for the class 'int'.\nTry correcting the operator to an existing operator, or defining a '[]' operator.\n            final missedPrayers = snapshot.data?['missed'] ?? 0;\n                                                ^\nTarget kernel_snapshot failed: Exception\nCommand PhaseScriptExecution failed with a nonzero exit code\n** BUILD FAILED **\n\n\nFix and return all files updated to work",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T12:45:54.706716Z",
        "attachments": [
          {
            "file_name": "paste.txt",
            "file_size": 70479,
            "file_type": "txt",
            "extracted_content": "\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./prayer_record.dart\n#############################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int fajrMissed;\n\n  @HiveField(3)\n  int dhuhrMissed;\n\n  @HiveField(4)\n  int asrMissed;\n\n  @HiveField(5)\n  int maghribMissed;\n\n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./main.dart\n####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/edit_details_screen.dart';\n\nvoid main() {\n  runApp(MyApp());\n}\n\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return ChangeNotifierProvider(\n      create: (_) => PrayerProvider()..loadData(),\n      child: MaterialApp(\n        title: 'Prayer Tracker',\n        theme: ThemeData(\n          primarySwatch: Colors.blue,\n        ),\n        initialRoute: '/',\n        routes: {\n          '/': (context) => HomeScreen(),\n          '/edit-details': (context) => EditDetailsScreen(),\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./prayer_record.g.dart\n###############################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  Map<String, PrayerData> _prayerData = {};\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  Future<void> loadData() async {\n    _prayerData = {};\n\n    for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final key = '$year-$month';\n        _prayerData[key] = PrayerData(\n          year: year,\n          month: month,\n          prayersCompleted: {},\n          prayersMissed: {},\n          totalPrayed: 0,\n          totalMissed: 0,\n          percentagePrayed: 0,\n          percentageMissed: 0,\n        );\n      }\n    }\n\n    notifyListeners();\n  }\n\n  void updatePrayerData(PrayerData updatedData) {\n    _prayerData['${updatedData.year}-${updatedData.month}'] = updatedData;\n    notifyListeners();\n  }\n\n  void incrementPrayer(int year, int month, String prayer) {\n    final key = '$year-$month';\n    if (_prayerData.containsKey(key)) {\n      final data = _prayerData[key]!;\n      data.prayersCompleted[prayer] = (data.prayersCompleted[prayer] ?? 0) + 1;\n      data.totalPrayed++;\n      notifyListeners();\n    }\n  }\n\n  PrayerData getPrayerDataForMonth(int year, int month) {\n    final key = '$year-$month';\n    return _prayerData[key] ?? PrayerData.empty();\n  }\n}\n\n\n\n# File: ./models/prayer_record.dart\n####################################\n\nimport 'package:hive/hive.dart';\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n  @HiveField(1)\n  int month;\n  @HiveField(2)\n  int fajrMissed;\n  @HiveField(3)\n  int dhuhrMissed;\n  @HiveField(4)\n  int asrMissed;\n  @HiveField(5)\n  int maghribMissed;\n  @HiveField(6)\n  int ishaMissed;\n// Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./models/prayer_data.dart\n##################################\n\n// File: lib/models/prayer_data.dart\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_data.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerData {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  Map<String, int> prayersCompleted; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(3)\n  Map<String, int> prayersMissed; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(4)\n  int totalPrayed;\n\n  @HiveField(5)\n  int totalMissed;\n\n  @HiveField(6)\n  double percentagePrayed;\n\n  @HiveField(7)\n  double percentageMissed;\n\n  PrayerData({\n    required this.year,\n    required this.month,\n    required this.prayersCompleted,\n    required this.prayersMissed,\n    required this.totalPrayed,\n    required this.totalMissed,\n    required this.percentagePrayed,\n    required this.percentageMissed,\n  });\n\n  factory PrayerData.fromMap(Map<String, dynamic> map) {\n    return PrayerData(\n      year: map['year'],\n      month: map['month'],\n      prayersCompleted: Map<String, int>.from(map['prayersCompleted']),\n      prayersMissed: Map<String, int>.from(map['prayersMissed']),\n      totalPrayed: map['totalPrayed'],\n      totalMissed: map['totalMissed'],\n      percentagePrayed: map['percentagePrayed'],\n      percentageMissed: map['percentageMissed'],\n    );\n  }\n\n  Map<String, dynamic> toMap() {\n    return {\n      'year': year,\n      'month': month,\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'totalPrayed': totalPrayed,\n      'totalMissed': totalMissed,\n      'percentagePrayed': percentagePrayed,\n      'percentageMissed': percentageMissed,\n    };\n  }\n}\n\n\n\n# File: ./models/prayer_data.g.dart\n####################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_data.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerDataAdapter extends TypeAdapter<PrayerData> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerData read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerData(\n      year: fields[0] as int,\n      month: fields[1] as int,\n      prayersCompleted: (fields[2] as Map).cast<String, int>(),\n      prayersMissed: (fields[3] as Map).cast<String, int>(),\n      totalPrayed: fields[4] as int,\n      totalMissed: fields[5] as int,\n      percentagePrayed: fields[6] as double,\n      percentageMissed: fields[7] as double,\n    );\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerData obj) {\n    writer\n      ..writeByte(8)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.prayersCompleted)\n      ..writeByte(3)\n      ..write(obj.prayersMissed)\n      ..writeByte(4)\n      ..write(obj.totalPrayed)\n      ..writeByte(5)\n      ..write(obj.totalMissed)\n      ..writeByte(6)\n      ..write(obj.percentagePrayed)\n      ..writeByte(7)\n      ..write(obj.percentageMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerDataAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./models/prayer_record.g.dart\n######################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\n// File: screens/prayer_progress_card_material.dart\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n  final VoidCallback onPrayPressed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.year,\n    required this.month,\n    required this.onPrayPressed,\n  });\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<Map<String, int>>(\n      future: Future.value({\n        'completed':\n            prayerProvider.getCompletedPrayersForMonth(year, month, prayer),\n        'missed': prayerProvider.getMissedPrayersForMonth(year, month, prayer),\n      }), // Fix: Wrap with Future.value()\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(prayerProvider.getMissedPrayersForMonth(\n              year, month, prayer)), // Fix: Wrap with Future.value()\n          builder: (context, snapshot) {\n            if (snapshot.connectionState == ConnectionState.waiting) {\n              return CircularProgressIndicator();\n            }\n            final completedPrayers = snapshot.data?['completed'] ?? 0;\n            final missedPrayers = snapshot.data?['missed'] ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Card(\n              child: Padding(\n                padding: const EdgeInsets.all(14.0),\n                child: Column(\n                  mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                  children: [\n                    Text(prayer,\n                        style: TextStyle(\n                            fontWeight: FontWeight.bold, fontSize: 16)),\n                    ClipRRect(\n                      borderRadius: BorderRadius.circular(8),\n                      child: LinearProgressIndicator(\n                        value: totalPrayers > 0\n                            ? completedPrayers / totalPrayers\n                            : 0,\n                        minHeight: 12,\n                        backgroundColor: Colors.grey[300],\n                        valueColor:\n                            AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n                      ),\n                    ),\n                    Text(\n                        '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                        style: TextStyle(fontSize: 14)),\n                    Text('$completedPrayers / $totalPrayers',\n                        style: TextStyle(fontSize: 12)),\n                    ElevatedButton(\n                      onPressed: onPrayPressed,\n                      child: Text('Pray'),\n                    ),\n                  ],\n                ),\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_details_screen.dart\n#############################################\n\nimport 'package:flutter/material.dart';\nimport '../services/hive_service.dart';\nimport '../models/prayer_record.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          // Implement logic to find and increment the oldest missed prayer\n\n          return Column(\n            children: [\n              // Display and update prayer details here\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport '../constants.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  int? _selectedMonth;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final years = List.generate(kDefaultEndYear - kDefaultStartYear + 1, (index) => kDefaultStartYear + index);\n          final months = List.generate(12, (index) => index + 1);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Year dropdown\n              DropdownButtonFormField<int>(\n                value: _selectedYear,\n                items: years.map((year) {\n                  return DropdownMenuItem(\n                    value: year,\n                    child: Text(year.toString()),\n                  );\n                }).toList(),\n                onChanged: (value) {\n                  setState(() {\n                    _selectedYear = value;\n                    _selectedMonth = null;\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Year',\n                ),\n              ),\n              SizedBox(height: 16.0),\n\n              // Month dropdown\n              if (_selectedYear != null)\n                DropdownButtonFormField<int>(\n                  value: _selectedMonth,\n                  items: months.map((month) {\n                    return DropdownMenuItem(\n                      value: month,\n                      child: Text(month.toString()),\n                    );\n                  }).toList(),\n                  onChanged: (value) {\n                    setState(() {\n                      _selectedMonth = value;\n                    });\n                  },\n                  decoration: InputDecoration(\n                    labelText: 'Select Month',\n                  ),\n                ),\n              SizedBox(height: 16.0),\n\n              // Prayer data form fields\n              if (_selectedYear != null && _selectedMonth != null)\n                // Display form fields for editing prayer data\n                // ...\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\nimport '../models/prayer_data.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(PrayerData(\n      // Fix: Pass a PrayerData object\n      year: startYear,\n      month: startMonth,\n      prayersCompleted: {},\n      prayersMissed: {},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    ));\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\n// File: screens/prayer_progress_card_cupertino.dart\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n\n  const PrayerProgressCardCupertino({\n    required this.prayer,\n    required this.year,\n    required this.month,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(\n          prayerProvider.getCompletedPrayersForMonth(year, month, prayer)),\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(\n              prayerProvider.getMissedPrayersForMonth(year, month, prayer)),\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CupertinoActivityIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Container(\n              margin: EdgeInsets.all(8.0),\n              padding: EdgeInsets.all(14.0),\n              decoration: BoxDecoration(\n                color: CupertinoColors.white,\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: CupertinoColors.systemGrey.withOpacity(0.4),\n                    spreadRadius: 1,\n                    blurRadius: 3,\n                    offset: Offset(0, 2),\n                  ),\n                ],\n              ),\n              child: Column(\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                children: [\n                  Text(prayer,\n                      style:\n                          TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n                  SizedBox(height: 8),\n                  ClipRRect(\n                    borderRadius: BorderRadius.circular(8),\n                    child: LinearProgressIndicator(\n                      value: totalPrayers > 0\n                          ? completedPrayers / totalPrayers\n                          : 0,\n                      minHeight: 12,\n                      backgroundColor: CupertinoColors.systemGrey4,\n                      valueColor: AlwaysStoppedAnimation<Color>(\n                          CupertinoColors.activeGreen),\n                    ),\n                  ),\n                  SizedBox(height: 8),\n                  Text(\n                      '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                      style: TextStyle(fontSize: 14)),\n                  Text('$completedPrayers / $totalPrayers',\n                      style: TextStyle(fontSize: 12)),\n                  SizedBox(height: 8),\n                  CupertinoButton.filled(\n                    onPressed: () => prayerProvider.incrementPrayer(prayer),\n                    child: Text('Pray'),\n                  ),\n                ],\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\n\nclass HomeScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n        actions: [\n          IconButton(\n            icon: Icon(Icons.edit),\n            onPressed: () {\n              Navigator.pushNamed(context, '/edit-details');\n            },\n          ),\n        ],\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final currentYear = DateTime.now().year;\n          final currentMonth = DateTime.now().month;\n          final prayerData =\n              provider.getPrayerDataForMonth(currentYear, currentMonth);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Display total progress\n              LinearProgressIndicator(\n                value: prayerData.totalPrayed /\n                    (prayerData.totalPrayed + prayerData.totalMissed),\n              ),\n              SizedBox(height: 16.0),\n\n              // Display individual prayer cards\n              GridView.count(\n                crossAxisCount: 2,\n                shrinkWrap: true,\n                children: prayerData.prayersCompleted.keys.map((prayer) {\n                  return PrayerProgressCardMaterial(\n                    prayer: prayer,\n                    year: currentYear,\n                    month: currentMonth,\n                    onPrayPressed: () {\n                      provider.incrementPrayer(\n                          currentYear, currentMonth, prayer);\n                    },\n                  );\n                }).toList(),\n              ),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/flutter_build/dart_plugin_registrant.dart\n###############################################################\n\n//\n// Generated file. Do not edit.\n// This file is generated from template in file `flutter_tools/lib/src/flutter_plugins.dart`.\n//\n\n// @dart = 3.3\n\nimport 'dart:io'; // flutter_ignore: dart_io_import.\nimport 'package:path_provider_android/path_provider_android.dart';\nimport 'package:shared_preferences_android/shared_preferences_android.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_linux/path_provider_linux.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_linux/shared_preferences_linux.dart';\nimport 'package:url_launcher_linux/url_launcher_linux.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_windows/path_provider_windows.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_windows/shared_preferences_windows.dart';\nimport 'package:url_launcher_windows/url_launcher_windows.dart';\n\n@pragma('vm:entry-point')\nclass _PluginRegistrant {\n\n  @pragma('vm:entry-point')\n  static void register() {\n    if (Platform.isAndroid) {\n      try {\n        PathProviderAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isIOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isLinux) {\n      try {\n        PathProviderLinux.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusLinuxPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesLinux.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherLinux.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isMacOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isWindows) {\n      try {\n        PathProviderWindows.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusWindowsPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesWindows.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherWindows.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./.dart_tool/build/entrypoint/build.dart\n#################################################\n\n// ignore_for_file: directives_ordering\n// ignore_for_file: no_leading_underscores_for_library_prefixes\nimport 'package:build_runner_core/build_runner_core.dart' as _i1;\nimport 'package:hive_generator/hive_generator.dart' as _i2;\nimport 'package:source_gen/builder.dart' as _i3;\nimport 'dart:isolate' as _i4;\nimport 'package:build_runner/build_runner.dart' as _i5;\nimport 'dart:io' as _i6;\n\nfinal _builders = <_i1.BuilderApplication>[\n  _i1.apply(\n    r'hive_generator:hive_generator',\n    [_i2.getBuilder],\n    _i1.toDependentsOf(r'hive_generator'),\n    hideOutput: true,\n    appliesBuilders: const [r'source_gen:combining_builder'],\n  ),\n  _i1.apply(\n    r'source_gen:combining_builder',\n    [_i3.combiningBuilder],\n    _i1.toNoneByDefault(),\n    hideOutput: false,\n    appliesBuilders: const [r'source_gen:part_cleanup'],\n  ),\n  _i1.applyPostProcess(\n    r'source_gen:part_cleanup',\n    _i3.partCleanup,\n  ),\n];\nvoid main(\n  List<String> args, [\n  _i4.SendPort? sendPort,\n]) async {\n  var result = await _i5.run(\n    args,\n    _builders,\n  );\n  sendPort?.send(result);\n  _i6.exitCode = result;\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\n// File: hive_service.dart\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    await Hive.deleteBoxFromDisk('prayerBox'); // Clear the existing box\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n    ;\n\n    if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    onPrayerDataUpdated?.call();\n  }\n\n  void incrementPrayer(String prayer) {\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear ||\n              (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed =\n          (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed =\n          (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1;\n        month <= (year == currentYear ? currentMonth - 1 : 12);\n        month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int year = startYear; year <= endYear; year++) {\n      final endMonth = year == currentYear ? currentMonth : 12;\n      for (int month = 1; month <= endMonth; month++) {\n        final key = '$year-$month';\n        if (!prayerData.containsKey(key)) {\n          prayerData[key] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n    }\n    savePrayerData(prayerData.values.first);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    int totalPrayed = 0;\n    int totalPossible = 0;\n\n    for (final data in prayerData.values) {\n      totalPrayed += data.totalPrayed;\n      totalPossible += data.totalPrayed + data.totalMissed;\n    }\n\n    return {\n      'totalPrayed': totalPrayed,\n      'totalPossible': totalPossible,\n    };\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(\n      int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers)\n        prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n\n\n\n# File: ./widgets/progress_bar.dart\n####################################\n\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double value;\n\n  ProgressBar({required this.value});\n\n  @override\n  Widget build(BuildContext context) {\n    return LinearProgressIndicator(value: value);\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ï·º) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'Ø¹ÙŽÙ†Ù’ Ø£ÙŽØ¨ÙÙŠ Ù‡ÙØ±ÙŽÙŠÙ’Ø±ÙŽØ©ÙŽ Ø±ÙŽØ¶ÙÙŠÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ†Ù’Ù‡Ù Ù‚ÙŽØ§Ù„ÙŽ: Ù‚ÙŽØ§Ù„ÙŽ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù ØµÙŽÙ„ÙŽÙ‘Ù‰ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ÙˆÙŽØ³ÙŽÙ„ÙŽÙ‘Ù…ÙŽ: \" Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙŽ Ø¹ÙŽØ²ÙŽÙ‘ ÙˆÙŽØ¬ÙŽÙ„ÙŽÙ‘ Ù‚ÙŽØ§Ù„ÙŽ: Ù…ÙŽÙ†Ù’ Ø¹ÙŽØ§Ø¯ÙŽÙ‰ Ù„ÙÙŠ ÙˆÙŽÙ„ÙÙŠÙ‹Ù‘Ø§ØŒ ÙÙŽÙ‚ÙŽØ¯Ù’ Ø¢Ø°ÙŽÙ†Ù’ØªÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙŽØ±Ù’Ø¨ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨ÙŽ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø¨ÙØ´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽØ­ÙŽØ¨ÙŽÙ‘ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ù…ÙÙ…ÙŽÙ‘Ø§ Ø§ÙÙ’ØªÙŽØ±ÙŽØ¶Ù’ØªÙ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ÙŠÙŽØ²ÙŽØ§Ù„Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ ÙŠÙŽØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨Ù Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¨ÙØ§Ù„Ù†ÙŽÙ‘ÙˆÙŽØ§ÙÙÙ„Ù Ø­ÙŽØªÙŽÙ‘Ù‰ Ø£ÙØ­ÙØ¨ÙŽÙ‘Ù‡ÙØŒ ÙÙŽØ¥ÙØ°ÙŽØ§ Ø£ÙŽØ­Ù’Ø¨ÙŽØ¨Ù’ØªÙÙ‡ÙØŒ ÙƒÙÙ†Ù’ØªÙ Ø³ÙŽÙ…Ù’Ø¹ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙŽØ³Ù’Ù…ÙŽØ¹Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽØ¨ÙŽØµÙŽØ±ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙØ¨Ù’ØµÙØ±Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽÙŠÙŽØ¯ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽØ¨Ù’Ø·ÙØ´Ù Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ±ÙØ¬Ù’Ù„ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽÙ…Ù’Ø´ÙÙŠ Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ¥ÙÙ†Ù’ Ø³ÙŽØ£ÙŽÙ„ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹Ù’Ø·ÙÙŠÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ„ÙŽØ¦ÙÙ†Ù’ Ø§Ø³Ù’ØªÙŽØ¹ÙŽØ§Ø°ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹ÙÙŠØ°ÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽØ±ÙŽØ¯ÙŽÙ‘Ø¯Ù’ØªÙ Ø¹ÙŽÙ†Ù’ Ø´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽÙ†ÙŽØ§ ÙÙŽØ§Ø¹ÙÙ„ÙÙ‡Ù ØªÙŽØ±ÙŽØ¯ÙÙ‘Ø¯ÙÙŠ Ø¹ÙŽÙ†Ù’ Ù†ÙŽÙÙ’Ø³Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØŒ ÙŠÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ø§Ù„Ù’Ù…ÙŽÙˆÙ’ØªÙŽ ÙˆÙŽØ£ÙŽÙ†ÙŽØ§ Ø£ÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ù…ÙŽØ³ÙŽØ§Ø¡ÙŽØªÙŽÙ‡Ù - Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n"
          }
        ],
        "files": [
          {
            "file_name": "paste.txt"
          }
        ]
      }
    },
    {
      "id": "80566df4-39a1-4733-93cb-21d366a23720",
      "role": "assistant",
      "content": " Here are the updated files with the necessary fixes:\n\n# File: prayer_provider.dart\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  Map<String, PrayerData> _prayerData = {};\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  Future<void> loadData() async {\n    _prayerData = {};\n\n    for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final key = '$year-$month';\n        _prayerData[key] = PrayerData(\n          year: year,\n          month: month,\n          prayersCompleted: {},\n          prayersMissed: {},\n          totalPrayed: 0,\n          totalMissed: 0,\n          percentagePrayed: 0,\n          percentageMissed: 0,\n        );\n      }\n    }\n\n    notifyListeners();\n  }\n\n  void updatePrayerData(PrayerData updatedData) {\n    _prayerData['${updatedData.year}-${updatedData.month}'] = updatedData;\n    notifyListeners();\n  }\n\n  void incrementPrayer(int year, int month, String prayer) {\n    final key = '$year-$month';\n    if (_prayerData.containsKey(key)) {\n      final data = _prayerData[key]!;\n      data.prayersCompleted[prayer] = (data.prayersCompleted[prayer] ?? 0) + 1;\n      data.totalPrayed++;\n      notifyListeners();\n    }\n  }\n\n  PrayerData getPrayerDataForMonth(int year, int month) {\n    final key = '$year-$month';\n    return _prayerData[key] ?? PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: {},\n      prayersMissed: {},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final data = getPrayerDataForMonth(year, month);\n    return data.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final data = getPrayerDataForMonth(year, month);\n    return data.prayersMissed[prayer] ?? 0;\n  }\n}\n```\n\n# File: edit_details_screen.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport '../constants.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  int? _selectedMonth;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final years = List.generate(kDefaultEndYear - kDefaultStartYear + 1, (index) => kDefaultStartYear + index);\n          final months = List.generate(12, (index) => index + 1);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Year dropdown\n              DropdownButtonFormField<int>(\n                value: _selectedYear,\n                items: years.map((year) {\n                  return DropdownMenuItem(\n                    value: year,\n                    child: Text(year.toString()),\n                  );\n                }).toList(),\n                onChanged: (value) {\n                  setState(() {\n                    _selectedYear = value;\n                    _selectedMonth = null;\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Year',\n                ),\n              ),\n              SizedBox(height: 16.0),\n\n              // Month dropdown\n              if (_selectedYear != null)\n                DropdownButtonFormField<int>(\n                  value: _selectedMonth,\n                  items: months.map((month) {\n                    return DropdownMenuItem(\n                      value: month,\n                      child: Text(month.toString()),\n                    );\n                  }).toList(),\n                  onChanged: (value) {\n                    setState(() {\n                      _selectedMonth = value;\n                    });\n                  },\n                  decoration: InputDecoration(\n                    labelText: 'Select Month',\n                  ),\n                ),\n              SizedBox(height: 16.0),\n\n              // Prayer data form fields\n              if (_selectedYear != null && _selectedMonth != null)\n                // Display form fields for editing prayer data\n                Container(),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n# File: prayer_progress_card_material.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n  final VoidCallback onPrayPressed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.year,\n    required this.month,\n    required this.onPrayPressed,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    final completedPrayers = prayerProvider.getCompletedPrayersForMonth(year, month, prayer);\n    final missedPrayers = prayerProvider.getMissedPrayersForMonth(year, month, prayer);\n    final totalPrayers = completedPrayers + missedPrayers;\n\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(\n                    fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0\n                    ? completedPrayers / totalPrayers\n                    : 0,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor:\n                    AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text(\n                '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            ElevatedButton(\n              onPressed: onPrayPressed,\n              child: Text('Pray'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\nThese changes should resolve the errors you encountered. The `PrayerProvider` now includes the `getCompletedPrayersForMonth` and `getMissedPrayersForMonth` methods to retrieve the prayer data. The `edit_details_screen.dart` file has been updated to fix the syntax error. The `prayer_progress_card_material.dart` file has been simplified to directly use the provider methods instead of `FutureBuilder`.\n\nPlease update the files in your project with these changes and let me know if you have any further questions.",
      "created_at": "2024-06-05T12:45:54.706716Z",
      "sequence_order": 7,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T12:45:54.706716Z",
            "stop_timestamp": "2024-06-05T12:45:54.706716Z",
            "flags": null,
            "type": "text",
            "text": " Here are the updated files with the necessary fixes:\n\n# File: prayer_provider.dart\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  Map<String, PrayerData> _prayerData = {};\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  Future<void> loadData() async {\n    _prayerData = {};\n\n    for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final key = '$year-$month';\n        _prayerData[key] = PrayerData(\n          year: year,\n          month: month,\n          prayersCompleted: {},\n          prayersMissed: {},\n          totalPrayed: 0,\n          totalMissed: 0,\n          percentagePrayed: 0,\n          percentageMissed: 0,\n        );\n      }\n    }\n\n    notifyListeners();\n  }\n\n  void updatePrayerData(PrayerData updatedData) {\n    _prayerData['${updatedData.year}-${updatedData.month}'] = updatedData;\n    notifyListeners();\n  }\n\n  void incrementPrayer(int year, int month, String prayer) {\n    final key = '$year-$month';\n    if (_prayerData.containsKey(key)) {\n      final data = _prayerData[key]!;\n      data.prayersCompleted[prayer] = (data.prayersCompleted[prayer] ?? 0) + 1;\n      data.totalPrayed++;\n      notifyListeners();\n    }\n  }\n\n  PrayerData getPrayerDataForMonth(int year, int month) {\n    final key = '$year-$month';\n    return _prayerData[key] ?? PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: {},\n      prayersMissed: {},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final data = getPrayerDataForMonth(year, month);\n    return data.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final data = getPrayerDataForMonth(year, month);\n    return data.prayersMissed[prayer] ?? 0;\n  }\n}\n```\n\n# File: edit_details_screen.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport '../constants.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  int? _selectedMonth;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final years = List.generate(kDefaultEndYear - kDefaultStartYear + 1, (index) => kDefaultStartYear + index);\n          final months = List.generate(12, (index) => index + 1);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Year dropdown\n              DropdownButtonFormField<int>(\n                value: _selectedYear,\n                items: years.map((year) {\n                  return DropdownMenuItem(\n                    value: year,\n                    child: Text(year.toString()),\n                  );\n                }).toList(),\n                onChanged: (value) {\n                  setState(() {\n                    _selectedYear = value;\n                    _selectedMonth = null;\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Year',\n                ),\n              ),\n              SizedBox(height: 16.0),\n\n              // Month dropdown\n              if (_selectedYear != null)\n                DropdownButtonFormField<int>(\n                  value: _selectedMonth,\n                  items: months.map((month) {\n                    return DropdownMenuItem(\n                      value: month,\n                      child: Text(month.toString()),\n                    );\n                  }).toList(),\n                  onChanged: (value) {\n                    setState(() {\n                      _selectedMonth = value;\n                    });\n                  },\n                  decoration: InputDecoration(\n                    labelText: 'Select Month',\n                  ),\n                ),\n              SizedBox(height: 16.0),\n\n              // Prayer data form fields\n              if (_selectedYear != null && _selectedMonth != null)\n                // Display form fields for editing prayer data\n                Container(),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n# File: prayer_progress_card_material.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n  final VoidCallback onPrayPressed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.year,\n    required this.month,\n    required this.onPrayPressed,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    final completedPrayers = prayerProvider.getCompletedPrayersForMonth(year, month, prayer);\n    final missedPrayers = prayerProvider.getMissedPrayersForMonth(year, month, prayer);\n    final totalPrayers = completedPrayers + missedPrayers;\n\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(\n                    fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0\n                    ? completedPrayers / totalPrayers\n                    : 0,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor:\n                    AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text(\n                '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            ElevatedButton(\n              onPressed: onPrayPressed,\n              child: Text('Pray'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\nThese changes should resolve the errors you encountered. The `PrayerProvider` now includes the `getCompletedPrayersForMonth` and `getMissedPrayersForMonth` methods to retrieve the prayer data. The `edit_details_screen.dart` file has been updated to fix the syntax error. The `prayer_progress_card_material.dart` file has been simplified to directly use the provider methods instead of `FutureBuilder`.\n\nPlease update the files in your project with these changes and let me know if you have any further questions.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T12:45:54.706716Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "e6e3b20c-7fad-4a7e-bdd8-764504afa2d8",
      "role": "human",
      "content": "",
      "created_at": "2024-06-05T12:53:22.842736Z",
      "sequence_order": 8,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T12:53:22.842736Z",
            "stop_timestamp": "2024-06-05T12:53:22.842736Z",
            "flags": null,
            "type": "text",
            "text": "",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T12:53:22.842736Z",
        "attachments": [
          {
            "file_name": "paste.txt",
            "file_size": 16545,
            "file_type": "txt",
            "extracted_content": "\n\nA Dart VM Service on macOS is available at: http://127.0.0.1:62066/88lAZnbJao8=/\n\nâ•â•â•¡ EXCEPTION CAUGHT BY WIDGETS LIBRARY â•žâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nThe following UnsupportedError was thrown building LinearProgressIndicator(100.0%, dirty,\ndependencies: [Directionality, _InheritedTheme, _LocalizationsScope-[GlobalKey#ccd7a]], state:\n_LinearProgressIndicatorState#11dd2(ticker inactive)):\nUnsupported operation: Infinity or NaN toInt\n\nThe relevant error-causing widget was:\n  LinearProgressIndicator\n  LinearProgressIndicator:file:///Users/bilalghalib/Projects/Github/amana_audit/lib/screens/home_screen.dart:32:15\n\nWhen the exception was thrown, this was the stack:\n#0      double.toInt (dart:core-patch/double.dart)\n#1      double.round (dart:core-patch/double.dart:194:34)\n#2      ProgressIndicator._buildSemanticsWrapper (package:flutter/src/material/progress_indicator.dart:131:52)\n#3      _LinearProgressIndicatorState._buildIndicator (package:flutter/src/material/progress_indicator.dart:368:19)\n#4      _LinearProgressIndicatorState.build (package:flutter/src/material/progress_indicator.dart:402:14)\n#5      StatefulElement.build (package:flutter/src/widgets/framework.dart:5592:27)\n#6      ComponentElement.performRebuild (package:flutter/src/widgets/framework.dart:5480:15)\n#7      StatefulElement.performRebuild (package:flutter/src/widgets/framework.dart:5643:11)\n#8      Element.rebuild (package:flutter/src/widgets/framework.dart:5196:7)\n#9      ComponentElement._firstBuild (package:flutter/src/widgets/framework.dart:5462:5)\n#10     StatefulElement._firstBuild (package:flutter/src/widgets/framework.dart:5634:11)\n#11     ComponentElement.mount (package:flutter/src/widgets/framework.dart:5456:5)\n...     Normal element mounting (41 frames)\n#52     Element.inflateWidget (package:flutter/src/widgets/framework.dart:4335:16)\n#53     Element.updateChild (package:flutter/src/widgets/framework.dart:3846:18)\n#54     SliverMultiBoxAdaptorElement.updateChild (package:flutter/src/widgets/sliver.dart:858:37)\n#55     SliverMultiBoxAdaptorElement.createChild.<anonymous closure> (package:flutter/src/widgets/sliver.dart:843:20)\n#56     BuildOwner.buildScope (package:flutter/src/widgets/framework.dart:2844:19)\n#57     SliverMultiBoxAdaptorElement.createChild (package:flutter/src/widgets/sliver.dart:835:12)\n#58     RenderSliverMultiBoxAdaptor._createOrObtainChild.<anonymous closure>\n(package:flutter/src/rendering/sliver_multi_box_adaptor.dart:349:23)\n#59     RenderObject.invokeLayoutCallback.<anonymous closure> (package:flutter/src/rendering/object.dart:2686:59)\n#60     PipelineOwner._enableMutationsToDirtySubtrees (package:flutter/src/rendering/object.dart:1097:15)\n#61     RenderObject.invokeLayoutCallback (package:flutter/src/rendering/object.dart:2686:14)\n#62     RenderSliverMultiBoxAdaptor._createOrObtainChild (package:flutter/src/rendering/sliver_multi_box_adaptor.dart:338:5)\n#63     RenderSliverMultiBoxAdaptor.addInitialChild (package:flutter/src/rendering/sliver_multi_box_adaptor.dart:424:5)\n#64     RenderSliverList.performLayout (package:flutter/src/rendering/sliver_list.dart:77:12)\n#65     RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#66     RenderSliverEdgeInsetsPadding.performLayout (package:flutter/src/rendering/sliver_padding.dart:139:12)\n#67     RenderSliverPadding.performLayout (package:flutter/src/rendering/sliver_padding.dart:361:11)\n#68     RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#69     RenderViewportBase.layoutChildSequence (package:flutter/src/rendering/viewport.dart:601:13)\n#70     RenderViewport._attemptLayout (package:flutter/src/rendering/viewport.dart:1555:12)\n#71     RenderViewport.performLayout (package:flutter/src/rendering/viewport.dart:1464:20)\n#72     RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#73     RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#74     RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#75     RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#76     RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#77     RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#78     RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#79     RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#80     RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#81     RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#82     RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#83     RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#84     RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#85     RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#86     RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#87     RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#88     RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#89     RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#90     RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#91     RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#92     RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#93     RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#94     RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#95     RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#96     RenderCustomPaint.performLayout (package:flutter/src/rendering/custom_paint.dart:569:11)\n#97     RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#98     RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#99     RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#100    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#101    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#102    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#103    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#104    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#105    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#106    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#107    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#108    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#109    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#110    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#111    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#112    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#113    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#114    MultiChildLayoutDelegate.layoutChild (package:flutter/src/rendering/custom_layout.dart:173:12)\n#115    _ScaffoldLayout.performLayout (package:flutter/src/material/scaffold.dart:1063:7)\n#116    MultiChildLayoutDelegate._callPerformLayout (package:flutter/src/rendering/custom_layout.dart:237:7)\n#117    RenderCustomMultiChildLayoutBox.performLayout (package:flutter/src/rendering/custom_layout.dart:404:14)\n#118    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#119    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#120    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#121    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#122    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#123    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#124    _RenderCustomClip.performLayout (package:flutter/src/rendering/proxy_box.dart:1440:11)\n#125    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#126    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#127    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#128    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#129    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#130    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#131    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#132    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#133    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#134    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#135    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#136    ChildLayoutHelper.layoutChild (package:flutter/src/rendering/layout_helper.dart:52:11)\n#137    RenderStack._computeSize (package:flutter/src/rendering/stack.dart:582:43)\n#138    RenderStack.performLayout (package:flutter/src/rendering/stack.dart:609:12)\n#139    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#140    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#141    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#142    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#143    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#144    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#145    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#146    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#147    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#148    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#149    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#150    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#151    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#152    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#153    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#154    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#155    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#156    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#157    RenderOffstage.performLayout (package:flutter/src/rendering/proxy_box.dart:3728:13)\n#158    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#159    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#160    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#161    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#162    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#163    _RenderTheaterMixin.layoutChild (package:flutter/src/widgets/overlay.dart:968:13)\n#164    _RenderTheater.performLayout (package:flutter/src/widgets/overlay.dart:1282:9)\n#165    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#166    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#167    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#168    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#169    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#170    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#171    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#172    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#173    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#174    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#175    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#176    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#177    RenderCustomPaint.performLayout (package:flutter/src/rendering/custom_paint.dart:569:11)\n#178    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#179    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#180    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#181    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#182    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#183    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#184    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#185    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#186    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#187    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#188    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#189    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#190    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#191    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#192    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#193    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#194    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#195    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#196    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#197    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#198    RenderProxyBoxMixin.performLayout (package:flutter/src/rendering/proxy_box.dart:105:21)\n#199    RenderObject.layout (package:flutter/src/rendering/object.dart:2575:7)\n#200    RenderBox.layout (package:flutter/src/rendering/box.dart:2389:11)\n#201    RenderView.performLayout (package:flutter/src/rendering/view.dart:195:14)\n#202    RenderObject._layoutWithoutResize (package:flutter/src/rendering/object.dart:2414:7)\n#203    PipelineOwner.flushLayout (package:flutter/src/rendering/object.dart:1051:18)\n#204    PipelineOwner.flushLayout (package:flutter/src/rendering/object.dart:1064:15)\n#205    RendererBinding.drawFrame (package:flutter/src/rendering/binding.dart:582:23)\n#206    WidgetsBinding.drawFrame (package:flutter/src/widgets/binding.dart:991:13)\n#207    RendererBinding._handlePersistentFrameCallback (package:flutter/src/rendering/binding.dart:448:5)\n#208    SchedulerBinding._invokeFrameCallback (package:flutter/src/scheduler/binding.dart:1386:15)\n#209    SchedulerBinding.handleDrawFrame (package:flutter/src/scheduler/binding.dart:1311:9)\n#210    SchedulerBinding.scheduleWarmUpFrame.<anonymous closure> (package:flutter/src/scheduler/binding.dart:1034:7)\n#214    _RawReceivePort._handleMessage (dart:isolate-patch/isolate_patch.dart:184:12)\n(elided 3 frames from class _Timer and dart:async-patch)\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nThe Flutter DevTools debugger and profiler on macOS is available at:\nhttp://127.0.0.1:9101?uri=http://127.0.0.1:62066/88lAZnbJao8=/\n2024-06-05 14:50:20.995 lib[87823:639901] WARNING: Secure coding is automatically enabled for restorable state! However, not on all supported macOS versions of this application. Opt-in to secure coding explicitly by implementing NSApplicationDelegate.applicationSupportsSecureRestorableState:."
          },
          {
            "file_name": "paste-2.txt",
            "file_size": 69996,
            "file_type": "txt",
            "extracted_content": "\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./prayer_record.dart\n#############################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int fajrMissed;\n\n  @HiveField(3)\n  int dhuhrMissed;\n\n  @HiveField(4)\n  int asrMissed;\n\n  @HiveField(5)\n  int maghribMissed;\n\n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./main.dart\n####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/edit_details_screen.dart';\n\nvoid main() {\n  runApp(MyApp());\n}\n\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return ChangeNotifierProvider(\n      create: (_) => PrayerProvider()..loadData(),\n      child: MaterialApp(\n        title: 'Prayer Tracker',\n        theme: ThemeData(\n          primarySwatch: Colors.blue,\n        ),\n        initialRoute: '/',\n        routes: {\n          '/': (context) => HomeScreen(),\n          '/edit-details': (context) => EditDetailsScreen(),\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./prayer_record.g.dart\n###############################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  Map<String, PrayerData> _prayerData = {};\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  Future<void> loadData() async {\n    _prayerData = {};\n\n    for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final key = '$year-$month';\n        _prayerData[key] = PrayerData(\n          year: year,\n          month: month,\n          prayersCompleted: {},\n          prayersMissed: {},\n          totalPrayed: 0,\n          totalMissed: 0,\n          percentagePrayed: 0,\n          percentageMissed: 0,\n        );\n      }\n    }\n\n    notifyListeners();\n  }\n\n  void updatePrayerData(PrayerData updatedData) {\n    _prayerData['${updatedData.year}-${updatedData.month}'] = updatedData;\n    notifyListeners();\n  }\n\n  void incrementPrayer(int year, int month, String prayer) {\n    final key = '$year-$month';\n    if (_prayerData.containsKey(key)) {\n      final data = _prayerData[key]!;\n      data.prayersCompleted[prayer] = (data.prayersCompleted[prayer] ?? 0) + 1;\n      data.totalPrayed++;\n      notifyListeners();\n    }\n  }\n\n  PrayerData getPrayerDataForMonth(int year, int month) {\n    final key = '$year-$month';\n    return _prayerData[key] ??\n        PrayerData(\n          year: year,\n          month: month,\n          prayersCompleted: {},\n          prayersMissed: {},\n          totalPrayed: 0,\n          totalMissed: 0,\n          percentagePrayed: 0,\n          percentageMissed: 0,\n        );\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final data = getPrayerDataForMonth(year, month);\n    return data.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final data = getPrayerDataForMonth(year, month);\n    return data.prayersMissed[prayer] ?? 0;\n  }\n}\n\n\n\n# File: ./models/prayer_record.dart\n####################################\n\nimport 'package:hive/hive.dart';\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n  @HiveField(1)\n  int month;\n  @HiveField(2)\n  int fajrMissed;\n  @HiveField(3)\n  int dhuhrMissed;\n  @HiveField(4)\n  int asrMissed;\n  @HiveField(5)\n  int maghribMissed;\n  @HiveField(6)\n  int ishaMissed;\n// Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./models/prayer_data.dart\n##################################\n\n// File: lib/models/prayer_data.dart\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_data.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerData {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  Map<String, int> prayersCompleted; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(3)\n  Map<String, int> prayersMissed; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(4)\n  int totalPrayed;\n\n  @HiveField(5)\n  int totalMissed;\n\n  @HiveField(6)\n  double percentagePrayed;\n\n  @HiveField(7)\n  double percentageMissed;\n\n  PrayerData({\n    required this.year,\n    required this.month,\n    required this.prayersCompleted,\n    required this.prayersMissed,\n    required this.totalPrayed,\n    required this.totalMissed,\n    required this.percentagePrayed,\n    required this.percentageMissed,\n  });\n\n  factory PrayerData.fromMap(Map<String, dynamic> map) {\n    return PrayerData(\n      year: map['year'],\n      month: map['month'],\n      prayersCompleted: Map<String, int>.from(map['prayersCompleted']),\n      prayersMissed: Map<String, int>.from(map['prayersMissed']),\n      totalPrayed: map['totalPrayed'],\n      totalMissed: map['totalMissed'],\n      percentagePrayed: map['percentagePrayed'],\n      percentageMissed: map['percentageMissed'],\n    );\n  }\n\n  Map<String, dynamic> toMap() {\n    return {\n      'year': year,\n      'month': month,\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'totalPrayed': totalPrayed,\n      'totalMissed': totalMissed,\n      'percentagePrayed': percentagePrayed,\n      'percentageMissed': percentageMissed,\n    };\n  }\n}\n\n\n\n# File: ./models/prayer_data.g.dart\n####################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_data.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerDataAdapter extends TypeAdapter<PrayerData> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerData read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerData(\n      year: fields[0] as int,\n      month: fields[1] as int,\n      prayersCompleted: (fields[2] as Map).cast<String, int>(),\n      prayersMissed: (fields[3] as Map).cast<String, int>(),\n      totalPrayed: fields[4] as int,\n      totalMissed: fields[5] as int,\n      percentagePrayed: fields[6] as double,\n      percentageMissed: fields[7] as double,\n    );\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerData obj) {\n    writer\n      ..writeByte(8)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.prayersCompleted)\n      ..writeByte(3)\n      ..write(obj.prayersMissed)\n      ..writeByte(4)\n      ..write(obj.totalPrayed)\n      ..writeByte(5)\n      ..write(obj.totalMissed)\n      ..writeByte(6)\n      ..write(obj.percentagePrayed)\n      ..writeByte(7)\n      ..write(obj.percentageMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerDataAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./models/prayer_record.g.dart\n######################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n  final VoidCallback onPrayPressed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.year,\n    required this.month,\n    required this.onPrayPressed,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    final completedPrayers =\n        prayerProvider.getCompletedPrayersForMonth(year, month, prayer);\n    final missedPrayers =\n        prayerProvider.getMissedPrayersForMonth(year, month, prayer);\n    final totalPrayers = completedPrayers + missedPrayers;\n\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0 ? completedPrayers / totalPrayers : 0,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text(\n                '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            ElevatedButton(\n              onPressed: onPrayPressed,\n              child: Text('Pray'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_details_screen.dart\n#############################################\n\nimport 'package:flutter/material.dart';\nimport '../services/hive_service.dart';\nimport '../models/prayer_record.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          // Implement logic to find and increment the oldest missed prayer\n\n          return Column(\n            children: [\n              // Display and update prayer details here\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport '../constants.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  int? _selectedMonth;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final years = List.generate(kDefaultEndYear - kDefaultStartYear + 1,\n              (index) => kDefaultStartYear + index);\n          final months = List.generate(12, (index) => index + 1);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Year dropdown\n              DropdownButtonFormField<int>(\n                value: _selectedYear,\n                items: years.map((year) {\n                  return DropdownMenuItem(\n                    value: year,\n                    child: Text(year.toString()),\n                  );\n                }).toList(),\n                onChanged: (value) {\n                  setState(() {\n                    _selectedYear = value;\n                    _selectedMonth = null;\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Year',\n                ),\n              ),\n              SizedBox(height: 16.0),\n\n              // Month dropdown\n              if (_selectedYear != null)\n                DropdownButtonFormField<int>(\n                  value: _selectedMonth,\n                  items: months.map((month) {\n                    return DropdownMenuItem(\n                      value: month,\n                      child: Text(month.toString()),\n                    );\n                  }).toList(),\n                  onChanged: (value) {\n                    setState(() {\n                      _selectedMonth = value;\n                    });\n                  },\n                  decoration: InputDecoration(\n                    labelText: 'Select Month',\n                  ),\n                ),\n              SizedBox(height: 16.0),\n\n              // Prayer data form fields\n              if (_selectedYear != null && _selectedMonth != null)\n                // Display form fields for editing prayer data\n                Container(),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\nimport '../models/prayer_data.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(PrayerData(\n      // Fix: Pass a PrayerData object\n      year: startYear,\n      month: startMonth,\n      prayersCompleted: {},\n      prayersMissed: {},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    ));\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\n// File: screens/prayer_progress_card_cupertino.dart\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n\n  const PrayerProgressCardCupertino({\n    required this.prayer,\n    required this.year,\n    required this.month,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(\n          prayerProvider.getCompletedPrayersForMonth(year, month, prayer)),\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(\n              prayerProvider.getMissedPrayersForMonth(year, month, prayer)),\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CupertinoActivityIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Container(\n              margin: EdgeInsets.all(8.0),\n              padding: EdgeInsets.all(14.0),\n              decoration: BoxDecoration(\n                color: CupertinoColors.white,\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: CupertinoColors.systemGrey.withOpacity(0.4),\n                    spreadRadius: 1,\n                    blurRadius: 3,\n                    offset: Offset(0, 2),\n                  ),\n                ],\n              ),\n              child: Column(\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                children: [\n                  Text(prayer,\n                      style:\n                          TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n                  SizedBox(height: 8),\n                  ClipRRect(\n                    borderRadius: BorderRadius.circular(8),\n                    child: LinearProgressIndicator(\n                      value: totalPrayers > 0\n                          ? completedPrayers / totalPrayers\n                          : 0,\n                      minHeight: 12,\n                      backgroundColor: CupertinoColors.systemGrey4,\n                      valueColor: AlwaysStoppedAnimation<Color>(\n                          CupertinoColors.activeGreen),\n                    ),\n                  ),\n                  SizedBox(height: 8),\n                  Text(\n                      '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                      style: TextStyle(fontSize: 14)),\n                  Text('$completedPrayers / $totalPrayers',\n                      style: TextStyle(fontSize: 12)),\n                  SizedBox(height: 8),\n                  CupertinoButton.filled(\n                    onPressed: () => prayerProvider.incrementPrayer(prayer),\n                    child: Text('Pray'),\n                  ),\n                ],\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\n\nclass HomeScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n        actions: [\n          IconButton(\n            icon: Icon(Icons.edit),\n            onPressed: () {\n              Navigator.pushNamed(context, '/edit-details');\n            },\n          ),\n        ],\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final currentYear = DateTime.now().year;\n          final currentMonth = DateTime.now().month;\n          final prayerData =\n              provider.getPrayerDataForMonth(currentYear, currentMonth);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Display total progress\n              LinearProgressIndicator(\n                value: prayerData.totalPrayed /\n                    (prayerData.totalPrayed + prayerData.totalMissed),\n              ),\n              SizedBox(height: 16.0),\n\n              // Display individual prayer cards\n              GridView.count(\n                crossAxisCount: 2,\n                shrinkWrap: true,\n                children: prayerData.prayersCompleted.keys.map((prayer) {\n                  return PrayerProgressCardMaterial(\n                    prayer: prayer,\n                    year: currentYear,\n                    month: currentMonth,\n                    onPrayPressed: () {\n                      provider.incrementPrayer(\n                          currentYear, currentMonth, prayer);\n                    },\n                  );\n                }).toList(),\n              ),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/flutter_build/dart_plugin_registrant.dart\n###############################################################\n\n//\n// Generated file. Do not edit.\n// This file is generated from template in file `flutter_tools/lib/src/flutter_plugins.dart`.\n//\n\n// @dart = 3.3\n\nimport 'dart:io'; // flutter_ignore: dart_io_import.\nimport 'package:path_provider_android/path_provider_android.dart';\nimport 'package:shared_preferences_android/shared_preferences_android.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_linux/path_provider_linux.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_linux/shared_preferences_linux.dart';\nimport 'package:url_launcher_linux/url_launcher_linux.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_windows/path_provider_windows.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_windows/shared_preferences_windows.dart';\nimport 'package:url_launcher_windows/url_launcher_windows.dart';\n\n@pragma('vm:entry-point')\nclass _PluginRegistrant {\n\n  @pragma('vm:entry-point')\n  static void register() {\n    if (Platform.isAndroid) {\n      try {\n        PathProviderAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isIOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isLinux) {\n      try {\n        PathProviderLinux.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusLinuxPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesLinux.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherLinux.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isMacOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isWindows) {\n      try {\n        PathProviderWindows.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusWindowsPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesWindows.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherWindows.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./.dart_tool/build/entrypoint/build.dart\n#################################################\n\n// ignore_for_file: directives_ordering\n// ignore_for_file: no_leading_underscores_for_library_prefixes\nimport 'package:build_runner_core/build_runner_core.dart' as _i1;\nimport 'package:hive_generator/hive_generator.dart' as _i2;\nimport 'package:source_gen/builder.dart' as _i3;\nimport 'dart:isolate' as _i4;\nimport 'package:build_runner/build_runner.dart' as _i5;\nimport 'dart:io' as _i6;\n\nfinal _builders = <_i1.BuilderApplication>[\n  _i1.apply(\n    r'hive_generator:hive_generator',\n    [_i2.getBuilder],\n    _i1.toDependentsOf(r'hive_generator'),\n    hideOutput: true,\n    appliesBuilders: const [r'source_gen:combining_builder'],\n  ),\n  _i1.apply(\n    r'source_gen:combining_builder',\n    [_i3.combiningBuilder],\n    _i1.toNoneByDefault(),\n    hideOutput: false,\n    appliesBuilders: const [r'source_gen:part_cleanup'],\n  ),\n  _i1.applyPostProcess(\n    r'source_gen:part_cleanup',\n    _i3.partCleanup,\n  ),\n];\nvoid main(\n  List<String> args, [\n  _i4.SendPort? sendPort,\n]) async {\n  var result = await _i5.run(\n    args,\n    _builders,\n  );\n  sendPort?.send(result);\n  _i6.exitCode = result;\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\n// File: hive_service.dart\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    await Hive.deleteBoxFromDisk('prayerBox'); // Clear the existing box\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n    ;\n\n    if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    onPrayerDataUpdated?.call();\n  }\n\n  void incrementPrayer(String prayer) {\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear ||\n              (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed =\n          (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed =\n          (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1;\n        month <= (year == currentYear ? currentMonth - 1 : 12);\n        month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int year = startYear; year <= endYear; year++) {\n      final endMonth = year == currentYear ? currentMonth : 12;\n      for (int month = 1; month <= endMonth; month++) {\n        final key = '$year-$month';\n        if (!prayerData.containsKey(key)) {\n          prayerData[key] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n    }\n    savePrayerData(prayerData.values.first);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    int totalPrayed = 0;\n    int totalPossible = 0;\n\n    for (final data in prayerData.values) {\n      totalPrayed += data.totalPrayed;\n      totalPossible += data.totalPrayed + data.totalMissed;\n    }\n\n    return {\n      'totalPrayed': totalPrayed,\n      'totalPossible': totalPossible,\n    };\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(\n      int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers)\n        prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n\n\n\n# File: ./widgets/progress_bar.dart\n####################################\n\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double value;\n\n  ProgressBar({required this.value});\n\n  @override\n  Widget build(BuildContext context) {\n    return LinearProgressIndicator(value: value);\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ï·º) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'Ø¹ÙŽÙ†Ù’ Ø£ÙŽØ¨ÙÙŠ Ù‡ÙØ±ÙŽÙŠÙ’Ø±ÙŽØ©ÙŽ Ø±ÙŽØ¶ÙÙŠÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ†Ù’Ù‡Ù Ù‚ÙŽØ§Ù„ÙŽ: Ù‚ÙŽØ§Ù„ÙŽ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù ØµÙŽÙ„ÙŽÙ‘Ù‰ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ÙˆÙŽØ³ÙŽÙ„ÙŽÙ‘Ù…ÙŽ: \" Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙŽ Ø¹ÙŽØ²ÙŽÙ‘ ÙˆÙŽØ¬ÙŽÙ„ÙŽÙ‘ Ù‚ÙŽØ§Ù„ÙŽ: Ù…ÙŽÙ†Ù’ Ø¹ÙŽØ§Ø¯ÙŽÙ‰ Ù„ÙÙŠ ÙˆÙŽÙ„ÙÙŠÙ‹Ù‘Ø§ØŒ ÙÙŽÙ‚ÙŽØ¯Ù’ Ø¢Ø°ÙŽÙ†Ù’ØªÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙŽØ±Ù’Ø¨ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨ÙŽ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø¨ÙØ´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽØ­ÙŽØ¨ÙŽÙ‘ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ù…ÙÙ…ÙŽÙ‘Ø§ Ø§ÙÙ’ØªÙŽØ±ÙŽØ¶Ù’ØªÙ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ÙŠÙŽØ²ÙŽØ§Ù„Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ ÙŠÙŽØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨Ù Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¨ÙØ§Ù„Ù†ÙŽÙ‘ÙˆÙŽØ§ÙÙÙ„Ù Ø­ÙŽØªÙŽÙ‘Ù‰ Ø£ÙØ­ÙØ¨ÙŽÙ‘Ù‡ÙØŒ ÙÙŽØ¥ÙØ°ÙŽØ§ Ø£ÙŽØ­Ù’Ø¨ÙŽØ¨Ù’ØªÙÙ‡ÙØŒ ÙƒÙÙ†Ù’ØªÙ Ø³ÙŽÙ…Ù’Ø¹ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙŽØ³Ù’Ù…ÙŽØ¹Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽØ¨ÙŽØµÙŽØ±ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙØ¨Ù’ØµÙØ±Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽÙŠÙŽØ¯ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽØ¨Ù’Ø·ÙØ´Ù Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ±ÙØ¬Ù’Ù„ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽÙ…Ù’Ø´ÙÙŠ Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ¥ÙÙ†Ù’ Ø³ÙŽØ£ÙŽÙ„ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹Ù’Ø·ÙÙŠÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ„ÙŽØ¦ÙÙ†Ù’ Ø§Ø³Ù’ØªÙŽØ¹ÙŽØ§Ø°ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹ÙÙŠØ°ÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽØ±ÙŽØ¯ÙŽÙ‘Ø¯Ù’ØªÙ Ø¹ÙŽÙ†Ù’ Ø´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽÙ†ÙŽØ§ ÙÙŽØ§Ø¹ÙÙ„ÙÙ‡Ù ØªÙŽØ±ÙŽØ¯ÙÙ‘Ø¯ÙÙŠ Ø¹ÙŽÙ†Ù’ Ù†ÙŽÙÙ’Ø³Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØŒ ÙŠÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ø§Ù„Ù’Ù…ÙŽÙˆÙ’ØªÙŽ ÙˆÙŽØ£ÙŽÙ†ÙŽØ§ Ø£ÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ù…ÙŽØ³ÙŽØ§Ø¡ÙŽØªÙŽÙ‡Ù - Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n"
          }
        ],
        "files": [
          {
            "file_name": "paste.txt"
          },
          {
            "file_name": "paste-2.txt"
          }
        ]
      }
    },
    {
      "id": "8a406c0a-944d-4b4c-ad7e-fcfbcc2e79f9",
      "role": "assistant",
      "content": " Here are the updated files with the necessary fixes:\n\n# File: home_screen.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\n\nclass HomeScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n        actions: [\n          IconButton(\n            icon: Icon(Icons.edit),\n            onPressed: () {\n              Navigator.pushNamed(context, '/edit-details');\n            },\n          ),\n        ],\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final currentYear = DateTime.now().year;\n          final currentMonth = DateTime.now().month;\n          final prayerData =\n              provider.getPrayerDataForMonth(currentYear, currentMonth);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Display total progress\n              LinearProgressIndicator(\n                value: prayerData.totalPrayed == 0 && prayerData.totalMissed == 0\n                    ? 0\n                    : prayerData.totalPrayed /\n                        (prayerData.totalPrayed + prayerData.totalMissed),\n              ),\n              SizedBox(height: 16.0),\n\n              // Display individual prayer cards\n              GridView.count(\n                crossAxisCount: 2,\n                shrinkWrap: true,\n                children: prayerData.prayersCompleted.keys.map((prayer) {\n                  return PrayerProgressCardMaterial(\n                    prayer: prayer,\n                    year: currentYear,\n                    month: currentMonth,\n                    onPrayPressed: () {\n                      provider.incrementPrayer(\n                          currentYear, currentMonth, prayer);\n                    },\n                  );\n                }).toList(),\n              ),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n# File: prayer_progress_card_material.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n  final VoidCallback onPrayPressed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.year,\n    required this.month,\n    required this.onPrayPressed,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    final completedPrayers =\n        prayerProvider.getCompletedPrayersForMonth(year, month, prayer);\n    final missedPrayers =\n        prayerProvider.getMissedPrayersForMonth(year, month, prayer);\n    final totalPrayers = completedPrayers + missedPrayers;\n\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: totalPrayers == 0 ? 0 : completedPrayers / totalPrayers,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text(\n                '${totalPrayers == 0 ? 0 : (completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            ElevatedButton(\n              onPressed: onPrayPressed,\n              child: Text('Pray'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\nThese changes should resolve the issues you were encountering:\n\n1. In the `HomeScreen`, the `LinearProgressIndicator` has been updated to handle the case when both `totalPrayed` and `totalMissed` are zero. It will display a progress of 0 in such cases to avoid the \"Infinity or NaN toInt\" error.\n\n2. In the `PrayerProgressCardMaterial`, the progress percentage calculation has been updated to handle the case when `totalPrayers` is zero. It will display a percentage of 0 in such cases.\n\nPlease update the relevant files in your project with these changes and let me know if you have any further questions or if you encounter any other issues.",
      "created_at": "2024-06-05T12:53:22.842736Z",
      "sequence_order": 9,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T12:53:22.842736Z",
            "stop_timestamp": "2024-06-05T12:53:22.842736Z",
            "flags": null,
            "type": "text",
            "text": " Here are the updated files with the necessary fixes:\n\n# File: home_screen.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\n\nclass HomeScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n        actions: [\n          IconButton(\n            icon: Icon(Icons.edit),\n            onPressed: () {\n              Navigator.pushNamed(context, '/edit-details');\n            },\n          ),\n        ],\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final currentYear = DateTime.now().year;\n          final currentMonth = DateTime.now().month;\n          final prayerData =\n              provider.getPrayerDataForMonth(currentYear, currentMonth);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Display total progress\n              LinearProgressIndicator(\n                value: prayerData.totalPrayed == 0 && prayerData.totalMissed == 0\n                    ? 0\n                    : prayerData.totalPrayed /\n                        (prayerData.totalPrayed + prayerData.totalMissed),\n              ),\n              SizedBox(height: 16.0),\n\n              // Display individual prayer cards\n              GridView.count(\n                crossAxisCount: 2,\n                shrinkWrap: true,\n                children: prayerData.prayersCompleted.keys.map((prayer) {\n                  return PrayerProgressCardMaterial(\n                    prayer: prayer,\n                    year: currentYear,\n                    month: currentMonth,\n                    onPrayPressed: () {\n                      provider.incrementPrayer(\n                          currentYear, currentMonth, prayer);\n                    },\n                  );\n                }).toList(),\n              ),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n# File: prayer_progress_card_material.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n  final VoidCallback onPrayPressed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.year,\n    required this.month,\n    required this.onPrayPressed,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    final completedPrayers =\n        prayerProvider.getCompletedPrayersForMonth(year, month, prayer);\n    final missedPrayers =\n        prayerProvider.getMissedPrayersForMonth(year, month, prayer);\n    final totalPrayers = completedPrayers + missedPrayers;\n\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: totalPrayers == 0 ? 0 : completedPrayers / totalPrayers,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text(\n                '${totalPrayers == 0 ? 0 : (completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            ElevatedButton(\n              onPressed: onPrayPressed,\n              child: Text('Pray'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n```\n\nThese changes should resolve the issues you were encountering:\n\n1. In the `HomeScreen`, the `LinearProgressIndicator` has been updated to handle the case when both `totalPrayed` and `totalMissed` are zero. It will display a progress of 0 in such cases to avoid the \"Infinity or NaN toInt\" error.\n\n2. In the `PrayerProgressCardMaterial`, the progress percentage calculation has been updated to handle the case when `totalPrayers` is zero. It will display a percentage of 0 in such cases.\n\nPlease update the relevant files in your project with these changes and let me know if you have any further questions or if you encounter any other issues.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T12:53:22.842736Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "1f9b366d-64d7-4cd6-b521-d9728579d0e9",
      "role": "human",
      "content": "I want it never to be a zero, it shouldn't be, it should load the constants file on init",
      "created_at": "2024-06-05T12:55:14.012129Z",
      "sequence_order": 10,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T12:55:14.012129Z",
            "stop_timestamp": "2024-06-05T12:55:14.012129Z",
            "flags": null,
            "type": "text",
            "text": "I want it never to be a zero, it shouldn't be, it should load the constants file on init",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T12:55:14.012129Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "08313e11-3fc0-41d2-9f4d-2f944e9677ac",
      "role": "assistant",
      "content": " Apologies for the confusion. If you want to ensure that the progress and percentages are never zero by loading the default data from the constants file during initialization, you can make the following changes:\n\n# File: prayer_provider.dart\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  Map<String, PrayerData> _prayerData = {};\n\n  PrayerProvider() {\n    _loadDefaultData();\n  }\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  void _loadDefaultData() {\n    for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final key = '$year-$month';\n        _prayerData[key] = PrayerData(\n          year: year,\n          month: month,\n          prayersCompleted: {\n            'Fajr': 0,\n            'Dhuhr': 0,\n            'Asr': 0,\n            'Maghrib': 0,\n            'Isha': 0,\n          },\n          prayersMissed: {\n            'Fajr': kDefaultPercentageMissed ~/ 5,\n            'Dhuhr': kDefaultPercentageMissed ~/ 5,\n            'Asr': kDefaultPercentageMissed ~/ 5,\n            'Maghrib': kDefaultPercentageMissed ~/ 5,\n            'Isha': kDefaultPercentageMissed ~/ 5,\n          },\n          totalPrayed: 0,\n          totalMissed: kDefaultPercentageMissed,\n          percentagePrayed: 100 - kDefaultPercentageMissed.toDouble(),\n          percentageMissed: kDefaultPercentageMissed.toDouble(),\n        );\n      }\n    }\n    notifyListeners();\n  }\n\n  // ... (rest of the code remains the same)\n}\n```\n\nIn this updated code, the `PrayerProvider` constructor calls the `_loadDefaultData` method, which initializes the `_prayerData` map with default values based on the constants defined in the `constants.dart` file.\n\nThe `prayersCompleted` map is initialized with zero values for each prayer, while the `prayersMissed` map is initialized with values derived from the `kDefaultPercentageMissed` constant. The `totalMissed` and `percentageMissed` fields are also set based on the `kDefaultPercentageMissed` constant.\n\nWith these changes, the provider will always have default prayer data loaded during initialization, ensuring that the progress and percentages are never zero.\n\nPlease update the `prayer_provider.dart` file in your project with these changes and let me know if you have any further questions or if you encounter any issues.",
      "created_at": "2024-06-05T12:55:14.012129Z",
      "sequence_order": 11,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T12:55:14.012129Z",
            "stop_timestamp": "2024-06-05T12:55:14.012129Z",
            "flags": null,
            "type": "text",
            "text": " Apologies for the confusion. If you want to ensure that the progress and percentages are never zero by loading the default data from the constants file during initialization, you can make the following changes:\n\n# File: prayer_provider.dart\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  Map<String, PrayerData> _prayerData = {};\n\n  PrayerProvider() {\n    _loadDefaultData();\n  }\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  void _loadDefaultData() {\n    for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final key = '$year-$month';\n        _prayerData[key] = PrayerData(\n          year: year,\n          month: month,\n          prayersCompleted: {\n            'Fajr': 0,\n            'Dhuhr': 0,\n            'Asr': 0,\n            'Maghrib': 0,\n            'Isha': 0,\n          },\n          prayersMissed: {\n            'Fajr': kDefaultPercentageMissed ~/ 5,\n            'Dhuhr': kDefaultPercentageMissed ~/ 5,\n            'Asr': kDefaultPercentageMissed ~/ 5,\n            'Maghrib': kDefaultPercentageMissed ~/ 5,\n            'Isha': kDefaultPercentageMissed ~/ 5,\n          },\n          totalPrayed: 0,\n          totalMissed: kDefaultPercentageMissed,\n          percentagePrayed: 100 - kDefaultPercentageMissed.toDouble(),\n          percentageMissed: kDefaultPercentageMissed.toDouble(),\n        );\n      }\n    }\n    notifyListeners();\n  }\n\n  // ... (rest of the code remains the same)\n}\n```\n\nIn this updated code, the `PrayerProvider` constructor calls the `_loadDefaultData` method, which initializes the `_prayerData` map with default values based on the constants defined in the `constants.dart` file.\n\nThe `prayersCompleted` map is initialized with zero values for each prayer, while the `prayersMissed` map is initialized with values derived from the `kDefaultPercentageMissed` constant. The `totalMissed` and `percentageMissed` fields are also set based on the `kDefaultPercentageMissed` constant.\n\nWith these changes, the provider will always have default prayer data loaded during initialization, ensuring that the progress and percentages are never zero.\n\nPlease update the `prayer_provider.dart` file in your project with these changes and let me know if you have any further questions or if you encounter any issues.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T12:55:14.012129Z",
        "attachments": [],
        "files": []
      }
    },
    {
      "id": "8242577a-34ee-4e47-8b85-19232ff90f3a",
      "role": "human",
      "content": "lib/providers/prayer_provider.dart:6:9: Error: Type 'PrayerService' not found.\n  final PrayerService _prayerService;\n        ^^^^^^^^^^^^^\nlib/main.dart:42:39: Error: Cannot invoke a non-'const' constructor where a const expression is expected.\nTry using a constructor or factory that is 'const'.\n              '/': (context) => const HomeScreen(),\n                                      ^^^^^^^^^^\nlib/main.dart:43:53: Error: Couldn't find constructor 'YearSelectionScreen'.\n              '/year-selection': (context) => const YearSelectionScreen(),\n                                                    ^^^^^^^^^^^^^^^^^^^\nlib/main.dart:44:51: Error: Cannot invoke a non-'const' constructor where a const expression is expected.\nTry using a constructor or factory that is 'const'.\n              '/edit-details': (context) => const EditDetailsScreen(),\n                                                  ^^^^^^^^^^^^^^^^^\nlib/main.dart:27:41: Error: The method 'PrayerService' isn't defined for the class 'MyApp'.\n - 'MyApp' is from 'package:amana/main.dart' ('lib/main.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'PrayerService'.\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n                                        ^^^^^^^^^^^^^\nlib/providers/prayer_provider.dart:6:9: Error: 'PrayerService' isn't a type.\n  final PrayerService _prayerService;\n        ^^^^^^^^^^^^^\nlib/screens/home_screen.dart:33:35: Error: The getter 'totalPrayed' isn't defined for the class 'Future<PrayerData>'.\n - 'Future' is from 'dart:async'.\n - 'PrayerData' is from 'package:amana/models/prayer_data.dart' ('lib/models/prayer_data.dart').\nTry correcting the name to the name of an existing getter, or defining a getter or field named 'totalPrayed'.\n                value: prayerData.totalPrayed /\n                                  ^^^^^^^^^^^\nlib/screens/home_screen.dart:34:33: Error: The getter 'totalPrayed' isn't defined for the class 'Future<PrayerData>'.\n - 'Future' is from 'dart:async'.\n - 'PrayerData' is from 'package:amana/models/prayer_data.dart' ('lib/models/prayer_data.dart').\nTry correcting the name to the name of an existing getter, or defining a getter or field named 'totalPrayed'.\n                    (prayerData.totalPrayed + prayerData.totalMissed),\n                                ^^^^^^^^^^^\nlib/screens/home_screen.dart:34:58: Error: The getter 'totalMissed' isn't defined for the class 'Future<PrayerData>'.\n - 'Future' is from 'dart:async'.\n - 'PrayerData' is from 'package:amana/models/prayer_data.dart' ('lib/models/prayer_data.dart').\nTry correcting the name to the name of an existing getter, or defining a getter or field named 'totalMissed'.\n                    (prayerData.totalPrayed + prayerData.totalMissed),\n                                                         ^^^^^^^^^^^\nlib/screens/home_screen.dart:42:38: Error: The getter 'prayersCompleted' isn't defined for the class 'Future<PrayerData>'.\n - 'Future' is from 'dart:async'.\n - 'PrayerData' is from 'package:amana/models/prayer_data.dart' ('lib/models/prayer_data.dart').\nTry correcting the name to the name of an existing getter, or defining a getter or field named 'prayersCompleted'.\n                children: prayerData.prayersCompleted.keys.map((prayer) {\n                                     ^^^^^^^^^^^^^^^^\nlib/screens/home_screen.dart:48:47: Error: Too many positional arguments: 1 allowed, but 3 found.\nTry removing the extra positional arguments.\n                      provider.incrementPrayer(\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'services/hive_service.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/edit_details_screen.dart';\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  runApp(MyApp(hiveService: hiveService));\n}\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n  const MyApp({Key? key, required this.hiveService}) : super(key: key);\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          return MaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}",
      "created_at": "2024-06-05T13:11:08.456243Z",
      "sequence_order": 12,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T13:11:08.456243Z",
            "stop_timestamp": "2024-06-05T13:11:08.456243Z",
            "flags": null,
            "type": "text",
            "text": "lib/providers/prayer_provider.dart:6:9: Error: Type 'PrayerService' not found.\n  final PrayerService _prayerService;\n        ^^^^^^^^^^^^^\nlib/main.dart:42:39: Error: Cannot invoke a non-'const' constructor where a const expression is expected.\nTry using a constructor or factory that is 'const'.\n              '/': (context) => const HomeScreen(),\n                                      ^^^^^^^^^^\nlib/main.dart:43:53: Error: Couldn't find constructor 'YearSelectionScreen'.\n              '/year-selection': (context) => const YearSelectionScreen(),\n                                                    ^^^^^^^^^^^^^^^^^^^\nlib/main.dart:44:51: Error: Cannot invoke a non-'const' constructor where a const expression is expected.\nTry using a constructor or factory that is 'const'.\n              '/edit-details': (context) => const EditDetailsScreen(),\n                                                  ^^^^^^^^^^^^^^^^^\nlib/main.dart:27:41: Error: The method 'PrayerService' isn't defined for the class 'MyApp'.\n - 'MyApp' is from 'package:amana/main.dart' ('lib/main.dart').\nTry correcting the name to the name of an existing method, or defining a method named 'PrayerService'.\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n                                        ^^^^^^^^^^^^^\nlib/providers/prayer_provider.dart:6:9: Error: 'PrayerService' isn't a type.\n  final PrayerService _prayerService;\n        ^^^^^^^^^^^^^\nlib/screens/home_screen.dart:33:35: Error: The getter 'totalPrayed' isn't defined for the class 'Future<PrayerData>'.\n - 'Future' is from 'dart:async'.\n - 'PrayerData' is from 'package:amana/models/prayer_data.dart' ('lib/models/prayer_data.dart').\nTry correcting the name to the name of an existing getter, or defining a getter or field named 'totalPrayed'.\n                value: prayerData.totalPrayed /\n                                  ^^^^^^^^^^^\nlib/screens/home_screen.dart:34:33: Error: The getter 'totalPrayed' isn't defined for the class 'Future<PrayerData>'.\n - 'Future' is from 'dart:async'.\n - 'PrayerData' is from 'package:amana/models/prayer_data.dart' ('lib/models/prayer_data.dart').\nTry correcting the name to the name of an existing getter, or defining a getter or field named 'totalPrayed'.\n                    (prayerData.totalPrayed + prayerData.totalMissed),\n                                ^^^^^^^^^^^\nlib/screens/home_screen.dart:34:58: Error: The getter 'totalMissed' isn't defined for the class 'Future<PrayerData>'.\n - 'Future' is from 'dart:async'.\n - 'PrayerData' is from 'package:amana/models/prayer_data.dart' ('lib/models/prayer_data.dart').\nTry correcting the name to the name of an existing getter, or defining a getter or field named 'totalMissed'.\n                    (prayerData.totalPrayed + prayerData.totalMissed),\n                                                         ^^^^^^^^^^^\nlib/screens/home_screen.dart:42:38: Error: The getter 'prayersCompleted' isn't defined for the class 'Future<PrayerData>'.\n - 'Future' is from 'dart:async'.\n - 'PrayerData' is from 'package:amana/models/prayer_data.dart' ('lib/models/prayer_data.dart').\nTry correcting the name to the name of an existing getter, or defining a getter or field named 'prayersCompleted'.\n                children: prayerData.prayersCompleted.keys.map((prayer) {\n                                     ^^^^^^^^^^^^^^^^\nlib/screens/home_screen.dart:48:47: Error: Too many positional arguments: 1 allowed, but 3 found.\nTry removing the extra positional arguments.\n                      provider.incrementPrayer(\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'services/hive_service.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/edit_details_screen.dart';\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  runApp(MyApp(hiveService: hiveService));\n}\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n  const MyApp({Key? key, required this.hiveService}) : super(key: key);\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          return MaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T13:11:08.456243Z",
        "attachments": [
          {
            "file_name": "paste.txt",
            "file_size": 71519,
            "file_type": "txt",
            "extracted_content": "\n\n# File: ./myApp.dart\n#####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'platform_specific_widget/amana_material_app.dart';\nimport 'providers/prayer_provider.dart';\nimport 'services/prayer_service.dart';\nimport 'services/hive_service.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({super.key, required this.hiveService});\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          prayerProvider.loadData();\n          return AmanaMaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./prayer_record.dart\n#############################\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  int fajrMissed;\n\n  @HiveField(3)\n  int dhuhrMissed;\n\n  @HiveField(4)\n  int asrMissed;\n\n  @HiveField(5)\n  int maghribMissed;\n\n  @HiveField(6)\n  int ishaMissed;\n\n  // Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./main.dart\n####################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'services/hive_service.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/edit_details_screen.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n\n  runApp(MyApp(hiveService: hiveService));\n}\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({Key? key, required this.hiveService}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(PrayerService(hiveService)),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          return MaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => const HomeScreen(),\n              '/year-selection': (context) => const YearSelectionScreen(),\n              '/edit-details': (context) => const EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./constants.dart\n#########################\n\n//constants.dart\nconst int kDefaultStartYear = 2022;\nconst int kDefaultEndYear = 2023;\nconst int kDefaultPercentageMissed = 25;\nconst int kDefaultTaqwaBuffer = 5;\n\n\n\n# File: ./prayer_record.g.dart\n###############################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./providers/prayer_provider.dart\n#########################################\n\nimport 'package:flutter/foundation.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final PrayerService _prayerService;\n\n  PrayerProvider(this._prayerService) {\n    _prayerService.onPrayerDataUpdated = _onPrayerDataUpdated;\n  }\n\n  void _onPrayerDataUpdated() {\n    notifyListeners();\n  }\n\n  Map<String, PrayerData> _prayerData = {};\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  int get startYear => kDefaultStartYear;\n  int get endYear => kDefaultEndYear;\n\n  bool get isDataLoaded => _prayerService.isDataLoaded;\n  List<String> get prayers => _prayerService.prayers;\n\n  Future<void> loadData() async {\n    await _prayerService.loadData();\n    _prayerData = _prayerService.prayerData;\n    notifyListeners();\n  }\n\n  Future<void> saveData(PrayerData data) async {\n    await _prayerService.savePrayerData(data);\n    _prayerData['${data.year}-${data.month}'] = data;\n    notifyListeners();\n  }\n\n  void incrementPrayer(String prayer) {\n    _prayerService.incrementPrayer(prayer);\n    notifyListeners();\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getCompletedPrayersForMonth(year, month, prayer);\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    return _prayerService.getMissedPrayersForMonth(year, month, prayer);\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    return await _prayerService.getPrayerDataForMonth(year, month);\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    _prayerService.updatePrayerStats(\n        year, month, prayer, increaseCompletedCount);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForYear(year, percentageCompleted);\n    notifyListeners();\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    _prayerService.updatePrayerStatsForMonth(year, month, percentageCompleted);\n    notifyListeners();\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    return _prayerService.getPrayerCompletionPercentageForMonth(year, month);\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    return _prayerService.getPrayerCompletionPercentageForYear(year);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    return await _prayerService.getAggregatedPrayerData();\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    _prayerService.updateStartAndEndYear(startYear, endYear);\n    notifyListeners();\n  }\n}\n\n\n\n# File: ./models/prayer_record.dart\n####################################\n\nimport 'package:hive/hive.dart';\npart 'prayer_record.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerRecord extends HiveObject {\n  @HiveField(0)\n  int year;\n  @HiveField(1)\n  int month;\n  @HiveField(2)\n  int fajrMissed;\n  @HiveField(3)\n  int dhuhrMissed;\n  @HiveField(4)\n  int asrMissed;\n  @HiveField(5)\n  int maghribMissed;\n  @HiveField(6)\n  int ishaMissed;\n// Derived fields\n  int get totalMissed =>\n      fajrMissed + dhuhrMissed + asrMissed + maghribMissed + ishaMissed;\n  int get totalPrayed => (30 * 5) - totalMissed; // Assuming 30 days in a month\n  double get fajrPercentage => fajrMissed / 30;\n  double get dhuhrPercentage => dhuhrMissed / 30;\n  double get asrPercentage => asrMissed / 30;\n  double get maghribPercentage => maghribMissed / 30;\n  double get ishaPercentage => ishaMissed / 30;\n}\n\n\n\n# File: ./models/prayer_data.dart\n##################################\n\n// File: lib/models/prayer_data.dart\n\nimport 'package:hive/hive.dart';\n\npart 'prayer_data.g.dart';\n\n@HiveType(typeId: 0)\nclass PrayerData {\n  @HiveField(0)\n  int year;\n\n  @HiveField(1)\n  int month;\n\n  @HiveField(2)\n  Map<String, int> prayersCompleted; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(3)\n  Map<String, int> prayersMissed; // {'Fajr': 0, 'Dhuhr': 0, ...}\n\n  @HiveField(4)\n  int totalPrayed;\n\n  @HiveField(5)\n  int totalMissed;\n\n  @HiveField(6)\n  double percentagePrayed;\n\n  @HiveField(7)\n  double percentageMissed;\n\n  PrayerData({\n    required this.year,\n    required this.month,\n    required this.prayersCompleted,\n    required this.prayersMissed,\n    required this.totalPrayed,\n    required this.totalMissed,\n    required this.percentagePrayed,\n    required this.percentageMissed,\n  });\n\n  factory PrayerData.fromMap(Map<String, dynamic> map) {\n    return PrayerData(\n      year: map['year'],\n      month: map['month'],\n      prayersCompleted: Map<String, int>.from(map['prayersCompleted']),\n      prayersMissed: Map<String, int>.from(map['prayersMissed']),\n      totalPrayed: map['totalPrayed'],\n      totalMissed: map['totalMissed'],\n      percentagePrayed: map['percentagePrayed'],\n      percentageMissed: map['percentageMissed'],\n    );\n  }\n\n  Map<String, dynamic> toMap() {\n    return {\n      'year': year,\n      'month': month,\n      'prayersCompleted': prayersCompleted,\n      'prayersMissed': prayersMissed,\n      'totalPrayed': totalPrayed,\n      'totalMissed': totalMissed,\n      'percentagePrayed': percentagePrayed,\n      'percentageMissed': percentageMissed,\n    };\n  }\n}\n\n\n\n# File: ./models/prayer_data.g.dart\n####################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_data.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerDataAdapter extends TypeAdapter<PrayerData> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerData read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerData(\n      year: fields[0] as int,\n      month: fields[1] as int,\n      prayersCompleted: (fields[2] as Map).cast<String, int>(),\n      prayersMissed: (fields[3] as Map).cast<String, int>(),\n      totalPrayed: fields[4] as int,\n      totalMissed: fields[5] as int,\n      percentagePrayed: fields[6] as double,\n      percentageMissed: fields[7] as double,\n    );\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerData obj) {\n    writer\n      ..writeByte(8)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.prayersCompleted)\n      ..writeByte(3)\n      ..write(obj.prayersMissed)\n      ..writeByte(4)\n      ..write(obj.totalPrayed)\n      ..writeByte(5)\n      ..write(obj.totalMissed)\n      ..writeByte(6)\n      ..write(obj.percentagePrayed)\n      ..writeByte(7)\n      ..write(obj.percentageMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerDataAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./models/prayer_record.g.dart\n######################################\n\n// GENERATED CODE - DO NOT MODIFY BY HAND\n\npart of 'prayer_record.dart';\n\n// **************************************************************************\n// TypeAdapterGenerator\n// **************************************************************************\n\nclass PrayerRecordAdapter extends TypeAdapter<PrayerRecord> {\n  @override\n  final int typeId = 0;\n\n  @override\n  PrayerRecord read(BinaryReader reader) {\n    final numOfFields = reader.readByte();\n    final fields = <int, dynamic>{\n      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),\n    };\n    return PrayerRecord()\n      ..year = fields[0] as int\n      ..month = fields[1] as int\n      ..fajrMissed = fields[2] as int\n      ..dhuhrMissed = fields[3] as int\n      ..asrMissed = fields[4] as int\n      ..maghribMissed = fields[5] as int\n      ..ishaMissed = fields[6] as int;\n  }\n\n  @override\n  void write(BinaryWriter writer, PrayerRecord obj) {\n    writer\n      ..writeByte(7)\n      ..writeByte(0)\n      ..write(obj.year)\n      ..writeByte(1)\n      ..write(obj.month)\n      ..writeByte(2)\n      ..write(obj.fajrMissed)\n      ..writeByte(3)\n      ..write(obj.dhuhrMissed)\n      ..writeByte(4)\n      ..write(obj.asrMissed)\n      ..writeByte(5)\n      ..write(obj.maghribMissed)\n      ..writeByte(6)\n      ..write(obj.ishaMissed);\n  }\n\n  @override\n  int get hashCode => typeId.hashCode;\n\n  @override\n  bool operator ==(Object other) =>\n      identical(this, other) ||\n      other is PrayerRecordAdapter &&\n          runtimeType == other.runtimeType &&\n          typeId == other.typeId;\n}\n\n\n\n# File: ./screens/settings_screen.dart\n#######################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_scaffold.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\n\nclass SettingsScreen extends StatefulWidget {\n  @override\n  _SettingsScreenState createState() => _SettingsScreenState();\n}\n\nclass _SettingsScreenState extends State<SettingsScreen> {\n  late TextEditingController _birthYearController;\n\n  @override\n  void initState() {\n    super.initState();\n    final prayerProvider = Provider.of<PrayerProvider>(context, listen: false);\n    _birthYearController =\n        TextEditingController(text: prayerProvider.birthYear.toString());\n  }\n\n  @override\n  void dispose() {\n    _birthYearController.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaScaffold(\n      title: 'Settings',\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.stretch,\n          children: [\n            AmanaInputField(\n              keyboardType: TextInputType.number,\n              controller: _birthYearController,\n              onChange: (val) {\n                setState(() {\n                  _birthYearController.text = val;\n                });\n              },\n              sufixIcon: Icons.date_range,\n              label: \"Birth Year\",\n            ),\n            SizedBox(height: 16),\n            ElevatedButton(\n              onPressed: () {\n                int birthYear = int.parse(_birthYearController.text);\n                Provider.of<PrayerProvider>(context, listen: false)\n                    .saveBirthYear(birthYear);\n                Navigator.pop(context);\n              },\n              child: Text('Save'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_material.dart\n#####################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardMaterial extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n  final VoidCallback onPrayPressed;\n\n  const PrayerProgressCardMaterial({\n    required this.prayer,\n    required this.year,\n    required this.month,\n    required this.onPrayPressed,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    final completedPrayers =\n        prayerProvider.getCompletedPrayersForMonth(year, month, prayer);\n    final missedPrayers =\n        prayerProvider.getMissedPrayersForMonth(year, month, prayer);\n    final totalPrayers = completedPrayers + missedPrayers;\n\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(14.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\n          children: [\n            Text(prayer,\n                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n            ClipRRect(\n              borderRadius: BorderRadius.circular(8),\n              child: LinearProgressIndicator(\n                value: totalPrayers > 0 ? completedPrayers / totalPrayers : 0,\n                minHeight: 12,\n                backgroundColor: Colors.grey[300],\n                valueColor: AlwaysStoppedAnimation<Color>(Color(0xff34C759)),\n              ),\n            ),\n            Text(\n                '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                style: TextStyle(fontSize: 14)),\n            Text('$completedPrayers / $totalPrayers',\n                style: TextStyle(fontSize: 12)),\n            ElevatedButton(\n              onPressed: onPrayPressed,\n              child: Text('Pray'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_details_screen.dart\n#############################################\n\nimport 'package:flutter/material.dart';\nimport '../services/hive_service.dart';\nimport '../models/prayer_record.dart';\n\nclass PrayerDetailsScreen extends StatelessWidget {\n  final String prayer;\n  final HiveService _hiveService = HiveService();\n\n  PrayerDetailsScreen({required this.prayer});\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('$prayer Details'),\n      ),\n      body: ValueListenableBuilder(\n        valueListenable: _hiveService.prayerBox.listenable(),\n        builder: (context, Box<PrayerRecord> box, _) {\n          final records = _hiveService.getPrayerRecords();\n          // Implement logic to find and increment the oldest missed prayer\n\n          return Column(\n            children: [\n              // Display and update prayer details here\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/edit_details_screen.dart\n###########################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport '../constants.dart';\n\nclass EditDetailsScreen extends StatefulWidget {\n  @override\n  _EditDetailsScreenState createState() => _EditDetailsScreenState();\n}\n\nclass _EditDetailsScreenState extends State<EditDetailsScreen> {\n  int? _selectedYear;\n  int? _selectedMonth;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Edit Details'),\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final years = List.generate(kDefaultEndYear - kDefaultStartYear + 1,\n              (index) => kDefaultStartYear + index);\n          final months = List.generate(12, (index) => index + 1);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Year dropdown\n              DropdownButtonFormField<int>(\n                value: _selectedYear,\n                items: years.map((year) {\n                  return DropdownMenuItem(\n                    value: year,\n                    child: Text(year.toString()),\n                  );\n                }).toList(),\n                onChanged: (value) {\n                  setState(() {\n                    _selectedYear = value;\n                    _selectedMonth = null;\n                  });\n                },\n                decoration: InputDecoration(\n                  labelText: 'Select Year',\n                ),\n              ),\n              SizedBox(height: 16.0),\n\n              // Month dropdown\n              if (_selectedYear != null)\n                DropdownButtonFormField<int>(\n                  value: _selectedMonth,\n                  items: months.map((month) {\n                    return DropdownMenuItem(\n                      value: month,\n                      child: Text(month.toString()),\n                    );\n                  }).toList(),\n                  onChanged: (value) {\n                    setState(() {\n                      _selectedMonth = value;\n                    });\n                  },\n                  decoration: InputDecoration(\n                    labelText: 'Select Month',\n                  ),\n                ),\n              SizedBox(height: 16.0),\n\n              // Prayer data form fields\n              if (_selectedYear != null && _selectedMonth != null)\n                // Display form fields for editing prayer data\n                Container(),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/year_selection_screen.dart\n#############################################\n\nimport 'dart:io';\nimport '../constants.dart';\nimport '../widgets/hadith_modal.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\nimport 'package:provider/provider.dart';\nimport '../platform_specific_widget/amana_button.dart';\nimport '../platform_specific_widget/amana_input_field.dart';\nimport '../providers/prayer_provider.dart';\nimport 'home_screen.dart';\nimport '../models/prayer_data.dart';\n\nclass YearSelectionScreen extends StatefulWidget {\n  const YearSelectionScreen({super.key});\n\n  @override\n  State<YearSelectionScreen> createState() => _YearSelectionScreenState();\n}\n\nclass _YearSelectionScreenState extends State<YearSelectionScreen> {\n  late TextEditingController _startYearController;\n  late TextEditingController _startMonthController;\n  late TextEditingController _endYearController;\n  late TextEditingController _endMonthController;\n  double _averageMissedPrayers = 25;\n\n  @override\n  void initState() {\n    super.initState();\n    final provider = Provider.of<PrayerProvider>(context, listen: false);\n    _startYearController =\n        TextEditingController(text: provider.startYear.toString());\n    _startMonthController = TextEditingController(text: '1');\n    _endYearController =\n        TextEditingController(text: provider.endYear.toString());\n    _endMonthController =\n        TextEditingController(text: DateTime.now().month.toString());\n  }\n\n  @override\n  void dispose() {\n    _startYearController.dispose();\n    _startMonthController.dispose();\n    _endYearController.dispose();\n    _endMonthController.dispose();\n    super.dispose();\n  }\n\n  void _showHadithModal(BuildContext context) {\n    Platform.isIOS\n        ? showCupertinoDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          )\n        : showDialog(\n            context: context,\n            builder: (BuildContext context) {\n              return HadithModal();\n            },\n          );\n  }\n\n  void _saveData() {\n    int startYear =\n        int.tryParse(_startYearController.text) ?? kDefaultStartYear;\n    int startMonth = int.tryParse(_startMonthController.text) ?? 1;\n    int endYear = int.tryParse(_endYearController.text) ?? kDefaultEndYear;\n    int endMonth =\n        int.tryParse(_endMonthController.text) ?? DateTime.now().month;\n\n    Map<int, int> percentageMissedByYear = {};\n    for (int year = startYear; year <= endYear; year++) {\n      percentageMissedByYear[year] = _averageMissedPrayers.round();\n    }\n\n    var provider = Provider.of<PrayerProvider>(context, listen: false);\n    provider.saveData(PrayerData(\n      // Fix: Pass a PrayerData object\n      year: startYear,\n      month: startMonth,\n      prayersCompleted: {},\n      prayersMissed: {},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    ));\n    Navigator.pushAndRemoveUntil(\n        context,\n        MaterialPageRoute(builder: (context) => HomeScreen()),\n        (route) => false);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Amana Audit'),\n      ),\n      body: SingleChildScrollView(\n        padding: REdgeInsets.only(top: 24, left: 18, right: 18),\n        child: Column(\n          crossAxisAlignment:\n              kIsWeb ? CrossAxisAlignment.center : CrossAxisAlignment.stretch,\n          children: [\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•Œ It\\'s time to catch up on our prayers.',\n              style: TextStyle(\n                fontSize: 20,\n                fontWeight: FontWeight.bold,\n                color: Colors.black,\n              ),\n            ),\n            Text(\n              'ðŸ“… Select the range of years for which you want to track your missed prayers.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 24.h),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _startMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _startYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _startYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"Start Year\",\n                  ),\n                ),\n              ],\n            ),\n            const SizedBox(height: 16),\n            Row(\n              children: [\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endMonthController,\n                    onChange: (val) {\n                      setState(() {\n                        _endMonthController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Month\",\n                  ),\n                ),\n                const SizedBox(width: 16),\n                Expanded(\n                  child: AmanaInputField(\n                    keyboardType: TextInputType.number,\n                    controller: _endYearController,\n                    onChange: (val) {\n                      setState(() {\n                        _endYearController.text = val;\n                      });\n                    },\n                    sufixIcon: Icons.date_range_outlined,\n                    label: \"End Year\",\n                  ),\n                ),\n              ],\n            ),\n            SizedBox(height: 24.h),\n            Text(\n              'ðŸ•‹ Set the average percentage of prayers you estimate you missed for the selected years.',\n              style: TextStyle(fontSize: 18, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            Slider(\n              value: _averageMissedPrayers,\n              min: 0,\n              max: 100,\n              divisions: 20,\n              label: '${_averageMissedPrayers.round()}%',\n              onChanged: (double value) {\n                setState(() {\n                  _averageMissedPrayers = value;\n                });\n              },\n            ),\n            Text(\n              '${_averageMissedPrayers.round()}% of prayers missed',\n              style: TextStyle(fontSize: 16, color: Colors.black),\n            ),\n            SizedBox(height: 16.h),\n            AmanaButton(\n              onPress: _saveData,\n              label: \"Save\",\n              isAppLevel: true,\n            ),\n            SizedBox(height: 10),\n            GestureDetector(\n              onTap: () => _showHadithModal(context),\n              child: const Text(\n                'ðŸ“– \"* My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have prescribed upon him...\" Hadith Qudsi 25:40 -Bukhari \\n{Click to read}',\n                style: TextStyle(fontSize: 14.0, color: Colors.blue),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\n\n\n# File: ./screens/prayer_progress_card_cupertino.dart\n######################################################\n\n// File: screens/prayer_progress_card_cupertino.dart\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\n\nclass PrayerProgressCardCupertino extends StatelessWidget {\n  final String prayer;\n  final int year;\n  final int month;\n\n  const PrayerProgressCardCupertino({\n    required this.prayer,\n    required this.year,\n    required this.month,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final prayerProvider = Provider.of<PrayerProvider>(context);\n\n    return FutureBuilder<int>(\n      future: Future.value(\n          prayerProvider.getCompletedPrayersForMonth(year, month, prayer)),\n      builder: (context, completedSnapshot) {\n        return FutureBuilder<int>(\n          future: Future.value(\n              prayerProvider.getMissedPrayersForMonth(year, month, prayer)),\n          builder: (context, missedSnapshot) {\n            if (completedSnapshot.connectionState == ConnectionState.waiting ||\n                missedSnapshot.connectionState == ConnectionState.waiting) {\n              return CupertinoActivityIndicator();\n            }\n            final completedPrayers = completedSnapshot.data ?? 0;\n            final missedPrayers = missedSnapshot.data ?? 0;\n            final totalPrayers = completedPrayers + missedPrayers;\n\n            return Container(\n              margin: EdgeInsets.all(8.0),\n              padding: EdgeInsets.all(14.0),\n              decoration: BoxDecoration(\n                color: CupertinoColors.white,\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: CupertinoColors.systemGrey.withOpacity(0.4),\n                    spreadRadius: 1,\n                    blurRadius: 3,\n                    offset: Offset(0, 2),\n                  ),\n                ],\n              ),\n              child: Column(\n                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                children: [\n                  Text(prayer,\n                      style:\n                          TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),\n                  SizedBox(height: 8),\n                  ClipRRect(\n                    borderRadius: BorderRadius.circular(8),\n                    child: LinearProgressIndicator(\n                      value: totalPrayers > 0\n                          ? completedPrayers / totalPrayers\n                          : 0,\n                      minHeight: 12,\n                      backgroundColor: CupertinoColors.systemGrey4,\n                      valueColor: AlwaysStoppedAnimation<Color>(\n                          CupertinoColors.activeGreen),\n                    ),\n                  ),\n                  SizedBox(height: 8),\n                  Text(\n                      '${(completedPrayers / totalPrayers * 100).toStringAsFixed(1)}%',\n                      style: TextStyle(fontSize: 14)),\n                  Text('$completedPrayers / $totalPrayers',\n                      style: TextStyle(fontSize: 12)),\n                  SizedBox(height: 8),\n                  CupertinoButton.filled(\n                    onPressed: () => prayerProvider.incrementPrayer(prayer),\n                    child: Text('Pray'),\n                  ),\n                ],\n              ),\n            );\n          },\n        );\n      },\n    );\n  }\n}\n\n\n\n# File: ./screens/home_screen.dart\n###################################\n\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\n\nclass HomeScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n        actions: [\n          IconButton(\n            icon: Icon(Icons.edit),\n            onPressed: () {\n              Navigator.pushNamed(context, '/edit-details');\n            },\n          ),\n        ],\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final currentYear = DateTime.now().year;\n          final currentMonth = DateTime.now().month;\n          final prayerData =\n              provider.getPrayerDataForMonth(currentYear, currentMonth);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Display total progress\n              LinearProgressIndicator(\n                value: prayerData.totalPrayed /\n                    (prayerData.totalPrayed + prayerData.totalMissed),\n              ),\n              SizedBox(height: 16.0),\n\n              // Display individual prayer cards\n              GridView.count(\n                crossAxisCount: 2,\n                shrinkWrap: true,\n                children: prayerData.prayersCompleted.keys.map((prayer) {\n                  return PrayerProgressCardMaterial(\n                    prayer: prayer,\n                    year: currentYear,\n                    month: currentMonth,\n                    onPrayPressed: () {\n                      provider.incrementPrayer(\n                          currentYear, currentMonth, prayer);\n                    },\n                  );\n                }).toList(),\n              ),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_button.dart\n#####################################################\n\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaButton extends StatelessWidget {\n  const AmanaButton(\n      {super.key,\n      required this.onPress,\n      required this.label,\n      required this.isAppLevel});\n\n  final VoidCallback onPress;\n  final String label;\n  final bool isAppLevel;\n\n  @override\n  Widget build(BuildContext context) {\n    return GestureDetector(\n      onTap: onPress,\n      child: kIsWeb && isAppLevel\n          ? Container(\n              width: 200,\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            )\n          : Container(\n              margin: EdgeInsets.only(bottom: 8),\n              padding: EdgeInsets.symmetric(\n                  horizontal: 16, vertical: isAppLevel ? 12 : 5),\n              decoration: BoxDecoration(\n                color: Color(0xff34C759),\n                borderRadius: BorderRadius.circular(10),\n                boxShadow: [\n                  BoxShadow(\n                    color: Colors.grey.withOpacity(0.4),\n                    spreadRadius: 3,\n                    blurRadius: 7,\n                    offset: Offset(0, 3), // changes position of shadow\n                  ),\n                ],\n              ),\n              child: Text(\n                label,\n                textAlign: TextAlign.center,\n                style: const TextStyle(color: Colors.white),\n              ),\n            ),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_snackbar.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nvoid AmanaSnackBar({required BuildContext context, required Text content}) {\n  if (Theme.of(context).platform == TargetPlatform.iOS) {\n    showCupertinoModalPopup(\n      context: context,\n      builder: (BuildContext context) => CupertinoActionSheet(\n        title: content,\n        cancelButton: CupertinoActionSheetAction(\n          child: const Text('Dismiss'),\n          onPressed: () {\n            Navigator.pop(context);\n          },\n        ),\n      ),\n    );\n  } else {\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(content: Text('Changes saved for the selected year.')),\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_alert_dialog.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\n\nclass AmanaAlertDialog extends StatelessWidget {\n  final Widget title;\n  final Widget content;\n  final List<Widget> actions;\n\n  const AmanaAlertDialog(\n      {super.key,\n      required this.title,\n      required this.content,\n      required this.actions});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoAlertDialog(title: title, content: content, actions: actions)\n        : AlertDialog(\n            title: title,\n            content: content,\n            actions: actions,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_drop_down.dart\n########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final int? value;\n  final String labelText;\n  final void Function(int?)? onChanged;\n\n  const AmanaDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(\n                (value == null || value == 0 ? labelText : value.toString())),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as int);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<int>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<int>(\n                      value: e[\"value\"] as int,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Year\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_material_app.dart\n###########################################################\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaMaterialApp extends StatelessWidget {\n  final String title;\n  final ThemeData theme;\n  final String initialRoute;\n  final Map<String, WidgetBuilder> routes;\n  final bool debugShowCheckedModeBanner;\n\n  const AmanaMaterialApp(\n      {super.key,\n      required this.title,\n      required this.theme,\n      required this.initialRoute,\n      required this.routes,\n      required this.debugShowCheckedModeBanner});\n\n  @override\n  Widget build(BuildContext context) {\n    return ScreenUtilInit(\n      designSize: Size(430, 930),\n      minTextAdapt: true,\n      splitScreenMode: true,\n      builder: (context, _) {\n        return Theme.of(context).platform == TargetPlatform.iOS\n            ? CupertinoApp(\n                title: title,\n                theme: CupertinoThemeData(\n                    scaffoldBackgroundColor: Colors.grey[100],\n                    textTheme: CupertinoTextThemeData(\n                        textStyle: TextStyle(\n                      fontFamily: \"OpenSans\",\n                    )),\n                    primaryColor: theme.primaryColor),\n                initialRoute: initialRoute,\n                // home: HomeScreen(),\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              )\n            : MaterialApp(\n                title: title,\n                theme: theme,\n                initialRoute: initialRoute,\n                routes: routes,\n                debugShowCheckedModeBanner: debugShowCheckedModeBanner,\n              );\n      },\n    );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_month_drop_down.dart\n##############################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaMonthDropDown extends StatelessWidget {\n  final List<Map<String, dynamic>> items;\n  final String value;\n  final String labelText;\n  final void Function(String?)? onChanged;\n\n  const AmanaMonthDropDown(\n      {super.key,\n      required this.items,\n      required this.value,\n      required this.labelText,\n      this.onChanged});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoButton(\n            color: CupertinoColors.systemGreen,\n            child: Text(value == \"\" ? labelText : value),\n            onPressed: () => showCupertinoModalPopup(\n                context: context,\n                builder: (context) => Container(\n                      height: 250,\n                      width: double.infinity,\n                      child: CupertinoPicker(\n                          scrollController:\n                              FixedExtentScrollController(initialItem: 0),\n                          backgroundColor: CupertinoColors.white,\n                          itemExtent: 40,\n                          onSelectedItemChanged: (index) {\n                            if (onChanged != null) {\n                              onChanged!(items[index][\"value\"] as String);\n                            }\n                          },\n                          children: items\n                              .map((e) => Center(child: e[\"child\"] as Widget))\n                              .toList()),\n                    )))\n        : DropdownButtonFormField<String>(\n            value: value,\n            items: items\n                .map((e) => DropdownMenuItem<String>(\n                      value: e[\"value\"] as String,\n                      child: e[\"child\"] as Widget,\n                    ))\n                .toList(),\n            onChanged: onChanged,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                labelText: \"Select Month\",\n                labelStyle: const TextStyle(color: Colors.grey)));\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_scaffold.dart\n#######################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass AmanaScaffold extends StatelessWidget {\n  final String title;\n  final Widget body;\n\n  const AmanaScaffold({super.key, required this.title, required this.body});\n\n  @override\n  Widget build(BuildContext context) {\n    return Theme.of(context).platform == TargetPlatform.iOS\n        ? CupertinoPageScaffold(\n            navigationBar: CupertinoNavigationBar(\n              middle: Text(title),\n            ),\n            child: SafeArea(child: body),\n          )\n        : Scaffold(\n            appBar: AppBar(\n              toolbarHeight: 80.h,\n              centerTitle: true,\n              title: Text(title),\n            ),\n            body: body,\n          );\n  }\n}\n\n\n\n# File: ./platform_specific_widget/amana_input_field.dart\n##########################################################\n\nimport 'package:flutter/cupertino.dart';\nimport 'package:flutter/material.dart';\n\nclass AmanaInputField extends StatefulWidget {\n  const AmanaInputField(\n      {super.key,\n      required this.onChange,\n      required this.sufixIcon,\n      this.hintText = \"\",\n      this.isPassword = false,\n      required this.keyboardType,\n      required this.controller,\n      required this.label});\n\n  final Function(String value) onChange;\n  final IconData sufixIcon;\n  final String hintText;\n  final bool isPassword;\n  final String label;\n  final TextEditingController? controller;\n  final TextInputType keyboardType;\n\n  @override\n  State<AmanaInputField> createState() => _AmanaInputFieldState();\n}\n\nclass _AmanaInputFieldState extends State<AmanaInputField> {\n  bool showPassword = false;\n\n  @override\n  Widget build(BuildContext context) {\n    if (Theme.of(context).platform == TargetPlatform.iOS) {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: CupertinoTextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            placeholder: widget.hintText,\n            prefix: Padding(\n              padding: EdgeInsets.all(8.0),\n              child: Icon(\n                widget.sufixIcon,\n                color: Colors.grey,\n                size: 20,\n              ),\n            ),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    } else {\n      return Container(\n        margin: const EdgeInsets.only(top: 4, bottom: 4),\n        height: 50,\n        decoration: BoxDecoration(\n          color: Colors.white,\n          borderRadius: BorderRadius.circular(15),\n        ),\n        child: Center(\n          child: TextField(\n            style: TextStyle(color: Colors.black),\n            controller: widget.controller,\n            cursorColor: Colors.black,\n            obscureText: !showPassword && widget.isPassword,\n            keyboardType: widget.keyboardType,\n            decoration: InputDecoration(\n                focusedBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.green, width: 1.5),\n                  borderRadius: BorderRadius.circular(15.0),\n                ),\n                enabledBorder: OutlineInputBorder(\n                  borderSide: const BorderSide(color: Colors.grey, width: 1.5),\n                  borderRadius: BorderRadius.circular(10.0),\n                ),\n                suffixIcon: Icon(\n                  widget.sufixIcon,\n                  color: Colors.grey,\n                  size: 20,\n                ),\n                labelText: widget.label,\n                labelStyle: const TextStyle(color: Colors.grey)),\n            onChanged: widget.onChange,\n          ),\n        ),\n      );\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/flutter_build/dart_plugin_registrant.dart\n###############################################################\n\n//\n// Generated file. Do not edit.\n// This file is generated from template in file `flutter_tools/lib/src/flutter_plugins.dart`.\n//\n\n// @dart = 3.3\n\nimport 'dart:io'; // flutter_ignore: dart_io_import.\nimport 'package:path_provider_android/path_provider_android.dart';\nimport 'package:shared_preferences_android/shared_preferences_android.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_linux/path_provider_linux.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_linux/shared_preferences_linux.dart';\nimport 'package:url_launcher_linux/url_launcher_linux.dart';\nimport 'package:path_provider_foundation/path_provider_foundation.dart';\nimport 'package:shared_preferences_foundation/shared_preferences_foundation.dart';\nimport 'package:path_provider_windows/path_provider_windows.dart';\nimport 'package:share_plus/share_plus.dart';\nimport 'package:shared_preferences_windows/shared_preferences_windows.dart';\nimport 'package:url_launcher_windows/url_launcher_windows.dart';\n\n@pragma('vm:entry-point')\nclass _PluginRegistrant {\n\n  @pragma('vm:entry-point')\n  static void register() {\n    if (Platform.isAndroid) {\n      try {\n        PathProviderAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesAndroid.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_android` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isIOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isLinux) {\n      try {\n        PathProviderLinux.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusLinuxPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesLinux.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherLinux.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_linux` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isMacOS) {\n      try {\n        PathProviderFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesFoundation.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_foundation` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    } else if (Platform.isWindows) {\n      try {\n        PathProviderWindows.registerWith();\n      } catch (err) {\n        print(\n          '`path_provider_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharePlusWindowsPlugin.registerWith();\n      } catch (err) {\n        print(\n          '`share_plus` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        SharedPreferencesWindows.registerWith();\n      } catch (err) {\n        print(\n          '`shared_preferences_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n      try {\n        UrlLauncherWindows.registerWith();\n      } catch (err) {\n        print(\n          '`url_launcher_windows` threw an error: $err. '\n          'The app may not function as expected until you remove this plugin from pubspec.yaml'\n        );\n      }\n\n    }\n  }\n}\n\n\n\n# File: ./.dart_tool/dartpad/web_plugin_registrant.dart\n########################################################\n\n// Flutter web plugin registrant file.\n//\n// Generated file. Do not edit.\n//\n\n// @dart = 2.13\n// ignore_for_file: type=lint\n\nimport 'package:share_plus/src/share_plus_web.dart';\nimport 'package:shared_preferences_web/shared_preferences_web.dart';\nimport 'package:url_launcher_web/url_launcher_web.dart';\nimport 'package:flutter_web_plugins/flutter_web_plugins.dart';\n\nvoid registerPlugins([final Registrar? pluginRegistrar]) {\n  final Registrar registrar = pluginRegistrar ?? webPluginRegistrar;\n  SharePlusWebPlugin.registerWith(registrar);\n  SharedPreferencesPlugin.registerWith(registrar);\n  UrlLauncherPlugin.registerWith(registrar);\n  registrar.registerMessageHandler();\n}\n\n\n\n# File: ./.dart_tool/build/entrypoint/build.dart\n#################################################\n\n// ignore_for_file: directives_ordering\n// ignore_for_file: no_leading_underscores_for_library_prefixes\nimport 'package:build_runner_core/build_runner_core.dart' as _i1;\nimport 'package:hive_generator/hive_generator.dart' as _i2;\nimport 'package:source_gen/builder.dart' as _i3;\nimport 'dart:isolate' as _i4;\nimport 'package:build_runner/build_runner.dart' as _i5;\nimport 'dart:io' as _i6;\n\nfinal _builders = <_i1.BuilderApplication>[\n  _i1.apply(\n    r'hive_generator:hive_generator',\n    [_i2.getBuilder],\n    _i1.toDependentsOf(r'hive_generator'),\n    hideOutput: true,\n    appliesBuilders: const [r'source_gen:combining_builder'],\n  ),\n  _i1.apply(\n    r'source_gen:combining_builder',\n    [_i3.combiningBuilder],\n    _i1.toNoneByDefault(),\n    hideOutput: false,\n    appliesBuilders: const [r'source_gen:part_cleanup'],\n  ),\n  _i1.applyPostProcess(\n    r'source_gen:part_cleanup',\n    _i3.partCleanup,\n  ),\n];\nvoid main(\n  List<String> args, [\n  _i4.SendPort? sendPort,\n]) async {\n  var result = await _i5.run(\n    args,\n    _builders,\n  );\n  sendPort?.send(result);\n  _i6.exitCode = result;\n}\n\n\n\n# File: ./services/hive_service.dart\n#####################################\n\n// File: hive_service.dart\n\nimport 'package:hive_flutter/hive_flutter.dart';\n\nclass HiveService {\n  late Box box;\n\n  Future<void> init() async {\n    await Hive.initFlutter();\n    await Hive.deleteBoxFromDisk('prayerBox'); // Clear the existing box\n    box = await Hive.openBox('prayerBox');\n  }\n\n  Future<void> saveData(String key, dynamic value) async {\n    await box.put(key, value);\n  }\n\n  dynamic loadData(String key) {\n    return box.get(key);\n  }\n\n  Future<void> clearData() async {\n    await box.clear();\n  }\n}\n\n\n\n# File: ./services/prayer_service.dart\n#######################################\n\nimport 'hive_service.dart';\nimport 'package:share_plus/share_plus.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\ntypedef PrayerDataUpdateCallback = void Function();\n\nclass PrayerService {\n  final HiveService _hiveService;\n  bool isDataLoaded = false;\n  final List<String> prayers = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];\n  Map<String, PrayerData> prayerData = {};\n  PrayerDataUpdateCallback? onPrayerDataUpdated;\n\n  PrayerService(this._hiveService);\n\n  Future<void> loadData() async {\n    var loadedData = await _hiveService.loadData('prayerData');\n    ;\n\n    if (loadedData != null && loadedData is Map<String, Map<String, dynamic>>) {\n      prayerData = Map<String, PrayerData>.from(\n        loadedData\n            .map((key, value) => MapEntry(key, PrayerData.fromMap(value))),\n      );\n    }\n\n    if (prayerData.isEmpty) {\n      for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n        for (int month = 1; month <= 12; month++) {\n          prayerData['$year-$month'] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n      await savePrayerData(prayerData.values.first);\n    }\n\n    isDataLoaded = true;\n    print('Loaded data from Hive: $prayerData');\n  }\n\n  Future<void> savePrayerData(PrayerData data) async {\n    prayerData['${data.year}-${data.month}'] = data;\n    await _hiveService.saveData('prayerData', prayerData);\n\n    Map<String, Map<String, dynamic>> unpacked = {};\n    prayerData.forEach((key, value) {\n      unpacked[key] = {\n        'year': value.year,\n        'month': value.month,\n        'prayersCompleted': value.prayersCompleted,\n        'prayersMissed': value.prayersMissed,\n        'totalPrayed': value.totalPrayed,\n        'totalMissed': value.totalMissed,\n        'percentagePrayed': value.percentagePrayed,\n        'percentageMissed': value.percentageMissed,\n      };\n    });\n    print('Updated data: $unpacked');\n    print('Saved data to Hive: $prayerData');\n\n    onPrayerDataUpdated?.call();\n  }\n\n  void incrementPrayer(String prayer) {\n    String? earliestKey;\n    int earliestYear = 9999;\n    int earliestMonth = 12;\n\n    prayerData.forEach((key, data) {\n      if (data.prayersMissed[prayer]! > 0 &&\n          (data.year < earliestYear ||\n              (data.year == earliestYear && data.month < earliestMonth))) {\n        earliestKey = key;\n        earliestYear = data.year;\n        earliestMonth = data.month;\n      }\n    });\n\n    if (earliestKey != null) {\n      final data = prayerData[earliestKey]!;\n      data.prayersMissed[prayer] = data.prayersMissed[prayer]! - 1;\n      data.prayersCompleted[prayer] = data.prayersCompleted[prayer]! + 1;\n      data.totalPrayed++;\n      data.totalMissed--;\n      savePrayerData(data);\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final key = '$year-$month';\n    return prayerData[key]?.prayersMissed[prayer] ?? 0;\n  }\n\n  Future<PrayerData> getPrayerDataForMonth(int year, int month) async {\n    final key = '$year-$month';\n    var data = prayerData[key];\n    if (data == null) {\n      data = PrayerData(\n        year: year,\n        month: month,\n        prayersCompleted: {for (var prayer in prayers) prayer: 0},\n        prayersMissed: {for (var prayer in prayers) prayer: 0},\n        totalPrayed: 0,\n        totalMissed: 0,\n        percentagePrayed: 0,\n        percentageMissed: 0,\n      );\n      await savePrayerData(data);\n    }\n    return data;\n  }\n\n  void updatePrayerStats(\n      int year, int month, String prayer, bool increaseCompletedCount) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      if (increaseCompletedCount) {\n        data.prayersCompleted[prayer] =\n            (data.prayersCompleted[prayer] ?? 0) + 1;\n      } else {\n        data.prayersMissed[prayer] = (data.prayersMissed[prayer] ?? 0) + 1;\n      }\n      data.totalPrayed = data.prayersCompleted.values.reduce((a, b) => a + b);\n      data.totalMissed = data.prayersMissed.values.reduce((a, b) => a + b);\n      data.percentagePrayed =\n          (data.totalPrayed / (data.totalPrayed + data.totalMissed)) * 100;\n      data.percentageMissed =\n          (data.totalMissed / (data.totalPrayed + data.totalMissed)) * 100;\n      savePrayerData(data);\n    }\n  }\n\n  double getPrayerCompletionPercentageForMonth(int year, int month) {\n    final key = '$year-$month';\n    final data = prayerData[key];\n    if (data != null) {\n      final totalPrayers = data.totalPrayed + data.totalMissed;\n      return totalPrayers > 0 ? (data.totalPrayed / totalPrayers) * 100 : 0;\n    }\n    return 0;\n  }\n\n  double getPrayerCompletionPercentageForYear(int year) {\n    double totalPercentage = 0;\n    int monthCount = 0;\n    for (int month = 1; month <= 12; month++) {\n      final key = '$year-$month';\n      final data = prayerData[key];\n      if (data != null) {\n        final totalPrayers = data.totalPrayed + data.totalMissed;\n        if (totalPrayers > 0) {\n          totalPercentage += (data.totalPrayed / totalPrayers) * 100;\n          monthCount++;\n        }\n      }\n    }\n    return monthCount > 0 ? totalPercentage / monthCount : 0;\n  }\n\n  void updatePrayerStatsForYear(int year, double percentageCompleted) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int month = 1;\n        month <= (year == currentYear ? currentMonth - 1 : 12);\n        month++) {\n      updatePrayerStatsForMonth(year, month, percentageCompleted);\n    }\n  }\n\n  void updatePrayerStatsForMonth(\n      int year, int month, double percentageCompleted) {\n    final key = '$year-$month';\n    final data = _calculatePrayerData(year, month, percentageCompleted);\n    prayerData[key] = data;\n    savePrayerData(data);\n  }\n\n  void updateStartAndEndYear(int startYear, int endYear) {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n\n    for (int year = startYear; year <= endYear; year++) {\n      final endMonth = year == currentYear ? currentMonth : 12;\n      for (int month = 1; month <= endMonth; month++) {\n        final key = '$year-$month';\n        if (!prayerData.containsKey(key)) {\n          prayerData[key] = _calculatePrayerData(\n              year, month, 100 - kDefaultPercentageMissed.toDouble());\n        }\n      }\n    }\n    savePrayerData(prayerData.values.first);\n  }\n\n  Future<Map<String, dynamic>> getAggregatedPrayerData() async {\n    int totalPrayed = 0;\n    int totalPossible = 0;\n\n    for (final data in prayerData.values) {\n      totalPrayed += data.totalPrayed;\n      totalPossible += data.totalPrayed + data.totalMissed;\n    }\n\n    return {\n      'totalPrayed': totalPrayed,\n      'totalPossible': totalPossible,\n    };\n  }\n\n  void _setDefaultPrayerData() {\n    final currentYear = DateTime.now().year;\n    final currentMonth = DateTime.now().month;\n    prayerData['$currentYear-$currentMonth'] = PrayerData(\n      year: currentYear,\n      month: currentMonth,\n      prayersCompleted: {for (var prayer in prayers) prayer: 0},\n      prayersMissed: {for (var prayer in prayers) prayer: 0},\n      totalPrayed: 0,\n      totalMissed: 0,\n      percentagePrayed: 0,\n      percentageMissed: 0,\n    );\n  }\n\n  Future<bool> resetApplication() async {\n    prayerData = {};\n    _setDefaultPrayerData();\n    await _hiveService.clearData();\n    return true;\n  }\n\n  PrayerData _calculatePrayerData(\n      int year, int month, double percentageCompleted) {\n    final totalDays = DateTime(year, month + 1, 0).day;\n    final totalPrayers = totalDays * prayers.length;\n    final completedPrayers = (totalPrayers * percentageCompleted / 100).round();\n    final missedPrayers = totalPrayers - completedPrayers;\n\n    final prayersCompleted = {\n      for (var prayer in prayers)\n        prayer: (totalDays * percentageCompleted / 100).round()\n    };\n    final prayersMissed = {\n      for (var prayer in prayers) prayer: totalDays - prayersCompleted[prayer]!\n    };\n\n    return PrayerData(\n      year: year,\n      month: month,\n      prayersCompleted: prayersCompleted,\n      prayersMissed: prayersMissed,\n      totalPrayed: completedPrayers,\n      totalMissed: missedPrayers,\n      percentagePrayed: percentageCompleted,\n      percentageMissed: 100 - percentageCompleted,\n    );\n  }\n\n  void sharePrayerData() {\n    String shareText = 'My Prayer Progress:\\n\\n';\n    // Implement logic to generate the share text\n    Share.share(shareText);\n  }\n}\n\n\n\n# File: ./widgets/progress_bar.dart\n####################################\n\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double value;\n\n  ProgressBar({required this.value});\n\n  @override\n  Widget build(BuildContext context) {\n    return LinearProgressIndicator(value: value);\n  }\n}\n\n\n\n# File: ./widgets/hadith_modal.dart\n####################################\n\n// hadith_modal.dart\nimport '../platform_specific_widget/amana_alert_dialog.dart';\nimport 'package:flutter/foundation.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_screenutil/flutter_screenutil.dart';\n\nclass HadithModal extends StatelessWidget {\n  const HadithModal({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return AmanaAlertDialog(\n      title: Text(\n        'Hadith Qudsi 25:40',\n        style: TextStyle(color: Colors.black),\n      ),\n      content: SingleChildScrollView(\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            Text(\n              'On the authority of Abu Hurayrah (may Allah be pleased with him), who said that the Messenger of Allah (ï·º) said:\\n\\n'\n              'Allah (mighty and sublime be He) said: Whosoever shows enmity to someone devoted to Me, I shall be at war with him. My servant does not draw nearer to Me with anything more beloved to Me than the religious duties I have perscribed upon him, and My servant continues to draw near to Me with voluntary acts of worship so that I shall love him. When I love him I am his hearing with which he hears, his seeing with which he sees, his hand with which he strikes and his foot with which he walks. Were he to ask [something] of Me, I would surely give it to him, and were he to ask Me for refuge, I would surely grant him it. I do not hesitate about anything as much as I hesitate about [seizing] the soul of My faithful servant: he hates death and I hate hurting him.',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n            Text(\n              'Ø¹ÙŽÙ†Ù’ Ø£ÙŽØ¨ÙÙŠ Ù‡ÙØ±ÙŽÙŠÙ’Ø±ÙŽØ©ÙŽ Ø±ÙŽØ¶ÙÙŠÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ†Ù’Ù‡Ù Ù‚ÙŽØ§Ù„ÙŽ: Ù‚ÙŽØ§Ù„ÙŽ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù ØµÙŽÙ„ÙŽÙ‘Ù‰ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ÙˆÙŽØ³ÙŽÙ„ÙŽÙ‘Ù…ÙŽ: \" Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙŽ Ø¹ÙŽØ²ÙŽÙ‘ ÙˆÙŽØ¬ÙŽÙ„ÙŽÙ‘ Ù‚ÙŽØ§Ù„ÙŽ: Ù…ÙŽÙ†Ù’ Ø¹ÙŽØ§Ø¯ÙŽÙ‰ Ù„ÙÙŠ ÙˆÙŽÙ„ÙÙŠÙ‹Ù‘Ø§ØŒ ÙÙŽÙ‚ÙŽØ¯Ù’ Ø¢Ø°ÙŽÙ†Ù’ØªÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙŽØ±Ù’Ø¨ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨ÙŽ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø¨ÙØ´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽØ­ÙŽØ¨ÙŽÙ‘ Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ù…ÙÙ…ÙŽÙ‘Ø§ Ø§ÙÙ’ØªÙŽØ±ÙŽØ¶Ù’ØªÙ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ÙŠÙŽØ²ÙŽØ§Ù„Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ ÙŠÙŽØªÙŽÙ‚ÙŽØ±ÙŽÙ‘Ø¨Ù Ø¥ÙÙ„ÙŽÙŠÙŽÙ‘ Ø¨ÙØ§Ù„Ù†ÙŽÙ‘ÙˆÙŽØ§ÙÙÙ„Ù Ø­ÙŽØªÙŽÙ‘Ù‰ Ø£ÙØ­ÙØ¨ÙŽÙ‘Ù‡ÙØŒ ÙÙŽØ¥ÙØ°ÙŽØ§ Ø£ÙŽØ­Ù’Ø¨ÙŽØ¨Ù’ØªÙÙ‡ÙØŒ ÙƒÙÙ†Ù’ØªÙ Ø³ÙŽÙ…Ù’Ø¹ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙŽØ³Ù’Ù…ÙŽØ¹Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽØ¨ÙŽØµÙŽØ±ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙØ¨Ù’ØµÙØ±Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙŽÙŠÙŽØ¯ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽØ¨Ù’Ø·ÙØ´Ù Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ±ÙØ¬Ù’Ù„ÙŽÙ‡Ù Ø§Ù„ÙŽÙ‘ØªÙÙŠ ÙŠÙŽÙ…Ù’Ø´ÙÙŠ Ø¨ÙÙ‡ÙŽØ§ØŒ ÙˆÙŽØ¥ÙÙ†Ù’ Ø³ÙŽØ£ÙŽÙ„ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹Ù’Ø·ÙÙŠÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ„ÙŽØ¦ÙÙ†Ù’ Ø§Ø³Ù’ØªÙŽØ¹ÙŽØ§Ø°ÙŽÙ†ÙÙŠ Ù„ÙŽØ£ÙØ¹ÙÙŠØ°ÙŽÙ†ÙŽÙ‘Ù‡ÙØŒ ÙˆÙŽÙ…ÙŽØ§ ØªÙŽØ±ÙŽØ¯ÙŽÙ‘Ø¯Ù’ØªÙ Ø¹ÙŽÙ†Ù’ Ø´ÙŽÙŠÙ’Ø¡Ù Ø£ÙŽÙ†ÙŽØ§ ÙÙŽØ§Ø¹ÙÙ„ÙÙ‡Ù ØªÙŽØ±ÙŽØ¯ÙÙ‘Ø¯ÙÙŠ Ø¹ÙŽÙ†Ù’ Ù†ÙŽÙÙ’Ø³Ù Ø¹ÙŽØ¨Ù’Ø¯ÙÙŠ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØŒ ÙŠÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ø§Ù„Ù’Ù…ÙŽÙˆÙ’ØªÙŽ ÙˆÙŽØ£ÙŽÙ†ÙŽØ§ Ø£ÙŽÙƒÙ’Ø±ÙŽÙ‡Ù Ù…ÙŽØ³ÙŽØ§Ø¡ÙŽØªÙŽÙ‡Ù - Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ',\n              style: TextStyle(\n                  fontSize: kIsWeb ? 5.sp : 16.sp, color: Colors.black),\n            ),\n          ],\n        ),\n      ),\n      actions: [\n        ElevatedButton.icon(\n          onPressed: () {\n            Navigator.of(context).pop();\n          },\n          icon: const Icon(\n            Icons.favorite,\n            color: Color(0xff34C759),\n          ),\n          label: const Text(\n            'Close',\n            style: TextStyle(color: Color(0xff34C759)),\n          ),\n        ),\n      ],\n    );\n  }\n}\n\n"
          }
        ],
        "files": [
          {
            "file_name": "paste.txt"
          }
        ]
      }
    },
    {
      "id": "215399ef-7203-4381-a474-8cdcddda838c",
      "role": "assistant",
      "content": " Here are the updated files with the necessary fixes:\n\n# File: main.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'services/hive_service.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  runApp(MyApp(hiveService: hiveService));\n}\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({Key? key, required this.hiveService}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(hiveService),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          return MaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => HomeScreen(),\n              '/year-selection': (context) => YearSelectionScreen(),\n              '/edit-details': (context) => EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n# File: prayer_provider.dart\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport 'package:amana_audit/services/hive_service.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final HiveService _hiveService;\n  Map<String, PrayerData> _prayerData = {};\n\n  PrayerProvider(this._hiveService) {\n    _loadDefaultData();\n  }\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  void _loadDefaultData() {\n    for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final key = '$year-$month';\n        _prayerData[key] = PrayerData(\n          year: year,\n          month: month,\n          prayersCompleted: {\n            'Fajr': 0,\n            'Dhuhr': 0,\n            'Asr': 0,\n            'Maghrib': 0,\n            'Isha': 0,\n          },\n          prayersMissed: {\n            'Fajr': kDefaultPercentageMissed ~/ 5,\n            'Dhuhr': kDefaultPercentageMissed ~/ 5,\n            'Asr': kDefaultPercentageMissed ~/ 5,\n            'Maghrib': kDefaultPercentageMissed ~/ 5,\n            'Isha': kDefaultPercentageMissed ~/ 5,\n          },\n          totalPrayed: 0,\n          totalMissed: kDefaultPercentageMissed,\n          percentagePrayed: 100 - kDefaultPercentageMissed.toDouble(),\n          percentageMissed: kDefaultPercentageMissed.toDouble(),\n        );\n      }\n    }\n    notifyListeners();\n  }\n\n  void incrementPrayer(int year, int month, String prayer) {\n    final key = '$year-$month';\n    if (_prayerData.containsKey(key)) {\n      final data = _prayerData[key]!;\n      data.prayersCompleted[prayer] = (data.prayersCompleted[prayer] ?? 0) + 1;\n      data.totalPrayed++;\n      notifyListeners();\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final data = getPrayerDataForMonth(year, month);\n    return data.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final data = getPrayerDataForMonth(year, month);\n    return data.prayersMissed[prayer] ?? 0;\n  }\n\n  PrayerData getPrayerDataForMonth(int year, int month) {\n    final key = '$year-$month';\n    return _prayerData[key] ??\n        PrayerData(\n          year: year,\n          month: month,\n          prayersCompleted: {},\n          prayersMissed: {},\n          totalPrayed: 0,\n          totalMissed: 0,\n          percentagePrayed: 0,\n          percentageMissed: 0,\n        );\n  }\n}\n```\n\n# File: home_screen.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\n\nclass HomeScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n        actions: [\n          IconButton(\n            icon: Icon(Icons.edit),\n            onPressed: () {\n              Navigator.pushNamed(context, '/edit-details');\n            },\n          ),\n        ],\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final currentYear = DateTime.now().year;\n          final currentMonth = DateTime.now().month;\n          final prayerData =\n              provider.getPrayerDataForMonth(currentYear, currentMonth);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Display total progress\n              LinearProgressIndicator(\n                value: prayerData.totalPrayed == 0 && prayerData.totalMissed == 0\n                    ? 0\n                    : prayerData.totalPrayed /\n                        (prayerData.totalPrayed + prayerData.totalMissed),\n              ),\n              SizedBox(height: 16.0),\n\n              // Display individual prayer cards\n              GridView.count(\n                crossAxisCount: 2,\n                shrinkWrap: true,\n                children: prayerData.prayersCompleted.keys.map((prayer) {\n                  return PrayerProgressCardMaterial(\n                    prayer: prayer,\n                    year: currentYear,\n                    month: currentMonth,\n                    onPrayPressed: () {\n                      provider.incrementPrayer(\n                          currentYear, currentMonth, prayer);\n                    },\n                  );\n                }).toList(),\n              ),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\nThese changes should resolve the errors you were encountering:\n\n1. In the `main.dart` file, the `PrayerService` class is no longer used. Instead, the `PrayerProvider` is directly created with the `HiveService` instance.\n\n2. In the `prayer_provider.dart` file, the `PrayerService` import and usage have been removed. The provider now directly interacts with the `HiveService` and manages the prayer data.\n\n3. In the `home_screen.dart` file, the `totalPrayed` and `totalMissed` getters are now accessed directly from the `prayerData` object instead of using a `Future`.\n\n4. The `incrementPrayer` method in the `PrayerProvider` now accepts the `year`, `month`, and `prayer` parameters to match the usage in the `HomeScreen`.\n\nPlease update the relevant files in your project with these changes and let me know if you have any further questions or if you encounter any other issues.",
      "created_at": "2024-06-05T13:11:08.456243Z",
      "sequence_order": 13,
      "metadata": {
        "content": [
          {
            "start_timestamp": "2024-06-05T13:11:08.456243Z",
            "stop_timestamp": "2024-06-05T13:11:08.456243Z",
            "flags": null,
            "type": "text",
            "text": " Here are the updated files with the necessary fixes:\n\n# File: main.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport 'services/hive_service.dart';\nimport 'providers/prayer_provider.dart';\nimport 'screens/home_screen.dart';\nimport 'screens/edit_details_screen.dart';\nimport 'screens/year_selection_screen.dart';\n\nvoid main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  final hiveService = HiveService();\n  await hiveService.init();\n  runApp(MyApp(hiveService: hiveService));\n}\n\nclass MyApp extends StatelessWidget {\n  final HiveService hiveService;\n\n  const MyApp({Key? key, required this.hiveService}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiProvider(\n      providers: [\n        Provider<HiveService>.value(value: hiveService),\n        ChangeNotifierProvider<PrayerProvider>(\n          create: (_) => PrayerProvider(hiveService),\n        ),\n      ],\n      child: Consumer<PrayerProvider>(\n        builder: (context, prayerProvider, _) {\n          return MaterialApp(\n            title: 'Amana Audit',\n            debugShowCheckedModeBanner: false,\n            theme: ThemeData(\n              fontFamily: \"OpenSans\",\n              scaffoldBackgroundColor: Colors.grey[100],\n              primarySwatch: Colors.blue,\n            ),\n            initialRoute: '/',\n            routes: {\n              '/': (context) => HomeScreen(),\n              '/year-selection': (context) => YearSelectionScreen(),\n              '/edit-details': (context) => EditDetailsScreen(),\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\n# File: prayer_provider.dart\n\n```dart\nimport 'package:flutter/foundation.dart';\nimport 'package:amana_audit/services/hive_service.dart';\nimport '../models/prayer_data.dart';\nimport '../constants.dart';\n\nclass PrayerProvider with ChangeNotifier {\n  final HiveService _hiveService;\n  Map<String, PrayerData> _prayerData = {};\n\n  PrayerProvider(this._hiveService) {\n    _loadDefaultData();\n  }\n\n  Map<String, PrayerData> get prayerData => _prayerData;\n\n  void _loadDefaultData() {\n    for (int year = kDefaultStartYear; year <= kDefaultEndYear; year++) {\n      for (int month = 1; month <= 12; month++) {\n        final key = '$year-$month';\n        _prayerData[key] = PrayerData(\n          year: year,\n          month: month,\n          prayersCompleted: {\n            'Fajr': 0,\n            'Dhuhr': 0,\n            'Asr': 0,\n            'Maghrib': 0,\n            'Isha': 0,\n          },\n          prayersMissed: {\n            'Fajr': kDefaultPercentageMissed ~/ 5,\n            'Dhuhr': kDefaultPercentageMissed ~/ 5,\n            'Asr': kDefaultPercentageMissed ~/ 5,\n            'Maghrib': kDefaultPercentageMissed ~/ 5,\n            'Isha': kDefaultPercentageMissed ~/ 5,\n          },\n          totalPrayed: 0,\n          totalMissed: kDefaultPercentageMissed,\n          percentagePrayed: 100 - kDefaultPercentageMissed.toDouble(),\n          percentageMissed: kDefaultPercentageMissed.toDouble(),\n        );\n      }\n    }\n    notifyListeners();\n  }\n\n  void incrementPrayer(int year, int month, String prayer) {\n    final key = '$year-$month';\n    if (_prayerData.containsKey(key)) {\n      final data = _prayerData[key]!;\n      data.prayersCompleted[prayer] = (data.prayersCompleted[prayer] ?? 0) + 1;\n      data.totalPrayed++;\n      notifyListeners();\n    }\n  }\n\n  int getCompletedPrayersForMonth(int year, int month, String prayer) {\n    final data = getPrayerDataForMonth(year, month);\n    return data.prayersCompleted[prayer] ?? 0;\n  }\n\n  int getMissedPrayersForMonth(int year, int month, String prayer) {\n    final data = getPrayerDataForMonth(year, month);\n    return data.prayersMissed[prayer] ?? 0;\n  }\n\n  PrayerData getPrayerDataForMonth(int year, int month) {\n    final key = '$year-$month';\n    return _prayerData[key] ??\n        PrayerData(\n          year: year,\n          month: month,\n          prayersCompleted: {},\n          prayersMissed: {},\n          totalPrayed: 0,\n          totalMissed: 0,\n          percentagePrayed: 0,\n          percentageMissed: 0,\n        );\n  }\n}\n```\n\n# File: home_screen.dart\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\nimport '../providers/prayer_provider.dart';\nimport 'prayer_progress_card_material.dart';\n\nclass HomeScreen extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text('Prayer Tracker'),\n        actions: [\n          IconButton(\n            icon: Icon(Icons.edit),\n            onPressed: () {\n              Navigator.pushNamed(context, '/edit-details');\n            },\n          ),\n        ],\n      ),\n      body: Consumer<PrayerProvider>(\n        builder: (context, provider, _) {\n          final currentYear = DateTime.now().year;\n          final currentMonth = DateTime.now().month;\n          final prayerData =\n              provider.getPrayerDataForMonth(currentYear, currentMonth);\n\n          return ListView(\n            padding: EdgeInsets.all(16.0),\n            children: [\n              // Display total progress\n              LinearProgressIndicator(\n                value: prayerData.totalPrayed == 0 && prayerData.totalMissed == 0\n                    ? 0\n                    : prayerData.totalPrayed /\n                        (prayerData.totalPrayed + prayerData.totalMissed),\n              ),\n              SizedBox(height: 16.0),\n\n              // Display individual prayer cards\n              GridView.count(\n                crossAxisCount: 2,\n                shrinkWrap: true,\n                children: prayerData.prayersCompleted.keys.map((prayer) {\n                  return PrayerProgressCardMaterial(\n                    prayer: prayer,\n                    year: currentYear,\n                    month: currentMonth,\n                    onPrayPressed: () {\n                      provider.incrementPrayer(\n                          currentYear, currentMonth, prayer);\n                    },\n                  );\n                }).toList(),\n              ),\n            ],\n          );\n        },\n      ),\n    );\n  }\n}\n```\n\nThese changes should resolve the errors you were encountering:\n\n1. In the `main.dart` file, the `PrayerService` class is no longer used. Instead, the `PrayerProvider` is directly created with the `HiveService` instance.\n\n2. In the `prayer_provider.dart` file, the `PrayerService` import and usage have been removed. The provider now directly interacts with the `HiveService` and manages the prayer data.\n\n3. In the `home_screen.dart` file, the `totalPrayed` and `totalMissed` getters are now accessed directly from the `prayerData` object instead of using a `Future`.\n\n4. The `incrementPrayer` method in the `PrayerProvider` now accepts the `year`, `month`, and `prayer` parameters to match the usage in the `HomeScreen`.\n\nPlease update the relevant files in your project with these changes and let me know if you have any further questions or if you encounter any other issues.",
            "citations": []
          }
        ],
        "updated_at": "2024-06-05T13:11:08.456243Z",
        "attachments": [],
        "files": []
      }
    }
  ]
}